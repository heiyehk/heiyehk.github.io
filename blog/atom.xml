<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HeiYe</title>
  
  <subtitle>ä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆ</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="https://heiyehk.github.io/blog/"/>
  <updated>2021-04-07T05:16:09.116Z</updated>
  <id>https://heiyehk.github.io/blog/</id>
  
  <author>
    <name>HeiYehk</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>è§£å†³electronå®‰è£…ï¼Œå¡åœ¨install.jsä¸åŠ¨é—®é¢˜ï¼ŒUnhandledPromiseRejectionWarningï¼šRequestErrorï¼šreadECONNRESE</title>
    <link href="https://heiyehk.github.io/blog/%E8%A7%A3%E5%86%B3electron%E5%AE%89%E8%A3%85%EF%BC%8C%E5%8D%A1%E5%9C%A8install-js%E4%B8%8D%E5%8A%A8%E9%97%AE%E9%A2%98%EF%BC%8CUnhandledPromiseRejectionWarning%EF%BC%9ARequestError%EF%BC%9AreadECONNRESE/"/>
    <id>https://heiyehk.github.io/blog/%E8%A7%A3%E5%86%B3electron%E5%AE%89%E8%A3%85%EF%BC%8C%E5%8D%A1%E5%9C%A8install-js%E4%B8%8D%E5%8A%A8%E9%97%AE%E9%A2%98%EF%BC%8CUnhandledPromiseRejectionWarning%EF%BC%9ARequestError%EF%BC%9AreadECONNRESE/</id>
    <published>2021-04-07T05:13:02.000Z</published>
    <updated>2021-04-07T05:16:09.116Z</updated>
    
    <content type="html"><![CDATA[<ol><li>é€‰æ‹©é¡¹ç›®æ–‡ä»¶å¤¹</li><li>npm init</li><li>npm install electron â€“save-dev</li><li>npm â€“registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a> install</li><li>node install.jsçš„æ—¶å€™ctrl+cå–æ¶ˆ,yç¡®å®š</li><li>cd ./node_modules/electron</li><li><a href="https://cdn.npm.taobao.org/dist/electron/11.2.0/electron-v11.2.0-win64.zipå¹¶å¤åˆ¶åˆ°ä¸Šé¢çš„æ–‡ä»¶å¤¹,é‡å‘½åä¸ºelectron.zip" target="_blank" rel="noopener">https://cdn.npm.taobao.org/dist/electron/11.2.0/electron-v11.2.0-win64.zipå¹¶å¤åˆ¶åˆ°ä¸Šé¢çš„æ–‡ä»¶å¤¹,é‡å‘½åä¸ºelectron.zip</a><br>æ­¤ä¸º64ä½winç‰ˆæœ¬,å¦‚æœæ˜¯å…¶ä»–ç‰ˆæœ¬è¯·è¿›å…¥<a href="https://cdn.npm.taobao.org/dist/electron/11.0.2é¡µé¢é€‰æ‹©ä¸‹è½½" target="_blank" rel="noopener">https://cdn.npm.taobao.org/dist/electron/11.0.2é¡µé¢é€‰æ‹©ä¸‹è½½</a></li><li>ä¿®æ”¹ ./node_modules/electron/install.js,å¦‚ä¸‹:</li></ol><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/envÂ node</span></span><br><span class="line"><span class="keyword">const</span>Â versionÂ =Â <span class="built_in">require</span>(<span class="string">'./package'</span>).version</span><br><span class="line"><span class="keyword">const</span>Â fsÂ =Â <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span>Â osÂ =Â <span class="built_in">require</span>(<span class="string">'os'</span>)</span><br><span class="line"><span class="keyword">const</span>Â pathÂ =Â <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span>Â extractÂ =Â <span class="built_in">require</span>(<span class="string">'extract-zip'</span>)</span><br><span class="line"><span class="keyword">const</span>Â platformPathÂ =Â <span class="string">'electron.exe'</span></span><br><span class="line"><span class="keyword">const</span>Â zipPathÂ =Â <span class="string">"./electron.zip"</span></span><br><span class="line">extractFileÂ (zipPath)</span><br><span class="line"><span class="comment">//Â unzipsÂ andÂ makesÂ path.txtÂ pointÂ atÂ theÂ correctÂ executable</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>Â <span class="title">extractFile</span>Â (<span class="params">zipPath</span>)Â </span>&#123;</span><br><span class="line">Â Â extract(zipPath,Â &#123;Â <span class="attr">dir</span>:Â path.join(__dirname,Â <span class="string">'dist'</span>)Â &#125;,Â <span class="function"><span class="keyword">function</span>Â (<span class="params">err</span>)Â </span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">if</span>Â (err)Â <span class="keyword">return</span>Â onerror(err)</span><br><span class="line">Â Â Â Â fs.writeFile(path.join(__dirname,Â <span class="string">'path.txt'</span>),Â platformPath,Â <span class="function"><span class="keyword">function</span>Â (<span class="params">err</span>)Â </span>&#123;</span><br><span class="line">Â Â Â Â Â Â <span class="keyword">if</span>Â (err)Â <span class="keyword">return</span>Â onerror(err)</span><br><span class="line">Â Â Â Â &#125;)</span><br><span class="line">Â Â &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å†™åœ¨åé¢"><a href="#å†™åœ¨åé¢" class="headerlink" title="å†™åœ¨åé¢"></a>å†™åœ¨åé¢</h3><blockquote><p>éå•†ç”¨ï¼Œä¾µåˆ ï¼Œè½¬è‡ª: <a href="https://blog.csdn.net/qq_27005821/article/details/102748201" target="_blank" rel="noopener">https://blog.csdn.net/qq_27005821/article/details/102748201</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;é€‰æ‹©é¡¹ç›®æ–‡ä»¶å¤¹&lt;/li&gt;
&lt;li&gt;npm init&lt;/li&gt;
&lt;li&gt;npm install electron â€“save-dev&lt;/li&gt;
&lt;li&gt;npm â€“registry=&lt;a href=&quot;https://registry.npm.taobao.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://registry.npm.taobao.org&lt;/a&gt; install&lt;/li&gt;
&lt;li&gt;node install.jsçš„æ—¶å€™ctrl+cå–æ¶ˆ,yç¡®å®š&lt;/li&gt;
&lt;li&gt;cd ./node_modules/electron&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://cdn.npm.taobao.org/dist/electron/11.2.0/electron-v11.2.0-win64.zipå¹¶å¤åˆ¶åˆ°ä¸Šé¢çš„æ–‡ä»¶å¤¹,é‡å‘½åä¸ºelectron.zip&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://cdn.npm.taobao.org/dist/electron/11.2.0/electron-v11.2.0-win64.zipå¹¶å¤åˆ¶åˆ°ä¸Šé¢çš„æ–‡ä»¶å¤¹,é‡å‘½åä¸ºelectron.zip&lt;/a&gt;&lt;br&gt;æ­¤ä¸º64ä½winç‰ˆæœ¬,å¦‚æœæ˜¯å…¶ä»–ç‰ˆæœ¬è¯·è¿›å…¥&lt;a href=&quot;https://cdn.npm.taobao.org/dist/electron/11.0.2é¡µé¢é€‰æ‹©ä¸‹è½½&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://cdn.npm.taobao.org/dist/electron/11.0.2é¡µé¢é€‰æ‹©ä¸‹è½½&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹ ./node_modules/electron/install.js,å¦‚ä¸‹:&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="electron" scheme="https://heiyehk.github.io/blog/categories/electron/"/>
    
    
      <category term="electron" scheme="https://heiyehk.github.io/blog/tags/electron/"/>
    
  </entry>
  
  <entry>
    <title>ã€electron+vue3+tså®æˆ˜ä¾¿ç¬ºexeã€‘äºŒã€electron+vue3å¼€å‘å†…å®¹</title>
    <link href="https://heiyehk.github.io/blog/%E3%80%90electron-vue3-ts%E5%AE%9E%E6%88%98%E4%BE%BF%E7%AC%BAexe%E3%80%91%E4%BA%8C%E3%80%81electron-vue3%E5%BC%80%E5%8F%91%E5%86%85%E5%AE%B9/"/>
    <id>https://heiyehk.github.io/blog/%E3%80%90electron-vue3-ts%E5%AE%9E%E6%88%98%E4%BE%BF%E7%AC%BAexe%E3%80%91%E4%BA%8C%E3%80%81electron-vue3%E5%BC%80%E5%8F%91%E5%86%85%E5%AE%B9/</id>
    <published>2021-04-07T05:05:39.000Z</published>
    <updated>2021-04-07T05:06:44.212Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸è¦è®©è‡ªå·±çš„ä¸Šé™æˆä¸ºä½ çš„åº•çº¿</p></blockquote><p>æœ¬æ¥ä»¥ä¸ºæœ‰ä¸‡å­—çš„ã€‚ã€‚æ²¡æƒ³åˆ°æ‰å ªå ªè¿‘6000å­—ã€‚ä¸ºäº†æ°´æ–‡çš„å«Œç–‘ï¼ŒåªæŒ‘äº†é‡ç‚¹çš„åœ°æ–¹è®²ï¼Œæ¯”å¦‚<code>component</code>å†…çš„ç»„ä»¶å°±æŒ‘äº†<code>å³é”®å¼¹çª—å»è¯´æ˜</code>ï¼Œå»ºè®®åœ¨çœ‹æœ¬æ–‡çš„æ—¶å€™è¾¹æŸ¥çœ‹é¡¹ç›®ï¼Œæœ‰ä¸æ‡‚çš„å¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºï¼Œè°¢è°¢ã€‚</p><blockquote><p>github<br>github: <a href="https://github.com/heiyehk/electron-vue3-inote" target="_blank" rel="noopener">https://github.com/heiyehk/electron-vue3-inote</a><br>åŒ…ä¸‹è½½<br>release: <a href="https://github.com/heiyehk/electron-vue3-inote/releases" target="_blank" rel="noopener">https://github.com/heiyehk/electron-vue3-inote/releases</a></p></blockquote><p>æ¥ä¸Šç¯‡é…ç½®ç¯‡ <a href="https://juejin.cn/post/6909723449246089224" target="_blank" rel="noopener">ã€electron+vue3+tså®æˆ˜ä¾¿ç¬ºexeã€‘ä¸€ã€æ­å»ºæ¡†æ¶é…ç½®</a>ï¼Œè¿™é‡Œæ›´æ–°äº†ä¸€ä¸‹vue3çš„ç‰ˆæœ¬<code>3.0.4</code>ï¼Œæœ¬ç¯‡æ–‡ç« åªè®²å¼€å‘å†…å®¹ï¼Œä¸»è¦è¿˜æ˜¯<code>vue3</code>æ–¹é¢ï¼Œé•¿æ–‡è­¦å‘Šã€‚ps:smartblueè¿™ä¸ªä¸»é¢˜å¥½å¥½çœ‹ã€‚ã€‚ã€‚</p><a id="more"></a><h2 id="router"><a href="#router" class="headerlink" title="router"></a>router</h2><p>å¢åŠ <code>meta</code>ä¸­çš„<code>title</code>å±æ€§ï¼Œæ˜¾ç¤ºåœ¨è½¯ä»¶ä¸Šæ–¹å¤´éƒ¨</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61b84c3a4cfa47bbad1762b3e5f22d53~tplv-k3u1fbpfcp-watermark.image" alt=""></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">'vue-router'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; RouteRecordRaw &#125; <span class="keyword">from</span> <span class="string">'vue-router'</span>;</span><br><span class="line"><span class="keyword">import</span> main <span class="keyword">from</span> <span class="string">'../views/main.vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes: <span class="built_in">Array</span>&lt;RouteRecordRaw&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'main'</span>,</span><br><span class="line">    component: main,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/'</span>,</span><br><span class="line">        name: <span class="string">'index'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../views/index.vue'</span>),</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: <span class="string">'Iä¾¿ç¬º'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/editor'</span>,</span><br><span class="line">        name: <span class="string">'editor'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../views/editor.vue'</span>),</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/setting'</span>,</span><br><span class="line">        name: <span class="string">'setting'</span>,</span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../views/setting.vue'</span>),</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: <span class="string">'è®¾ç½®'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  history: createWebHashHistory(process.env.BASE_URL),</span><br><span class="line">  routes</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure><h2 id="utils"><a href="#utils" class="headerlink" title="utils"></a>utils</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable @typescript-eslint/ban-types */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; winURL &#125; <span class="keyword">from</span> <span class="string">'@/config'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; BrowserWindow, remote &#125; <span class="keyword">from</span> <span class="string">'electron'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> FunctionalControl = <span class="function">(<span class="params"><span class="keyword">this</span>: <span class="built_in">any</span>, fn: <span class="built_in">any</span>, delay?: <span class="built_in">number</span></span>) =&gt;</span> (...args: <span class="built_in">any</span>) =&gt; <span class="built_in">void</span>;</span><br><span class="line"><span class="keyword">type</span> DebounceEvent = FunctionalControl;</span><br><span class="line"><span class="keyword">type</span> ThrottleEvent = FunctionalControl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é˜²æŠ–å‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> debounce: DebounceEvent = <span class="function"><span class="keyword">function</span>(<span class="params">fn, delay = 1000</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer: NodeJS.Timeout | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) clearTimeout(timer);</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èŠ‚æµå‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> throttle: ThrottleEvent = <span class="function"><span class="keyword">function</span>(<span class="params">fn, delay = 500</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!flag) <span class="keyword">return</span>;</span><br><span class="line">    flag = <span class="literal">false</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, args);</span><br><span class="line">      flag = <span class="literal">true</span>;</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºçª—å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createBrowserWindow = (bwopt = &#123;&#125;, url = <span class="string">'/'</span>, devTools = <span class="literal">true</span>): BrowserWindow | <span class="function"><span class="params">null</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> childrenWindow: BrowserWindow | <span class="literal">null</span>;</span><br><span class="line">  childrenWindow = <span class="keyword">new</span> remote.BrowserWindow(bwopt);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'development'</span> &amp;&amp; devTools) &#123;</span><br><span class="line">    childrenWindow.webContents.openDevTools();</span><br><span class="line">  &#125;</span><br><span class="line">  childrenWindow.loadURL(<span class="string">`<span class="subst">$&#123;winURL&#125;</span>/#<span class="subst">$&#123;url&#125;</span>`</span>);</span><br><span class="line">  childrenWindow.on(<span class="string">'closed'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    childrenWindow = <span class="literal">null</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> childrenWindow;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿‡æ¸¡å…³é—­çª—å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> transitCloseWindow = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">'#app'</span>)?.classList.remove(<span class="string">'app-show'</span>);</span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">'#app'</span>)?.classList.add(<span class="string">'app-hide'</span>);</span><br><span class="line">  remote.getCurrentWindow().close();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// uuid</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> uuid = (): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> S4 = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (((<span class="number">1</span> + <span class="built_in">Math</span>.random()) * <span class="number">0x10000</span>) | <span class="number">0</span>).toString(<span class="number">16</span>).substring(<span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> S4() + S4() + <span class="string">'-'</span> + S4() + <span class="string">'-'</span> + S4() + <span class="string">'-'</span> + S4() + <span class="string">'-'</span> + S4() + S4() + S4();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="main-vue"><a href="#main-vue" class="headerlink" title="main.vue"></a>main.vue</h2><p><code>main.vue</code>æ–‡ä»¶ä¸»è¦æ˜¯ä½œä¸ºä¸€ä¸ªæ•´ä½“æ¡†æ¶ï¼Œè€ƒè™‘åˆ°é¡µé¢åˆ‡æ¢æ—¶å€™çš„åŠ¨æ•ˆï¼Œåˆ†ä¸ºå¤´éƒ¨å’Œä¸»ä½“éƒ¨åˆ†ï¼Œå¤´éƒ¨ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç»„ä»¶å¤„ç†ï¼Œå†…å®¹åŒºåŸŸä½¿ç”¨<code>router-view</code>æ¸²æŸ“ã€‚<br>htmléƒ¨åˆ†ï¼Œè¿™é‡Œå’Œvue2.xæœ‰ç‚¹åŒºåˆ«çš„æ˜¯ï¼Œåœ¨vue2.xä¸­å¯ä»¥ç›´æ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; bad</span><br><span class="line">&lt;transition name&#x3D;&quot;fade&quot;&gt;</span><br><span class="line">  &lt;keep-alive&gt;</span><br><span class="line">    &lt;router-view &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;keep-alive&gt;</span><br><span class="line">&lt;&#x2F;transition&gt;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„è¿™ç§å†™æ³•åœ¨vue3ä¸­ä¼šåœ¨æ§åˆ¶å°æŠ¥å¼‚å¸¸ï¼Œè®°ä¸ä½å†™æ³•çš„å¯ä»¥çœ‹çœ‹æ§åˆ¶å°ğŸ¤£ğŸ¤£</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-slot</span>=<span class="string">"&#123; Component &#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">"main-fade"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"transition"</span> <span class="attr">:key</span>=<span class="string">"routeName"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">"Component"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯tséƒ¨åˆ†äº†ï¼Œä½¿ç”¨vue3çš„å†™æ³•å»å†™ï¼Œ<code>script</code>æ ‡ç­¾æ³¨æ„éœ€è¦å†™ä¸Š<code>lang=&quot;ts&quot;</code>ä»£è¡¨æ˜¯tsè¯­æ³•ã€‚<code>router</code>çš„å†™æ³•ä¹Ÿä¸ä¸€æ ·ï¼Œè™½ç„¶åœ¨vue3ä¸­è¿˜èƒ½å†™vue2çš„æ ¼å¼ï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨ã€‚è¿™é‡Œæ˜¯è·å–<code>route</code>çš„<code>name</code>å±æ€§ï¼Œæ¥è¿›è¡Œä¸€ä¸ªé¡µé¢è¿‡æ¸¡çš„æ•ˆæœã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=<span class="string">"ts"</span>&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; defineComponent, ref, onBeforeUpdate &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">'vue-router'</span>;</span><br><span class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">'@/components/header.vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Header</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">const</span> routeName = ref(useRoute().name);</span><br><span class="line"></span><br><span class="line">    onBeforeUpdate(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      routeName.value = useRoute().name;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      routeName</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>lesséƒ¨åˆ†</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;style lang="less" scoped&gt;</span><br><span class="line"><span class="selector-class">.main-fade-enter</span>,</span><br><span class="line"><span class="selector-class">.main-fade-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">animation</span>: main-fade <span class="number">0.4s</span> reverse;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main-fade-enter-active</span>,</span><br><span class="line"><span class="selector-class">.main-fade-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">animation</span>: main-fade <span class="number">0.4s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> main-fade &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transform</span>: scale(<span class="number">0.96</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: scale(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯<code>main.vue</code>çš„å†…å®¹ï¼Œåœ¨é¡µé¢åˆ·æ–°æˆ–è€…è¿›å…¥çš„æ—¶å€™æ ¹æ®<code>useRouter().name</code>çš„åˆ‡æ¢è¿›è¡Œ<code>æ”¾å¤§çš„è¿‡æ¸¡æ•ˆæœ</code>ï¼Œåé¢çš„å†…å®¹ä¼šæ›´ç®€æ´ä¸€ç‚¹ã€‚</p><h2 id="header-vue"><a href="#header-vue" class="headerlink" title="header.vue"></a>header.vue</h2><h3 id="onBeforeRouteUpdate"><a href="#onBeforeRouteUpdate" class="headerlink" title="onBeforeRouteUpdate"></a>onBeforeRouteUpdate</h3><p>å¤´éƒ¨ç»„ä»¶è¿˜æœ‰ä¸€ä¸ªæ ‡é¢˜è¿‡æ¸¡çš„æ•ˆæœï¼Œæ ¹æ®è·¯ç”±å¯¼èˆªè·å–å½“å‰è·¯ç”±çš„<code>mate.title</code>å˜åŒ–è¿›è¡Œè¿‡æ¸¡æ•ˆæœã€‚vue3ä¸­è·¯ç”±å®ˆå«éœ€è¦ä»<code>vue-route</code>å¯¼å…¥ä½¿ç”¨ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onBeforeRouteUpdate, useRoute &#125; <span class="keyword">from</span> <span class="string">'vue-router'</span>;</span><br><span class="line">...</span><br><span class="line">onBeforeRouteUpdate(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  title.value = to.meta.title;</span><br><span class="line">  currentRouteName.value = to.name;</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h3><p>è¿™é‡Œæ˜¯è®¡ç®—ä¸åŒçš„è·¯ç”±ä¸‹æ ‡é¢˜å†…è¾¹è·çš„ä¸åŒï¼Œé¦–é¡µæ˜¯æœ‰ä¸ªè®¾ç½®å…¥å£çš„æŒ‰é’®ï¼Œè€Œè®¾ç½®é¡µé¢æ˜¯åªæœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œ<code>computed</code>ä¼šè¿”å›ä¸€ä¸ªä½ éœ€è¦çš„<code>æ–°çš„å€¼</code></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4425331a242f4f9c9d03d4dc080756ef~tplv-k3u1fbpfcp-watermark.image" alt=""></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–é¦–é¡µçš„å†…è¾¹è·</span></span><br><span class="line"><span class="keyword">const</span> computedPaddingLeft = computed(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> currentRouteName.value === <span class="string">'index'</span> ? <span class="string">'padding-left: 40px;'</span> : <span class="string">''</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="emitå­ä¼ çˆ¶å’Œpropsçˆ¶ä¼ å­"><a href="#emitå­ä¼ çˆ¶å’Œpropsçˆ¶ä¼ å­" class="headerlink" title="emitå­ä¼ çˆ¶å’Œpropsçˆ¶ä¼ å­"></a>emitå­ä¼ çˆ¶å’Œpropsçˆ¶ä¼ å­</h3><p>vue3æ²¡æœ‰äº†<code>this</code>ï¼Œé‚£ä¹ˆè¦ä½¿ç”¨<code>emit</code>æ€ä¹ˆåŠå‘¢ï¼Ÿåœ¨å…¥å£<code>setup</code>ä¸­æœ‰<code>2ä¸ªå‚æ•°</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setup(props, content) &#123;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a793af9717094dce848684985c09a51f~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p><code>props</code>æ˜¯çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„å†…å®¹ï¼Œ<code>props</code>å¸¸ç”¨çš„<code>emit</code>å’Œ<code>props</code>éƒ½åœ¨<code>content</code>ä¸­ã€‚</p><blockquote><p>ğŸ§¨è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨<code>props</code>å’Œ<code>emit</code>éœ€è¦å…ˆå®šä¹‰ï¼Œæ‰èƒ½å»ä½¿ç”¨ï¼Œå¹¶ä¸”ä¼šåœ¨<code>vscode</code>ä¸­ç›´æ¥è°ƒç”¨æ—¶è¾…åŠ©å¼¹çª—æ˜¾ç¤º</p></blockquote><p>propsç¤ºä¾‹</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37bb3af72959476da4289a720ca260a4~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>emitç¤ºä¾‹</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ded416d3aeec4445a713b1205071888d~tplv-k3u1fbpfcp-watermark.image" alt=""></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    test: <span class="built_in">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [<span class="string">'option-click'</span>, <span class="string">'on-close'</span>],</span><br><span class="line">  <span class="comment">// å¦‚æœåªç”¨emitçš„è¯å¯ä»¥ä½¿ç”¨es6è§£æ„</span></span><br><span class="line">  <span class="comment">// å¦‚ï¼šsetup(props, &#123; emit &#125;)</span></span><br><span class="line">  setup(props, content) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(props.test, content.emit(<span class="string">'option-click'</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="electronæ‰“å¼€çª—å£"><a href="#electronæ‰“å¼€çª—å£" class="headerlink" title="electronæ‰“å¼€çª—å£"></a>electronæ‰“å¼€çª—å£</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; browserWindowOption &#125; <span class="keyword">from</span> <span class="string">'@/config'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createBrowserWindow, transitCloseWindow &#125; <span class="keyword">from</span> <span class="string">'@/utils'</span>;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> editorWinOptions = browserWindowOption(<span class="string">'editor'</span>);</span><br><span class="line"><span class="comment">// æ‰“å¼€æ–°çª—å£</span></span><br><span class="line"><span class="keyword">const</span> openNewWindow = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  createBrowserWindow(editorWinOptions, <span class="string">'/editor'</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="electronå›¾é’‰å›ºå®šå±å¹•å‰é¢"><a href="#electronå›¾é’‰å›ºå®šå±å¹•å‰é¢" class="headerlink" title="electronå›¾é’‰å›ºå®šå±å¹•å‰é¢"></a>electronå›¾é’‰å›ºå®šå±å¹•å‰é¢</h3><p>å…ˆè·å–å½“å‰å±å¹•å®ä¾‹</p><blockquote><p>ğŸ§¨è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œéœ€è¦ä»<code>remote</code>è·å–å½“å‰<code>çª—å£ä¿¡æ¯</code></p></blockquote><p>åˆ¤æ–­å½“å‰çª—å£æ˜¯å¦åœ¨æœ€å‰é¢<code>isAlwaysOnTop()</code>ï¼Œç„¶åé€šè¿‡<code>setAlwaysOnTop()</code>å±æ€§è®¾ç½®å½“å‰çª—å£æœ€å‰é¢ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; remote &#125; <span class="keyword">from</span> <span class="string">'electron'</span>;</span><br><span class="line">...</span><br><span class="line"><span class="comment">// è·å–çª—å£å›ºå®šçŠ¶æ€</span></span><br><span class="line"><span class="keyword">let</span> isAlwaysOnTop = ref(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">const</span> currentWindow = remote.getCurrentWindow();</span><br><span class="line">isAlwaysOnTop.value = currentWindow.isAlwaysOnTop();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›ºå®šå‰é¢</span></span><br><span class="line"><span class="keyword">const</span> drawingPin = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (isAlwaysOnTop.value) &#123;</span><br><span class="line">    currentWindow.setAlwaysOnTop(<span class="literal">false</span>);</span><br><span class="line">    isAlwaysOnTop.value = <span class="literal">false</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    currentWindow.setAlwaysOnTop(<span class="literal">true</span>);</span><br><span class="line">    isAlwaysOnTop.value = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="electronå…³é—­çª—å£"><a href="#electronå…³é—­çª—å£" class="headerlink" title="electronå…³é—­çª—å£"></a>electronå…³é—­çª—å£</h3><p>è¿™é‡Œæ˜¯åœ¨<code>utils</code>å°è£…äº†é€šè¿‡å¯¹<code>dom</code>çš„æ ·å¼åæ“ä½œï¼Œè¾¾åˆ°ä¸€ä¸ªé€€å‡ºçš„è¿‡æ¸¡æ•ˆæœï¼Œç„¶åå†å…³é—­ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿‡æ¸¡å…³é—­çª—å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> transitCloseWindow = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">'#app'</span>)?.classList.remove(<span class="string">'app-show'</span>);</span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">'#app'</span>)?.classList.add(<span class="string">'app-hide'</span>);</span><br><span class="line">  remote.getCurrentWindow().close();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="noteDbæ•°æ®åº“"><a href="#noteDbæ•°æ®åº“" class="headerlink" title="noteDbæ•°æ®åº“"></a>noteDbæ•°æ®åº“</h2><p>å®‰è£…nedbæ•°æ®åº“ï¼Œæ–‡æ¡£ï¼š <a href="https://www.w3cschool.cn/nedbintro/nedbintro-t9z327mh.html" target="_blank" rel="noopener">https://www.w3cschool.cn/nedbintro/nedbintro-t9z327mh.html</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add nedb @types&#x2F;nedb</span><br></pre></td></tr></table></figure><p>æ•°æ®å‚¨å­˜åœ¨<code>nedb</code>ä¸­ï¼Œå®šä¹‰å­—æ®µï¼Œå¹¶åœ¨æ ¹ç›®å½•çš„<code>shims-vue.d.ts</code>åŠ å…¥ç±»å‹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‚¨å­˜æ•°æ®åº“çš„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> DBNotes &#123;</span><br><span class="line">  className: <span class="built_in">string</span>; <span class="comment">// æ ·å¼å</span></span><br><span class="line">  content: <span class="built_in">string</span>; <span class="comment">// å†…å®¹</span></span><br><span class="line">  readonly createdAt: <span class="built_in">Date</span>; <span class="comment">// åˆ›å»ºæ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯nedbè‡ªåŠ¨ç”Ÿæˆçš„</span></span><br><span class="line">  readonly uid: <span class="built_in">string</span>; <span class="comment">// uidï¼Œutilsä¸­çš„æ–¹æ³•ç”Ÿæˆ</span></span><br><span class="line">  readonly updatedAt: <span class="built_in">Date</span>; <span class="comment">// updateï¼Œè‡ªåŠ¨åˆ›å»ºçš„</span></span><br><span class="line">  readonly _id: <span class="built_in">string</span>; <span class="comment">// è‡ªåŠ¨åˆ›å»ºçš„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹nedbçš„å°è£…</p><blockquote><p>è‡ªæˆ‘æ„Ÿè§‰è¿™é‡Œå†™çš„æœ‰ç‚¹çƒ‚ã€‚ã€‚ã€‚å‹¿å–·ï¼ŒæŒç»­å­¦ä¹ ä¸­</p></blockquote><p>è¿™é‡Œçš„<code>QueryDB</code>æ˜¯<code>shims-vue.d.ts</code>å®šä¹‰å¥½çš„ç±»å‹</p><p>è¿™é‡Œçš„æ„æ€æ˜¯<code>QueryDB&lt;T&gt;</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åè¿™ä¸ªå¯¹è±¡ä¼ å…¥ä¸€ä¸ª<code>æ³›å‹T</code>ï¼Œè¿™é‡Œ<code>keyof T</code>è·å–è¿™ä¸ªå¯¹è±¡çš„<code>key</code>ï¼ˆå±æ€§ï¼‰å€¼ï¼Œ<code>?:</code>ä»£è¡¨è¿™ä¸ª<code>key</code>å¯ä»¥æ˜¯<code>undefined</code>ï¼Œè¡¨ç¤ºå¯ä»¥ä¸å­˜åœ¨ã€‚<code>T[K]</code>è¡¨ç¤ºä»è¿™ä¸ªå¯¹è±¡ä¸­è·å–è¿™ä¸ª<code>K</code>çš„å€¼ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> QueryDB&lt;T&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof T]?: T[K];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Datastore <span class="keyword">from</span> <span class="string">'nedb'</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">'path'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; remote &#125; <span class="keyword">from</span> <span class="string">'electron'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @see https://www.npmjs.com/package/nedb</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> INoteDB&lt;G = <span class="built_in">any</span>&gt; &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é»˜è®¤å‚¨å­˜ä½ç½®</span></span><br><span class="line"><span class="comment">   * C:\Users\&#123;Windows User Name&#125;\AppData\Roaming\i-notes</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="comment">// dbPath = path.join(remote.app.getPath('userData'), 'db/inote.db');</span></span><br><span class="line">  <span class="comment">// dbPath = './db/inote.db';</span></span><br><span class="line">  dbPath = <span class="keyword">this</span>.path;</span><br><span class="line"></span><br><span class="line">  _db: Datastore&lt;Datastore.DataStoreOptions&gt; = <span class="keyword">this</span>.backDatastore;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> path() &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'development'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> path.join(__dirname, <span class="string">'db/inote.db'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> path.join(remote.app.getPath(<span class="string">'userData'</span>), <span class="string">'db/inote.db'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> backDatastore() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Datastore(&#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * autoload</span></span><br><span class="line"><span class="comment">       * default: false</span></span><br><span class="line"><span class="comment">       * å½“æ•°æ®å­˜å‚¨è¢«åˆ›å»ºæ—¶ï¼Œæ•°æ®å°†è‡ªåŠ¨ä»æ–‡ä»¶ä¸­åŠ è½½åˆ°å†…å­˜ï¼Œä¸å¿…å»è°ƒç”¨loadDatabase</span></span><br><span class="line"><span class="comment">       * æ³¨æ„æ‰€æœ‰å‘½ä»¤æ“ä½œåªæœ‰åœ¨æ•°æ®åŠ è½½å®Œæˆåæ‰ä¼šè¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      autoload: <span class="literal">true</span>,</span><br><span class="line">      filename: <span class="keyword">this</span>.dbPath,</span><br><span class="line">      timestampData: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  refreshDB() &#123;</span><br><span class="line">    <span class="keyword">this</span>._db = <span class="keyword">this</span>.backDatastore;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  insert&lt;T <span class="keyword">extends</span> G&gt;(doc: T) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve: (<span class="params">value: T</span>) =&gt; <span class="built_in">void</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>._db.insert(doc, <span class="function">(<span class="params">error: <span class="built_in">Error</span> | <span class="literal">null</span>, <span class="built_in">document</span>: T</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!error) resolve(<span class="built_in">document</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * db.find(query)</span></span><br><span class="line"><span class="comment">   * @param &#123;Query&lt;T&gt;&#125; queryï¼š objectç±»å‹ï¼ŒæŸ¥è¯¢æ¡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ç©ºå¯¹è±¡&#123;&#125;ã€‚</span></span><br><span class="line"><span class="comment">   * æ”¯æŒä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦($lt, $lte, $gt, $gte, $in, $nin, $ne)</span></span><br><span class="line"><span class="comment">   * é€»è¾‘è¿ç®—ç¬¦($or, $and, $not, $where)</span></span><br><span class="line"><span class="comment">   * æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒæŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  find(query: QueryDB&lt;DBNotes&gt;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve: (<span class="params">value: DBNotes[]</span>) =&gt; <span class="built_in">void</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>._db.find(query, <span class="function">(<span class="params">error: <span class="built_in">Error</span> | <span class="literal">null</span>, <span class="built_in">document</span>: DBNotes[]</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!error) resolve(<span class="built_in">document</span> <span class="keyword">as</span> DBNotes[]);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * db.findOne(query)</span></span><br><span class="line"><span class="comment">   * @param query</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  findOne(query: QueryDB&lt;DBNotes&gt;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve: (<span class="params">value: DBNotes</span>) =&gt; <span class="built_in">void</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>._db.findOne(query, <span class="function">(<span class="params">error: <span class="built_in">Error</span> | <span class="literal">null</span>, <span class="built_in">document</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!error) resolve(<span class="built_in">document</span> <span class="keyword">as</span> DBNotes);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * db.remove(query, options)</span></span><br><span class="line"><span class="comment">   * @param &#123;Record&lt;keyof DBNotes, any&gt;&#125; query</span></span><br><span class="line"><span class="comment">   * @param &#123;Nedb.RemoveOptions&#125; options</span></span><br><span class="line"><span class="comment">   * @return &#123;BackPromise&lt;number&gt;&#125;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  remove(query: QueryDB&lt;DBNotes&gt;, options?: Nedb.RemoveOptions) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve: (<span class="params">value: <span class="built_in">number</span></span>) =&gt; <span class="built_in">void</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (options) &#123;</span><br><span class="line">        <span class="keyword">this</span>._db.remove(query, options, <span class="function">(<span class="params">error: <span class="built_in">Error</span> | <span class="literal">null</span>, n: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (!error) resolve(n);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>._db.remove(query, <span class="function">(<span class="params">error: <span class="built_in">Error</span> | <span class="literal">null</span>, n: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (!error) resolve(n);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  update&lt;T <span class="keyword">extends</span> G&gt;(query: T, updateQuery: T, options: Nedb.UpdateOptions = &#123;&#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve: (<span class="params">value: T</span>) =&gt; <span class="built_in">void</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>._db.update(</span><br><span class="line">        query,</span><br><span class="line">        updateQuery,</span><br><span class="line">        options,</span><br><span class="line">        (error: <span class="built_in">Error</span> | <span class="literal">null</span>, numberOfUpdated: <span class="built_in">number</span>, affectedDocuments: T) =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (!error) resolve(affectedDocuments);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> INoteDB();</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨refå’Œreactiveä»£æ›¿vuexï¼Œå¹¶ç”¨watchç›‘å¬"><a href="#ä½¿ç”¨refå’Œreactiveä»£æ›¿vuexï¼Œå¹¶ç”¨watchç›‘å¬" class="headerlink" title="ä½¿ç”¨refå’Œreactiveä»£æ›¿vuexï¼Œå¹¶ç”¨watchç›‘å¬"></a>ä½¿ç”¨<code>ref</code>å’Œ<code>reactive</code>ä»£æ›¿vuexï¼Œå¹¶ç”¨<code>watch</code>ç›‘å¬</h2><h3 id="åˆ›å»ºexeConfig-state-ts"><a href="#åˆ›å»ºexeConfig-state-ts" class="headerlink" title="åˆ›å»ºexeConfig.state.ts"></a>åˆ›å»º<code>exeConfig.state.ts</code></h3><p>ç”¨<code>ref</code>å’Œ<code>reactive</code>å¼•å…¥çš„æ–¹å¼å°±å¯ä»¥è¾¾åˆ°<code>vuex</code>çš„<code>state</code>æ•ˆæœï¼Œè¿™æ ·å°±å¯ä»¥å®Œå…¨èˆå¼ƒæ‰<code>vuex</code>ã€‚æ¯”å¦‚è½¯ä»¶é…ç½®ï¼Œåˆ›å»º<code>exeConfig.state.ts</code>åœ¨<code>store</code>ä¸­ï¼Œè¿™æ ·åœ¨å¤–éƒ¨<code>.vue</code>æ–‡ä»¶ä¸­è¿›è¡Œæ›´æ”¹ä¹Ÿèƒ½å»æ›´æ–°è§†å›¾ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, watch &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> exeConfigLocal = localStorage.getItem(<span class="string">'exeConfig'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> exeConfig = reactive(&#123;</span><br><span class="line">  syncDelay: <span class="number">1000</span>,</span><br><span class="line">  ...</span><br><span class="line">  switchStatus: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼€å¯æç¤º</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    textTip: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (exeConfigLocal) &#123;</span><br><span class="line">  exeConfig = reactive(<span class="built_in">JSON</span>.parse(exeConfigLocal));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  localStorage.setItem(<span class="string">'exeConfig'</span>, <span class="built_in">JSON</span>.stringify(exeConfig));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">watch(exeConfig, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  localStorage.setItem(<span class="string">'exeConfig'</span>, <span class="built_in">JSON</span>.stringify(e));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="vuexç•ªå¤–"><a href="#vuexç•ªå¤–" class="headerlink" title="vuexç•ªå¤–"></a>vuexç•ªå¤–</h3><p>vuexçš„ä½¿ç”¨æ˜¯ç›´æ¥åœ¨é¡¹ç›®ä¸­å¼•å…¥<code>useStore</code>ï¼Œä½†æ˜¯æ˜¯æ²¡æœ‰<code>state</code>ç±»å‹æç¤ºçš„ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨å»æ¨å¯¼<code>state</code>çš„å†…å®¹ã€‚è¿™é‡Œçš„<code>S</code>ä»£è¡¨<code>state</code>çš„ç±»å‹ï¼Œç„¶åä¼ å…¥<code>vuex</code>ä¸­<code>export declare class Store&lt;S&gt; { readonly state: S; }</code></p><blockquote><p>æƒ³è¦æŸ¥çœ‹æŸä¸ªå€¼çš„ç±»å‹çš„æ—¶å€™åœ¨vscodeä¸­<code>ctrl+é¼ æ ‡å·¦é”®</code>ç‚¹è¿›å»å°±èƒ½çœ‹åˆ°ï¼Œæˆ–è€…é¼ æ ‡æ‚¬æµ®è¯¥å€¼</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> 'vuex' &#123;</span><br><span class="line">  <span class="keyword">type</span> StoreStateType = <span class="keyword">typeof</span> store.state;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useStore</span>&lt;<span class="title">S</span> = <span class="title">StoreStateType</span>&gt;(<span class="params"></span>): <span class="title">Store</span>&lt;<span class="title">S</span>&gt;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="index-vue"><a href="#index-vue" class="headerlink" title="index.vue"></a>index.vue</h2><ul><li>è¿™é‡Œåœ¨é˜²æ­¢æ²¡æœ‰æ•°æ®çš„æ—¶å€™é¡µé¢ç©ºç™½é—ªçƒï¼Œä½¿ç”¨ä¸€ä¸ªå›¾ç‰‡å’Œåˆ—è¡¨åŒºåŸŸå»æ§åˆ¶æ˜¾ç¤ºï¼Œæ‹¿åˆ°æ•°æ®ä¹‹åå°±æ˜¾ç¤ºåˆ—è¡¨ï¼Œå¦åˆ™å°±åªæ˜¾ç¤ºå›¾ç‰‡ã€‚</li><li>åœ¨è¿™ä¸ªé¡µé¢å¯¹<code>editor.vue</code>è¿›è¡Œäº†<code>createNewNote</code>åˆ›å»ºä¾¿ç¬ºç¬”è®°ã€<code>updateNoteItem_className</code>æ›´æ–°ç±»å‹æ›´æ”¹é¢œè‰²ã€<code>updateNoteItem_content</code>æ›´æ–°å†…å®¹ã€<code>removeEmptyNoteItem</code>åˆ é™¤ã€<code>whetherToOpen</code>æ˜¯å¦æ‰“å¼€ï¼ˆåœ¨editorä¸­éœ€è¦æ‰“å¼€åˆ—è¡¨çš„æ“ä½œï¼‰<code>é€šä¿¡æ“ä½œ</code></li><li>ä»¥åŠå¯¹è½¯ä»¶å¤±å»ç„¦ç‚¹è¿›è¡Œç›‘å¬<code>getCurrentWindow().on(&#39;blur&#39;)</code>ï¼Œå¦‚æœå¤±å»ç„¦ç‚¹ï¼Œé‚£ä¹ˆåœ¨å³é”®å¼¹çª—æ‰“å¼€çš„æƒ…å†µä¸‹è¿›è¡Œå»é™¤ã€‚</li><li><code>deleteActiveItem_{uid}</code>åˆ é™¤ä¾¿ç¬ºç¬”è®°å†…å®¹ï¼Œè¿™é‡Œåœ¨<code>component</code>å°è£…äº†ä¸€ä¸ªå¼¹çª—ç»„ä»¶<code>messageBox</code>ï¼Œç„¶ååœ¨å¼¹çª—çš„æ—¶å€™æç¤º<code>æ˜¯å¦åˆ é™¤</code>å’Œ<code>ä¸åœ¨è¯¢é—®</code>çš„åŠŸèƒ½æ“ä½œã€‚<ul><li>ğŸ§¨å¦‚æœ<code>å‹¾é€‰ä¸åœ¨è¯¢é—®</code>ï¼Œé‚£ä¹ˆåœ¨<code>store=&gt;exeConfig.state</code>ä¸­åšç›¸åº”çš„æ›´æ”¹</li><li>è¿™é‡Œåœ¨è®¾ç½®ä¸­ä¼šè¿›è¡Œè¯¦ç»†çš„ä»‹ç»</li></ul></li></ul><h2 id="å¼€å‘ä¸€ä¸ªvue3å³é”®å¼¹çª—æ’ä»¶"><a href="#å¼€å‘ä¸€ä¸ªvue3å³é”®å¼¹çª—æ’ä»¶" class="headerlink" title="å¼€å‘ä¸€ä¸ªvue3å³é”®å¼¹çª—æ’ä»¶"></a>å¼€å‘ä¸€ä¸ªvue3å³é”®å¼¹çª—æ’ä»¶</h2><p>vue3ä¹Ÿå‘å¸ƒäº†æœ‰æ®µæ—¶é—´äº†ï¼Œè™½ç„¶è¿˜æ²¡æœ‰å®Œå…¨ç¨³å®šï¼Œä½†åé¢çš„æ—¶é—´å‡ºç°çš„æ’ä»¶å¼€å‘æ–¹å¼è¯´ä¸å®šä¹Ÿä¼šå¤šèµ·æ¥ã€‚<br>æ’ä»¶å¼€å‘æ€è·¯</p><ol><li>å®šä¹‰å¥½æ’ä»¶ç±»å‹ï¼Œæ¯”å¦‚éœ€è¦å“ªäº›å±æ€§<code>MenuOptions</code></li><li>åˆ¤æ–­æ˜¯å¦éœ€è¦åœ¨è§¦å‘ä¹‹åç«‹å³å…³é—­è¿˜æ˜¯ç»§ç»­æ˜¾ç¤º</li><li>åœ¨æ’å…¥<code>body</code>æ—¶åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œå¦åˆ™å°±åˆ é™¤é‡æ–°æ˜¾ç¤º</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp, h, App, VNode, RendererElement, RendererNode &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ClassName = <span class="built_in">string</span> | <span class="built_in">string</span>[];</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> MenuOptions &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ–‡æœ¬</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  text: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ˜¯å¦åœ¨ä½¿ç”¨åå°±å…³é—­</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  once?: <span class="built_in">boolean</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å•ç‹¬çš„æ ·å¼å</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  className?: ClassName;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å›¾æ ‡æ ·å¼å</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  iconName?: ClassName;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å‡½æ•°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  handler(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> RenderVNode = VNode&lt;</span><br><span class="line">  RendererNode,</span><br><span class="line">  RendererElement,</span><br><span class="line">  &#123;</span><br><span class="line">    [key: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> CreateRightClick &#123;</span><br><span class="line">  rightClickEl?: App&lt;Element&gt;;</span><br><span class="line">  rightClickElBox?: HTMLDivElement | <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.removeRightClickHandler();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ¸²æŸ“dom</span></span><br><span class="line"><span class="comment">   * @param menu</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  render(menu: MenuOptions[]): RenderVNode &#123;</span><br><span class="line">    <span class="keyword">return</span> h(</span><br><span class="line">      <span class="string">'ul'</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">class</span>: [<span class="string">'right-click-menu-list'</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      [</span><br><span class="line">        ...menu.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> h(</span><br><span class="line">            <span class="string">'li'</span>,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="keyword">class</span>: item.className,</span><br><span class="line">              <span class="comment">// vue3.xä¸­ç®€åŒ–äº†renderï¼Œç›´æ¥onclickå³å¯ï¼ŒonClickä¹Ÿå¯ä»¥</span></span><br><span class="line">              onclick: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœåªæ˜¯ä¸€æ¬¡ï¼Œé‚£ä¹ˆç‚¹å‡»ä¹‹åç›´æ¥å…³é—­</span></span><br><span class="line">                <span class="keyword">if</span> (item.once) <span class="keyword">this</span>.remove();</span><br><span class="line">                <span class="keyword">return</span> item.handler();</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            [</span><br><span class="line">              <span class="comment">// icon</span></span><br><span class="line">              h(<span class="string">'i'</span>, &#123;</span><br><span class="line">                <span class="keyword">class</span>: item.iconName</span><br><span class="line">              &#125;),</span><br><span class="line">              <span class="comment">// text</span></span><br><span class="line">              h(</span><br><span class="line">                <span class="string">'span'</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="keyword">class</span>: <span class="string">'right-click-menu-text'</span></span><br><span class="line">                &#125;,</span><br><span class="line">                item.text</span><br><span class="line">              )</span><br><span class="line">            ]</span><br><span class="line">          );</span><br><span class="line">        &#125;)</span><br><span class="line">      ]</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»™å³é”®çš„æ ·å¼</span></span><br><span class="line"><span class="comment">   * @param event é¼ æ ‡äº‹ä»¶</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  setRightClickElStyle(event: MouseEvent, len: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.rightClickElBox) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">this</span>.rightClickElBox.style.height = <span class="string">`<span class="subst">$&#123;len * <span class="number">36</span>&#125;</span>px`</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; clientX, clientY &#125; = event;</span><br><span class="line">    <span class="keyword">const</span> &#123; innerWidth, innerHeight &#125; = <span class="built_in">window</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; clientWidth, clientHeight &#125; = <span class="keyword">this</span>.rightClickElBox;</span><br><span class="line">    <span class="keyword">let</span> cssText = <span class="string">`height: <span class="subst">$&#123;len * <span class="number">36</span>&#125;</span>px;opacity: 1;transition: all 0.2s;`</span>;</span><br><span class="line">    <span class="keyword">if</span> (clientX + clientWidth &lt; innerWidth) &#123;</span><br><span class="line">      cssText += <span class="string">`left: <span class="subst">$&#123;clientX + <span class="number">2</span>&#125;</span>px;`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cssText += <span class="string">`left: <span class="subst">$&#123;clientX - clientWidth&#125;</span>px;`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (clientY + clientHeight &lt; innerHeight) &#123;</span><br><span class="line">      cssText += <span class="string">`top: <span class="subst">$&#123;clientY + <span class="number">2</span>&#125;</span>px;`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cssText += <span class="string">`top: <span class="subst">$&#123;clientY - clientHeight&#125;</span>px;`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cssText += <span class="string">`height: <span class="subst">$&#123;len * <span class="number">36</span>&#125;</span>px`</span>;</span><br><span class="line">    <span class="keyword">this</span>.rightClickElBox.style.cssText = cssText;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  remove(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.rightClickElBox) &#123;</span><br><span class="line">      <span class="keyword">this</span>.rightClickElBox.remove();</span><br><span class="line">      <span class="keyword">this</span>.rightClickElBox = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  removeRightClickHandler(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.rightClickElBox) &#123;</span><br><span class="line">        <span class="keyword">const</span> currentEl = e.target <span class="keyword">as</span> Node;</span><br><span class="line">        <span class="keyword">if</span> (!currentEl || !<span class="keyword">this</span>.rightClickElBox.contains(currentEl)) &#123;</span><br><span class="line">          <span class="keyword">this</span>.remove();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é¼ æ ‡å³é”®æ‚¬æµ®</span></span><br><span class="line"><span class="comment">   * @param event</span></span><br><span class="line"><span class="comment">   * @param menu</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  useRightClick = (event: MouseEvent, menu: MenuOptions[] = []): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.remove();</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.rightClickElBox || !<span class="keyword">this</span>.rightClickEl) &#123;</span><br><span class="line">      <span class="keyword">const</span> createRender = <span class="keyword">this</span>.render(menu);</span><br><span class="line">      <span class="keyword">this</span>.rightClickEl = createApp(&#123;</span><br><span class="line">        setup() &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> createRender;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.rightClickElBox) &#123;</span><br><span class="line">      <span class="keyword">this</span>.rightClickElBox = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">      <span class="keyword">this</span>.rightClickElBox.id = <span class="string">'rightClick'</span>;</span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(<span class="keyword">this</span>.rightClickElBox);</span><br><span class="line">      <span class="keyword">this</span>.rightClickEl.mount(<span class="string">'#rightClick'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.setRightClickElStyle(event, menu.length);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> CreateRightClick;</span><br></pre></td></tr></table></figure><h2 id="å³é”®å¼¹çª—æ’ä»¶é…åˆelectronæ‰“å¼€ã€åˆ é™¤ä¾¿ç¬ºç¬”è®°"><a href="#å³é”®å¼¹çª—æ’ä»¶é…åˆelectronæ‰“å¼€ã€åˆ é™¤ä¾¿ç¬ºç¬”è®°" class="headerlink" title="å³é”®å¼¹çª—æ’ä»¶é…åˆelectronæ‰“å¼€ã€åˆ é™¤ä¾¿ç¬ºç¬”è®°"></a>å³é”®å¼¹çª—æ’ä»¶é…åˆelectronæ‰“å¼€ã€åˆ é™¤ä¾¿ç¬ºç¬”è®°</h2><p>åœ¨ä½¿ç”¨çš„æ—¶å€™ç›´æ¥å¼•å…¥å³å¯ï¼Œå¦‚åœ¨<code>index.vue</code>ä¸­ä½¿ç”¨åˆ›å»ºå³é”®çš„æ–¹å¼ï¼Œè¿™é‡Œéœ€è¦é¢å¤–çš„è¯´æ˜ä¸€ä¸‹ï¼Œæ‰“å¼€çª—å£éœ€è¦è¿›è¡Œä¸€ä¸ªçª—å£é€šä¿¡åˆ¤æ–­ï¼Œ<code>ipcMain</code>éœ€è¦ä»<code>remote</code>ä¸­è·å–</p><ul><li>æ¯ä¸ªä¾¿ç¬ºç¬”è®°éƒ½æœ‰ä¸€ä¸ª<code>uid</code>ï¼Œä¹Ÿå°±æ˜¯<code>utils</code>ä¸­ç”Ÿæˆçš„</li><li>æ¯ä¸ªåœ¨æ‰“å¼€ç¬”è®°çš„æ—¶å€™ä¹Ÿå°±æ˜¯ç¼–è¾‘é¡µï¼Œéœ€è¦åˆ¤æ–­<code>è¯¥uidçš„çª—å£</code>æ˜¯å¦å·²ç»æ‰“å¼€</li><li>çª—å£ä¹‹é—´ç”¨<code>ipcRenderer</code>å’Œ<code>ipcMain</code>å»é€šä¿¡</li><li>åˆ¤æ–­é€šä¿¡å¤±è´¥çš„æ–¹æ³•ï¼Œç”¨ä¸€ä¸ªå®šæ—¶å™¨æ¥å»¶æ—¶åˆ¤æ–­æ˜¯å¦<code>é€šä¿¡æˆåŠŸ</code>ï¼Œå› ä¸ºæ²¡æœ‰åˆ¤æ–­é€šä¿¡å¤±è´¥çš„æ–¹æ³•</li><li><code>countFlag = true</code>å°±è¯´æ˜æ‰“å¼€çª—å£ï¼Œ<code>countFlag = false</code>è¯´æ˜æ²¡æœ‰æ‰“å¼€çª—å£</li></ul><h3 id="ipcRendererå’ŒipcMainé€šä¿¡"><a href="#ipcRendererå’ŒipcMainé€šä¿¡" class="headerlink" title="ipcRendererå’ŒipcMainé€šä¿¡"></a><code>ipcRenderer</code>å’Œ<code>ipcMain</code>é€šä¿¡</h3><p>ğŸ§¨<code>on</code>æ˜¯ä¸€ç›´å¤„äºé€šä¿¡çŠ¶æ€ï¼Œ<code>once</code>æ˜¯é€šä¿¡ä¸€æ¬¡ä¹‹åå°±å…³é—­äº†</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// countFlagæ˜¯ä¸€ä¸ªçŠ¶æ€æ¥æ ‡è®°æ”¶åˆ°ä¸œè¥¿æ²¡</span></span><br><span class="line"><span class="comment">// indexé—®editoræ‰“å¼€äº†æ²¡æœ‰</span></span><br><span class="line">ipcRenderer.send(<span class="string">'ä½ å¥½'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ—¶å€™editoræ”¶åˆ°æ¶ˆæ¯äº†</span></span><br><span class="line">remote.ipcMain.on(<span class="string">'ä½ å¥½'</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ”¶åˆ°æ¶ˆæ¯åæ˜¾ç¤º</span></span><br><span class="line">  remote.getCurrentWindow().show();</span><br><span class="line">  <span class="comment">// ç„¶åå›indexæ¶ˆæ¯</span></span><br><span class="line">  e.sender.send(<span class="string">'ä½ å¥½æˆ‘åœ¨çš„'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// indexåœ¨ç­‰editoræ¶ˆæ¯</span></span><br><span class="line">ipcRenderer.on(<span class="string">'ä½ å¥½æˆ‘åœ¨çš„'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¥½çš„æˆ‘æ”¶åˆ°äº†</span></span><br><span class="line">  countFlag = <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æ”¶åˆ°æ¶ˆæ¯ï¼Œé‚£æ ‡è®°ä¸€ç›´æ˜¯falseï¼Œæ ¹æ®å®šæ—¶å™¨æ¥åšç›¸åº”æ“ä½œ</span></span><br></pre></td></tr></table></figure><h3 id="å³é”®å¼¹çª—çš„ä½¿ç”¨"><a href="#å³é”®å¼¹çª—çš„ä½¿ç”¨" class="headerlink" title="å³é”®å¼¹çª—çš„ä½¿ç”¨"></a>å³é”®å¼¹çª—çš„ä½¿ç”¨</h3><p>ğŸ§¨è¿™é‡Œçš„æ‰“å¼€ç¬”è®°åŠŸèƒ½ä¼šæŠŠé€‰ä¸­çš„ç¬”è®°<code>uid</code>å½“ä½œä¸€ä¸ª<code>query</code>å‚æ•°è·³è½¬åˆ°<code>ç¼–è¾‘é¡µ</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CreateRightClick <span class="keyword">from</span> <span class="string">'@/components/rightClick'</span>;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> rightClick = <span class="keyword">new</span> CreateRightClick();</span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> contextMenu = <span class="function">(<span class="params">event: MouseEvent, uid: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  rightClick.useRightClick(event, [</span><br><span class="line">    &#123;</span><br><span class="line">      text: <span class="string">'æ‰“å¼€ç¬”è®°'</span>,</span><br><span class="line">      once: <span class="literal">true</span>,</span><br><span class="line">      iconName: [<span class="string">'iconfont'</span>, <span class="string">'icon-newopen'</span>],</span><br><span class="line">      handler: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> countFlag = <span class="literal">false</span>;</span><br><span class="line">        ipcRenderer.send(<span class="string">`<span class="subst">$&#123;uid&#125;</span>_toOpen`</span>);</span><br><span class="line">        ipcRenderer.on(<span class="string">`get_<span class="subst">$&#123;uid&#125;</span>_toOpen`</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          countFlag = <span class="literal">true</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (!countFlag) openEditorWindow(uid);</span><br><span class="line">        &#125;, <span class="number">100</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      text: <span class="string">'åˆ é™¤ç¬”è®°'</span>,</span><br><span class="line">      once: <span class="literal">true</span>,</span><br><span class="line">      iconName: [<span class="string">'iconfont'</span>, <span class="string">'icon-delete'</span>],</span><br><span class="line">      handler: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        deleteCurrentUid.value = uid;</span><br><span class="line">        <span class="keyword">if</span> (exeConfig.switchStatus.deleteTip) &#123;</span><br><span class="line">          deleteMessageShow.value = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// æ ¹æ®å¼¹çª—ç»„ä»¶è¿›è¡Œåˆ¤æ–­</span></span><br><span class="line">          onConfirm();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]);</span><br><span class="line">&#125;;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="editor-vueé‡ç‚¹"><a href="#editor-vueé‡ç‚¹" class="headerlink" title="editor.vueé‡ç‚¹"></a>editor.vueé‡ç‚¹</h2><p>è¿™ä¸ª<code>editor.vueæ˜¯view/æ–‡ä»¶å¤¹ä¸‹</code>çš„ï¼Œä»¥ä¸‹å¯¹æœ¬é¡µé¢ç»Ÿç§°ç¼–è¾‘é¡µï¼Œæ›´å¥½åŒºåˆ†<code>editorç»„ä»¶</code>å’Œé¡µé¢<br>å¼€å‘æ€è·¯</p><ul><li>æ‰“å¼€<code>æ–°å¢</code>ç¼–è¾‘é¡µçª—å£æ—¶å°±<code>ç”Ÿæˆuid</code>å¹¶å‘æ•°æ®åº“<code>nedb</code>æ·»åŠ æ•°æ®ï¼Œå¹¶å‘åˆ—è¡¨é¡µé€šä¿¡<code>ipcRenderer.send(&#39;createNewNote&#39;, res)</code></li><li>éœ€è¦ä½¿ç”¨å¯Œæ–‡æœ¬ï¼Œèƒ½å®æ—¶å¤„ç†æ ¼å¼<code>document.execCommand</code></li><li>é¡µé¢åŠ è½½å®Œæ—¶è¿›è¡Œèšç„¦<code>createRange</code>å’Œ<code>getSelection</code></li><li>å¯¹åˆ—è¡¨é¡µå®æ—¶æ›´æ–°ï¼Œç¼–è¾‘çš„æ—¶å€™é˜²æŠ–å‡½æ•°<code>debounce</code>å¯ä»¥æ§åˆ¶è¾“å…¥æ›´æ–°ï¼Œè¿™ä¸ªæ—¶é—´åœ¨è®¾ç½®æ˜¯<code>å¯æ§</code>çš„</li><li><code>å›¾é’‰å›ºå®š</code>åœ¨<code>header.vue</code>å·²ç»è¯´æ˜</li><li><code>é€‰é¡¹åŠŸèƒ½</code>èƒ½é€‰æ‹©é¢œè‰²ï¼Œæ‰“å¼€åˆ—è¡¨ä¹‹åéœ€è¦åˆ¤æ–­æ˜¯å¦å·²ç»æ‰“å¼€åˆ—è¡¨çª—å£</li><li>åœ¨<code>ç‚¹å‡»å…³é—­</code>çš„æ—¶å€™éœ€è¦<code>åˆ é™¤</code>æ•°æ®åº“æœ¬æ¡æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰è¾“å…¥å†…å®¹å°±åˆ é™¤æ•°æ®åº“<code>uid</code>å†…å®¹å¹¶å‘åˆ—è¡¨é¡µé€šä¿¡<code>removeEmptyNoteItem</code></li><li>åœ¨åˆ—è¡¨é¡µæ—¶å…³é—­æœ¬çª—å£çš„ä¸€ä¸ªé€šä¿¡<code>deleteActiveItem_{uid}</code></li><li>åˆ—è¡¨é¡µ<code>æ‰“å¼€ç¬”è®°</code>æ—¶ï¼Œæºå¸¦<code>uid</code>ï¼Œåœ¨ç¼–è¾‘é¡µæ ¹æ®æ˜¯å¦æºå¸¦<code>uid</code>æŸ¥è¯¢è¯¥æ¡æ•°æ®åº“å†…å®¹</li></ul><p>å¯Œæ–‡æœ¬ç¼–è¾‘åšæˆäº†ä¸€ä¸ªå•ç‹¬çš„ç»„ä»¶ï¼Œä½¿<code>ç¼–è¾‘é¡µ</code>çš„ä»£ç ä¸ä¼šå¤ªè‡ƒè‚¿</p><blockquote><p>document.execCommandæ–‡æ¡£<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/execCommand" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/Document/execCommand</a></p></blockquote><p>é¦–å…ˆåœ¨ç¼–è¾‘é¡µå¯¹è·¯ç”±è¿›è¡Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå¦åˆ™å°±æŸ¥è¯¢å¹¶æŠŠæŸ¥è¯¢åˆ°çš„ç¬”è®°ä¼ ç»™<code>editorç»„ä»¶</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Editor</span> <span class="attr">:content</span>=<span class="string">"editContent"</span> <span class="attr">:className</span>=<span class="string">"currentBgClassName"</span> @<span class="attr">on-input</span>=<span class="string">"changeEditContent"</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routeUid = useRoute().query.uid <span class="keyword">as</span> <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">if</span> (routeUid) &#123;</span><br><span class="line">  <span class="comment">// æŸ¥è¯¢</span></span><br><span class="line">  uid.value = routeUid;</span><br><span class="line">  getCurUidItem(routeUid);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// ç”Ÿæˆuidå¹¶æŠŠuidæ”¾åˆ°åœ°å€æ </span></span><br><span class="line">  <span class="keyword">const</span> uuidString = uuid();</span><br><span class="line">  uid.value = uuidString;</span><br><span class="line">  useRouter().push(&#123;</span><br><span class="line">    query: &#123;</span><br><span class="line">      uid: uuidString</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// æ’å…¥æ•°æ®åº“å¹¶å‘åˆ—è¡¨é¡µé€šä¿¡</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯Œæ–‡æœ¬èšç„¦å’Œrefè·å–domèŠ‚ç‚¹"><a href="#å¯Œæ–‡æœ¬èšç„¦å’Œrefè·å–domèŠ‚ç‚¹" class="headerlink" title="å¯Œæ–‡æœ¬èšç„¦å’Œrefè·å–domèŠ‚ç‚¹"></a>å¯Œæ–‡æœ¬èšç„¦å’Œrefè·å–domèŠ‚ç‚¹</h3><p>åŸç†æ˜¯é€šè¿‡<code>getSelection</code>é€‰æ‹©å…‰æ ‡å’Œ<code>createRange</code>æ–‡æœ¬èŒƒå›´ä¸¤ä¸ªæ–¹æ³•ï¼Œé€‰ä¸­<code>å¯Œæ–‡æœ¬èŠ‚ç‚¹</code>ã€‚<br>è·å–</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent, onMounted, ref, Ref, watch &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line">...</span><br><span class="line"><span class="comment">// setupä¸­åˆ›å»ºä¸€ä¸ªå’Œ&lt;div ref="editor"&gt;åŒåçš„å˜é‡ï¼Œå°±å¯ä»¥ç›´æ¥æ‹¿åˆ°domèŠ‚ç‚¹ï¼Œä¸€å®šè¦returnï¼ï¼ï¼</span></span><br><span class="line"><span class="keyword">let</span> editor: Ref&lt;HTMLDivElement | <span class="literal">null</span>&gt; = ref(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">onMounted(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  focus();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> focus = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> range = <span class="built_in">document</span>.createRange();</span><br><span class="line">  range.selectNodeContents(editor.value <span class="keyword">as</span> HTMLDivElement);</span><br><span class="line">  range.collapse(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> selecton = <span class="built_in">window</span>.getSelection() <span class="keyword">as</span> Selection;</span><br><span class="line">  selecton.removeAllRanges();</span><br><span class="line">  selecton.addRange(range);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">  editor,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="editorç»„ä»¶çš„çˆ¶ä¼ å­ä»¥åŠwatchç›‘å¬"><a href="#editorç»„ä»¶çš„çˆ¶ä¼ å­ä»¥åŠwatchç›‘å¬" class="headerlink" title="editorç»„ä»¶çš„çˆ¶ä¼ å­ä»¥åŠwatchç›‘å¬"></a>editorç»„ä»¶çš„çˆ¶ä¼ å­ä»¥åŠwatchç›‘å¬</h3><p>ğŸ§¨è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å› ä¸ºåœ¨çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶ï¼Œç„¶åå­ç»„ä»¶è¿›è¡Œæ›´æ–°ä¸€æ¬¡ä¼šå¯¼è‡´å¯Œæ–‡æœ¬æ— æ³•æ’¤å›ï¼Œç›¸å½“äºé‡æ–°ç»™å¯Œæ–‡æœ¬ç»„ä»¶èµ‹å€¼æ¸²æŸ“äº†ä¸€æ¬¡ï¼Œå› æ­¤è¿™é‡Œå°±åªç”¨ä¸€æ¬¡<code>props.content</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    content: <span class="built_in">String</span>,</span><br><span class="line">    className: <span class="built_in">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [<span class="string">'on-input'</span>],</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    <span class="keyword">let</span> editor: Ref&lt;HTMLDivElement | <span class="literal">null</span>&gt; = ref(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">const</span> bottomIcons = editorIcons;</span><br><span class="line">    <span class="keyword">const</span> editorContent: Ref&lt;<span class="built_in">string</span> | <span class="literal">undefined</span>&gt; = ref(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬ä»çˆ¶ç»„ä»¶ä¼ æ¥çš„å†…å®¹ï¼Œå› ä¸ºæ˜¯ä»æ•°æ®åº“æŸ¥è¯¢æ‰€ä»¥ä¼šæœ‰ä¸€å®šçš„å»¶è¿Ÿ</span></span><br><span class="line">    watch(props, <span class="function"><span class="params">nv</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!editorContent.value) &#123;</span><br><span class="line">        <span class="comment">// åªèµ‹å€¼ä¸€æ¬¡</span></span><br><span class="line">        editorContent.value = nv.content;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="editorç»„ä»¶çš„é˜²æŠ–å­ä¼ çˆ¶"><a href="#editorç»„ä»¶çš„é˜²æŠ–å­ä¼ çˆ¶" class="headerlink" title="editorç»„ä»¶çš„é˜²æŠ–å­ä¼ çˆ¶"></a>editorç»„ä»¶çš„é˜²æŠ–å­ä¼ çˆ¶</h3><p><code>exeConfig.syncDelay</code>æ˜¯è®¾ç½®é‡Œé¢çš„ä¸€ä¸ªæ—¶é—´ï¼Œå¯ä»¥åŠ¨æ€æ ¹æ®è¿™ä¸ªæ—¶é—´æ¥è°ƒèŠ‚å‚¨å­˜è¿›æ•°æ®åº“å’Œåˆ—è¡¨çš„æ›´æ–°ï¼Œè·å–å¯Œæ–‡æœ¬ç»„ä»¶çš„<code>html</code>ç„¶åå‚¨å­˜åˆ°æ•°æ®åº“å¹¶ä¼ åˆ°åˆ—è¡¨é¡µæ›´æ–°</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> changeEditorContent = debounce(<span class="function">(<span class="params">e: InputEvent</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> editorHtml = (e.target <span class="keyword">as</span> Element).innerHTML;</span><br><span class="line">  emit(<span class="string">'on-input'</span>, editorHtml);</span><br><span class="line">&#125;, exeConfig.syncDelay);</span><br></pre></td></tr></table></figure><h3 id="å¯Œæ–‡æœ¬ç»„ä»¶çš„ç²˜è´´çº¯æ–‡æœ¬"><a href="#å¯Œæ–‡æœ¬ç»„ä»¶çš„ç²˜è´´çº¯æ–‡æœ¬" class="headerlink" title="å¯Œæ–‡æœ¬ç»„ä»¶çš„ç²˜è´´çº¯æ–‡æœ¬"></a>å¯Œæ–‡æœ¬ç»„ä»¶çš„ç²˜è´´çº¯æ–‡æœ¬</h3><p>vueè‡ªå¸¦çš„ç²˜è´´äº‹ä»¶ï¼Œ<code>@paste</code>è·å–åˆ°å‰ªåˆ‡æ¿çš„å†…å®¹ï¼Œç„¶åè·å–æ–‡æœ¬æ ¼å¼çš„å†…å®¹<code>e.clipboardData?.getData(&#39;text/plain&#39;)</code>å¹¶æ’å…¥å¯Œæ–‡æœ¬</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> paste = <span class="function">(<span class="params">e: ClipboardEvent</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> pasteText = e.clipboardData?.getData(<span class="string">'text/plain'</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(pasteText);</span><br><span class="line">  <span class="built_in">document</span>.execCommand(<span class="string">'insertText'</span>, <span class="literal">false</span>, pasteText);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ï¼ˆğŸ‰ğŸ‰ğŸ‰é¢å¤–çš„ï¼‰getCurrentInstanceé€‰æ‹©domæ–¹å¼"><a href="#ï¼ˆğŸ‰ğŸ‰ğŸ‰é¢å¤–çš„ï¼‰getCurrentInstanceé€‰æ‹©domæ–¹å¼" class="headerlink" title="ï¼ˆğŸ‰ğŸ‰ğŸ‰é¢å¤–çš„ï¼‰getCurrentInstanceé€‰æ‹©domæ–¹å¼"></a>ï¼ˆğŸ‰ğŸ‰ğŸ‰é¢å¤–çš„ï¼‰<code>getCurrentInstance</code>é€‰æ‹©domæ–¹å¼</h2><p>å®˜æ–¹å’Œç½‘ä¸Šçš„ä¾‹å­æ˜¯è¿™æ ·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">"editor"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">  <span class="keyword">let</span> editor = ref(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123; editor &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç›´æ¥è·å–<code>domèŠ‚ç‚¹</code>ï¼Œä½†å…¶å®ä¸ç®¡è¿™ä¸ª<code>editor</code>æ˜¯ä»€ä¹ˆï¼Œåªè¦ä»<code>setup</code>ä¸­<code>return</code>ï¼Œå°±ä¼šç›´æ¥æ ‡è®°<code>instance</code>å˜é‡åï¼Œå¼ºè¡ŒæŠŠå†…å®¹æ›¿æ¢æˆ<code>domèŠ‚ç‚¹</code>ï¼Œç”šè‡³ä¸ç”¨å®šä¹‰å¯ä»¥çœ‹çœ‹ä¸‹é¢ä¾‹å­</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">"test"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent, getCurrentInstance, onMounted &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line">...</span><br><span class="line">setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">  onMounted(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(getCurrentInstance().refs);</span><br><span class="line">    <span class="comment">// å¾—åˆ°çš„æ˜¯test domä»¥åŠå…¶ä»–å®šä¹‰çš„èŠ‚ç‚¹</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    test: <span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9cea8fc6069246bab5634f6ed3b72355~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>ä½†æ˜¯ä¸ºäº†è§„èŒƒè¿˜æ˜¯ä½¿ç”¨ä¸‹é¢è¿™æ ·</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">"dom"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dom = ref(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">  dom</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ­¤å¤„æ¨å¹¿ä¸€ä¸‹ä¸€ä¸ª98å¹´å¤§ä½¬çš„vue3æºç è§£ægithub: <a href="https://github.com/Kingbultsea/vue3-analysis" target="_blank" rel="noopener">https://github.com/Kingbultsea/vue3-analysis</a></p></blockquote><h2 id="setting-vue"><a href="#setting-vue" class="headerlink" title="setting.vue"></a>setting.vue</h2><p>è¿™é‡Œçš„è¯éœ€è¦ç”¨åˆ°<code>exeConfig.state.ts</code>çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬å°è£…çš„<code>input</code>ã€<code>switch</code>ã€<code>tick</code>ç»„ä»¶<br><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1eefe83be734b0b84b6e176384b87db~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>åœ¨è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œ<code>è‡ªåŠ¨ç¼©å°</code>ã€<code>é è¾¹éšè—</code>å’Œ<code>åŒæ­¥è®¾ç½®</code>æš‚æ—¶è¿˜æ²¡æœ‰å¼€å‘çš„</p><ul><li><code>è‡ªåŠ¨ç¼©å°</code>: ç¼–è¾‘é¡µå¤±å»ç„¦ç‚¹æ—¶è‡ªåŠ¨æœ€å°åŒ–ï¼Œè·å¾—ç„¦ç‚¹é‡æ–°æ‰“å¼€</li><li><code>é è¾¹éšè—</code>: æŠŠè½¯ä»¶æ‹–åŠ¨åˆ°å±å¹•è¾¹ç¼˜æ—¶ï¼Œè‡ªåŠ¨éšè—åˆ°è¾¹ä¸Šï¼Œç±»ä¼¼QQé‚£æ ·çš„åŠŸèƒ½</li><li><code>åŒæ­¥è®¾ç½®</code>: æ‰“ç®—ä½¿ç”¨<code>nestjs</code>åšåŒæ­¥æœåŠ¡ï¼Œåé¢<code>å¯èƒ½</code>ä¼šå‡ºä¸€ç¯‡æœ‰å…³çš„æ–‡ç« ï¼Œä½†æ˜¯åŠŸèƒ½ä¸€å®šä¼šåšçš„</li></ul><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4c2dc9afecc457a8ad852d7f807d56b~tplv-k3u1fbpfcp-watermark.image" alt=""></p><h3 id="directivesè‡ªå®šä¹‰æŒ‡ä»¤"><a href="#directivesè‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="directivesè‡ªå®šä¹‰æŒ‡ä»¤"></a>directivesè‡ªå®šä¹‰æŒ‡ä»¤</h3><p>æ ¹æ®æ˜¯å¦å¼€å¯æç¤ºçš„è®¾ç½®å†™çš„ä¸€ä¸ªæ–¹ä¾¿æ§åˆ¶çš„åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯é¦–å…ˆè·å–åˆå§‹åŒ–çš„èŠ‚ç‚¹é«˜åº¦ï¼Œæ”¾ç½®åœ¨<code>dom</code>çš„è‡ªå®šä¹‰æ•°æ®ä¸Šé¢<code>data-xx</code>ï¼Œç„¶åä¸‹æ¬¡æ˜¾ç¤ºçš„æ—¶å€™å†é‡æ–°è·å–èµ‹å€¼cssæ˜¾ç¤ºï¼Œå½“ç„¶è¿™é‡Œä¹Ÿæ˜¯ç”¨äº†ä¸€ä¸ªè¿‡æ¸¡æ•ˆæœ</p><p>ä½¿ç”¨æ–¹æ³•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-tip</span>=<span class="string">"switch"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Tick,</span><br><span class="line">    Input,</span><br><span class="line">    Switch</span><br><span class="line">  &#125;,</span><br><span class="line">  directives: &#123;</span><br><span class="line">    tip(el, &#123; value &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; height &#125; = el.dataset;</span><br><span class="line">      <span class="comment">// å‚¨å­˜æœ€åˆçš„é«˜åº¦</span></span><br><span class="line">      <span class="keyword">if</span> (!height &amp;&amp; height !== <span class="string">'0'</span>) &#123;</span><br><span class="line">        el.dataset.height = el.clientHeight;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> clientHeight = height || el.clientHeight;</span><br><span class="line">      <span class="keyword">let</span> cssText = <span class="string">'transition: all 0.4s;'</span>;</span><br><span class="line">      <span class="keyword">if</span> (value) &#123;</span><br><span class="line">        cssText += <span class="string">`height: <span class="subst">$&#123;clientHeight&#125;</span>px;opacity: 1;`</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        cssText += <span class="string">'height: 0;opacity: 0;overflow: hidden;'</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      el.style.cssText = cssText;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="åŸç”Ÿç‚¹å‡»å¤åˆ¶"><a href="#åŸç”Ÿç‚¹å‡»å¤åˆ¶" class="headerlink" title="åŸç”Ÿç‚¹å‡»å¤åˆ¶"></a>åŸç”Ÿç‚¹å‡»å¤åˆ¶</h3><p>åŸç†æ˜¯å…ˆéšè—ä¸€ä¸ª<code>input</code>æ ‡ç­¾ï¼Œç„¶åç‚¹å‡»çš„ä¹‹åé€‰æ‹©å®ƒçš„å†…å®¹ï¼Œåœ¨ä½¿ç”¨<code>document.execCommand(&#39;copy&#39;)</code>å¤åˆ¶å°±å¯ä»¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"copyEmail"</span>&gt;</span>å¤åˆ¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"hide-input"</span> <span class="attr">ref</span>=<span class="string">"mailInput"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"heiyehk@foxmail.com"</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mailInput: Ref&lt;HTMLInputElement | <span class="literal">null</span>&gt; = ref(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> copyEmail = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (copyStatus.value) <span class="keyword">return</span>;</span><br><span class="line">  copyStatus.value = <span class="literal">true</span>;</span><br><span class="line">  mailInput.value?.select();</span><br><span class="line">  <span class="built_in">document</span>.execCommand(<span class="string">'copy'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">  copyEmail</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="electronæ‰“å¼€æ–‡ä»¶å¤¹å’Œæ‰“å¼€é»˜è®¤æµè§ˆå™¨é“¾æ¥"><a href="#electronæ‰“å¼€æ–‡ä»¶å¤¹å’Œæ‰“å¼€é»˜è®¤æµè§ˆå™¨é“¾æ¥" class="headerlink" title="electronæ‰“å¼€æ–‡ä»¶å¤¹å’Œæ‰“å¼€é»˜è®¤æµè§ˆå™¨é“¾æ¥"></a>electronæ‰“å¼€æ–‡ä»¶å¤¹å’Œæ‰“å¼€é»˜è®¤æµè§ˆå™¨é“¾æ¥</h3><p>æ‰“å¼€æ–‡ä»¶å¤¹ä½¿ç”¨<code>shell</code>è¿™ä¸ªæ–¹æ³•</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; remote &#125; <span class="keyword">from</span> <span class="string">'electron'</span>;</span><br><span class="line"></span><br><span class="line">remote.shell.showItemInFolder(<span class="string">'D:'</span>);</span><br></pre></td></tr></table></figure><p>æ‰“å¼€é»˜è®¤æµè§ˆå™¨é“¾æ¥</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; remote &#125; <span class="keyword">from</span> <span class="string">'electron'</span>;</span><br><span class="line"></span><br><span class="line">remote.shell.openExternal(<span class="string">'www.github.com'</span>);</span><br></pre></td></tr></table></figure><h2 id="é”™è¯¯æ”¶é›†"><a href="#é”™è¯¯æ”¶é›†" class="headerlink" title="é”™è¯¯æ”¶é›†"></a>é”™è¯¯æ”¶é›†</h2><p>æ”¶é›†ä¸€äº›ä½¿ç”¨ä¸­çš„é”™è¯¯ï¼Œå¹¶ä½¿ç”¨<code>message</code>æ’ä»¶è¿›è¡Œå¼¹çª—æç¤ºï¼Œè½¯ä»¶å®½é«˜å’Œå±å¹•å®½é«˜åªæ˜¯è¾…åŠ©ä¿¡æ¯ã€‚ç¢°åˆ°è¿™äº›é”™è¯¯ä¹‹åï¼Œåœ¨è½¯ä»¶å®‰è£…ä½ç½®è¾“å‡ºä¸€ä¸ª<code>inoteError.log</code>çš„é”™è¯¯æ—¥å¿—æ–‡ä»¶ï¼Œç„¶ååœ¨è®¾ç½®ä¸­åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±æ‰“å¼€ç›®å½•é€‰ä¸­ã€‚</p><ul><li>ç‰ˆæœ¬å·</li><li>æ—¶é—´</li><li>é”™è¯¯</li><li>electronç‰ˆæœ¬</li><li>Windowsä¿¡æ¯</li><li>è½¯ä»¶å®½é«˜ä¿¡æ¯</li><li>å±å¹•å®½é«˜</li></ul><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c5a9ffb69524fcdb220246db0992848~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>æ¯”å¦‚è¿™ä¸ªæ¡†ä¸­çš„æ‰æ˜¯ä¸»è¦çš„ä¿¡æ¯</p><h3 id="vue3-errorHandler"><a href="#vue3-errorHandler" class="headerlink" title="vue3 errorHandler"></a>vue3 errorHandler</h3><p><code>main.ts</code>æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€ä¸‹æ”¹é€ ï¼Œå¹¶ä½¿ç”¨<code>errorHandler</code>è¿›è¡Œå…¨å±€çš„é”™è¯¯ç›‘æ§</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span>;</span><br><span class="line"><span class="keyword">import</span> outputErrorLog <span class="keyword">from</span> <span class="string">'@/utils/errorLog'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯æ”¶é›†æ–¹æ³•</span></span><br><span class="line">app.config.errorHandler = outputErrorLog;</span><br><span class="line"></span><br><span class="line">app.use(router).mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure><h3 id="errorLog-tså°è£…å¯¹Errorç±»å‹è¾“å‡ºä¸ºæ—¥å¿—æ–‡ä»¶"><a href="#errorLog-tså°è£…å¯¹Errorç±»å‹è¾“å‡ºä¸ºæ—¥å¿—æ–‡ä»¶" class="headerlink" title="errorLog.tså°è£…å¯¹Errorç±»å‹è¾“å‡ºä¸ºæ—¥å¿—æ–‡ä»¶"></a>errorLog.tså°è£…å¯¹Errorç±»å‹è¾“å‡ºä¸ºæ—¥å¿—æ–‡ä»¶</h3><h4 id="è·å–è½¯ä»¶å®‰è£…ä½ç½®"><a href="#è·å–è½¯ä»¶å®‰è£…ä½ç½®" class="headerlink" title="è·å–è½¯ä»¶å®‰è£…ä½ç½®"></a>è·å–è½¯ä»¶å®‰è£…ä½ç½®</h4><p><code>remote.app.getPath(&#39;exe&#39;)</code>è·å–è½¯ä»¶å®‰è£…è·¯å¾„ï¼ŒåŒ…å«<code>è½¯ä»¶å.exe</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> errorLogPath = path.join(remote.app.getPath(<span class="string">'exe'</span>), <span class="string">'../inoteError.log'</span>);</span><br></pre></td></tr></table></figure><h4 id="è¾“å‡ºæ—¥å¿—æ–‡ä»¶"><a href="#è¾“å‡ºæ—¥å¿—æ–‡ä»¶" class="headerlink" title="è¾“å‡ºæ—¥å¿—æ–‡ä»¶"></a>è¾“å‡ºæ—¥å¿—æ–‡ä»¶</h4><p><code>flag: a</code>ä»£è¡¨æœ«å°¾è¿½åŠ ï¼Œç¡®ä¿æ¯ä¸€è¡Œä¸€ä¸ªé”™è¯¯åŠ ä¸Šæ¢è¡Œç¬¦<code>&#39;\n&#39;</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.writeFileSync(errorLogPath, <span class="built_in">JSON</span>.stringify(errorLog) + <span class="string">'\n'</span>, &#123; flag: <span class="string">'a'</span> &#125;);</span><br></pre></td></tr></table></figure><p><code>errorLog.ts</code>çš„å°è£…ï¼Œå¯¹<code>Error</code>ç±»å‹çš„å°è£…</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ComponentPublicInstance &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">'dayjs'</span>;</span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">'fs-extra'</span>;</span><br><span class="line"><span class="keyword">import</span> os <span class="keyword">from</span> <span class="string">'os'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; remote &#125; <span class="keyword">from</span> <span class="string">'electron'</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">'path'</span>;</span><br><span class="line"><span class="keyword">import</span> useMessage <span class="keyword">from</span> <span class="string">'@/components/message'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getShortStack</span>(<span class="params">stack?: <span class="built_in">string</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> splitStack = stack?.split(<span class="string">'\n    '</span>);</span><br><span class="line">  <span class="keyword">if</span> (!splitStack) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">const</span> newStack: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> line of splitStack) &#123;</span><br><span class="line">    <span class="comment">// å…¶ä»–ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> (line.includes(<span class="string">'bundler'</span>)) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åªä¿ç•™é”™è¯¯æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> (line.includes(<span class="string">'?!.'</span>)) &#123;</span><br><span class="line">      newStack.push(line.replace(<span class="regexp">/webpack-internal:\/\/\/\.\/node_modules\/.+\?!/</span>, <span class="string">''</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      newStack.push(line);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è½¬æ¢string</span></span><br><span class="line">  <span class="keyword">return</span> newStack.join(<span class="string">'\n    '</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> errorLogPath = path.join(remote.app.getPath(<span class="string">'exe'</span>), <span class="string">'../inoteError.log'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">error: unknown, vm: ComponentPublicInstance | <span class="literal">null</span>, info: <span class="built_in">string</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; message, stack &#125; = error <span class="keyword">as</span> <span class="built_in">Error</span>;</span><br><span class="line">  <span class="keyword">const</span> &#123; electron, chrome, node, v8 &#125; = process.versions;</span><br><span class="line">  <span class="keyword">const</span> &#123; outerWidth, outerHeight, innerWidth, innerHeight &#125; = <span class="built_in">window</span>;</span><br><span class="line">  <span class="keyword">const</span> &#123; width, height &#125; = <span class="built_in">window</span>.screen;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŠ¥é”™ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">const</span> errorInfo = &#123;</span><br><span class="line">    errorInfo: info,</span><br><span class="line">    errorMessage: message,</span><br><span class="line">    errorStack: getShortStack(stack)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// electron</span></span><br><span class="line">  <span class="keyword">const</span> electronInfo = &#123; electron, chrome, node, v8 &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æµè§ˆå™¨çª—å£ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">const</span> browserInfo = &#123; outerWidth, outerHeight, innerWidth, innerHeight &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> errorLog = &#123;</span><br><span class="line">    versions: remote.app.getVersion(),</span><br><span class="line">    date: dayjs().format(<span class="string">'YYYY-MM-DD HH:mm'</span>),</span><br><span class="line">    error: errorInfo,</span><br><span class="line">    electron: electronInfo,</span><br><span class="line">    <span class="built_in">window</span>: &#123;</span><br><span class="line">      <span class="keyword">type</span>: os.type(),</span><br><span class="line">      platform: os.platform()</span><br><span class="line">    &#125;,</span><br><span class="line">    browser: browserInfo,</span><br><span class="line">    screen: &#123; width, height &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  useMessage(<span class="string">'ç¨‹åºå‡ºç°å¼‚å¸¸'</span>, <span class="string">'error'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">    fs.writeFileSync(errorLogPath, <span class="built_in">JSON</span>.stringify(errorLog) + <span class="string">'\n'</span>, &#123; flag: <span class="string">'a'</span> &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">    <span class="built_in">console</span>.log(errorInfo.errorStack);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ­¤æ–¹æ³•åå°è£…çš„ç»“æœæ˜¯è¿™æ ·çš„ï¼Œ<code>message</code>æ’ä»¶å…·ä½“çœ‹<code>component</code></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a74223e70f294d84afe2374d9eda9702~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>è¿™ä¸ªæ˜¯ä¹‹å‰çš„é”™è¯¯æ—¥å¿—æ–‡ä»¶<br><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e718792f2efe4b7a994aef059cde9b9e~tplv-k3u1fbpfcp-watermark.image" alt=""></p><h3 id="è·å–electronç‰ˆæœ¬ç­‰ä¿¡æ¯"><a href="#è·å–electronç‰ˆæœ¬ç­‰ä¿¡æ¯" class="headerlink" title="è·å–electronç‰ˆæœ¬ç­‰ä¿¡æ¯"></a>è·å–electronç‰ˆæœ¬ç­‰ä¿¡æ¯</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> appInfo = process.versions;</span><br></pre></td></tr></table></figure><h2 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h2><p>è¿™ä¸ªå€’æ˜¯æ²¡ä»€ä¹ˆå¥½è®²çš„äº†ï¼Œä¸»è¦è¿˜æ˜¯åœ¨<code>vue.config.js</code>æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ä¸€ä¸‹ï¼Œç„¶åä½¿ç”¨å‘½ä»¤<code>yarn electron:build</code>å³å¯ï¼Œå½“ç„¶äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªæ‰“åŒ…å‰æ¸…ç©ºçš„æ—§çš„æ‰“åŒ…æ–‡ä»¶å¤¹çš„è„šæœ¬</p><h3 id="deleteBuild-js"><a href="#deleteBuild-js" class="headerlink" title="deleteBuild.js"></a>deleteBuild.js</h3><p>æ‰“åŒ…æ¸…ç©º<code>dist_electron</code>æ—§çš„æ‰“åŒ…å†…å®¹ï¼Œå› ä¸º<code>eslint</code>çš„åŸå› ï¼Œè¿™é‡Œå°±ç”¨<code>eslint-disable</code>å…³æ‰äº†å‡ ä¸ª</p><p>åŸç†å°±æ˜¯å…ˆè·å–<code>vue.config.js</code>ä¸­çš„æ‰“åŒ…é…ç½®ï¼Œå¦‚æœé‡æ–°é…ç½®äº†è·¯å¾„<code>directories.output</code>å°±åŠ¨æ€å»æ¸…ç©º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rm = <span class="built_in">require</span>(<span class="string">'rimraf'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> pluginOptions = <span class="built_in">require</span>(<span class="string">'../../vue.config'</span>).pluginOptions;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> directories = pluginOptions.electronBuilder.builderOptions.directories;</span><br><span class="line"><span class="keyword">let</span> buildPath = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (directories &amp;&amp; directories.output) &#123;</span><br><span class="line">  buildPath = directories.output;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ä½œç”¨åªç”¨äºåˆ é™¤æ‰“åŒ…å‰çš„buildPath || dist_electron</span></span><br><span class="line"><span class="comment">// dist_electronæ˜¯é»˜è®¤æ‰“åŒ…æ–‡ä»¶å¤¹</span></span><br><span class="line">rm(path.join(__dirname, <span class="string">`../../<span class="subst">$&#123;buildPath || <span class="string">'dist_electron'</span>&#125;</span>`</span>), () =&gt; &#123;&#125;);</span><br></pre></td></tr></table></figure><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">äººå­¦å§‹çŸ¥é“ä¸å­¦éè‡ªç„¶</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰ä¸å¥½çš„åœ°æ–¹å‹¿å–·ï¼ŒåŠæ—¶è¯„è®ºåŠæ—¶æ”¹æ­£ï¼Œè°¢è°¢ï¼å†…å®¹æœ‰ç‚¹å¤šã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸è¦è®©è‡ªå·±çš„ä¸Šé™æˆä¸ºä½ çš„åº•çº¿&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬æ¥ä»¥ä¸ºæœ‰ä¸‡å­—çš„ã€‚ã€‚æ²¡æƒ³åˆ°æ‰å ªå ªè¿‘6000å­—ã€‚ä¸ºäº†æ°´æ–‡çš„å«Œç–‘ï¼ŒåªæŒ‘äº†é‡ç‚¹çš„åœ°æ–¹è®²ï¼Œæ¯”å¦‚&lt;code&gt;component&lt;/code&gt;å†…çš„ç»„ä»¶å°±æŒ‘äº†&lt;code&gt;å³é”®å¼¹çª—å»è¯´æ˜&lt;/code&gt;ï¼Œå»ºè®®åœ¨çœ‹æœ¬æ–‡çš„æ—¶å€™è¾¹æŸ¥çœ‹é¡¹ç›®ï¼Œæœ‰ä¸æ‡‚çš„å¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºï¼Œè°¢è°¢ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;github&lt;br&gt;github: &lt;a href=&quot;https://github.com/heiyehk/electron-vue3-inote&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/heiyehk/electron-vue3-inote&lt;/a&gt;&lt;br&gt;åŒ…ä¸‹è½½&lt;br&gt;release: &lt;a href=&quot;https://github.com/heiyehk/electron-vue3-inote/releases&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/heiyehk/electron-vue3-inote/releases&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¥ä¸Šç¯‡é…ç½®ç¯‡ &lt;a href=&quot;https://juejin.cn/post/6909723449246089224&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ã€electron+vue3+tså®æˆ˜ä¾¿ç¬ºexeã€‘ä¸€ã€æ­å»ºæ¡†æ¶é…ç½®&lt;/a&gt;ï¼Œè¿™é‡Œæ›´æ–°äº†ä¸€ä¸‹vue3çš„ç‰ˆæœ¬&lt;code&gt;3.0.4&lt;/code&gt;ï¼Œæœ¬ç¯‡æ–‡ç« åªè®²å¼€å‘å†…å®¹ï¼Œä¸»è¦è¿˜æ˜¯&lt;code&gt;vue3&lt;/code&gt;æ–¹é¢ï¼Œé•¿æ–‡è­¦å‘Šã€‚ps:smartblueè¿™ä¸ªä¸»é¢˜å¥½å¥½çœ‹ã€‚ã€‚ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="electron" scheme="https://heiyehk.github.io/blog/categories/electron/"/>
    
      <category term="vue3" scheme="https://heiyehk.github.io/blog/categories/electron/vue3/"/>
    
      <category term="ts" scheme="https://heiyehk.github.io/blog/categories/electron/vue3/ts/"/>
    
    
      <category term="electron" scheme="https://heiyehk.github.io/blog/tags/electron/"/>
    
      <category term="vue3" scheme="https://heiyehk.github.io/blog/tags/vue3/"/>
    
      <category term="ts" scheme="https://heiyehk.github.io/blog/tags/ts/"/>
    
  </entry>
  
  <entry>
    <title>ã€electron+vue3+tså®æˆ˜ä¾¿ç¬ºexeã€‘ä¸€ã€æ­å»ºæ¡†æ¶é…ç½®</title>
    <link href="https://heiyehk.github.io/blog/%E3%80%90electron-vue3-ts%E5%AE%9E%E6%88%98%E4%BE%BF%E7%AC%BAexe%E3%80%91%E4%B8%80%E3%80%81%E6%90%AD%E5%BB%BA%E6%A1%86%E6%9E%B6%E9%85%8D%E7%BD%AE/"/>
    <id>https://heiyehk.github.io/blog/%E3%80%90electron-vue3-ts%E5%AE%9E%E6%88%98%E4%BE%BF%E7%AC%BAexe%E3%80%91%E4%B8%80%E3%80%81%E6%90%AD%E5%BB%BA%E6%A1%86%E6%9E%B6%E9%85%8D%E7%BD%AE/</id>
    <published>2021-04-07T05:04:33.000Z</published>
    <updated>2021-04-07T05:09:31.531Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸è¦è®©è‡ªå·±çš„ä¸Šé™æˆä¸ºä½ çš„åº•çº¿</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¯ˆå°¸æ›´æ–°ç³»åˆ—ï¼Œä¸ºäº†è·Ÿä¸Šè„šæ­¥ï¼Œå°è¯•äº†vue3ï¼Œåœ¨å­¦ä¹ vue3çš„æ—¶å€™é¡ºä¾¿å­¦ä¹ ä¸€æ‰‹electronå’Œtsï¼Œæœ¬æ•™ç¨‹å°†åˆ†åˆ«å‘å¸ƒï¼Œæºç ä¼šåœ¨æœ€åçš„æ–‡ç« å‘å¸ƒã€‚å› ä¸ºè¿˜åœ¨å¼€å‘ä¸­ï¼Œç›®å‰ä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢æœ‰äº›é‡åˆ°å‘ä¸ä¼šåŠæ—¶å¿˜æ‰ï¼Œæ‰€ä»¥å…ˆæ•´ç†ä¸€éƒ¨åˆ†å‡ºæ¥</p><blockquote><p>å°†åˆ†2éƒ¨åˆ†å‘å‡ºæ•™ç¨‹ï¼Œå› ä¸ºé…ç½®çš„ä¸œè¥¿ä¸ªäººæ„Ÿè§‰æœ‰ç‚¹å¤šå¹¶ä¸”è·Ÿå¼€å‘å†…å®¹ç›¸å…³çš„ä¸œè¥¿å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œå› æ­¤å•ç‹¬å‘å‡ºï¼Œè§è°…ï¼Œç¬¬äºŒç¯‡è¿™ä¸¤å¤©å‘å‡ºï¼Œé•¿æ–‡è­¦å‘Šï¼âš ã€‚<br><a href="https://juejin.cn/post/6910102694178848781" target="_blank" rel="noopener">ã€electron+vue3+tså®æˆ˜ä¾¿ç¬ºexeã€‘äºŒã€electron+vue3å¼€å‘å†…å®¹</a></p></blockquote><a id="more"></a><p>å¼€å‘æ€è·¯ï¼š</p><ol><li>é¡µé¢ï¼š<ul><li>åˆ—è¡¨é¡µ<code>index.vue</code> å¤´éƒ¨ã€æœç´¢ã€å†…å®¹éƒ¨åˆ†ï¼Œåªèƒ½æœ‰ä¸€ä¸ªåˆ—è¡¨é¡µå­˜åœ¨</li><li>è®¾ç½®é¡µ<code>setting.vue</code> è®¾ç½®å†…å®¹å’Œè½¯ä»¶ä¿¡æ¯ï¼Œå’Œåˆ—è¡¨é¡µä¸€æ ·åªèƒ½æœ‰ä¸€ä¸ªå­˜åœ¨</li><li>ç¼–è¾‘é¡µ <code>editor.vue</code> iconsåŠŸèƒ½å’ŒèƒŒæ™¯é¢œè‰²åŠŸèƒ½ï¼Œå¯ä»¥å¤šä¸ªç¼–è¾‘é¡µåŒæ—¶å­˜åœ¨</li></ul></li><li>åŠ¨æ•ˆï¼š<ul><li>æ‰“å¼€åŠ¨æ•ˆï¼Œæœ‰ä¸€ä¸ªæ”¾å¤§ã€é€æ˜åº¦çš„è¿‡æ¸¡ï¼Œæ”¾ä¸äº†åŠ¨å›¾è¿™é‡Œæš‚æ—¶ä¸æ¼”ç¤ºäº†ã€‚</li><li>æ ‡é¢˜è¿‡æ¸¡æ•ˆæœ</li><li>åˆ‡æ¢<code>index</code>å’Œ<code>setting</code>æ—¶å¤´éƒ¨ä¸å˜ï¼Œå†…å®¹è¿‡æ¸¡</li></ul></li><li>æ•°æ®å‚¨å­˜ï¼šæ•°æ®çš„åˆ›å»ºå’Œæ›´æ–°éƒ½åœ¨ç¼–è¾‘é¡µ<code>editor.vue</code>è¿›è¡Œï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­åœ¨å‚¨å­˜è¿›<code>nedb</code>ä¹‹åæ‰é€šä¿¡åˆ—è¡¨é¡µ<code>index.vue</code>æ›´æ–°å†…å®¹ï¼Œè€ƒè™‘åˆ°æ€§èƒ½é—®é¢˜ï¼Œè¿™é‡Œä½¿ç”¨äº†<code>é˜²æŠ–</code>é˜²æ­¢è¿ç»­æ€§çš„æ›´æ–°è€Œå¯¼è‡´å¡é¡¿ï¼ˆä¸è¿‡è²Œä¼¼æ²¡æœ‰è¿™ä¸ªå¿…è¦ã€‚ã€‚ä¹Ÿç®—æ˜¯ä¸€ä¸ªå°åŠŸèƒ½å§ï¼Œç„¶åå¯ä»¥è®¾ç½®è¿™ä¸ªæ›´æ–°é€Ÿåº¦ï¼‰</li><li>é”™è¯¯é‡‡é›†ï¼šé‡‡é›†åœ¨ä½¿ç”¨ä¸­çš„é”™è¯¯å¹¶å¼¹çª—æç¤º</li><li>ç¼–è¾‘æ˜¾ç¤ºï¼š<code>document</code>æš´éœ² <code>execCommand</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…è®¸è¿è¡Œå‘½ä»¤æ¥æ“çºµå¯ç¼–è¾‘å†…å®¹åŒºåŸŸçš„å…ƒç´ ã€‚</li></ol><p>åœ¨å¼€å‘çš„æ—¶å€™è¿˜é‡åˆ°è¿‡å¥½å¤šå‘ï¼Œè¿™äº›éƒ½æ˜¯åœ¨<code>electron</code>ç¯å¢ƒä¸­æ‰æœ‰ï¼Œæ¯”å¦‚</p><ol><li><code>@input</code>è§¦å‘2æ¬¡ï¼ŒåŠ ä¸Š<code>v-model</code>è§¦å‘3æ¬¡ã€‚åŒ…æ‹¬åˆ›å»ºä¸€ä¸ªæ–°çš„electronæ¡†æ¶ä¹Ÿæ˜¯è¿™æ ·ï¼Œåˆ«äººç”µè„‘ä¸Šä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼ŒçŒœæµ‹æ˜¯<code>electronç¼“å­˜</code>é—®é¢˜</li><li>vue3ç¢°åˆ°<code>ç©ºå±æ€§</code>æŠ¥é”™æ—¶æ— é™æŠ¥é”™ï¼Œåœ¨æ™®é€šæµè§ˆå™¨ï¼ˆedgeå’Œchromeï¼‰æ˜¯æ­£å¸¸ä¸€æ¬¡</li><li>ç»„ä»¶æ— æ³•æ­£å¸¸æ¸²æŸ“ä¸æŠ¥é”™ï¼Œåªåœ¨æ§åˆ¶å°æŠ¥å¼‚å¸¸</li><li>æ‰“åŒ…åç”±äº<code>electron</code>çš„ç¼“å­˜å¯¼è‡´æ‰“å¼€éœ€è¦10ç§’å·¦å³ï¼Œæ¸…é™¤cç›˜è½¯ä»¶ç¼“å­˜åæ­£å¸¸</li></ol><p>å…¶ä»–çš„ä¸è®°å¾—äº†ã€‚ã€‚</p><p>è¿™é‡Œæš‚æ—¶ä¸æä¾›vue3å’Œelectronä»‹ç»ï¼Œæœ‰éœ€è¦çš„å¯ä»¥å…ˆçœ‹çœ‹ç¤¾åŒºå…¶ä»–çš„æœ‰å…³æ–‡ç« æˆ–è€…åæœŸå†è¯¦ç»†ä¸“é—¨æä¾›ã€‚è½¯ä»¶å‘½åä¸º<code>i-notes</code>ã€‚</p><p>vue3ä¸­æ–‡æ•™ç¨‹<br><a href="https://vue3js.cn/docs/zh/guide/migration/introduction.html" target="_blank" rel="noopener">https://vue3js.cn/docs/zh/guide/migration/introduction.html</a><br>electronæ•™ç¨‹<br><a href="https://www.electronjs.org/" target="_blank" rel="noopener">https://www.electronjs.org/</a><br>typescriptæ•™ç¨‹<br><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener">https://www.typescriptlang.org/</a>  </p><blockquote><p><code>electron-vue</code>é‡Œé¢çš„åŒ…ç¯å¢ƒå¤ªä½äº†ï¼Œæ‰€ä»¥æ˜¯æ‰‹åŠ¨é…ç½®electron+vue3ï¼ˆè™½ç„¶è¯´æ˜¯æ‰‹åŠ¨ã€‚ã€‚å…¶å®å°±ä¸¤ä¸ªæ­¥éª¤ï¼‰</p></blockquote><details>  <summary>ç›®å½•ç»“æ„</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">electron-vue-notes</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚   â”œâ”€â”€ css</span><br><span class="line">â”‚   â”œâ”€â”€ font</span><br><span class="line">â”‚   â””â”€â”€ index.html</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ assets</span><br><span class="line">â”‚   â”‚   â””â”€â”€ empty-content.svg</span><br><span class="line">â”‚   â”œâ”€â”€ components</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ message</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ rightClick</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ editor.vue</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ header.vue</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ input.vue</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ messageBox.vue</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ switch.vue</span><br><span class="line">â”‚   â”‚   â””â”€â”€ tick.vue</span><br><span class="line">â”‚   â”œâ”€â”€ config</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ browser.options.ts</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ classNames.options.ts</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ editorIcons.options.ts</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ index.ts</span><br><span class="line">â”‚   â”‚   â””â”€â”€ shortcuts.keys.ts</span><br><span class="line">â”‚   â”œâ”€â”€ inotedb</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.ts</span><br><span class="line">â”‚   â”œâ”€â”€ less</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.less</span><br><span class="line">â”‚   â”œâ”€â”€ router</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.ts</span><br><span class="line">â”‚   â”œâ”€â”€ script</span><br><span class="line">â”‚   â”‚   â””â”€â”€ deleteBuild.js</span><br><span class="line">â”‚   â”œâ”€â”€ store</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ exeConfig.state.ts</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.ts</span><br><span class="line">â”‚   â”œâ”€â”€ utils</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ errorLog.ts</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.ts</span><br><span class="line">â”‚   â”œâ”€â”€ views</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ editor.vue</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ index.vue</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ main.vue</span><br><span class="line">â”‚   â”‚   â””â”€â”€ setting.vue</span><br><span class="line">â”‚   â”œâ”€â”€ App.vue</span><br><span class="line">â”‚   â”œâ”€â”€ background.ts</span><br><span class="line">â”‚   â”œâ”€â”€ main.ts</span><br><span class="line">â”‚   â””â”€â”€ shims-vue.d.ts</span><br><span class="line">â”œâ”€â”€ .browserslistrc</span><br><span class="line">â”œâ”€â”€ .eslintrc.js</span><br><span class="line">â”œâ”€â”€ .prettierrc.js</span><br><span class="line">â”œâ”€â”€ babel.config.js</span><br><span class="line">â”œâ”€â”€ inoteError.log</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â”œâ”€â”€ vue.config.js</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure></details><h2 id="ä½¿ç”¨è„šæ‰‹æ¶æ­å»ºvue3ç¯å¢ƒ"><a href="#ä½¿ç”¨è„šæ‰‹æ¶æ­å»ºvue3ç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨è„šæ‰‹æ¶æ­å»ºvue3ç¯å¢ƒ"></a>ä½¿ç”¨è„šæ‰‹æ¶æ­å»ºvue3ç¯å¢ƒ</h2><p>æ²¡æœ‰è„šæ‰‹æ¶çš„å¯ä»¥å…ˆå®‰è£…è„šæ‰‹æ¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue&#x2F;cli</span><br></pre></td></tr></table></figure><p>åˆ›å»ºvue3é¡¹ç›®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">vue create electron-vue-notes</span><br><span class="line"></span><br><span class="line"># åç»­</span><br><span class="line">? Please pick a preset: (Use arrow keys)</span><br><span class="line">  Default ([Vue 2] babel, eslint)</span><br><span class="line">  Default (Vue 3 Preview) ([Vue 3] babel, eslint)</span><br><span class="line">&gt; Manually select features </span><br><span class="line"># æ‰‹åŠ¨é€‰æ‹©é…ç½®</span><br><span class="line"></span><br><span class="line"># åç»­æ‰€æœ‰é…ç½®</span><br><span class="line">? Please pick a preset: Manually select features</span><br><span class="line">? Check the features needed for your project: Choose Vue version, Babel, TS, Router, CSS Pre-processors, Linter</span><br><span class="line">? Choose a version of Vue.js that you want to start the project with 3.x (Preview)</span><br><span class="line">? Use class-style component syntax? Yes</span><br><span class="line">? Use Babel alongside TypeScript (required for modern mode, auto-detected polyfills, transpiling JSX)? Yes</span><br><span class="line">? Use history mode for router? (Requires proper server setup for index fallback in production) No</span><br><span class="line">? Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default): Less</span><br><span class="line">? Pick a linter &#x2F; formatter config: Prettier</span><br><span class="line">? Pick additional lint features: Lint on save, Lint and fix on commit</span><br><span class="line">? Where do you prefer placing config for Babel, ESLint, etc.? In dedicated config files</span><br><span class="line">? Save this as a preset for future projects? (y&#x2F;N) n</span><br></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0df556efb4754b5390ff87d5c8a2785b~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>åˆ›å»ºå®Œä¹‹åçš„ç›®å½•æ˜¯è¿™æ ·çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">electron-vue-notes</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚   â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚   â””â”€â”€ index.html</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ assets</span><br><span class="line">â”‚   â”‚   â””â”€â”€ logo.png</span><br><span class="line">â”‚   â”œâ”€â”€ components</span><br><span class="line">â”‚   â”‚   â””â”€â”€ HelloWorld.vue</span><br><span class="line">â”‚   â”œâ”€â”€ router</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.ts</span><br><span class="line">â”‚   â”œâ”€â”€ views</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ About.vue</span><br><span class="line">â”‚   â”‚   â””â”€â”€ Home.vue</span><br><span class="line">â”‚   â”œâ”€â”€ App.vue</span><br><span class="line">â”‚   â”œâ”€â”€ main.ts</span><br><span class="line">â”‚   â””â”€â”€ shims-vue.d.ts</span><br><span class="line">â”œâ”€â”€ .browserslistrc</span><br><span class="line">â”œâ”€â”€ .eslintrc.js</span><br><span class="line">â”œâ”€â”€ babel.config.js</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure></details><h2 id="å®‰è£…electronçš„ä¾èµ–"><a href="#å®‰è£…electronçš„ä¾èµ–" class="headerlink" title="å®‰è£…electronçš„ä¾èµ–"></a>å®‰è£…electronçš„ä¾èµ–</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># yarn</span><br><span class="line">yarn add vue-cli-plugin-electron-builder electron</span><br><span class="line"></span><br><span class="line"># npm æˆ– cnpm</span><br><span class="line">npm i vue-cli-plugin-electron-builder electron</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œä¹‹åå®Œå–„ä¸€äº›é…ç½®ï¼Œæ¯”å¦‚<code>åˆ«å</code>ã€<code>eslint</code>ã€<code>prettier</code>ç­‰ç­‰åŸºç¡€é…ç½®ï¼Œè¿˜æœ‰ä¸€äº›<code>é¢œè‰²</code>ã€<code>icons</code>ç­‰ç­‰å…·ä½“å¯ä»¥çœ‹ä¸‹é¢</p><h2 id="é¡¹ç›®çš„ä¸€äº›åŸºç¡€é…ç½®"><a href="#é¡¹ç›®çš„ä¸€äº›åŸºç¡€é…ç½®" class="headerlink" title="é¡¹ç›®çš„ä¸€äº›åŸºç¡€é…ç½®"></a>é¡¹ç›®çš„ä¸€äº›åŸºç¡€é…ç½®</h2><h3 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h3><p>ä½¿ç”¨eslintä¸»è¦æ˜¯è§„èŒƒä»£ç é£æ ¼ï¼Œä¸æ¨ètslintæ˜¯å› ä¸ºtslintå·²ç»ä¸æ›´æ–°äº†ï¼Œtslintä¹Ÿæ¨èä½¿ç”¨eslint<br>å®‰è£…eslint</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint -g</span><br></pre></td></tr></table></figure><p>è¿›å…¥é¡¹ç›®ä¹‹ååˆå§‹åŒ–eslint</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">eslint --init</span><br><span class="line"></span><br><span class="line"># åç»­é…ç½®</span><br><span class="line">? How would you like to use ESLint? To check syntax and find problems</span><br><span class="line">? What type of modules does your project use? JavaScript modules (import&#x2F;export)</span><br><span class="line">? Which framework does your project use? Vue.js</span><br><span class="line">? Does your project use TypeScript? Yes</span><br><span class="line">? Where does your code run? Browser, Node</span><br><span class="line">? What format do you want your config file to be in? JavaScript</span><br><span class="line">The config that you&#39;ve selected requires the following dependencies:</span><br><span class="line"></span><br><span class="line">eslint-plugin-vue@latest @typescript-eslint&#x2F;eslint-plugin@latest @typescript-eslint&#x2F;parser@latest</span><br><span class="line">? Would you like to install them now with npm? (Y&#x2F;n) y</span><br></pre></td></tr></table></figure><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/181f21660ba8447aaf5515c7447db3e1~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>ä¿®æ”¹eslinté…ç½®ï¼ŒÂ·<code>.eslintrc.js</code>ï¼Œè§„åˆ™<code>rules</code>å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œæ¬¢é…ç½®<br><a href="https://eslint.org/docs/user-guide/configuring" target="_blank" rel="noopener">https://eslint.org/docs/user-guide/configuring</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>,</span><br><span class="line">  env: &#123;</span><br><span class="line">    node: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  extends: [</span><br><span class="line">    <span class="string">'plugin:vue/vue3-essential'</span>,</span><br><span class="line">    <span class="string">'eslint:recommended'</span>,</span><br><span class="line">    <span class="string">'plugin:prettier/recommended'</span>,</span><br><span class="line">    <span class="string">'plugin:@typescript-eslint/eslint-recommended'</span>,</span><br><span class="line">    <span class="string">'@vue/typescript/recommended'</span>,</span><br><span class="line">    <span class="string">'@vue/prettier'</span>,</span><br><span class="line">    <span class="string">'@vue/prettier/@typescript-eslint'</span></span><br><span class="line">  ],</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    ecmaVersion: <span class="number">2020</span></span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    quotes: [<span class="number">1</span>, <span class="string">'single'</span>],</span><br><span class="line">    semi: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'@typescript-eslint/camelcase'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">'@typescript-eslint/no-explicit-any'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">'no-irregular-whitespace'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-case-declarations'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">'no-undef'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">'eol-last'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'block-scoped-var'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'comma-dangle'</span>: [<span class="number">2</span>, <span class="string">'never'</span>],</span><br><span class="line">    <span class="string">'no-dupe-keys'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-empty'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'no-extra-semi'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-multiple-empty-lines'</span>: [<span class="number">1</span>, &#123; <span class="attr">max</span>: <span class="number">1</span>, <span class="attr">maxEOF</span>: <span class="number">1</span> &#125;],</span><br><span class="line">    <span class="string">'no-trailing-spaces'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'semi-spacing'</span>: [<span class="number">2</span>, &#123; <span class="attr">before</span>: <span class="literal">false</span>, <span class="attr">after</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">    <span class="string">'no-unreachable'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'space-infix-ops'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'spaced-comment'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'no-var'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-multi-spaces'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'comma-spacing'</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="prettier"><a href="#prettier" class="headerlink" title="prettier"></a>prettier</h3><p>åœ¨æ ¹ç›®å½•å¢åŠ <code>.prettierrc.js</code>é…ç½®ï¼Œæ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œé…ç½®ï¼Œå•è¡Œå¤šå°‘ä¸ªå­—ç¬¦ã€å•å¼•å·ã€åˆ†å·ã€é€—å·ç»“å°¾ç­‰ç­‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  printWidth: <span class="number">120</span>,</span><br><span class="line">  singleQuote: <span class="literal">true</span>,</span><br><span class="line">  semi: <span class="literal">true</span>,</span><br><span class="line">  trailingComma: <span class="string">'none'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h3><p>å¦‚æœè¿™é‡Œæ²¡æœ‰é…ç½®è¯†åˆ«<code>@/</code>è·¯å¾„çš„è¯ï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ä¼šæŠ¥é”™</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"paths": &#123;</span><br><span class="line">  "@/*": [</span><br><span class="line">    <span class="string">"src/*"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">"author": "heiyehk",</span><br><span class="line">"description": "Iä¾¿ç¬ºä¸ªäººå¼€å‘è€…heiyehkç‹¬ç«‹å¼€å‘ï¼Œåœ¨Windowsä¸­æ›´æ–¹ä¾¿çš„è®°å½•æ–‡å­—ã€‚",</span><br><span class="line">"main": "background.js",</span><br><span class="line">"scripts": &#123;</span><br><span class="line">  "lint": "vue-cli-service lint",</span><br><span class="line">  "electron:build": "vue-cli-service electron:build",</span><br><span class="line">  "electron:serve": "vue-cli-service electron:serve"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®å…¥å£æ–‡ä»¶background-ts"><a href="#é…ç½®å…¥å£æ–‡ä»¶background-ts" class="headerlink" title="é…ç½®å…¥å£æ–‡ä»¶background.ts"></a>é…ç½®å…¥å£æ–‡ä»¶<code>background.ts</code></h3><p>å› ä¸ºéœ€è¦åšä¸€äº›æ‰“å¼€å’Œå…³é—­çš„åŠ¨æ•ˆï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é…ç½®<code>electron</code>ä¸º<code>frameæ— è¾¹æ¡†</code>å’Œ<code>é€æ˜transparent</code>çš„å±æ€§</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable @typescript-eslint/no-empty-function */</span></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; app, protocol, BrowserWindow, globalShortcut &#125; <span class="keyword">from</span> <span class="string">'electron'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createProtocol</span><br><span class="line">  <span class="comment">// installVueDevtools</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'vue-cli-plugin-electron-builder/lib'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isDevelopment = process.env.NODE_ENV !== <span class="string">'production'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> win: BrowserWindow | <span class="literal">null</span>;</span><br><span class="line">protocol.registerSchemesAsPrivileged([</span><br><span class="line">  &#123;</span><br><span class="line">    scheme: <span class="string">'app'</span>,</span><br><span class="line">    privileges: &#123;</span><br><span class="line">      secure: <span class="literal">true</span>,</span><br><span class="line">      standard: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  win = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">    frame: <span class="literal">false</span>, <span class="comment">// æ— è¾¹æ¡†</span></span><br><span class="line">    hasShadow: <span class="literal">false</span>,</span><br><span class="line">    transparent: <span class="literal">true</span>, <span class="comment">// é€æ˜</span></span><br><span class="line">    width: <span class="number">950</span>,</span><br><span class="line">    height: <span class="number">600</span>,</span><br><span class="line">    webPreferences: &#123;</span><br><span class="line">      enableRemoteModule: <span class="literal">true</span>,</span><br><span class="line">      nodeIntegration: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (process.env.WEBPACK_DEV_SERVER_URL) &#123;</span><br><span class="line">    win.loadURL(process.env.WEBPACK_DEV_SERVER_URL);</span><br><span class="line">    <span class="keyword">if</span> (!process.env.IS_TEST) win.webContents.openDevTools();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    createProtocol(<span class="string">'app'</span>);</span><br><span class="line">    win.loadURL(<span class="string">'http://localhost:8080'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  win.on(<span class="string">'closed'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    win = <span class="literal">null</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'window-all-closed'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (process.platform !== <span class="string">'darwin'</span>) &#123;</span><br><span class="line">    app.quit();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'activate'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (win === <span class="literal">null</span>) &#123;</span><br><span class="line">    createWindow();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'ready'</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæ³¨é‡Šæ‰æ˜¯å› ä¸ºä¼šå®‰è£…toolsæ’ä»¶ï¼Œéœ€è¦å±è”½æ‰ï¼Œæœ‰èƒ½åŠ›çš„è¯å¯ä»¥æ‰“å¼€æ³¨é‡Š</span></span><br><span class="line">  <span class="comment">// if (isDevelopment &amp;&amp; !process.env.IS_TEST) &#123;</span></span><br><span class="line">  <span class="comment">//   try &#123;</span></span><br><span class="line">  <span class="comment">//     await installVueDevtools();</span></span><br><span class="line">  <span class="comment">//   &#125; catch (e) &#123;</span></span><br><span class="line">  <span class="comment">//     console.error('Vue Devtools failed to install:', e.toString());</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  createWindow();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isDevelopment) &#123;</span><br><span class="line">  <span class="keyword">if</span> (process.platform === <span class="string">'win32'</span>) &#123;</span><br><span class="line">    process.on(<span class="string">'message'</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (data === <span class="string">'graceful-exit'</span>) &#123;</span><br><span class="line">        app.quit();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    process.on(<span class="string">'SIGTERM'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      app.quit();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn electron:serve</span><br></pre></td></tr></table></figure><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b716df6f49904b0fb4ab6b02826041bb~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>åˆ°è¿™é‡Œé…ç½®å°±ç®—æ˜¯æˆåŠŸæ­å»ºå¥½è¿™ä¸ªçª—å£äº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›å…¶ä»–ç»†èŠ‚éœ€è¦è¿›è¡Œé…ç½®ï¼Œæ¯”å¦‚<code>electronæ‰“åŒ…</code>é…ç½®ï¼Œ<code>æ¨¡å—åŒ–</code>çš„é…ç½®ç­‰ç­‰</p><h2 id="å¸¸è§„é…ç½®"><a href="#å¸¸è§„é…ç½®" class="headerlink" title="å¸¸è§„é…ç½®"></a>å¸¸è§„é…ç½®</h2><p>è¿™é‡Œé…ç½®ä¸€äº›å¸¸ç”¨çš„å¼€å‘å†…å®¹å’Œä¸€äº›è½®å­ä»£ç </p><h3 id="reset-csss"><a href="#reset-csss" class="headerlink" title="reset.csss"></a>reset.csss</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>&#123;<span class="attribute">font-family</span>:<span class="string">'MicrosoftÂ YaHeiÂ UI'</span>,<span class="string">'MicrosoftÂ YaHei'</span>,sans-serif;<span class="attribute">-ms-text-size-adjust</span>:<span class="number">100%</span>;<span class="attribute">-webkit-text-size-adjust</span>:<span class="number">100%</span>&#125;<span class="selector-tag">address</span>,<span class="selector-tag">applet</span>,<span class="selector-tag">article</span>,<span class="selector-tag">aside</span>,<span class="selector-tag">audio</span>,<span class="selector-tag">blockquote</span>,<span class="selector-tag">body</span>,<span class="selector-tag">canvas</span>,<span class="selector-tag">caption</span>,<span class="selector-tag">dd</span>,<span class="selector-tag">details</span>,<span class="selector-tag">div</span>,<span class="selector-tag">dl</span>,<span class="selector-tag">dt</span>,<span class="selector-tag">embed</span>,<span class="selector-tag">figcaption</span>,<span class="selector-tag">figure</span>,<span class="selector-tag">footer</span>,<span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,<span class="selector-tag">header</span>,<span class="selector-tag">html</span>,<span class="selector-tag">iframe</span>,<span class="selector-tag">li</span>,<span class="selector-tag">mark</span>,<span class="selector-tag">menu</span>,<span class="selector-tag">nav</span>,<span class="selector-tag">object</span>,<span class="selector-tag">ol</span>,<span class="selector-tag">output</span>,<span class="selector-tag">p</span>,<span class="selector-tag">pre</span>,<span class="selector-tag">progress</span>,<span class="selector-tag">ruby</span>,<span class="selector-tag">section</span>,<span class="selector-tag">summary</span>,<span class="selector-tag">table</span>,<span class="selector-tag">tbody</span>,<span class="selector-tag">td</span>,<span class="selector-tag">tfoot</span>,<span class="selector-tag">th</span>,<span class="selector-tag">thead</span>,<span class="selector-tag">time</span>,<span class="selector-tag">tr</span>,<span class="selector-tag">ul</span>,<span class="selector-tag">video</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>;<span class="attribute">border</span>:<span class="number">0</span>;<span class="attribute">vertical-align</span>:baseline&#125;<span class="selector-tag">article</span>,<span class="selector-tag">aside</span>,<span class="selector-tag">details</span>,<span class="selector-tag">figcaption</span>,<span class="selector-tag">figure</span>,<span class="selector-tag">footer</span>,<span class="selector-tag">header</span>,<span class="selector-tag">main</span>,<span class="selector-tag">menu</span>,<span class="selector-tag">nav</span>,<span class="selector-tag">section</span>,<span class="selector-tag">summary</span>&#123;<span class="attribute">display</span>:block&#125;<span class="selector-tag">audio</span>,<span class="selector-tag">canvas</span>,<span class="selector-tag">progress</span>,<span class="selector-tag">video</span>&#123;<span class="attribute">display</span>:inline-block&#125;<span class="selector-tag">audio</span><span class="selector-pseudo">:not(</span><span class="selector-attr">[controls]</span>)&#123;<span class="attribute">display</span>:none;<span class="attribute">height</span>:<span class="number">0</span>&#125;<span class="selector-attr">[hidden]</span>,<span class="selector-tag">template</span>&#123;<span class="attribute">display</span>:none&#125;<span class="selector-tag">a</span>&#123;<span class="attribute">background-color</span>:transparent;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:active</span>,<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">outline</span>:<span class="number">0</span>&#125;<span class="selector-tag">abbr</span><span class="selector-attr">[title]</span>&#123;<span class="attribute">border-bottom</span>:<span class="number">1px</span> dotted&#125;<span class="selector-tag">b</span>,<span class="selector-tag">strong</span>&#123;<span class="attribute">font-weight</span>:<span class="number">700</span>&#125;<span class="selector-tag">dfn</span>&#123;<span class="attribute">font-style</span>:italic&#125;<span class="selector-tag">h1</span>&#123;<span class="attribute">font-size</span>:<span class="number">2em</span>;<span class="attribute">margin</span>:.<span class="number">67em</span> <span class="number">0</span>&#125;<span class="selector-tag">mark</span>&#123;<span class="attribute">background</span>:<span class="number">#ff0</span>;<span class="attribute">color</span>:<span class="number">#000</span>&#125;<span class="selector-tag">small</span>&#123;<span class="attribute">font-size</span>:<span class="number">80%</span>&#125;<span class="selector-tag">sub</span>,<span class="selector-tag">sup</span>&#123;<span class="attribute">font-size</span>:<span class="number">75%</span>;<span class="attribute">line-height</span>:<span class="number">0</span>;<span class="attribute">position</span>:relative;<span class="attribute">vertical-align</span>:baseline&#125;<span class="selector-tag">sup</span>&#123;<span class="attribute">top</span>:-.<span class="number">5em</span>&#125;<span class="selector-tag">sub</span>&#123;<span class="attribute">bottom</span>:-.<span class="number">25em</span>&#125;<span class="selector-tag">img</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>&#125;<span class="selector-tag">svg</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:root)</span>&#123;<span class="attribute">overflow</span>:hidden&#125;<span class="selector-tag">figure</span>&#123;<span class="attribute">margin</span>:<span class="number">1em</span> <span class="number">40px</span>&#125;<span class="selector-tag">hr</span>&#123;<span class="attribute">-moz-box-sizing</span>:content-box;<span class="attribute">box-sizing</span>:content-box;<span class="attribute">height</span>:<span class="number">0</span>&#125;<span class="selector-tag">pre</span>&#123;<span class="attribute">overflow</span>:auto&#125;<span class="selector-tag">code</span>,<span class="selector-tag">kbd</span>,<span class="selector-tag">pre</span>,<span class="selector-tag">samp</span>&#123;<span class="attribute">font-family</span>:monospace,monospace;<span class="attribute">font-size</span>:<span class="number">1em</span>&#125;<span class="selector-tag">button</span>,<span class="selector-tag">input</span>,<span class="selector-tag">optgroup</span>,<span class="selector-tag">select</span>,<span class="selector-tag">textarea</span>&#123;<span class="attribute">color</span>:inherit;<span class="attribute">font</span>:inherit;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">outline</span>:<span class="number">0</span>;<span class="attribute">line-height</span>:normal&#125;<span class="selector-tag">button</span>&#123;<span class="attribute">overflow</span>:visible&#125;<span class="selector-tag">button</span>,<span class="selector-tag">select</span>&#123;<span class="attribute">text-transform</span>:none&#125;<span class="selector-tag">button</span>,<span class="selector-tag">html</span> <span class="selector-tag">input</span><span class="selector-attr">[type=button]</span>,<span class="selector-tag">input</span><span class="selector-attr">[type=reset]</span>,<span class="selector-tag">input</span><span class="selector-attr">[type=submit]</span>&#123;<span class="attribute">-webkit-appearance</span>:button;<span class="attribute">cursor</span>:pointer&#125;<span class="selector-tag">button</span><span class="selector-attr">[disabled]</span>,<span class="selector-tag">html</span> <span class="selector-tag">input</span><span class="selector-attr">[disabled]</span>&#123;<span class="attribute">cursor</span>:default&#125;<span class="selector-tag">button</span><span class="selector-pseudo">::-moz-focus-inner</span>,<span class="selector-tag">input</span><span class="selector-pseudo">::-moz-focus-inner</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>&#125;<span class="selector-tag">input</span>&#123;<span class="attribute">line-height</span>:normal&#125;<span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span>,<span class="selector-tag">input</span><span class="selector-attr">[type=radio]</span>&#123;<span class="attribute">box-sizing</span>:border-box;<span class="attribute">padding</span>:<span class="number">0</span>&#125;<span class="selector-tag">input</span><span class="selector-attr">[type=number]</span><span class="selector-pseudo">::-webkit-inner-spin-button</span>,<span class="selector-tag">input</span><span class="selector-attr">[type=number]</span><span class="selector-pseudo">::-webkit-outer-spin-button</span>&#123;<span class="attribute">height</span>:auto&#125;<span class="selector-tag">input</span><span class="selector-attr">[type=search]</span>&#123;<span class="attribute">-webkit-appearance</span>:textfield;<span class="attribute">-moz-box-sizing</span>:content-box;<span class="attribute">-webkit-box-sizing</span>:content-box;<span class="attribute">box-sizing</span>:content-box&#125;<span class="selector-tag">input</span><span class="selector-attr">[type=search]</span><span class="selector-pseudo">::-webkit-search-cancel-button</span>,<span class="selector-tag">input</span><span class="selector-attr">[type=search]</span><span class="selector-pseudo">::-webkit-search-decoration</span>&#123;<span class="attribute">-webkit-appearance</span>:none&#125;<span class="selector-tag">fieldset</span>&#123;<span class="attribute">border</span>:<span class="number">1px</span> solid silver;<span class="attribute">margin</span>:<span class="number">0</span> <span class="number">2px</span>;<span class="attribute">padding</span>:.<span class="number">35em</span> .<span class="number">625em</span> .<span class="number">75em</span>&#125;<span class="selector-tag">legend</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>&#125;<span class="selector-tag">textarea</span>&#123;<span class="attribute">overflow</span>:auto&#125;<span class="selector-tag">optgroup</span>&#123;<span class="attribute">font-weight</span>:<span class="number">700</span>&#125;<span class="selector-tag">table</span>&#123;<span class="attribute">border-collapse</span>:collapse;<span class="attribute">border-spacing</span>:<span class="number">0</span>&#125;<span class="selector-tag">td</span>,<span class="selector-tag">th</span>&#123;<span class="attribute">padding</span>:<span class="number">0</span>&#125;<span class="selector-pseudo">::-ms-clear</span>,<span class="selector-pseudo">::-ms-reveal</span>&#123;<span class="attribute">display</span>:none&#125;<span class="selector-tag">input</span><span class="selector-pseudo">:-webkit-autofill</span>&#123;<span class="attribute">-webkit-animation</span>:autofill-fix <span class="number">1s</span> infinite<span class="meta">!important</span>;<span class="attribute">-webkit-text-fill-color</span>:<span class="number">#666</span>;<span class="attribute">-webkit-transition</span>:background-color <span class="number">50000s</span> ease-in-out <span class="number">0s</span><span class="meta">!important</span>;<span class="attribute">transition</span>:background-color <span class="number">50000s</span> ease-in-out <span class="number">0s</span><span class="meta">!important</span>;<span class="attribute">background-color</span>:transparent<span class="meta">!important</span>;<span class="attribute">background-image</span>:none<span class="meta">!important</span>;<span class="attribute">-webkit-box-shadow</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1000px</span> transparent inset<span class="meta">!important</span>&#125;<span class="selector-attr">[role=button]</span>,<span class="selector-tag">a</span>,<span class="selector-tag">area</span>,<span class="selector-tag">button</span>,<span class="selector-tag">input</span><span class="selector-pseudo">:not(</span><span class="selector-attr">[type=range]</span>),<span class="selector-tag">label</span>,<span class="selector-tag">select</span>,<span class="selector-tag">summary</span>,<span class="selector-tag">textarea</span>&#123;<span class="attribute">-ms-touch-action</span>:manipulation;<span class="attribute">touch-action</span>:manipulation&#125;<span class="selector-tag">input</span><span class="selector-attr">[type=number]</span>,<span class="selector-tag">input</span><span class="selector-attr">[type=password]</span>,<span class="selector-tag">input</span><span class="selector-attr">[type=text]</span>,<span class="selector-tag">textarea</span>&#123;<span class="attribute">-webkit-appearance</span>:none&#125;</span><br></pre></td></tr></table></figure><h3 id="common-css"><a href="#common-css" class="headerlink" title="common.css"></a>common.css</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç©ºå…ƒç´ æ˜¾ç¤ºçš„å†…å®¹ */</span></span><br><span class="line"><span class="selector-class">.empty-content</span><span class="selector-pseudo">:empty</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="comment">/* content: attr(placeholder); */</span></span><br><span class="line">  <span class="attribute">content</span>: <span class="string">'è®°ç¬”è®°...'</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">21px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* éšè—æ»šåŠ¨æ¡ */</span></span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è®¾ç½®olæ˜¾ç¤ºæ ¼å¼ */</span></span><br><span class="line"><span class="selector-class">.module-editor</span> <span class="selector-tag">ol</span> &#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>:sectioncounter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.module-editor</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.module-editor</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(sectioncounter) <span class="string">'.'</span>;</span><br><span class="line">  <span class="attribute">counter-increment</span>:sectioncounter;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä½¿ç”¨è‡ªå®šä¹‰ä¼ªç±»ä¼šå¯¼è‡´å…‰æ ‡åç§»å‘ä¸‹ */</span></span><br><span class="line"><span class="comment">/* .module-editor ul &#123;</span></span><br><span class="line"><span class="comment">  position: relative;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">.module-editor ul li &#123;</span></span><br><span class="line"><span class="comment">  list-style-type: none;</span></span><br><span class="line"><span class="comment">  word-break: break-all;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">.module-editor ul li::before &#123;</span></span><br><span class="line"><span class="comment">  content: '';</span></span><br><span class="line"><span class="comment">  width: 5px;</span></span><br><span class="line"><span class="comment">  height: 5px;</span></span><br><span class="line"><span class="comment">  background-color: #000;</span></span><br><span class="line"><span class="comment">  margin-right: 6px;</span></span><br><span class="line"><span class="comment">  display: inline-block;</span></span><br><span class="line"><span class="comment">  border-radius: 100%;</span></span><br><span class="line"><span class="comment">  transform: translateY(-2px);</span></span><br><span class="line"><span class="comment">  margin-left: 1px;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.module-editor</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">  <span class="attribute">list-style</span>: disc inside;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¸¸ç”¨flexå¸ƒå±€ */</span></span><br><span class="line"><span class="selector-class">.flex</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flex-center</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flex-left</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flex-right</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-end;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flex-items</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flex-between</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flex1</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Â ellipsÂ */</span></span><br><span class="line"><span class="selector-class">.hidden</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span>,</span><br><span class="line"><span class="selector-class">.app</span>,</span><br><span class="line"><span class="selector-class">.transition</span>,</span><br><span class="line"><span class="selector-class">.bg-white</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bg-white</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è½¯ä»¶é˜´å½± */</span></span><br><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">4px</span> <span class="built_in">rgb</span>(<span class="number">185</span>, <span class="number">185</span>, <span class="number">185</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">user-select</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> fadein &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.8</span>);</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> fadeout &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è¿›å…¥å’Œé€€å‡ºåŠ¨æ•ˆ */</span></span><br><span class="line"><span class="selector-class">.app-show</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: fadein <span class="number">0.4s</span> forwards;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.app-hide</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: fadeout <span class="number">0.2s</span> forwards;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¢œè‰² */</span></span><br><span class="line"><span class="selector-class">.yellow-content</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.4s</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff7d1</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.green-content</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.4s</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e4f9e0</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pink-content</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.4s</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ffe4f1</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.purple-content</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.4s</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f2e6ff</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.blue-content</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.4s</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e2f1ff</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.gray-content</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.4s</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f3f2f1</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.black-content</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.4s</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#696969</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.black-content</span> * &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="config"><a href="#config" class="headerlink" title="config"></a>config</h3><p>è¿™ä¸ªå¯¹åº”é¡¹ç›®ä¸­çš„configæ–‡ä»¶å¤¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">config</span><br><span class="line">â”œâ”€â”€ browser.options.ts # çª—å£çš„é…ç½®</span><br><span class="line">â”œâ”€â”€ classNames.options.ts # æ ·å¼åçš„é…ç½®ï¼ŒèƒŒæ™¯æ ·å¼éƒ½é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ¸²æŸ“</span><br><span class="line">â”œâ”€â”€ editorIcons.options.ts # ç¼–è¾‘é¡µé¢çš„ä¸€äº›editorå›¾æ ‡</span><br><span class="line">â”œâ”€â”€ index.ts # å¯¼å‡º</span><br><span class="line">â””â”€â”€ shortcuts.keys.ts # ç¦ç”¨çš„ä¸€äº›å¿«æ·é”®ï¼Œelectronæ˜¯åŸºäºchromiumæµè§ˆå™¨ï¼Œæ‰€ä»¥ä¹Ÿå­˜åœ¨ä¸€äº›æµè§ˆå™¨å¿«æ·é”®æ¯”å¦‚F5</span><br></pre></td></tr></table></figure><h4 id="browser-options"><a href="#browser-options" class="headerlink" title="browser.options"></a>browser.options</h4><p>è¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦ä½œç”¨å°±æ˜¯é…ç½®ä¸»çª—å£å’Œç¼–è¾‘çª—å£åŒºåˆ†å¼€å‘æ­£å¼çš„é…ç½®ï¼Œå®½é«˜ç­‰ç­‰ï¼Œä»¥åŠè¦æ˜¾ç¤ºçš„ä¸»é¡µé¢</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è½¯ä»¶æ•°æ®å’Œé…ç½®</span></span><br><span class="line"><span class="comment"> * C:\Users\&#123;ç”¨æˆ·å&#125;\AppData\Roaming</span></span><br><span class="line"><span class="comment"> * å…±äº«</span></span><br><span class="line"><span class="comment"> * C:\ProgramData\Intel\ShaderCache\i-notes&#123;xx&#125;</span></span><br><span class="line"><span class="comment"> * å¿«æ·æ–¹å¼</span></span><br><span class="line"><span class="comment"> * C:\Users\&#123;ç”¨æˆ·å&#125;\AppData\Roaming\Microsoft\Windows\Recent</span></span><br><span class="line"><span class="comment"> * ç”µè„‘è‡ªåŠ¨åˆ›å»ºç¼“å­˜</span></span><br><span class="line"><span class="comment"> * C:\Windows\Prefetch\I-NOTES.EXE&#123;xx&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** */</span></span><br><span class="line"><span class="keyword">const</span> globalEnv = process.env.NODE_ENV;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> devWid = globalEnv === <span class="string">'development'</span> ? <span class="number">950</span> : <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> devHei = globalEnv === <span class="string">'development'</span> ? <span class="number">600</span> : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº•éƒ¨icon: 40*40</span></span><br><span class="line"><span class="keyword">const</span> editorWindowOptions = &#123;</span><br><span class="line">  width: devWid || <span class="number">290</span>,</span><br><span class="line">  height: devHei || <span class="number">350</span>,</span><br><span class="line">  minWidth: <span class="number">250</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * BrowserWindowçš„é…ç½®é¡¹</span></span><br><span class="line"><span class="comment"> * @param type å•ç‹¬ç»™ç¼–è¾‘çª—å£çš„é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> browserWindowOption = (<span class="keyword">type</span>?: <span class="string">'editor'</span>): Electron.BrowserWindowConstructorOptions =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> commonOptions = &#123;</span><br><span class="line">    minHeight: <span class="number">48</span>,</span><br><span class="line">    frame: <span class="literal">false</span>,</span><br><span class="line">    hasShadow: <span class="literal">true</span>,</span><br><span class="line">    transparent: <span class="literal">true</span>,</span><br><span class="line">    webPreferences: &#123;</span><br><span class="line">      enableRemoteModule: <span class="literal">true</span>,</span><br><span class="line">      nodeIntegration: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">type</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      width: devWid || <span class="number">350</span>,</span><br><span class="line">      height: devHei || <span class="number">600</span>,</span><br><span class="line">      minWidth: <span class="number">320</span>,</span><br><span class="line">      ...commonOptions</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...editorWindowOptions,</span><br><span class="line">    ...commonOptions</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¼€å‘ç¯å¢ƒ: http://localhost:8080</span></span><br><span class="line"><span class="comment"> * æ­£å¼ç¯å¢ƒ: file://$&#123;__dirname&#125;/index.html</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> winURL = globalEnv === <span class="string">'development'</span> ? <span class="string">'http://localhost:8080'</span> : <span class="string">`file://<span class="subst">$&#123;__dirname&#125;</span>/index.html`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; browserWindowOption, winURL &#125;;</span><br></pre></td></tr></table></figure><h4 id="classNames-options"><a href="#classNames-options" class="headerlink" title="classNames.options"></a>classNames.options</h4><p>å¦‚æœæƒ³è¦æ›´å¤šçš„é¢œè‰²ç›´æ¥æ·»åŠ å³å¯</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * - `yellow-content` é»„è‰²</span></span><br><span class="line"><span class="comment"> * - `green-content` ç»¿è‰²</span></span><br><span class="line"><span class="comment"> * - `pink-content` ç²‰è‰²</span></span><br><span class="line"><span class="comment"> * - `purple-content` ç´«è‰²</span></span><br><span class="line"><span class="comment"> * - `blue-content` è“è‰²</span></span><br><span class="line"><span class="comment"> * - `gray-content` ç°è‰²</span></span><br><span class="line"><span class="comment"> * - `black-content` é»‘è‰²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> classNames = [</span><br><span class="line">  <span class="comment">// &#123;</span></span><br><span class="line">  <span class="comment">//   color: 'white-content',</span></span><br><span class="line">  <span class="comment">//   title: 'ç™½è‰²'</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  &#123;</span><br><span class="line">    className: <span class="string">'yellow-content'</span>,</span><br><span class="line">    title: <span class="string">'é»„è‰²'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    className: <span class="string">'green-content'</span>,</span><br><span class="line">    title: <span class="string">'ç»¿è‰²'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    className: <span class="string">'pink-content'</span>,</span><br><span class="line">    title: <span class="string">'ç²‰è‰²'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    className: <span class="string">'purple-content'</span>,</span><br><span class="line">    title: <span class="string">'ç´«è‰²'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    className: <span class="string">'blue-content'</span>,</span><br><span class="line">    title: <span class="string">'è“è‰²'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    className: <span class="string">'gray-content'</span>,</span><br><span class="line">    title: <span class="string">'ç°è‰²'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    className: <span class="string">'black-content'</span>,</span><br><span class="line">    title: <span class="string">'é»‘è‰²'</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> classNames;</span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure><h4 id="editorIcons-options"><a href="#editorIcons-options" class="headerlink" title="editorIcons.options"></a>editorIcons.options</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * - `bold` åŠ ç²—</span></span><br><span class="line"><span class="comment"> * - `italic` æ–œä½“</span></span><br><span class="line"><span class="comment"> * - `underline` ä¸‹åˆ’çº¿</span></span><br><span class="line"><span class="comment"> * - `strikethrough` åˆ é™¤çº¿</span></span><br><span class="line"><span class="comment"> * - `insertUnorderedList` æ— åºåˆ—è¡¨</span></span><br><span class="line"><span class="comment"> * - `insertOrderedList` æœ‰åºåˆ—è¡¨</span></span><br><span class="line"><span class="comment"> * - `image` å›¾ç‰‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> editorIcons = [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'bold'</span>,</span><br><span class="line">    title: <span class="string">'åŠ ç²—'</span>,</span><br><span class="line">    icon: <span class="string">'icon-editor-bold'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'italic'</span>,</span><br><span class="line">    title: <span class="string">'æ–œä½“'</span>,</span><br><span class="line">    icon: <span class="string">'icon-italic'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'underline'</span>,</span><br><span class="line">    title: <span class="string">'ä¸‹åˆ’çº¿'</span>,</span><br><span class="line">    icon: <span class="string">'icon-underline'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'strikethrough'</span>,</span><br><span class="line">    title: <span class="string">'åˆ é™¤çº¿'</span>,</span><br><span class="line">    icon: <span class="string">'icon-strikethrough'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'insertUnorderedList'</span>,</span><br><span class="line">    title: <span class="string">'æ— åºåˆ—è¡¨'</span>,</span><br><span class="line">    icon: <span class="string">'icon-ul'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'insertOrderedList'</span>,</span><br><span class="line">    title: <span class="string">'æœ‰åºåˆ—è¡¨'</span>,</span><br><span class="line">    icon: <span class="string">'icon-ol'</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//   name: 'image',</span></span><br><span class="line">    <span class="comment">//   title: 'å›¾ç‰‡',</span></span><br><span class="line">    <span class="comment">//   icon: 'icon-image'</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> editorIcons;</span><br></pre></td></tr></table></figure><h4 id="shortcuts-keys"><a href="#shortcuts-keys" class="headerlink" title="shortcuts.keys"></a>shortcuts.keys</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * - F11 ç¦ç”¨å…¨å±æ”¾å¤§</span></span><br><span class="line"><span class="comment"> * - CTRL+R ç¦ç”¨åˆ·æ–°</span></span><br><span class="line"><span class="comment"> * - CTRL+SHIFT+R ç¦ç”¨åˆ·æ–°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> devShortcuts = [<span class="string">'F11'</span>, <span class="string">'Ctrl+R'</span>, <span class="string">'Ctrl+SHIFT+R'</span>]; <span class="comment">// è¿™é‡Œä¸»è¦æ˜¯åœ¨å¼€å‘ä¸­éœ€è¦ç”¨åˆ°ï¼Œä½†æ˜¯æ­£å¼ç¯å¢ƒéœ€è¦å±è”½çš„å¿«æ·é”®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> shortcuts = [<span class="string">'Ctrl+N'</span>, <span class="string">'SHIFT+F10'</span>, <span class="string">'Ctrl+SHIFT+I'</span>]; <span class="comment">// è¿™é‡Œæ˜¯ç›´æ¥å±è”½æ‰çš„å¿«æ·é”®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> exportKeys = process.env.NODE_ENV === <span class="string">'development'</span> ? shortcuts : [...devShortcuts, ...shortcuts];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> exportKeys;</span><br></pre></td></tr></table></figure><h4 id="index"><a href="#index" class="headerlink" title="index"></a>index</h4><p>å¯¼å‡º</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">'./classNames.options'</span>;</span><br><span class="line"><span class="keyword">import</span> editorIcons <span class="keyword">from</span> <span class="string">'./editorIcons.options'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; browserWindowOption, winURL &#125; <span class="keyword">from</span> <span class="string">'./browser.options'</span>;</span><br><span class="line"><span class="keyword">import</span> shortcutsKeys <span class="keyword">from</span> <span class="string">'./shortcuts.keys'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; classNames, editorIcons, browserWindowOption, winURL, shortcutsKeys &#125;;</span><br></pre></td></tr></table></figure><h4 id="è°ƒæ•´background-ts"><a href="#è°ƒæ•´background-ts" class="headerlink" title="è°ƒæ•´background.ts"></a>è°ƒæ•´background.ts</h4><p>é…ç½®å®Œconfigä¹‹åéœ€è¦å†è°ƒæ•´ä¸€ä¸‹<code>background.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹createWindowæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  win = <span class="keyword">new</span> BrowserWindow(browserWindowOption());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (process.env.WEBPACK_DEV_SERVER_URL) &#123;</span><br><span class="line">    win.loadURL(process.env.WEBPACK_DEV_SERVER_URL);</span><br><span class="line">    <span class="keyword">if</span> (!process.env.IS_TEST) win.webContents.openDevTools();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    createProtocol(<span class="string">'app'</span>);</span><br><span class="line">    win.loadURL(winURL);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  win.on(<span class="string">'closed'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    win = <span class="literal">null</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">app.on(<span class="string">'ready'</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// å¿«æ·é”®ç¦ç”¨</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key of shortcutsKeys) &#123;</span><br><span class="line">    globalShortcut.register(key, <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  createWindow();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="vue-config-js"><a href="#vue-config-js" class="headerlink" title="vue.config.js"></a>vue.config.js</h3><h4 id="åˆ›å»ºvue-config-jsæ–‡ä»¶"><a href="#åˆ›å»ºvue-config-jsæ–‡ä»¶" class="headerlink" title="åˆ›å»ºvue.config.jsæ–‡ä»¶"></a>åˆ›å»ºvue.config.jsæ–‡ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable @typescript-eslint/no-var-requires */</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  productionSourceMap: <span class="literal">false</span>,</span><br><span class="line">  configureWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'development'</span>) &#123;/</span><br><span class="line">    <span class="comment">// æ¸…é™¤å¼€å‘ä¸­debugå’Œconsole.logç­‰ç­‰</span></span><br><span class="line">      config.optimization.minimizer[<span class="number">0</span>].options.terserOptions.warnings = <span class="literal">false</span>;</span><br><span class="line">      config.optimization.minimizer[<span class="number">0</span>].options.terserOptions.compress = &#123;</span><br><span class="line">        warnings: <span class="literal">false</span>,</span><br><span class="line">        drop_console: <span class="literal">true</span>,</span><br><span class="line">        drop_debugger: <span class="literal">true</span>,</span><br><span class="line">        pure_funcs: [<span class="string">'console.log'</span>]</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  pluginOptions: &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯electronbuildçš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">    electronBuilder: &#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œæ˜¯åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨nodeç¯å¢ƒï¼Œéœ€è¦ä¸ºtrue</span></span><br><span class="line">      nodeIntegration: <span class="literal">true</span>,</span><br><span class="line">      builderOptions: &#123;</span><br><span class="line">        productName: <span class="string">'Iä¾¿ç¬º'</span>,</span><br><span class="line">        appId: <span class="string">'com.inote.heiyehk'</span>,</span><br><span class="line">        copyright: <span class="string">'heiyehk'</span>,</span><br><span class="line">        compression: <span class="string">'store'</span>, <span class="comment">// "store" | "normal"| "maximum" æ‰“åŒ…å‹ç¼©æƒ…å†µ(store ç›¸å¯¹è¾ƒå¿«)ï¼Œstore 39749kb, maximum 39186kb</span></span><br><span class="line">        <span class="comment">// directories: &#123;</span></span><br><span class="line">        <span class="comment">//   output: 'build' // è¾“å‡ºæ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        win: &#123;</span><br><span class="line">          <span class="comment">// icon: 'xxx/icon.ico',</span></span><br><span class="line">          target: [<span class="string">'nsis'</span>, <span class="string">'zip'</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        mac: &#123;</span><br><span class="line">          target: &#123; <span class="attr">target</span>: <span class="string">'dir'</span>, <span class="attr">arch</span>: <span class="string">'arm64'</span> &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        nsis: &#123;</span><br><span class="line">          oneClick: <span class="literal">false</span>, <span class="comment">// ä¸€é”®å®‰è£…</span></span><br><span class="line">          <span class="comment">// guid: 'xxxx', // æ³¨å†Œè¡¨åå­—ï¼Œä¸æ¨èä¿®æ”¹</span></span><br><span class="line">          perMachine: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¼€å¯å®‰è£…æ—¶æƒé™é™åˆ¶ï¼ˆæ­¤ç”µè„‘æˆ–å½“å‰ç”¨æˆ·ï¼‰</span></span><br><span class="line">          allowElevation: <span class="literal">true</span>, <span class="comment">// å…è®¸è¯·æ±‚æå‡ã€‚ å¦‚æœä¸ºfalseï¼Œåˆ™ç”¨æˆ·å¿…é¡»ä½¿ç”¨æå‡çš„æƒé™é‡æ–°å¯åŠ¨å®‰è£…ç¨‹åºã€‚</span></span><br><span class="line">          allowToChangeInstallationDirectory: <span class="literal">true</span>, <span class="comment">// å…è®¸ä¿®æ”¹å®‰è£…ç›®å½•</span></span><br><span class="line">          <span class="comment">// installerIcon: './build/icons/aaa.ico', // å®‰è£…å›¾æ ‡</span></span><br><span class="line">          <span class="comment">// uninstallerIcon: './build/icons/bbb.ico', // å¸è½½å›¾æ ‡</span></span><br><span class="line">          <span class="comment">// installerHeaderIcon: './build/icons/aaa.ico', // å®‰è£…æ—¶å¤´éƒ¨å›¾æ ‡</span></span><br><span class="line">          createDesktopShortcut: <span class="literal">true</span>, <span class="comment">// åˆ›å»ºæ¡Œé¢å›¾æ ‡</span></span><br><span class="line">          createStartMenuShortcut: <span class="literal">true</span>, <span class="comment">// åˆ›å»ºå¼€å§‹èœå•å›¾æ ‡</span></span><br><span class="line">          shortcutName: <span class="string">'iä¾¿ç¬º'</span> <span class="comment">// å›¾æ ‡åç§°</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'style-resources-loader'</span>: &#123;</span><br><span class="line">      preProcessor: <span class="string">'less'</span>,</span><br><span class="line">      patterns: [path.resolve(__dirname, <span class="string">'src/less/index.less'</span>)] <span class="comment">// å¼•å…¥å…¨å±€æ ·å¼å˜é‡</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨å…¨å±€lesså˜é‡"><a href="#ä½¿ç”¨å…¨å±€lesså˜é‡" class="headerlink" title="ä½¿ç”¨å…¨å±€lesså˜é‡"></a>ä½¿ç”¨å…¨å±€lesså˜é‡</h4><p>è¿™é‡Œéœ€è¦ä½¿ç”¨å…¨å±€lesså˜é‡ï¼Œå®‰è£…<code>style-resources-loader</code>ï¼Œå®‰è£…å®Œä¹‹åä¼šé»˜è®¤åœ¨vue.config.jsä¸­é…ç½®ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸‹è·¯å¾„å³å¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue add style-resources-loader</span><br></pre></td></tr></table></figure><h4 id="index-lessé…ç½®"><a href="#index-lessé…ç½®" class="headerlink" title="index.lessé…ç½®"></a>index.lessé…ç½®</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@primary-color:</span> <span class="number">#027aff</span>;</span><br><span class="line"><span class="variable">@success-color:</span> <span class="number">#19be6b</span>;</span><br><span class="line"><span class="variable">@warning-color:</span> <span class="number">#ff9900</span>;</span><br><span class="line"><span class="variable">@error-color:</span> <span class="number">#ed4014</span>;</span><br><span class="line"><span class="variable">@white-color:</span> <span class="number">#ffffff</span>;</span><br><span class="line"><span class="variable">@gray-color:</span> <span class="number">#efefef</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">@text-color:</span> <span class="number">#000000</span>;</span><br><span class="line"><span class="variable">@text-sub-color:</span> <span class="number">#00000073</span>;</span><br><span class="line"><span class="variable">@border-color:</span> <span class="number">#d9d9d9</span>;</span><br><span class="line"><span class="variable">@disabled-color:</span> <span class="number">#c5c8ce</span>;</span><br><span class="line"><span class="variable">@background-color:</span> <span class="number">#f3f3f3</span>;</span><br><span class="line"><span class="variable">@background-sub-color:</span> <span class="number">#eeeeee</span>;</span><br><span class="line"><span class="variable">@shadown-color:</span> <span class="number">#cccccc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤´éƒ¨iconsize</span></span><br><span class="line"><span class="variable">@headerIconFontSize:</span> <span class="number">22px</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤´éƒ¨é«˜åº¦ã€åº•éƒ¨åŠŸèƒ½æŒ‰é’®å’Œiconçš„å®½é«˜å¤§å°æ˜¯ä¸€è‡´çš„</span></span><br><span class="line"><span class="variable">@iconSize:</span> <span class="number">40px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@iconSize</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="variable">@iconSize</span>;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="variable">@iconSize</span>;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="variable">@iconSize</span>;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">background-color</span>: transparent;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: initial;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">      <span class="attribute">background-color</span>: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸è¦è®©è‡ªå·±çš„ä¸Šé™æˆä¸ºä½ çš„åº•çº¿&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è¯ˆå°¸æ›´æ–°ç³»åˆ—ï¼Œä¸ºäº†è·Ÿä¸Šè„šæ­¥ï¼Œå°è¯•äº†vue3ï¼Œåœ¨å­¦ä¹ vue3çš„æ—¶å€™é¡ºä¾¿å­¦ä¹ ä¸€æ‰‹electronå’Œtsï¼Œæœ¬æ•™ç¨‹å°†åˆ†åˆ«å‘å¸ƒï¼Œæºç ä¼šåœ¨æœ€åçš„æ–‡ç« å‘å¸ƒã€‚å› ä¸ºè¿˜åœ¨å¼€å‘ä¸­ï¼Œç›®å‰ä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢æœ‰äº›é‡åˆ°å‘ä¸ä¼šåŠæ—¶å¿˜æ‰ï¼Œæ‰€ä»¥å…ˆæ•´ç†ä¸€éƒ¨åˆ†å‡ºæ¥&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å°†åˆ†2éƒ¨åˆ†å‘å‡ºæ•™ç¨‹ï¼Œå› ä¸ºé…ç½®çš„ä¸œè¥¿ä¸ªäººæ„Ÿè§‰æœ‰ç‚¹å¤šå¹¶ä¸”è·Ÿå¼€å‘å†…å®¹ç›¸å…³çš„ä¸œè¥¿å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œå› æ­¤å•ç‹¬å‘å‡ºï¼Œè§è°…ï¼Œç¬¬äºŒç¯‡è¿™ä¸¤å¤©å‘å‡ºï¼Œé•¿æ–‡è­¦å‘Šï¼âš ã€‚&lt;br&gt;&lt;a href=&quot;https://juejin.cn/post/6910102694178848781&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ã€electron+vue3+tså®æˆ˜ä¾¿ç¬ºexeã€‘äºŒã€electron+vue3å¼€å‘å†…å®¹&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="electron" scheme="https://heiyehk.github.io/blog/categories/electron/"/>
    
      <category term="vue3" scheme="https://heiyehk.github.io/blog/categories/electron/vue3/"/>
    
      <category term="ts" scheme="https://heiyehk.github.io/blog/categories/electron/vue3/ts/"/>
    
    
      <category term="electron" scheme="https://heiyehk.github.io/blog/tags/electron/"/>
    
      <category term="vue3" scheme="https://heiyehk.github.io/blog/tags/vue3/"/>
    
      <category term="ts" scheme="https://heiyehk.github.io/blog/tags/ts/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¬”è®°</title>
    <link href="https://heiyehk.github.io/blog/%E5%B0%8F%E7%AC%94%E8%AE%B0/"/>
    <id>https://heiyehk.github.io/blog/%E5%B0%8F%E7%AC%94%E8%AE%B0/</id>
    <published>2020-09-29T08:40:44.000Z</published>
    <updated>2020-09-29T08:50:48.757Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è·å–è§†é¢‘æ—¶é•¿"><a href="#è·å–è§†é¢‘æ—¶é•¿" class="headerlink" title="è·å–è§†é¢‘æ—¶é•¿"></a>è·å–è§†é¢‘æ—¶é•¿</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">getVideoDuration(file: File) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fileurl = URL.createObjectURL(file);</span><br><span class="line">    <span class="keyword">const</span> audioElement: HTMLAudioElement = <span class="keyword">new</span> Audio(fileurl);</span><br><span class="line">    <span class="keyword">let</span> eventListener: <span class="built_in">any</span>;</span><br><span class="line">    eventListener = audioElement.addEventListener(<span class="string">'loadedmetadata'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(audioElement.duration);</span><br><span class="line">      audioElement.removeEventListener(<span class="string">'loadedmetadata'</span>, eventListener);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="VueRouter"><a href="#VueRouter" class="headerlink" title="VueRouter"></a>VueRouter</h3><h4 id="è§£å†³å¤šæ¬¡ç‚¹å‡»æŠ¥é”™é—®é¢˜"><a href="#è§£å†³å¤šæ¬¡ç‚¹å‡»æŠ¥é”™é—®é¢˜" class="headerlink" title="è§£å†³å¤šæ¬¡ç‚¹å‡»æŠ¥é”™é—®é¢˜"></a>è§£å†³å¤šæ¬¡ç‚¹å‡»æŠ¥é”™é—®é¢˜</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> originalPush = Router.prototype.push;</span><br><span class="line">Router.prototype.push = <span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">location: <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">originalPush.call(<span class="params"><span class="keyword">this</span>, location</span>) <span class="keyword">as</span> <span class="built_in">any</span></span>).<span class="params">catch</span>(<span class="params">(<span class="params">err: <span class="built_in">any</span></span>) =&gt; err</span>);</span></span><br><span class="line"><span class="function">&#125;;</span></span><br></pre></td></tr></table></figure><h4 id="é‡ç½®é»˜è®¤è·¯ç”±"><a href="#é‡ç½®é»˜è®¤è·¯ç”±" class="headerlink" title="é‡ç½®é»˜è®¤è·¯ç”±"></a>é‡ç½®é»˜è®¤è·¯ç”±</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ€è·¯ç›´æ¥æ›¿æ¢æ‰é»˜è®¤åŸæœ‰çš„è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> resetRouter = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  router.matcher = <span class="keyword">new</span> Router(&#123;</span><br><span class="line">    routes</span><br><span class="line">  &#125;).matcher;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡è¿‡æ»¤ç©ºå†…å®¹"><a href="#å¯¹è±¡è¿‡æ»¤ç©ºå†…å®¹" class="headerlink" title="å¯¹è±¡è¿‡æ»¤ç©ºå†…å®¹"></a>å¯¹è±¡è¿‡æ»¤ç©ºå†…å®¹</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> FilterEmpty = (</span><br><span class="line">  data: AxiosData,</span><br><span class="line">  validation?: <span class="built_in">any</span>[] | <span class="literal">undefined</span></span><br><span class="line">) =&gt; AxiosData;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;Object&#125; data Objectå¯¹è±¡ï¼Œå¦‚&#123; a: null, b: 1, c: '' &#125;</span></span><br><span class="line"><span class="comment"> * @param &#123;Array&#125; validation ä¼ å…¥éœ€è¦è¿‡æ»¤çš„æ•°ç»„ï¼Œå¦‚[null, undefined, '', 0]</span></span><br><span class="line"><span class="comment"> * @returns &#123;Object&#125; è¿”å›ä¸€ä¸ªæ–°çš„Objectå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> filterEmpty: FilterEmpty = (</span><br><span class="line">  data: AxiosData,</span><br><span class="line">  validation?: <span class="built_in">any</span>[]</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> data !== <span class="string">'object'</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> newObj: AxiosData = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key of <span class="built_in">Object</span>.keys(data)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!validation) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[key] !== <span class="string">''</span> &amp;&amp; data[key] !== <span class="literal">undefined</span> &amp;&amp; data[key] !== <span class="literal">null</span>) &#123;</span><br><span class="line">        newObj[key] = data[key];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!validation.includes(data[key])) &#123;</span><br><span class="line">        newObj[key] = data[key];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="base64è½¬Blobå¯¹è±¡"><a href="#base64è½¬Blobå¯¹è±¡" class="headerlink" title="base64è½¬Blobå¯¹è±¡"></a>base64è½¬Blobå¯¹è±¡</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> convertBase64UrlToBlob = (</span><br><span class="line">  base64: <span class="built_in">string</span> | <span class="built_in">ArrayBuffer</span> | <span class="literal">null</span></span><br><span class="line">): <span class="function"><span class="params">Blob</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åˆ‡å‰²base64</span></span><br><span class="line">  <span class="keyword">const</span> arr = (base64 <span class="keyword">as</span> <span class="built_in">string</span>).split(<span class="string">','</span>);</span><br><span class="line">  <span class="keyword">const</span> mime = ((arr[<span class="number">0</span>] <span class="keyword">as</span> <span class="built_in">string</span>).match(<span class="regexp">/:(.*?);/</span>) <span class="keyword">as</span> RegExpMatchArray)[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">const</span> bstr = atob(arr[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">let</span> n = bstr.length;</span><br><span class="line">  <span class="keyword">const</span> u8arr = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(n);</span><br><span class="line">  <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">    u8arr[n] = bstr.charCodeAt(n);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Blob([u8arr], &#123;</span><br><span class="line">    <span class="keyword">type</span>: mime</span><br><span class="line">  &#125;) <span class="keyword">as</span> Blob;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="åˆ¤æ–­æ˜¯å¦pc"><a href="#åˆ¤æ–­æ˜¯å¦pc" class="headerlink" title="åˆ¤æ–­æ˜¯å¦pc"></a>åˆ¤æ–­æ˜¯å¦pc</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isPc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> agents = [</span><br><span class="line">    <span class="string">'Android'</span>,</span><br><span class="line">    <span class="string">'iPhone'</span>,</span><br><span class="line">    <span class="string">'SymbianOS'</span>,</span><br><span class="line">    <span class="string">'Windows Phone'</span>,</span><br><span class="line">    <span class="string">'iPad'</span>,</span><br><span class="line">    <span class="string">'iPod'</span></span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">return</span> !!agents.filter(<span class="function"><span class="params">x</span> =&gt;</span> navigator.userAgent.includes(x)).length;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;è·å–è§†é¢‘æ—¶é•¿&quot;&gt;&lt;a href=&quot;#è·å–è§†é¢‘æ—¶é•¿&quot; class=&quot;headerlink&quot; title=&quot;è·å–è§†é¢‘æ—¶é•¿&quot;&gt;&lt;/a&gt;è·å–è§†é¢‘æ—¶é•¿&lt;/h3&gt;&lt;figure class=&quot;highlight typescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;getVideoDuration(file: File) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;resolve&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; fileurl = URL.createObjectURL(file);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; audioElement: HTMLAudioElement = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Audio(fileurl);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; eventListener: &lt;span class=&quot;built_in&quot;&gt;any&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    eventListener = audioElement.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;loadedmetadata&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      resolve(audioElement.duration);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      audioElement.removeEventListener(&lt;span class=&quot;string&quot;&gt;&#39;loadedmetadata&#39;&lt;/span&gt;, eventListener);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/"/>
    
      <category term="å˜é‡æå‡" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/"/>
    
      <category term="å‡½æ•°å£°æ˜æå‡" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E6%8F%90%E5%8D%87/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/tags/js/"/>
    
      <category term="å˜é‡æå‡" scheme="https://heiyehk.github.io/blog/tags/%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/"/>
    
      <category term="å‡½æ•°å£°æ˜æå‡" scheme="https://heiyehk.github.io/blog/tags/%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E6%8F%90%E5%8D%87/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ç†è§£å˜é‡å£°æ˜æå‡å’Œå‡½æ•°å£°æ˜æå‡</title>
    <link href="https://heiyehk.github.io/blog/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E6%8F%90%E5%8D%87%E5%92%8C%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E6%8F%90%E5%8D%87/"/>
    <id>https://heiyehk.github.io/blog/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E6%8F%90%E5%8D%87%E5%92%8C%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E6%8F%90%E5%8D%87/</id>
    <published>2020-05-20T08:42:14.000Z</published>
    <updated>2020-09-29T08:40:54.552Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å˜é‡å£°æ˜æå‡"><a href="#å˜é‡å£°æ˜æå‡" class="headerlink" title="å˜é‡å£°æ˜æå‡"></a>å˜é‡å£°æ˜æå‡</h3><h4 id="1ã€å˜é‡å®šä¹‰"><a href="#1ã€å˜é‡å®šä¹‰" class="headerlink" title="1ã€å˜é‡å®šä¹‰"></a>1ã€å˜é‡å®šä¹‰</h4><p>å¯ä»¥ä½¿ç”¨varå®šä¹‰å˜é‡ï¼Œå˜é‡å¦‚æœæ²¡æœ‰èµ‹å€¼ï¼Œé‚£å˜é‡çš„åˆå§‹å€¼ä¸º<code>undefined</code>ã€‚</p><h4 id="2ã€å˜é‡ä½œç”¨åŸŸ"><a href="#2ã€å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="2ã€å˜é‡ä½œç”¨åŸŸ"></a>2ã€å˜é‡ä½œç”¨åŸŸ</h4><p>å˜é‡ä½œç”¨åŸŸæŒ‡å˜é‡èµ·ä½œç”¨çš„èŒƒå›´ã€‚å˜é‡åˆ†ä¸ºå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚å…¨å±€å˜é‡åœ¨å…¨å±€éƒ½æ‹¥æœ‰å®šä¹‰ï¼›è€Œå±€éƒ¨å˜é‡åªèƒ½åœ¨å‡½æ•°å†…æœ‰æ•ˆã€‚<br>åœ¨å‡½æ•°ä½“å†…ï¼ŒåŒåçš„å±€éƒ¨å˜é‡æˆ–è€…å‚æ•°çš„ä¼˜å…ˆçº§ä¼šé«˜äºå…¨å±€å˜é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå‡½æ•°å†…å­˜åœ¨å’Œå…¨å±€å˜é‡åŒåçš„å±€éƒ¨å˜é‡æˆ–è€…å‚æ•°ï¼Œé‚£ä¹ˆå…¨å±€å˜é‡å°†ä¼šè¢«å±€éƒ¨å˜é‡è¦†ç›–ã€‚<br><strong>æ‰€æœ‰ä¸ä½¿ç”¨varå®šä¹‰çš„å˜é‡éƒ½è§†ä¸ºå…¨å±€å˜é‡</strong></p><a id="more"></a><h4 id="3ã€å‡½æ•°ä½œç”¨åŸŸå’Œå£°æ˜æå‰"><a href="#3ã€å‡½æ•°ä½œç”¨åŸŸå’Œå£°æ˜æå‰" class="headerlink" title="3ã€å‡½æ•°ä½œç”¨åŸŸå’Œå£°æ˜æå‰"></a>3ã€å‡½æ•°ä½œç”¨åŸŸå’Œå£°æ˜æå‰</h4><p>JavaScriptçš„å‡½æ•°ä½œç”¨æ˜¯æŒ‡åœ¨å‡½æ•°å†…å£°æ˜çš„æ‰€æœ‰å˜é‡åœ¨å‡½æ•°ä½“å†…å§‹ç»ˆæ˜¯æœ‰å®šä¹‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>å˜é‡åœ¨å£°æ˜ä¹‹å‰å·²ç»å¯ç”¨</strong>ï¼Œæ‰€æœ‰è¿™ç‰¹æ€§ç§°ä¸º<code>å£°æ˜æå‰ï¼ˆhoistingï¼‰</code>ï¼Œå³JavaScriptå‡½æ•°é‡Œçš„æ‰€æœ‰å£°æ˜ï¼ˆåªæ˜¯å£°æ˜ï¼Œä½†ä¸æ¶‰åŠèµ‹å€¼ï¼‰éƒ½è¢«æå‰åˆ°å‡½æ•°ä½“çš„é¡¶éƒ¨ï¼Œè€Œå˜é‡èµ‹å€¼æ“ä½œç•™åœ¨åŸæ¥çš„ä½ç½®ã€‚å¦‚ä¸‹é¢ä¾‹å­ï¼š<br>æ³¨é‡Šï¼š<code>å£°æ˜æå‰</code>æ˜¯åœ¨JavaScriptå¼•æ“çš„é¢„ç¼–è¯‘æ—¶è¿›è¡Œï¼Œæ˜¯åœ¨ä»£ç å¼€å§‹è¿è¡Œä¹‹å‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope = <span class="string">'global'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(scope);</span><br><span class="line">  <span class="keyword">var</span> scope = <span class="string">'local'</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(scope);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºå‡½æ•°å†…å£°æ˜æå‡ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å®é™…ä¸Šæ˜¯è¿™æ ·çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope = <span class="string">'global'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scope;    <span class="comment">//å˜é‡å£°æ˜æå‡åˆ°å‡½æ•°é¡¶éƒ¨</span></span><br><span class="line">  <span class="built_in">console</span>.log(scope);</span><br><span class="line">  scope = <span class="string">'local'</span>;    <span class="comment">//å˜é‡åˆå§‹åŒ–ä¾ç„¶ä¿ç•™åœ¨åŸæ¥çš„ä½ç½®</span></span><br><span class="line">  <span class="built_in">console</span>.log(scope);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡è¿™æ ·å˜å½¢ä¹‹åï¼Œç­”æ¡ˆå°±å°±éå¸¸æ˜æ˜¾äº†ã€‚ç”±äºscopeåœ¨ç¬¬ä¸€ä¸ªconsole.log(scope)è¯­å¥ä¹‹å‰å°±å·²ç»å®šä¹‰äº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰èµ‹å€¼ï¼Œå› æ­¤æ­¤æ—¶scopeçš„æŒ‡æ˜¯<code>undefined</code>.ç¬¬äºŒä¸ªconsole.log(scope)è¯­å¥ä¹‹å‰ï¼Œscopeå·²ç»å®Œæˆèµ‹å€¼ä¸ºâ€™localâ€™ï¼Œæ‰€ä»¥è¾“å‡ºçš„ç»“æœæ˜¯<code>local</code>ã€‚</p><h3 id="å‡½æ•°å£°æ˜æå‡"><a href="#å‡½æ•°å£°æ˜æå‡" class="headerlink" title="å‡½æ•°å£°æ˜æå‡"></a>å‡½æ•°å£°æ˜æå‡</h3><h4 id="1ã€å‡½æ•°çš„ä¸¤ç§åˆ›å»ºæ–¹å¼"><a href="#1ã€å‡½æ•°çš„ä¸¤ç§åˆ›å»ºæ–¹å¼" class="headerlink" title="1ã€å‡½æ•°çš„ä¸¤ç§åˆ›å»ºæ–¹å¼"></a>1ã€å‡½æ•°çš„ä¸¤ç§åˆ›å»ºæ–¹å¼</h4><h5 id="å‡½æ•°å£°æ˜è¯­æ³•"><a href="#å‡½æ•°å£°æ˜è¯­æ³•" class="headerlink" title="å‡½æ•°å£°æ˜è¯­æ³•"></a>å‡½æ•°å£°æ˜è¯­æ³•</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f(<span class="string">'superman'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œæ§åˆ¶å°èƒ½æ‰“å°å‡º<code>supemran</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f(<span class="string">'superman'</span>);</span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œä¼šæŠ¥é”™<code>Uncaught ReferenceError: f is not defined(â€¦)</code>,é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºè¯´fæ²¡æœ‰è¢«å®šä¹‰ã€‚<br>ä¸ºä»€ä¹ˆåŒæ ·çš„ä»£ç ï¼Œå‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼å­˜åœ¨ç€å·®å¼‚å‘¢ï¼Ÿ<br>è¿™æ˜¯å› ä¸ºï¼Œå‡½æ•°å£°æ˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹å¾ï¼š<code>å‡½æ•°å£°æ˜æå‡</code>ï¼Œå‡½æ•°å£°æ˜è¯­å¥å°†ä¼šè¢«æå‡åˆ°å¤–éƒ¨è„šæœ¬æˆ–è€…å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼ˆæ˜¯ä¸æ˜¯è·Ÿå˜é‡æå‡éå¸¸ç±»ä¼¼ï¼‰ã€‚æ­£æ˜¯å› ä¸ºè¿™ä¸ªç‰¹å¾ï¼Œæ‰€ä»¥å¯ä»¥æŠŠå‡½æ•°å£°æ˜æ”¾åœ¨è°ƒç”¨å®ƒçš„è¯­å¥åé¢ã€‚å¦‚ä¸‹é¢ä¾‹å­ï¼Œæœ€ç»ˆçš„è¾“å‡ºç»“æœåº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">getName();</span><br></pre></td></tr></table></figure><p>å¯èƒ½ä¼šæœ‰äººè§‰å¾—æœ€åè¾“å‡ºçš„ç»“æœæ˜¯<code>1</code>ã€‚è®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼Œè¿™ä¸ªä¾‹å­æ¶‰åŠåˆ°äº†<code>å˜é‡å£°æ˜æå‡</code>å’Œ<code>å‡½æ•°å£°æ˜æå‡</code>ã€‚æ­£å¦‚å‰é¢è¯´åˆ°çš„å‡½æ•°å£°æ˜æå‡ï¼Œå‡½æ•°å£°æ˜<code>function getName(){}</code>çš„å£°æ˜ä¼šè¢«æå‰åˆ°é¡¶éƒ¨ã€‚è€Œå‡½æ•°è¡¨è¾¾å¼<code>var getName = function(){}</code>åˆ™è¡¨ç°å‡ºå˜é‡å£°æ˜æå‡ã€‚å› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒgetNameä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå› æ­¤è¿™ä¸ªå˜é‡çš„å£°æ˜ä¹Ÿå°†æå‡åˆ°åº•éƒ¨ï¼Œè€Œå˜é‡çš„èµ‹å€¼ä¾ç„¶ä¿ç•™åœ¨åŸæ¥çš„ä½ç½®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°ä¼˜å…ˆï¼Œè™½ç„¶å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜éƒ½ä¼šè¢«æå‡ï¼Œä½†æ˜¯å‡½æ•°ä¼šé¦–å…ˆè¢«æå‡ï¼Œç„¶åæ‰æ˜¯å˜é‡ã€‚å› æ­¤ä¸Šé¢çš„å‡½æ•°å¯ä»¥è½¬æ¢æˆä¸‹é¢çš„æ ·å­:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;    <span class="comment">//å‡½æ•°å£°æ˜æå‡åˆ°é¡¶éƒ¨</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> getName;    <span class="comment">//å˜é‡å£°æ˜æå‡</span></span><br><span class="line">getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;    <span class="comment">//å˜é‡èµ‹å€¼ä¾ç„¶ä¿ç•™åœ¨åŸæ¥çš„ä½ç½®</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">getName();    <span class="comment">// æœ€ç»ˆè¾“å‡ºï¼š2</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æœ€ç»ˆçš„è¾“å‡ºç»“æœæ˜¯ï¼š<code>2</code>ã€‚åœ¨åŸæ¥çš„ä¾‹å­ä¸­ï¼Œå‡½æ•°å£°æ˜è™½ç„¶æ˜¯åœ¨å‡½æ•°è¡¨è¾¾å¼åé¢ï¼Œä½†ç”±äºå‡½æ•°å£°æ˜æå‡åˆ°é¡¶éƒ¨ï¼Œå› æ­¤åé¢getNameåˆè¢«å‡½æ•°è¡¨è¾¾å¼çš„èµ‹å€¼æ“ä½œç»™è¦†ç›–äº†ï¼Œæ‰€ä»¥è¾“å‡º<code>2</code>ã€‚</p><h5 id="å‡½æ•°è¡¨è¾¾å¼è¯­æ³•"><a href="#å‡½æ•°è¡¨è¾¾å¼è¯­æ³•" class="headerlink" title="å‡½æ•°è¡¨è¾¾å¼è¯­æ³•"></a>å‡½æ•°è¡¨è¾¾å¼è¯­æ³•</h5><blockquote><p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œå‰ç«¯è¶…äººã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/qq673318522/java/article/details/50810650" target="_blank" rel="noopener">https://blog.csdn.net/qq673318522/java/article/details/50810650</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å˜é‡å£°æ˜æå‡&quot;&gt;&lt;a href=&quot;#å˜é‡å£°æ˜æå‡&quot; class=&quot;headerlink&quot; title=&quot;å˜é‡å£°æ˜æå‡&quot;&gt;&lt;/a&gt;å˜é‡å£°æ˜æå‡&lt;/h3&gt;&lt;h4 id=&quot;1ã€å˜é‡å®šä¹‰&quot;&gt;&lt;a href=&quot;#1ã€å˜é‡å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;1ã€å˜é‡å®šä¹‰&quot;&gt;&lt;/a&gt;1ã€å˜é‡å®šä¹‰&lt;/h4&gt;&lt;p&gt;å¯ä»¥ä½¿ç”¨varå®šä¹‰å˜é‡ï¼Œå˜é‡å¦‚æœæ²¡æœ‰èµ‹å€¼ï¼Œé‚£å˜é‡çš„åˆå§‹å€¼ä¸º&lt;code&gt;undefined&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;2ã€å˜é‡ä½œç”¨åŸŸ&quot;&gt;&lt;a href=&quot;#2ã€å˜é‡ä½œç”¨åŸŸ&quot; class=&quot;headerlink&quot; title=&quot;2ã€å˜é‡ä½œç”¨åŸŸ&quot;&gt;&lt;/a&gt;2ã€å˜é‡ä½œç”¨åŸŸ&lt;/h4&gt;&lt;p&gt;å˜é‡ä½œç”¨åŸŸæŒ‡å˜é‡èµ·ä½œç”¨çš„èŒƒå›´ã€‚å˜é‡åˆ†ä¸ºå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚å…¨å±€å˜é‡åœ¨å…¨å±€éƒ½æ‹¥æœ‰å®šä¹‰ï¼›è€Œå±€éƒ¨å˜é‡åªèƒ½åœ¨å‡½æ•°å†…æœ‰æ•ˆã€‚&lt;br&gt;åœ¨å‡½æ•°ä½“å†…ï¼ŒåŒåçš„å±€éƒ¨å˜é‡æˆ–è€…å‚æ•°çš„ä¼˜å…ˆçº§ä¼šé«˜äºå…¨å±€å˜é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå‡½æ•°å†…å­˜åœ¨å’Œå…¨å±€å˜é‡åŒåçš„å±€éƒ¨å˜é‡æˆ–è€…å‚æ•°ï¼Œé‚£ä¹ˆå…¨å±€å˜é‡å°†ä¼šè¢«å±€éƒ¨å˜é‡è¦†ç›–ã€‚&lt;br&gt;&lt;strong&gt;æ‰€æœ‰ä¸ä½¿ç”¨varå®šä¹‰çš„å˜é‡éƒ½è§†ä¸ºå…¨å±€å˜é‡&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/"/>
    
      <category term="å˜é‡æå‡" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/"/>
    
      <category term="å‡½æ•°å£°æ˜æå‡" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E6%8F%90%E5%8D%87/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/tags/js/"/>
    
      <category term="å˜é‡æå‡" scheme="https://heiyehk.github.io/blog/tags/%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/"/>
    
      <category term="å‡½æ•°å£°æ˜æå‡" scheme="https://heiyehk.github.io/blog/tags/%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E6%8F%90%E5%8D%87/"/>
    
  </entry>
  
  <entry>
    <title>javascriptæ·±å…¥ç†è§£jsé—­åŒ…</title>
    <link href="https://heiyehk.github.io/blog/javascript%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3js%E9%97%AD%E5%8C%85/"/>
    <id>https://heiyehk.github.io/blog/javascript%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3js%E9%97%AD%E5%8C%85/</id>
    <published>2020-05-20T08:25:16.000Z</published>
    <updated>2020-05-20T08:57:39.484Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é—­åŒ…ï¼ˆclosureï¼‰æ˜¯Javascriptè¯­è¨€çš„ä¸€ä¸ªéš¾ç‚¹ï¼Œä¹Ÿæ˜¯å®ƒçš„ç‰¹è‰²ï¼Œå¾ˆå¤šé«˜çº§åº”ç”¨éƒ½è¦ä¾é é—­åŒ…å®ç°ã€‚</p></blockquote><h3 id="ä¸€ã€å˜é‡çš„ä½œç”¨åŸŸ"><a href="#ä¸€ã€å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="ä¸€ã€å˜é‡çš„ä½œç”¨åŸŸ"></a>ä¸€ã€å˜é‡çš„ä½œç”¨åŸŸ</h3><p>è¦ç†è§£é—­åŒ…ï¼Œé¦–å…ˆå¿…é¡»ç†è§£Javascriptç‰¹æ®Šçš„å˜é‡ä½œç”¨åŸŸã€‚</p><p>å˜é‡çš„ä½œç”¨åŸŸæ— éå°±æ˜¯ä¸¤ç§ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚</p><p>Javascriptè¯­è¨€çš„ç‰¹æ®Šä¹‹å¤„ï¼Œå°±åœ¨äºå‡½æ•°å†…éƒ¨å¯ä»¥ç›´æ¥è¯»å–å…¨å±€å˜é‡ã€‚</p><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n=<span class="number">999</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(n);</span><br><span class="line">&#125;</span><br><span class="line">f1(); <span class="comment">// 999</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€æ–¹é¢ï¼Œåœ¨å‡½æ•°å¤–éƒ¨è‡ªç„¶æ— æ³•è¯»å–å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> n=<span class="number">999</span>;</span><br><span class="line">&#125;</span><br><span class="line">alert(n); <span class="comment">// error</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼Œå‡½æ•°å†…éƒ¨å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œä¸€å®šè¦ä½¿ç”¨varå‘½ä»¤ã€‚å¦‚æœä¸ç”¨çš„è¯ï¼Œä½ å®é™…ä¸Šå£°æ˜äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  n=<span class="number">999</span>;</span><br><span class="line">&#125;</span><br><span class="line">f1();</span><br><span class="line">alert(n); <span class="comment">// 999</span></span><br></pre></td></tr></table></figure><h3 id="äºŒã€å¦‚ä½•ä»å¤–éƒ¨è¯»å–å±€éƒ¨å˜é‡ï¼Ÿ"><a href="#äºŒã€å¦‚ä½•ä»å¤–éƒ¨è¯»å–å±€éƒ¨å˜é‡ï¼Ÿ" class="headerlink" title="äºŒã€å¦‚ä½•ä»å¤–éƒ¨è¯»å–å±€éƒ¨å˜é‡ï¼Ÿ"></a>äºŒã€å¦‚ä½•ä»å¤–éƒ¨è¯»å–å±€éƒ¨å˜é‡ï¼Ÿ</h3><p>å‡ºäºç§ç§åŸå› ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å¾—åˆ°å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ã€‚ä½†æ˜¯ï¼Œå‰é¢å·²ç»è¯´è¿‡äº†ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™æ˜¯åŠä¸åˆ°çš„ï¼Œåªæœ‰é€šè¿‡å˜é€šæ–¹æ³•æ‰èƒ½å®ç°ã€‚</p><p>é‚£å°±æ˜¯åœ¨å‡½æ•°çš„å†…éƒ¨ï¼Œå†å®šä¹‰ä¸€ä¸ªå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  n=<span class="number">999</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(n); <span class="comment">// 999</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå‡½æ•°f2å°±è¢«åŒ…æ‹¬åœ¨å‡½æ•°f1å†…éƒ¨ï¼Œè¿™æ—¶f1å†…éƒ¨çš„æ‰€æœ‰å±€éƒ¨å˜é‡ï¼Œå¯¹f2éƒ½æ˜¯å¯è§çš„ã€‚ä½†æ˜¯åè¿‡æ¥å°±ä¸è¡Œï¼Œf2å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œå¯¹f1 å°±æ˜¯ä¸å¯è§çš„ã€‚è¿™å°±æ˜¯Javascriptè¯­è¨€ç‰¹æœ‰çš„â€œé“¾å¼ä½œç”¨åŸŸâ€ç»“æ„ï¼ˆchain scopeï¼‰ï¼Œ</p><p>å­å¯¹è±¡ä¼šä¸€çº§ä¸€çº§åœ°å‘ä¸Šå¯»æ‰¾æ‰€æœ‰çˆ¶å¯¹è±¡çš„å˜é‡ã€‚æ‰€ä»¥ï¼Œçˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡ï¼Œå¯¹å­å¯¹è±¡éƒ½æ˜¯å¯è§çš„ï¼Œåä¹‹åˆ™ä¸æˆç«‹ã€‚</p><p>æ—¢ç„¶f2å¯ä»¥è¯»å–f1ä¸­çš„å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆåªè¦æŠŠf2ä½œä¸ºè¿”å›å€¼ï¼Œæˆ‘ä»¬ä¸å°±å¯ä»¥åœ¨f1å¤–éƒ¨è¯»å–å®ƒçš„å†…éƒ¨å˜é‡äº†å—ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  n=<span class="number">999</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(n);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result=f1();</span><br><span class="line">result(); <span class="comment">// 999</span></span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€é—­åŒ…çš„æ¦‚å¿µ"><a href="#ä¸‰ã€é—­åŒ…çš„æ¦‚å¿µ" class="headerlink" title="ä¸‰ã€é—­åŒ…çš„æ¦‚å¿µ"></a>ä¸‰ã€é—­åŒ…çš„æ¦‚å¿µ</h3><p>ä¸Šä¸€èŠ‚ä»£ç ä¸­çš„f2å‡½æ•°ï¼Œå°±æ˜¯é—­åŒ…ã€‚</p><p>å„ç§ä¸“ä¸šæ–‡çŒ®ä¸Šçš„â€œé—­åŒ…â€ï¼ˆclosureï¼‰å®šä¹‰éå¸¸æŠ½è±¡ï¼Œå¾ˆéš¾çœ‹æ‡‚ã€‚æˆ‘çš„ç†è§£æ˜¯ï¼Œé—­åŒ…å°±æ˜¯èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚</p><p>ç”±äºåœ¨Javascriptè¯­è¨€ä¸­ï¼Œåªæœ‰å‡½æ•°å†…éƒ¨çš„å­å‡½æ•°æ‰èƒ½è¯»å–å±€éƒ¨å˜é‡ï¼Œå› æ­¤å¯ä»¥æŠŠé—­åŒ…ç®€å•ç†è§£æˆâ€œå®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°â€ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨æœ¬è´¨ä¸Šï¼Œé—­åŒ…å°±æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„ä¸€åº§æ¡¥æ¢ã€‚</p><h3 id="å››ã€é—­åŒ…çš„ç”¨é€”"><a href="#å››ã€é—­åŒ…çš„ç”¨é€”" class="headerlink" title="å››ã€é—­åŒ…çš„ç”¨é€”"></a>å››ã€é—­åŒ…çš„ç”¨é€”</h3><p>é—­åŒ…å¯ä»¥ç”¨åœ¨è®¸å¤šåœ°æ–¹ã€‚å®ƒçš„æœ€å¤§ç”¨å¤„æœ‰ä¸¤ä¸ª</p><ol><li>è¯»å–å‡½æ•°å†…éƒ¨çš„å˜é‡</li><li>è®©è¿™äº›å˜é‡çš„å€¼å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­ã€‚</li></ol><p>æ€ä¹ˆæ¥ç†è§£è¿™å¥è¯å‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> n=<span class="number">999</span>;</span><br><span class="line">  nAdd=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;n+=<span class="number">1</span>&#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(n);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result=f1();</span><br><span class="line">result(); <span class="comment">// 999</span></span><br><span class="line">nAdd();</span><br><span class="line">result(); <span class="comment">// 1000</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œresultå®é™…ä¸Šå°±æ˜¯é—­åŒ…f2å‡½æ•°ã€‚å®ƒä¸€å…±è¿è¡Œäº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡çš„å€¼æ˜¯999ï¼Œç¬¬äºŒæ¬¡çš„å€¼æ˜¯1000ã€‚è¿™è¯æ˜äº†ï¼Œå‡½æ•°f1ä¸­çš„å±€éƒ¨å˜é‡nä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¹¶æ²¡æœ‰åœ¨f1è°ƒç”¨åè¢«è‡ªåŠ¨æ¸…é™¤ã€‚</p><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼ŸåŸå› å°±åœ¨äºf1æ˜¯f2çš„çˆ¶å‡½æ•°ï¼Œè€Œf2è¢«èµ‹ç»™äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè¿™å¯¼è‡´f2å§‹ç»ˆåœ¨å†…å­˜ä¸­ï¼Œè€Œf2çš„å­˜åœ¨ä¾èµ–äºf1ï¼Œå› æ­¤f1ä¹Ÿå§‹ç»ˆåœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šåœ¨è°ƒç”¨ç»“æŸåï¼Œè¢«åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆgarbage collectionï¼‰å›æ”¶ã€‚</p><p>è¿™æ®µä»£ç ä¸­å¦ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼Œå°±æ˜¯â€œnAdd=function(){n+=1}â€è¿™ä¸€è¡Œï¼Œé¦–å…ˆåœ¨nAddå‰é¢æ²¡æœ‰ä½¿ç”¨varå…³é”®å­—ï¼Œå› æ­¤ nAddæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œä¸æ˜¯å±€éƒ¨å˜é‡ã€‚å…¶æ¬¡ï¼ŒnAddçš„å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ˆanonymous functionï¼‰ï¼Œè€Œè¿™ä¸ª</p><p>åŒ¿åå‡½æ•°æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œæ‰€ä»¥nAddç›¸å½“äºæ˜¯ä¸€ä¸ªsetterï¼Œå¯ä»¥åœ¨å‡½æ•°å¤–éƒ¨å¯¹å‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡è¿›è¡Œæ“ä½œã€‚</p><h3 id="äº”ã€ä½¿ç”¨é—­åŒ…çš„æ³¨æ„ç‚¹"><a href="#äº”ã€ä½¿ç”¨é—­åŒ…çš„æ³¨æ„ç‚¹" class="headerlink" title="äº”ã€ä½¿ç”¨é—­åŒ…çš„æ³¨æ„ç‚¹"></a>äº”ã€ä½¿ç”¨é—­åŒ…çš„æ³¨æ„ç‚¹</h3><ol><li>ç”±äºé—­åŒ…ä¼šä½¿å¾—å‡½æ•°ä¸­çš„å˜é‡éƒ½è¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜æ¶ˆè€—å¾ˆå¤§ï¼Œæ‰€ä»¥ä¸èƒ½æ»¥ç”¨é—­åŒ…ï¼Œå¦åˆ™ä¼šé€ æˆç½‘é¡µçš„æ€§èƒ½é—®é¢˜ï¼Œåœ¨IEä¸­å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨é€€å‡ºå‡½æ•°ä¹‹å‰ï¼Œå°†ä¸ä½¿ç”¨çš„å±€éƒ¨å˜é‡å…¨éƒ¨åˆ é™¤ã€‚</li><li>é—­åŒ…ä¼šåœ¨çˆ¶å‡½æ•°å¤–éƒ¨ï¼Œæ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æŠŠçˆ¶å‡½æ•°å½“ä½œå¯¹è±¡ï¼ˆobjectï¼‰ä½¿ç”¨ï¼ŒæŠŠé—­åŒ…å½“ä½œå®ƒçš„å…¬ç”¨æ–¹æ³•ï¼ˆPublic Methodï¼‰ï¼ŒæŠŠå†…éƒ¨å˜é‡å½“ä½œå®ƒçš„ç§æœ‰å±æ€§ï¼ˆprivate valueï¼‰ï¼Œè¿™æ—¶ä¸€å®šè¦å°å¿ƒï¼Œä¸è¦éšä¾¿</li></ol><p>æ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚</p><h3 id="å…­ã€æ€è€ƒé¢˜"><a href="#å…­ã€æ€è€ƒé¢˜" class="headerlink" title="å…­ã€æ€è€ƒé¢˜"></a>å…­ã€æ€è€ƒé¢˜</h3><p>å¦‚æœä½ èƒ½ç†è§£ä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœï¼Œåº”è¯¥å°±ç®—ç†è§£é—­åŒ…çš„è¿è¡Œæœºåˆ¶äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"The Window"</span>;  </span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">  name : <span class="string">"My Object"</span>,</span><br><span class="line">  getNameFunc : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">alert(object.getNameFunc()()); <span class="comment">//The Window</span></span><br></pre></td></tr></table></figure><h3 id="JavaScripté—­åŒ…ä¾‹å­"><a href="#JavaScripté—­åŒ…ä¾‹å­" class="headerlink" title="JavaScripté—­åŒ…ä¾‹å­"></a>JavaScripté—­åŒ…ä¾‹å­</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outerFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a=<span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">innerFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a++;</span><br><span class="line">    alert(a);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">innerFun()</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç æ˜¯<code>é”™è¯¯</code>çš„.innerFun()çš„ä½œç”¨åŸŸåœ¨outerFun()å†…éƒ¨,æ‰€åœ¨outerFun()å¤–éƒ¨è°ƒç”¨å®ƒæ˜¯é”™è¯¯çš„.</p><p>æ”¹æˆå¦‚ä¸‹,ä¹Ÿå°±æ˜¯é—­åŒ…:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outerFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a=<span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">innerFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a++;</span><br><span class="line">    alert(a);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> innerFun; <span class="comment">//æ³¨æ„è¿™é‡Œ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj=outerFun();</span><br><span class="line">obj(); <span class="comment">//ç»“æœä¸º1</span></span><br><span class="line">obj(); <span class="comment">//ç»“æœä¸º2</span></span><br><span class="line"><span class="keyword">var</span> obj2=outerFun();</span><br><span class="line">obj2(); <span class="comment">//ç»“æœä¸º1</span></span><br><span class="line">obj2(); <span class="comment">//ç»“æœä¸º2</span></span><br></pre></td></tr></table></figure><p>ä»€ä¹ˆæ˜¯é—­åŒ…:</p><p>å½“å†…éƒ¨å‡½æ•° åœ¨å®šä¹‰å®ƒçš„ä½œç”¨åŸŸ çš„å¤–éƒ¨ è¢«å¼•ç”¨æ—¶,å°±åˆ›å»ºäº†è¯¥å†…éƒ¨å‡½æ•°çš„é—­åŒ… ,å¦‚æœå†…éƒ¨å‡½æ•°å¼•ç”¨äº†ä½äºå¤–éƒ¨å‡½æ•°çš„å˜é‡,å½“å¤–éƒ¨å‡½æ•°è°ƒç”¨å®Œæ¯•å,è¿™äº›å˜é‡åœ¨å†…å­˜ä¸ä¼šè¢« é‡Šæ”¾,å› ä¸ºé—­åŒ…éœ€è¦å®ƒä»¬.</p><h3 id="å†æ¥çœ‹ä¸€ä¸ªä¾‹å­"><a href="#å†æ¥çœ‹ä¸€ä¸ªä¾‹å­" class="headerlink" title="å†æ¥çœ‹ä¸€ä¸ªä¾‹å­"></a>å†æ¥çœ‹ä¸€ä¸ªä¾‹å­</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outerFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a =<span class="number">0</span>;</span><br><span class="line">  alert(a); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a=<span class="number">4</span>;</span><br><span class="line">outerFun();</span><br><span class="line">alert(a);</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯ 0,4 .  å› ä¸ºåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†varå…³é”®å­— ç»´æŠ¤açš„ä½œç”¨åŸŸåœ¨outFun()å†…éƒ¨.</p><p>å†çœ‹ä¸‹é¢çš„ä»£ç :</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outerFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//æ²¡æœ‰var</span></span><br><span class="line">  a =<span class="number">0</span>;</span><br><span class="line">  alert(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a=<span class="number">4</span>;</span><br><span class="line">outerFun();</span><br><span class="line">alert(a);</span><br></pre></td></tr></table></figure><p>ç»“æœä¸º <code>0,0</code> çœŸæ˜¯å¥‡æ€ª,ä¸ºä»€ä¹ˆå‘¢?</p><p>ä½œç”¨åŸŸé“¾æ˜¯æè¿°ä¸€ç§è·¯å¾„çš„æœ¯è¯­,æ²¿ç€è¯¥è·¯å¾„å¯ä»¥ç¡®å®šå˜é‡çš„å€¼ .å½“æ‰§è¡Œa=0æ—¶,å› ä¸ºæ²¡æœ‰ä½¿ç”¨varå…³é”®å­—,å› æ­¤èµ‹å€¼æ“ä½œä¼šæ²¿ç€ä½œç”¨åŸŸé“¾åˆ°var a=4;  å¹¶æ”¹å˜å…¶å€¼.</p><p>å¦‚æœä½ å¯¹javascripté—­åŒ…è¿˜ä¸æ˜¯å¾ˆç†è§£ï¼Œé‚£ä¹ˆè¯·çœ‹ä¸‹é¢è½¬è½½çš„æ–‡ç« ï¼š(è½¬è½½:<a href="http://www.felixwoo.com/archives/247" target="_blank" rel="noopener">http://www.felixwoo.com/archives/247</a>)</p><h3 id="ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</h3><p>å®˜æ–¹â€çš„è§£é‡Šæ˜¯ï¼šé—­åŒ…æ˜¯ä¸€ä¸ªæ‹¥æœ‰è®¸å¤šå˜é‡å’Œç»‘å®šäº†è¿™äº›å˜é‡çš„ç¯å¢ƒçš„è¡¨è¾¾å¼ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œå› è€Œè¿™äº›å˜é‡ä¹Ÿæ˜¯è¯¥è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ã€‚<br>ç›¸ä¿¡å¾ˆå°‘æœ‰äººèƒ½ç›´æ¥çœ‹æ‡‚è¿™å¥è¯ï¼Œå› ä¸ºä»–æè¿°çš„å¤ªå­¦æœ¯ã€‚å…¶å®è¿™å¥è¯é€šä¿—çš„æ¥è¯´å°±æ˜¯ï¼š<code>JavaScriptä¸­æ‰€æœ‰çš„functionéƒ½æ˜¯ä¸€ä¸ªé—­åŒ…</code>ã€‚ä¸è¿‡ä¸€èˆ¬æ¥è¯´ï¼ŒåµŒå¥—çš„functionæ‰€äº§ç”Ÿçš„é—­åŒ…æ›´ä¸ºå¼ºå¤§ï¼Œä¹Ÿæ˜¯å¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬æ‰€è°“çš„â€œé—­åŒ…â€ã€‚çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">0</span>; </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123; alert(++i); &#125; </span><br><span class="line">  <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> c = a();</span><br><span class="line">c();</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><ol><li><p>å‡½æ•°båµŒå¥—åœ¨å‡½æ•°aå†…éƒ¨ï¼›</p></li><li><p>å‡½æ•°aè¿”å›å‡½æ•°bã€‚</p></li></ol><p>å¼•ç”¨å…³ç³»å¦‚å›¾ï¼š</p><p><img src="https://www.jb51.net/upload/201007/20100703001016918.jpg" alt="https://www.jb51.net/upload/201007/20100703001016918.jpg"></p><p>è¿™æ ·åœ¨æ‰§è¡Œå®Œvar c=a()åï¼Œå˜é‡cå®é™…ä¸Šæ˜¯æŒ‡å‘äº†å‡½æ•°bï¼Œå†æ‰§è¡Œc()åå°±ä¼šå¼¹å‡ºä¸€ä¸ªçª—å£æ˜¾ç¤ºiçš„å€¼(ç¬¬ä¸€æ¬¡ä¸º1)ã€‚è¿™æ®µä»£ç å…¶å®å°±åˆ›å»ºäº†ä¸€ä¸ªé—­åŒ…ï¼Œä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå‡½æ•°aå¤–çš„å˜é‡cå¼•ç”¨äº†å‡½æ•°aå†…çš„å‡½æ•°bï¼Œå°±æ˜¯è¯´ï¼š</p><p><strong>å½“å‡½æ•°açš„å†…éƒ¨å‡½æ•°bè¢«å‡½æ•°aå¤–çš„ä¸€ä¸ªå˜é‡å¼•ç”¨çš„æ—¶å€™ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªé—­åŒ…ã€‚</strong></p><p>è®©æˆ‘ä»¬è¯´çš„æ›´é€å½»ä¸€äº›ã€‚æ‰€è°“â€œé—­åŒ…â€ï¼Œå°±æ˜¯åœ¨æ„é€ å‡½æ•°ä½“å†…å®šä¹‰å¦å¤–çš„å‡½æ•°ä½œä¸ºç›®æ ‡å¯¹è±¡çš„æ–¹æ³•å‡½æ•°ï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•å‡½æ•°åè¿‡æ¥å¼•ç”¨å¤–å±‚å‡½æ•°ä½“ä¸­çš„ä¸´æ—¶å˜é‡ã€‚è¿™ä½¿å¾—åªè¦ç›®æ ‡ å¯¹è±¡åœ¨ç”Ÿå­˜æœŸå†…å§‹ç»ˆèƒ½ä¿æŒå…¶æ–¹æ³•ï¼Œå°±èƒ½é—´æ¥ä¿æŒåŸæ„é€ å‡½æ•°ä½“å½“æ—¶ç”¨åˆ°çš„ä¸´æ—¶å˜é‡å€¼ã€‚å°½ç®¡æœ€å¼€å§‹çš„æ„é€ å‡½æ•°è°ƒç”¨å·²ç»ç»“æŸï¼Œä¸´æ—¶å˜é‡çš„åç§°ä¹Ÿéƒ½æ¶ˆå¤±äº†ï¼Œä½†åœ¨ç›® æ ‡å¯¹è±¡çš„æ–¹æ³•å†…å´å§‹ç»ˆèƒ½å¼•ç”¨åˆ°è¯¥å˜é‡çš„å€¼ï¼Œè€Œä¸”è¯¥å€¼åªèƒ½é€šè¿™ç§æ–¹æ³•æ¥è®¿é—®ã€‚å³ä½¿å†æ¬¡è°ƒç”¨ç›¸åŒçš„æ„é€ å‡½æ•°ï¼Œä½†åªä¼šç”Ÿæˆæ–°å¯¹è±¡å’Œæ–¹æ³•ï¼Œæ–°çš„ä¸´æ—¶å˜é‡åªæ˜¯å¯¹åº”æ–° çš„å€¼ï¼Œå’Œä¸Šæ¬¡é‚£æ¬¡è°ƒç”¨çš„æ˜¯å„è‡ªç‹¬ç«‹çš„ã€‚</p><h3 id="é—­åŒ…æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#é—­åŒ…æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="é—­åŒ…æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>é—­åŒ…æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p>ç®€è€Œè¨€ä¹‹ï¼Œé—­åŒ…çš„ä½œç”¨å°±æ˜¯åœ¨aæ‰§è¡Œå®Œå¹¶è¿”å›åï¼Œé—­åŒ…ä½¿å¾—Javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶GCä¸ä¼šæ”¶å›aæ‰€å ç”¨çš„èµ„æºï¼Œå› ä¸ºaçš„å†…éƒ¨å‡½æ•°bçš„æ‰§è¡Œéœ€è¦ä¾èµ–aä¸­çš„å˜é‡ã€‚è¿™æ˜¯å¯¹é—­åŒ…ä½œç”¨çš„éå¸¸ç›´ç™½çš„æè¿°ï¼Œä¸ä¸“ä¸šä¹Ÿä¸ä¸¥è°¨ï¼Œä½†å¤§æ¦‚æ„æ€å°±æ˜¯è¿™æ ·ï¼Œç†è§£é—­åŒ…éœ€è¦å¾ªåºæ¸è¿›çš„è¿‡ç¨‹ã€‚</p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç”±äºé—­åŒ…çš„å­˜åœ¨ä½¿å¾—å‡½æ•°aè¿”å›åï¼Œaä¸­çš„iå§‹ç»ˆå­˜åœ¨ï¼Œè¿™æ ·æ¯æ¬¡æ‰§è¡Œc()ï¼Œiéƒ½æ˜¯è‡ªåŠ 1åalertå‡ºiçš„å€¼ã€‚</p><p>ã€€ã€€é‚£ ä¹ˆæˆ‘ä»¬æ¥æƒ³è±¡å¦ä¸€ç§æƒ…å†µï¼Œå¦‚æœaè¿”å›çš„ä¸æ˜¯å‡½æ•°bï¼Œæƒ…å†µå°±å®Œå…¨ä¸åŒäº†ã€‚å› ä¸ºaæ‰§è¡Œå®Œåï¼Œbæ²¡æœ‰è¢«è¿”å›ç»™açš„å¤–ç•Œï¼Œåªæ˜¯è¢«aæ‰€å¼•ç”¨ï¼Œè€Œæ­¤æ—¶aä¹Ÿåªä¼šè¢«bå¼• ç”¨ï¼Œå› æ­¤å‡½æ•°aå’Œbäº’ç›¸å¼•ç”¨ä½†åˆä¸è¢«å¤–ç•Œæ‰“æ‰°(è¢«å¤–ç•Œå¼•ç”¨)ï¼Œå‡½æ•°aå’Œbå°±ä¼šè¢«GCå›æ”¶ã€‚(å…³äºJavascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶å°†åœ¨åé¢è¯¦ç»†ä»‹ç»)</p><h3 id="é—­åŒ…å†…çš„å¾®è§‚ä¸–ç•Œ"><a href="#é—­åŒ…å†…çš„å¾®è§‚ä¸–ç•Œ" class="headerlink" title="é—­åŒ…å†…çš„å¾®è§‚ä¸–ç•Œ"></a>é—­åŒ…å†…çš„å¾®è§‚ä¸–ç•Œ</h3><p>ã€€å¦‚æœè¦æ›´åŠ æ·±å…¥çš„äº†è§£é—­åŒ…ä»¥åŠå‡½æ•°aå’ŒåµŒå¥—å‡½æ•°bçš„å…³ç³»ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥å¦å¤–å‡ ä¸ªæ¦‚å¿µï¼šå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒ(excution context)ã€æ´»åŠ¨å¯¹è±¡(call object)ã€ä½œç”¨åŸŸ(scope)ã€ä½œç”¨åŸŸé“¾(scope chain)ã€‚ä»¥å‡½æ•°aä»å®šä¹‰åˆ°æ‰§è¡Œçš„è¿‡ç¨‹ä¸ºä¾‹é˜è¿°è¿™å‡ ä¸ªæ¦‚å¿µã€‚</p><ul><li>å½“<code>å®šä¹‰</code>å‡½æ•°açš„æ—¶å€™ï¼Œjsè§£é‡Šå™¨ä¼šå°†å‡½æ•°açš„<code>ä½œç”¨åŸŸé“¾(scope chain)</code>è®¾ç½®ä¸ºå®šä¹‰<code>aæ—¶aæ‰€åœ¨çš„â€œç¯å¢ƒâ€</code>ï¼Œå¦‚æœaæ˜¯ä¸€ä¸ªå…¨å±€å‡½æ•°ï¼Œåˆ™scope chainä¸­åªæœ‰windowå¯¹è±¡ã€‚</li><li>å½“<code>æ‰§è¡Œ</code>å‡½æ•°açš„æ—¶å€™ï¼Œaä¼šè¿›å…¥ç›¸åº”çš„<code>æ‰§è¡Œç¯å¢ƒ(excution context)</code>ã€‚</li><li>åœ¨åˆ›å»ºæ‰§è¡Œç¯å¢ƒçš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆä¼šä¸ºaæ·»åŠ ä¸€ä¸ªscopeå±æ€§ï¼Œå³açš„ä½œç”¨åŸŸï¼Œå…¶å€¼å°±ä¸ºç¬¬1æ­¥ä¸­çš„scope chainã€‚å³a.scope=açš„ä½œç”¨åŸŸé“¾ã€‚</li><li>ç„¶åæ‰§è¡Œç¯å¢ƒä¼šåˆ›å»ºä¸€ä¸ª<code>æ´»åŠ¨å¯¹è±¡(call object)</code>ã€‚æ´»åŠ¨å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªæ‹¥æœ‰å±æ€§çš„å¯¹è±¡ï¼Œä½†å®ƒä¸å…·æœ‰åŸå‹è€Œä¸”ä¸èƒ½é€šè¿‡JavaScriptä»£ç ç›´æ¥è®¿é—®ã€‚åˆ›å»ºå®Œæ´»åŠ¨å¯¹è±¡åï¼ŒæŠŠæ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°açš„ä½œç”¨åŸŸé“¾çš„æœ€é¡¶ç«¯ã€‚æ­¤æ—¶açš„ä½œç”¨åŸŸé“¾åŒ…å«äº†ä¸¤ä¸ªå¯¹è±¡ï¼šaçš„æ´»åŠ¨å¯¹è±¡å’Œwindowå¯¹è±¡ã€‚</li><li>ä¸‹ä¸€æ­¥æ˜¯åœ¨æ´»åŠ¨å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªargumentså±æ€§ï¼Œå®ƒä¿å­˜ç€è°ƒç”¨å‡½æ•°aæ—¶æ‰€ä¼ é€’çš„å‚æ•°ã€‚</li><li>æœ€åæŠŠæ‰€æœ‰å‡½æ•°açš„å½¢å‚å’Œå†…éƒ¨çš„å‡½æ•°bçš„å¼•ç”¨ä¹Ÿæ·»åŠ åˆ°açš„æ´»åŠ¨å¯¹è±¡ä¸Šã€‚åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œå®Œæˆäº†å‡½æ•°bçš„çš„å®šä¹‰ï¼Œå› æ­¤å¦‚åŒç¬¬3æ­¥ï¼Œå‡½æ•°bçš„ä½œç”¨åŸŸé“¾è¢«è®¾ç½®ä¸ºbæ‰€è¢«å®šä¹‰çš„ç¯å¢ƒï¼Œå³açš„ä½œç”¨åŸŸã€‚</li></ul><p>åˆ°æ­¤ï¼Œæ•´ä¸ªå‡½æ•°aä»å®šä¹‰åˆ°æ‰§è¡Œçš„æ­¥éª¤å°±å®Œæˆäº†ã€‚æ­¤æ—¶aè¿”å›å‡½æ•°bçš„å¼•ç”¨ç»™cï¼Œåˆå‡½æ•°bçš„ä½œç”¨åŸŸé“¾åŒ…å«äº†å¯¹å‡½æ•°açš„æ´»åŠ¨å¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´bå¯ä»¥è®¿é—®åˆ°aä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°ã€‚å‡½æ•°bè¢«cå¼•ç”¨ï¼Œå‡½æ•°båˆä¾èµ–å‡½æ•°aï¼Œå› æ­¤å‡½æ•°aåœ¨è¿”å›åä¸ä¼šè¢«GCå›æ”¶ã€‚</p><p>å½“å‡½æ•°bæ‰§è¡Œçš„æ—¶å€™äº¦ä¼šåƒä»¥ä¸Šæ­¥éª¤ä¸€æ ·ã€‚å› æ­¤ï¼Œæ‰§è¡Œæ—¶bçš„ä½œç”¨åŸŸé“¾åŒ…å«äº†3ä¸ªå¯¹è±¡ï¼šbçš„æ´»åŠ¨å¯¹è±¡ã€açš„æ´»åŠ¨å¯¹è±¡å’Œwindowå¯¹è±¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.jb51.net/upload/201007/20100703001017585.jpg" alt="https://www.jb51.net/upload/201007/20100703001017585.jpg"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œå½“åœ¨å‡½æ•°bä¸­è®¿é—®ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œæœç´¢é¡ºåºæ˜¯ï¼š</p><ul><li>å…ˆæœç´¢è‡ªèº«çš„æ´»åŠ¨å¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›ï¼Œå¦‚æœä¸å­˜åœ¨å°†ç»§ç»­æœç´¢å‡½æ•°açš„æ´»åŠ¨å¯¹è±¡ï¼Œä¾æ¬¡æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚</li><li>å¦‚æœå‡½æ•°bå­˜åœ¨prototypeåŸå‹å¯¹è±¡ï¼Œåˆ™åœ¨æŸ¥æ‰¾å®Œè‡ªèº«çš„æ´»åŠ¨å¯¹è±¡åå…ˆæŸ¥æ‰¾è‡ªèº«çš„åŸå‹å¯¹è±¡ï¼Œå†ç»§ç»­æŸ¥æ‰¾ã€‚è¿™å°±æ˜¯Javascriptä¸­çš„å˜é‡æŸ¥æ‰¾æœºåˆ¶ã€‚</li><li>å¦‚æœæ•´ä¸ªä½œç”¨åŸŸé“¾ä¸Šéƒ½æ— æ³•æ‰¾åˆ°ï¼Œåˆ™è¿”å›undefinedã€‚<br>å°ç»“ï¼Œæœ¬æ®µä¸­æåˆ°äº†ä¸¤ä¸ªé‡è¦çš„è¯è¯­ï¼šå‡½æ•°çš„<code>å®šä¹‰ä¸æ‰§è¡Œ</code>ã€‚æ–‡ä¸­æåˆ°å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å®šä¹‰å‡½æ•°æ—¶å€™å°±å·²ç»ç¡®å®šï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™ç¡®å®šï¼ˆå‚çœ‹æ­¥éª¤1å’Œ3ï¼‰ã€‚ç”¨ä¸€æ®µä»£ç æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> g = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> x; &#125;</span><br><span class="line">  <span class="keyword">return</span> g;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> h = f(<span class="number">1</span>);</span><br><span class="line">alert(h());</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä¸­å˜é‡hæŒ‡å‘äº†fä¸­çš„é‚£ä¸ªåŒ¿åå‡½æ•°(ç”±gè¿”å›)ã€‚</p><ul><li>å‡è®¾å‡½æ•°hçš„ä½œç”¨åŸŸæ˜¯åœ¨æ‰§è¡Œalert(h())ç¡®å®šçš„ï¼Œé‚£ä¹ˆæ­¤æ—¶hçš„ä½œç”¨åŸŸé“¾æ˜¯ï¼šhçš„æ´»åŠ¨å¯¹è±¡-&gt;alertçš„æ´»åŠ¨å¯¹è±¡-&gt;windowå¯¹è±¡ã€‚<br>å‡è®¾å‡½æ•°hçš„ä½œç”¨åŸŸæ˜¯åœ¨å®šä¹‰æ—¶ç¡®å®šçš„ï¼Œå°±æ˜¯è¯´hæŒ‡å‘çš„é‚£ä¸ªåŒ¿åå‡½æ•°åœ¨å®šä¹‰çš„æ—¶å€™å°±å·²ç»ç¡®å®šäº†ä½œç”¨åŸŸã€‚é‚£ä¹ˆåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œhçš„ä½œç”¨åŸŸé“¾ä¸ºï¼šhçš„æ´»åŠ¨å¯¹è±¡-&gt;fçš„æ´»åŠ¨å¯¹è±¡-&gt;windowå¯¹è±¡ã€‚</li><li>å¦‚æœç¬¬ä¸€ç§å‡è®¾æˆç«‹ï¼Œé‚£è¾“å‡ºå€¼å°±æ˜¯undefinedï¼›å¦‚æœç¬¬äºŒç§å‡è®¾æˆç«‹ï¼Œè¾“å‡ºå€¼åˆ™ä¸º1ã€‚</li></ul><p>è¿è¡Œç»“æœè¯æ˜äº†ç¬¬2ä¸ªå‡è®¾æ˜¯æ­£ç¡®çš„ï¼Œè¯´æ˜å‡½æ•°çš„ä½œç”¨åŸŸç¡®å®æ˜¯åœ¨å®šä¹‰è¿™ä¸ªå‡½æ•°çš„æ—¶å€™å°±å·²ç»ç¡®å®šäº†ã€‚</p><h3 id="é—­åŒ…çš„åº”ç”¨åœºæ™¯"><a href="#é—­åŒ…çš„åº”ç”¨åœºæ™¯" class="headerlink" title="é—­åŒ…çš„åº”ç”¨åœºæ™¯"></a>é—­åŒ…çš„åº”ç”¨åœºæ™¯</h3><p>ä¿æŠ¤å‡½æ•°å†…çš„å˜é‡å®‰å…¨ã€‚ä»¥æœ€å¼€å§‹çš„ä¾‹å­ä¸ºä¾‹ï¼Œå‡½æ•°aä¸­iåªæœ‰å‡½æ•°bæ‰èƒ½è®¿é—®ï¼Œè€Œæ— æ³•é€šè¿‡å…¶ä»–é€”å¾„è®¿é—®åˆ°ï¼Œå› æ­¤ä¿æŠ¤äº†içš„å®‰å…¨æ€§ã€‚</p><ul><li>åœ¨å†…å­˜ä¸­ç»´æŒä¸€ä¸ªå˜é‡ã€‚ä¾ç„¶å¦‚å‰ä¾‹ï¼Œç”±äºé—­åŒ…ï¼Œå‡½æ•°aä¸­içš„ä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œå› æ­¤æ¯æ¬¡æ‰§è¡Œc()ï¼Œéƒ½ä¼šç»™iè‡ªåŠ 1ã€‚</li><li>é€šè¿‡ä¿æŠ¤å˜é‡çš„å®‰å…¨å®ç°JSç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ï¼ˆä¸èƒ½è¢«å¤–éƒ¨è®¿é—®ï¼‰</li><li>ç§æœ‰å±æ€§å’Œæ–¹æ³•åœ¨Constructorå¤–æ˜¯æ— æ³•è¢«è®¿é—®çš„<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Constructor</span>(<span class="params">...</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>; </span><br><span class="line">  <span class="keyword">var</span> membername = value; </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">membername</span>(<span class="params">...</span>) </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#Javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="Javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶"></a>Javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶</h3><p>åœ¨Javascriptä¸­ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡ä¸å†è¢«å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±ä¼šè¢«GCå›æ”¶ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡äº’ç›¸å¼•ç”¨ï¼Œè€Œä¸å†è¢«ç¬¬3è€…æ‰€å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªäº’ç›¸å¼•ç”¨çš„å¯¹è±¡ä¹Ÿä¼šè¢«å›æ”¶ã€‚å› ä¸ºå‡½æ•°aè¢«bå¼•ç”¨ï¼Œbåˆè¢«aå¤–çš„cå¼•ç”¨ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‡½æ•°aæ‰§è¡Œåä¸ä¼šè¢«å›æ”¶çš„åŸå› ã€‚</p><blockquote><p>éå•†ç”¨ï¼Œä¾µåˆ ï¼Œè½¬è‡ª: <a href="https://www.jb51.net/article/24101.htm" target="_blank" rel="noopener">https://www.jb51.net/article/24101.htm</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;é—­åŒ…ï¼ˆclosureï¼‰æ˜¯Javascriptè¯­è¨€çš„ä¸€ä¸ªéš¾ç‚¹ï¼Œä¹Ÿæ˜¯å®ƒçš„ç‰¹è‰²ï¼Œå¾ˆå¤šé«˜çº§åº”ç”¨éƒ½è¦ä¾é é—­åŒ…å®ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;ä¸€ã€å˜é‡çš„ä½œç”¨åŸŸ&quot;&gt;&lt;a href=&quot;#ä¸€ã€å˜é‡çš„ä½œç”¨åŸŸ&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å˜é‡çš„ä½œç”¨åŸŸ&quot;&gt;&lt;/a&gt;ä¸€ã€å˜é‡çš„ä½œç”¨åŸŸ&lt;/h3&gt;&lt;p&gt;è¦ç†è§£é—­åŒ…ï¼Œé¦–å…ˆå¿…é¡»ç†è§£Javascriptç‰¹æ®Šçš„å˜é‡ä½œç”¨åŸŸã€‚&lt;/p&gt;
&lt;p&gt;å˜é‡çš„ä½œç”¨åŸŸæ— éå°±æ˜¯ä¸¤ç§ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;Javascriptè¯­è¨€çš„ç‰¹æ®Šä¹‹å¤„ï¼Œå°±åœ¨äºå‡½æ•°å†…éƒ¨å¯ä»¥ç›´æ¥è¯»å–å…¨å±€å˜é‡ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/"/>
    
      <category term="é—­åŒ…" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E9%97%AD%E5%8C%85/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/tags/js/"/>
    
      <category term="é—­åŒ…" scheme="https://heiyehk.github.io/blog/tags/%E9%97%AD%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>åŸå‹ä¸åŸå‹é“¾çš„ç†è§£</title>
    <link href="https://heiyehk.github.io/blog/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <id>https://heiyehk.github.io/blog/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9A%84%E7%90%86%E8%A7%A3/</id>
    <published>2020-05-20T08:14:52.000Z</published>
    <updated>2020-05-20T08:56:29.356Z</updated>
    
    <content type="html"><![CDATA[<p>ã€æœ¬æ–‡ç« ç³»è½¬è½½ã€‘</p><p>æœ€å¼€å§‹æƒ³è¦ç›´è§‚çš„ç†è§£è¯·ç›´æ¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆåšå®¢å…³äºç»§æ‰¿çš„è®²è§£ï¼š<a href="http://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html</a></p><h3 id="åŸå‹å¯¹è±¡"><a href="#åŸå‹å¯¹è±¡" class="headerlink" title="åŸå‹å¯¹è±¡"></a>åŸå‹å¯¹è±¡</h3><p>javascriptè¯­è¨€æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå®ƒæ²¡æœ‰â€å­ç±»â€å’Œâ€çˆ¶ç±»â€çš„æ¦‚å¿µï¼Œé‡Œé¢æ‰€æœ‰çš„æ•°æ®ç±»å‹éƒ½æ˜¯å¯¹è±¡ï¼Œå¦‚ä½•å°†è¿™äº›å¯¹è±¡è”ç³»èµ·æ¥å‘¢ï¼Ÿ</p><p>Brendan Eichåœ¨è€ƒè™‘è®¾è®¡ç»§æ‰¿æœºåˆ¶çš„æ—¶å€™ï¼Œå‚è€ƒäº†C++å’ŒJAVAä½¿ç”¨newå‘½ä»¤ï¼Œé€šè¿‡è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹çš„æ–¹å¼ï¼Œå°†newå‘½ä»¤å¼•å…¥javascriptã€‚</p><p>C++çš„å†™æ³•æ˜¯ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ClassName *object = <span class="keyword">new</span> ClassName(param);</span><br></pre></td></tr></table></figure><a id="more"></a><p>Javaçš„å†™æ³•æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person person = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œjavascripté‡Œé¢æ²¡æœ‰â€œç±»â€è¿™ä¸ªæ¦‚å¿µï¼Œé‚£ä¹ˆï¼ŒBrendan Eichå†³å®šç›´æ¥åœ¨newåé¢è·Ÿä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ¥ç”Ÿæˆå®ä¾‹ã€‚</p><p>æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿæ„é€ å‡½æ•°ä¸å…¶ä»–å‡½æ•°å”¯ä¸€çš„åŒºåˆ«åœ¨äºè°ƒç”¨æ–¹å¼ä¸åŒã€‚ä»»ä½•å‡½æ•°åªè¦é€šè¿‡newæ¥è°ƒç”¨å°±å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ï¼Œå®ƒæ˜¯ç”¨æ¥åˆ›å»ºç‰¹å®šç±»å‹çš„å¯¹è±¡ã€‚</p><p>ä¸‹é¢å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°Femaleï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Female</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.sex = <span class="string">'female'</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡newå‘½ä»¤æ¥ç”Ÿæˆä¸€ä¸ªpersonå®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Female(<span class="string">"Summer"</span>)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œæ„é€ å‡½æ•°Femaleå°±æ˜¯å®ä¾‹å¯¹è±¡person1çš„åŸå‹ï¼ï¼ï¼Femaleé‡Œçš„thiså…³é”®å­—å°±æŒ‡çš„æ˜¯person1è¿™ä¸ªå¯¹è±¡ï¼</p><p>newå‡ºæ¥çš„person1å¯¹è±¡æ­¤æ—¶å·²ç»å’ŒFemaleå†æ— è”ç³»äº†ï¼ä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªnewå‡ºæ¥çš„å®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•çš„å‰¯æœ¬ï¼Œæ˜¯ç‹¬ç«‹çš„çš„ï¼ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªä¸ä¼šå½±å“å¦ä¸€ä¸ªï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Female(<span class="string">"Summer"</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Female(<span class="string">"Lily"</span>);</span><br><span class="line"></span><br><span class="line">person2.sex = <span class="string">'male'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person1.sex)      <span class="comment">// female</span></span><br><span class="line"><span class="built_in">console</span>.log(person2.sex)      <span class="comment">// male</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›æ„é€ å‡½æ•°ä¸­çš„sexå±æ€§æ˜¯ä¸€ä¸ªå…±æœ‰å±æ€§ï¼Œé‚£ä¹ˆæ­¤æ—¶ç”¨è¿™æ ·çš„æ–¹æ³•ï¼Œæ¯ä¸ªå®ä¾‹ä¸­éƒ½æœ‰ä¸€ä¸ªç›¸åŒçš„sexå±æ€§ï¼Œä¼šé€ æˆèµ„æºæå¤§çš„æµªè´¹ï¼</p><p>é‚£ä¹ˆåŸå‹å¯¹è±¡å°±å³å°†ç™»åœºäº†ï¼Brendan Eichå†³å®šç»™æ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½è®¾ç½®ä¸€ä¸ª<strong>prototypeå±æ€§</strong>ï¼Œè¿™ä¸ªå±æ€§å°±æŒ‡å‘åŸå‹å¯¹è±¡ã€‚å…¶å®åŸå‹å¯¹è±¡å°±åªæ˜¯ä¸ªæ™®é€šå¯¹è±¡ï¼Œé‡Œé¢å­˜æ”¾ç€æ‰€æœ‰å®ä¾‹å¯¹è±¡éœ€è¦å…±äº«çš„å±æ€§å’Œæ–¹æ³•ï¼æ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠéœ€è¦å…±äº«çš„æ”¾åˆ°åŸå‹å¯¹è±¡é‡Œï¼ŒæŠŠé‚£äº›ä¸éœ€è¦å…±äº«çš„å±æ€§å’Œæ–¹æ³•å­˜åœ¨åœ¨æ„é€ å‡½æ•°é‡Œï¼</p><p>é‚£ä¹ˆä¸Šé¢çš„ä»£ç å¯æ”¹å†™å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.sex = <span class="string">'female'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"Summer"</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">"Lily"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person1.sex)      <span class="comment">// female</span></span><br><span class="line"><span class="built_in">console</span>.log(person2.sex)      <span class="comment">// female</span></span><br><span class="line"></span><br><span class="line">Person.prototype.sex = <span class="string">'male'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person1.sex)      <span class="comment">// male</span></span><br><span class="line"><span class="built_in">console</span>.log(person2.sex)      <span class="comment">// male</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œä¿®æ”¹prototypeå±æ€§ä¼šå½±å“å®ƒçš„æ‰€æœ‰å®ä¾‹çš„sexçš„å€¼ï¼ï¼</p><p>å®ä¾‹ä¸€æ—¦åˆ›å»ºå‡ºæ¥å°±ä¼šè‡ªåŠ¨å¼•ç”¨prototypeå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼æ‰€ä»¥å®ä¾‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯è‡ªèº«çš„ï¼Œä¸€ç§æ˜¯å¼•ç”¨è‡ªprototypeçš„ã€‚</p><p>å…·ä½“å®ç°æ˜¯è¿™æ ·çš„ï¼š</p><p>æ¯å½“ä»£ç è¯»å–æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§çš„æ—¶å€™ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡æœç´¢ã€‚é¦–å…ˆä»å¯¹è±¡å®ä¾‹æœ¬èº«å¼€å§‹ï¼Œå¦‚æœåœ¨å®ä¾‹ä¸­æ‰¾åˆ°äº†è¯¥å±æ€§ï¼Œåˆ™è¿”å›è¯¥å±æ€§çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™é¡ºç€<strong>åŸå‹é“¾æŒ‡é’ˆ</strong>å‘ä¸Šï¼Œåˆ°åŸå‹å¯¹è±¡ä¸­å»æ‰¾ï¼Œå¦‚æœå¦‚æœæ‰¾åˆ°å°±è¿”å›è¯¥å±æ€§å€¼ã€‚</p><p>è¿™é‡Œè¦æä¸€ç‚¹ï¼Œå¦‚æœä¸ºå¯¹è±¡å®ä¾‹æ·»åŠ äº†ä¸€ä¸ªå±æ€§ä¸åŸå‹ä¸­åŒåï¼Œåˆ™è¯¥å±æ€§ä¼šå±è”½æ‰åŸå‹ä¸­çš„åŒåå±æ€§ï¼Œä¸ä¼šå»ä¿®æ”¹å®ƒï¼ä½¿ç”¨deleteå¯ä»¥åˆ é™¤å®ä¾‹ä¸­çš„å±æ€§æåˆ°deleteé‚£è¦æ’ä¸€å¥~<strong>deleteåªèƒ½åˆ é™¤å¯¹è±¡ä¸‹çš„å±æ€§ï¼Œä¸èƒ½åˆ é™¤å˜é‡å’Œå‚æ•°ï¼</strong></p><h3 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h3><p>äº‹å®ä¸Šï¼Œjsé‡Œå®Œå…¨ä¾é â€åŸå‹é“¾â€(prototype chain)æ¨¡å¼æ¥å®ç°ç»§æ‰¿ã€‚</p><p>ä¸Šé¢è¯´å®ŒåŸå‹å¯¹è±¡ã€‚ä¸‹é¢è¦æ‰’ä¸€æ‰’protoã€prototypeã€constructorã€‚</p><ul><li>protoï¼šäº‹å®ä¸Šå°±æ˜¯åŸå‹é“¾æŒ‡é’ˆï¼ï¼</li><li>prototypeï¼šä¸Šé¢è¯´åˆ°è¿™ä¸ªæ˜¯æŒ‡å‘åŸå‹å¯¹è±¡çš„</li><li>constructorï¼šæ¯ä¸€ä¸ªåŸå‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œå°±æ˜¯constructor</li></ul><h3 id="ç»§æ‰¿å®ç°æ–¹å¼ï¼š"><a href="#ç»§æ‰¿å®ç°æ–¹å¼ï¼š" class="headerlink" title="ç»§æ‰¿å®ç°æ–¹å¼ï¼š"></a>ç»§æ‰¿å®ç°æ–¹å¼ï¼š</h3><p>ä¸ºäº†å®ç°ç»§æ‰¿ï¼Œprotoä¼šæŒ‡å‘ä¸Šä¸€å±‚çš„åŸå‹å¯¹è±¡ï¼Œè€Œä¸Šä¸€å±‚çš„ç»“æ„ä¾ç„¶ç±»ä¼¼ï¼Œé‚£ä¹ˆå°±åˆ©ç”¨protoä¸€ç›´æŒ‡å‘Objectçš„åŸå‹å¯¹è±¡ä¸Šï¼Object.prototype.<strong>proto</strong> = null;è¡¨ç¤ºåˆ°è¾¾æœ€é¡¶ç«¯ã€‚å¦‚æ­¤å½¢æˆäº†åŸå‹é“¾ç»§æ‰¿ã€‚</p><p>ä¸‹é¢æœ‰ä¸ªå›¾è§£éå¸¸ç»å…¸ï¼Œæˆ‘è‡ªå·±ä¹Ÿæ‰‹ç”»äº†ä¸€éå»ç†è§£ï¼ŒçœŸçš„éå¸¸æœ‰æ•ˆ~</p><p><img src="https://upload-images.jianshu.io/upload_images/2418690-5d2b5b99c77e9fc7..png" alt="https://upload-images.jianshu.io/upload_images/2418690-5d2b5b99c77e9fc7..png"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¤§è‡´æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š</p><ol><li>Objectæ˜¯ä½œä¸ºä¼—å¤šnewå‡ºæ¥çš„å®ä¾‹çš„åŸºç±» function Object(){ [ native code ] }</li><li>Functionæ˜¯ä½œä¸ºä¼—å¤šfunctionå‡ºæ¥çš„å‡½æ•°çš„åŸºç±» function Function(){ [ native code ] }</li><li>æ„é€ å‡½æ•°çš„proto(åŒ…æ‹¬Function.prototypeå’ŒObject.prototype)éƒ½æŒ‡å‘Function.prototype</li><li>åŸå‹å¯¹è±¡çš„protoéƒ½æŒ‡å‘Object.prototype</li><li>Object.prototype.protoæŒ‡å‘null</li></ol><blockquote><p>ä½œè€…ï¼šå…”å­ä¸æ‰“åœ°é¼ æ‰“ä»£ç <br>é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/f30fa27999e3" target="_blank" rel="noopener">https://www.jianshu.com/p/f30fa27999e3</a><br>æ¥æºï¼šç®€ä¹¦</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€æœ¬æ–‡ç« ç³»è½¬è½½ã€‘&lt;/p&gt;
&lt;p&gt;æœ€å¼€å§‹æƒ³è¦ç›´è§‚çš„ç†è§£è¯·ç›´æ¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆåšå®¢å…³äºç»§æ‰¿çš„è®²è§£ï¼š&lt;a href=&quot;http://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;åŸå‹å¯¹è±¡&quot;&gt;&lt;a href=&quot;#åŸå‹å¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;åŸå‹å¯¹è±¡&quot;&gt;&lt;/a&gt;åŸå‹å¯¹è±¡&lt;/h3&gt;&lt;p&gt;javascriptè¯­è¨€æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå®ƒæ²¡æœ‰â€å­ç±»â€å’Œâ€çˆ¶ç±»â€çš„æ¦‚å¿µï¼Œé‡Œé¢æ‰€æœ‰çš„æ•°æ®ç±»å‹éƒ½æ˜¯å¯¹è±¡ï¼Œå¦‚ä½•å°†è¿™äº›å¯¹è±¡è”ç³»èµ·æ¥å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;Brendan Eichåœ¨è€ƒè™‘è®¾è®¡ç»§æ‰¿æœºåˆ¶çš„æ—¶å€™ï¼Œå‚è€ƒäº†C++å’ŒJAVAä½¿ç”¨newå‘½ä»¤ï¼Œé€šè¿‡è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹çš„æ–¹å¼ï¼Œå°†newå‘½ä»¤å¼•å…¥javascriptã€‚&lt;/p&gt;
&lt;p&gt;C++çš„å†™æ³•æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ClassName *object = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ClassName(param);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/"/>
    
      <category term="åŸå‹" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E5%8E%9F%E5%9E%8B/"/>
    
      <category term="åŸå‹é“¾" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E5%8E%9F%E5%9E%8B/%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/tags/js/"/>
    
      <category term="åŸå‹" scheme="https://heiyehk.github.io/blog/tags/%E5%8E%9F%E5%9E%8B/"/>
    
      <category term="åŸå‹é“¾" scheme="https://heiyehk.github.io/blog/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>è®¤è¯†V8å¼•æ“</title>
    <link href="https://heiyehk.github.io/blog/%E8%AE%A4%E8%AF%86V8%E5%BC%95%E6%93%8E/"/>
    <id>https://heiyehk.github.io/blog/%E8%AE%A4%E8%AF%86V8%E5%BC%95%E6%93%8E/</id>
    <published>2020-05-20T07:36:41.000Z</published>
    <updated>2020-05-20T08:56:03.084Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://pic2.zhimg.com/v2-4dce785ff4595de55623611ab0055d33_1200x500.jpg" alt="https://pic2.zhimg.com/v2-4dce785ff4595de55623611ab0055d33_1200x500.jpg"></p><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>JavaScriptç»å¯¹æ˜¯æœ€ç«çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ï¼Œä¸€ç›´å…·æœ‰å¾ˆå¤§çš„ç”¨æˆ·ç¾¤ï¼Œéšç€åœ¨æœåŠ¡ç«¯çš„ä½¿ç”¨ï¼ˆNodeJsï¼‰ï¼Œæ›´æ˜¯çˆ†å‘äº†æå¼ºçš„ç”Ÿå‘½åŠ›ã€‚ç¼–ç¨‹è¯­è¨€åˆ†ä¸ºç¼–è¯‘å‹è¯­è¨€å’Œè§£é‡Šå‹è¯­è¨€ä¸¤ç±»ï¼Œç¼–è¯‘å‹è¯­è¨€åœ¨æ‰§è¡Œä¹‹å‰è¦å…ˆè¿›è¡Œå®Œå…¨ç¼–è¯‘ï¼Œè€Œè§£é‡Šå‹è¯­è¨€ä¸€è¾¹ç¼–è¯‘ä¸€è¾¹æ‰§è¡Œï¼Œå¾ˆæ˜æ˜¾è§£é‡Šå‹è¯­è¨€çš„æ‰§è¡Œé€Ÿåº¦æ˜¯æ…¢äºç¼–è¯‘å‹è¯­è¨€çš„ï¼Œè€ŒJavaScriptå°±æ˜¯ä¸€ç§è§£é‡Šå‹è„šæœ¬è¯­è¨€ï¼Œæ”¯æŒåŠ¨æ€ç±»å‹ã€å¼±ç±»å‹ã€åŸºäºåŸå‹çš„è¯­è¨€ï¼Œå†…ç½®æ”¯æŒç±»å‹ã€‚é‰´äºJavaScriptéƒ½æ˜¯åœ¨å‰ç«¯æ‰§è¡Œï¼Œè€Œä¸”éœ€è¦åŠæ—¶å“åº”ç”¨æˆ·ï¼Œè¿™å°±è¦æ±‚JavaScriptå¯ä»¥å¿«é€Ÿçš„è§£æåŠæ‰§è¡Œã€‚</p><p>éšç€Webç›¸å…³æŠ€æœ¯çš„å‘å±•ï¼ŒJavaScriptæ‰€è¦æ‰¿æ‹…çš„å·¥ä½œä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œæ—©å°±è¶…è¶Šäº†â€œè¡¨å•éªŒè¯â€çš„èŒƒç•´ï¼Œè¿™å°±æ›´éœ€è¦å¿«é€Ÿçš„è§£æå’Œæ‰§è¡ŒJavaScriptè„šæœ¬ã€‚V8å¼•æ“å°±æ˜¯ä¸ºè§£å†³è¿™ä¸€é—®é¢˜è€Œç”Ÿï¼Œåœ¨nodeä¸­ä¹Ÿæ˜¯é‡‡ç”¨è¯¥å¼•æ“æ¥è§£æJavaScriptã€‚</p><p>V8æ˜¯å¦‚ä½•ä½¿å¾—JavaScriptæ€§èƒ½æœ‰å¤§å¹…æå‡çš„å‘¢ï¼Ÿé€šè¿‡å¯¹ä¸€äº›ä¹¦ç±å’Œæ–‡ç« çš„å­¦ä¹ ï¼Œæ¢³ç†äº†V8çš„ç›¸å…³å†…å®¹ï¼Œæœ¬æ–‡å°†å¸¦ä½ è®¤è¯† V8ã€‚</p><a id="more"></a><h3 id="1-æ¸²æŸ“å¼•æ“åŠç½‘é¡µæ¸²æŸ“"><a href="#1-æ¸²æŸ“å¼•æ“åŠç½‘é¡µæ¸²æŸ“" class="headerlink" title="1.æ¸²æŸ“å¼•æ“åŠç½‘é¡µæ¸²æŸ“"></a>1.æ¸²æŸ“å¼•æ“åŠç½‘é¡µæ¸²æŸ“</h3><p>æµè§ˆå™¨è‡ªä»ä¸Šä¸–çºª80å¹´ä»£åæœŸ90å¹´ä»£åˆæœŸè¯ç”Ÿä»¥æ¥ï¼Œå·²ç»å¾—åˆ°äº†é•¿è¶³çš„å‘å±•ï¼Œå…¶åŠŸèƒ½ä¹Ÿè¶Šæ¥è¶Šä¸°å¯Œï¼ŒåŒ…æ‹¬ç½‘ç»œã€èµ„æºç®¡ç†ã€ç½‘é¡µæµè§ˆã€å¤šé¡µé¢ç®¡ç†ã€æ’ä»¶å’Œæ‰©å±•ã€ä¹¦ç­¾ç®¡ç†ã€å†å²è®°å½•ç®¡ç†ã€è®¾ç½®ç®¡ç†ã€ä¸‹è½½ç®¡ç†ã€è´¦æˆ·å’ŒåŒæ­¥ã€å®‰å…¨æœºåˆ¶ã€éšç§ç®¡ç†ã€å¤–è§‚ä¸»é¢˜ã€å¼€å‘è€…å·¥å…·ç­‰ã€‚åœ¨è¿™äº›åŠŸèƒ½ä¸­ï¼Œä¸ºç”¨æˆ·æä¾›ç½‘é¡µæµè§ˆæœåŠ¡æ— ç–‘æ˜¯æœ€é‡è¦çš„åŠŸèƒ½ï¼Œä¸‹é¢å°†å¯¹ç›¸å…³å†…å®¹è¿›è¡Œä»‹ç»ã€‚</p><h4 id="1-1-æ¸²æŸ“å¼•æ“"><a href="#1-1-æ¸²æŸ“å¼•æ“" class="headerlink" title="1.1.æ¸²æŸ“å¼•æ“"></a>1.1.æ¸²æŸ“å¼•æ“</h4><p>æ¸²æŸ“å¼•æ“ï¼šèƒ½å¤Ÿå°†HTML/CSS/JavaScriptæ–‡æœ¬åŠç›¸åº”çš„èµ„æºæ–‡ä»¶è½¬æ¢æˆå›¾åƒç»“æœã€‚æ¸²æŸ“å¼•æ“çš„ä¸»è¦ä½œç”¨æ˜¯å°†èµ„æºæ–‡ä»¶è½¬åŒ–ä¸ºç”¨æˆ·å¯è§çš„ç»“æœã€‚åœ¨æµè§ˆå™¨çš„å‘å±•è¿‡ç¨‹ä¸­ï¼Œä¸åŒçš„å‚å•†å¼€å‘äº†ä¸åŒçš„æ¸²æŸ“å¼•æ“ï¼Œå¦‚Tridend(IE)ã€Gecko(FF)ã€WebKit(Safari,Chrome,Andriodæµè§ˆå™¨)ç­‰ã€‚WebKitæ˜¯ç”±è‹¹æœ2005å¹´å‘èµ·çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¼•èµ·äº†ä¼—å¤šå…¬å¸çš„é‡è§†ï¼Œå‡ å¹´é—´è¢«å¾ˆå¤šå…¬å¸æ‰€é‡‡ç”¨ï¼Œåœ¨ç§»åŠ¨ç«¯æ›´å æ®äº†å„æ–­åœ°ä½ã€‚æ›´æœ‰ç”šè€…ï¼Œå¼€å‘å‡ºäº†åŸºäºWebKitçš„æ”¯æŒHTML5çš„webæ“ä½œç³»ç»Ÿ(å¦‚ï¼šChrome OSã€Web OS)ã€‚</p><p>ä¸‹é¢æ˜¯WebKitçš„å¤§è‡´ç»“æ„ï¼š<br><img src="https://pic1.zhimg.com/80/v2-959135939fe2cbc2d9a437ef81dff328_720w.png" alt="https://pic1.zhimg.com/80/v2-959135939fe2cbc2d9a437ef81dff328_720w.png"></p><p>ä¸Šå›¾ä¸­å®çº¿æ¡†å†…æ¨¡å—æ˜¯æ‰€æœ‰ç§»æ¤çš„å…±æœ‰éƒ¨åˆ†ï¼Œè™šçº¿æ¡†å†…ä¸åŒçš„å‚å•†å¯ä»¥è‡ªå·±å®ç°ã€‚ä¸‹é¢è¿›è¡Œä»‹ç»ï¼š</p><ul><li>æ“ä½œç³»ç»Ÿï¼šæ˜¯ç®¡ç†å’Œæ§åˆ¶è®¡ç®—æœºç¡¬ä»¶ä¸è½¯ä»¶èµ„æºçš„è®¡ç®—æœºç¨‹åºï¼Œæ˜¯ç›´æ¥è¿è¡Œåœ¨â€œè£¸æœºâ€ä¸Šçš„æœ€åŸºæœ¬çš„ç³»ç»Ÿè½¯ä»¶ï¼Œä»»ä½•å…¶ä»–è½¯ä»¶éƒ½å¿…é¡»åœ¨æ“ä½œç³»ç»Ÿçš„æ”¯æŒä¸‹æ‰èƒ½è¿è¡Œã€‚WebKitä¹Ÿæ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸Šå·¥ä½œçš„ã€‚</li><li>ç¬¬ä¸‰æ–¹åº“ï¼Œä¸ºäº†WebKitæä¾›æ”¯æŒï¼Œå¦‚å›¾å½¢åº“ã€ç½‘ç»œåº“ã€è§†é¢‘åº“ç­‰ã€‚</li><li>WebCore æ˜¯å„ä¸ªæµè§ˆå™¨ä½¿ç”¨çš„å…±äº«éƒ¨åˆ†ï¼ŒåŒ…æ‹¬HTMLè§£æå™¨ã€CSSè§£æå™¨ã€DOMå’ŒSVGç­‰ã€‚JavaScriptCoreæ˜¯WebKitçš„é»˜è®¤å¼•æ“ï¼Œåœ¨è°·æ­Œç³»åˆ—äº§å“ä¸­è¢«æ›¿æ¢ä¸ºV8å¼•æ“ã€‚WebKit Portsæ˜¯WebKitä¸­çš„éå…±äº«éƒ¨åˆ†ï¼Œç”±äºå¹³å°å·®å¼‚ã€ç¬¬ä¸‰æ–¹åº“å’Œéœ€æ±‚çš„ä¸åŒç­‰åŸå› ï¼Œä¸åŒçš„ç§»æ¤å¯¼è‡´äº†WebKitä¸åŒç‰ˆæœ¬è¡Œä¸ºä¸ä¸€è‡´ï¼Œå®ƒæ˜¯ä¸åŒæµè§ˆå™¨æ€§èƒ½å’ŒåŠŸèƒ½å·®å¼‚çš„å…³é”®éƒ¨åˆ†ã€‚</li><li>WebKitåµŒå…¥å¼ç¼–ç¨‹æ¥å£ï¼Œä¾›æµè§ˆå™¨è°ƒç”¨ï¼Œä¸ç§»æ¤å¯†åˆ‡ç›¸å…³ï¼Œä¸åŒçš„ç§»æ¤æœ‰ä¸åŒçš„æ¥å£è§„èŒƒã€‚</li><li>æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å¸ƒå±€æµ‹è¯•ç”¨ä¾‹å’Œæ€§èƒ½æµ‹è¯•ç”¨ä¾‹ï¼Œç”¨æ¥éªŒè¯æ¸²æŸ“ç»“æœçš„æ­£ç¡®æ€§ã€‚</li></ul><h4 id="1-2-ç½‘é¡µæ¸²æŸ“æµç¨‹"><a href="#1-2-ç½‘é¡µæ¸²æŸ“æµç¨‹" class="headerlink" title="1.2.ç½‘é¡µæ¸²æŸ“æµç¨‹"></a>1.2.ç½‘é¡µæ¸²æŸ“æµç¨‹</h4><p>ä¸Šé¢ä»‹ç»äº†æ¸²æŸ“å¼•æ“çš„å„ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆä¸€å¼ ç½‘é¡µï¼Œè¦ç»å†æ€æ ·çš„è¿‡ç¨‹ï¼Œæ‰èƒ½æŠµè¾¾ç”¨æˆ·é¢å‰ï¼Ÿ</p><p><img src="https://pic4.zhimg.com/80/v2-ad0a86d3faf223164a9bd22658feadc3_720w.png" alt="https://pic4.zhimg.com/80/v2-ad0a86d3faf223164a9bd22658feadc3_720w.png"></p><p>é¦–å…ˆæ˜¯ç½‘é¡µå†…å®¹ï¼Œè¾“å…¥åˆ°HTMLè§£æå™¨ï¼ŒHTMLè§£æå™¨è§£æï¼Œç„¶åæ„å»ºDOMæ ‘ï¼Œåœ¨è¿™æœŸé—´å¦‚æœé‡åˆ°JavaScriptä»£ç åˆ™äº¤ç»™JavaScriptå¼•æ“å¤„ç†ï¼›å¦‚æœæ¥è‡ªCSSè§£æå™¨çš„æ ·å¼ä¿¡æ¯ï¼Œæ„å»ºä¸€ä¸ªå†…éƒ¨ç»˜å›¾æ¨¡å‹ã€‚è¯¥æ¨¡å‹ç”±å¸ƒå±€æ¨¡å—è®¡ç®—æ¨¡å‹å†…éƒ¨å„ä¸ªå…ƒç´ çš„ä½ç½®å’Œå¤§å°ä¿¡æ¯ï¼Œæœ€åç”±ç»˜å›¾æ¨¡å—å®Œæˆä»è¯¥æ¨¡å‹åˆ°å›¾åƒçš„ç»˜åˆ¶ã€‚åœ¨ç½‘é¡µæ¸²æŸ“çš„è¿‡ç¨‹ä¸­ï¼Œå¤§è‡´å¯åˆ†ä¸ºä¸‹é¢3ä¸ªé˜¶æ®µã€‚</p><h5 id="1-2-1-ä»è¾“å…¥URLåˆ°ç”ŸæˆDOMæ ‘"><a href="#1-2-1-ä»è¾“å…¥URLåˆ°ç”ŸæˆDOMæ ‘" class="headerlink" title="1.2.1.ä»è¾“å…¥URLåˆ°ç”ŸæˆDOMæ ‘"></a>1.2.1.ä»è¾“å…¥URLåˆ°ç”ŸæˆDOMæ ‘</h5><ol><li>åœ°å€æ è¾“å…¥URLï¼ŒWebKitè°ƒç”¨èµ„æºåŠ è½½å™¨åŠ è½½ç›¸åº”èµ„æºï¼›</li><li>åŠ è½½å™¨ä¾èµ–ç½‘ç»œæ¨¡å—å»ºç«‹è¿æ¥ï¼Œå‘é€è¯·æ±‚å¹¶æ¥æ”¶ç­”å¤ï¼›</li><li>WebKitæ¥æ”¶å„ç§ç½‘é¡µæˆ–è€…èµ„æºæ•°æ®ï¼Œå…¶ä¸­æŸäº›èµ„æºå¯èƒ½åŒæ­¥æˆ–å¼‚æ­¥è·å–ï¼›</li><li>ç½‘é¡µäº¤ç»™HTMLè§£æå™¨è½¬å˜ä¸ºè¯è¯­ï¼›</li><li>è§£é‡Šå™¨æ ¹æ®è¯è¯­æ„å»ºèŠ‚ç‚¹ï¼Œå½¢æˆDOMæ ‘ï¼›</li><li>å¦‚æœèŠ‚ç‚¹æ˜¯JavaScriptä»£ç ï¼Œè°ƒç”¨JavaScriptå¼•æ“è§£é‡Šå¹¶æ‰§è¡Œï¼›</li><li>JavaScriptä»£ç å¯èƒ½ä¼šä¿®æ”¹DOMæ ‘ç»“æ„ï¼›</li><li>å¦‚æœèŠ‚ç‚¹ä¾èµ–å…¶ä»–èµ„æºï¼Œå¦‚å›¾ç‰‡\cssã€è§†é¢‘ç­‰ï¼Œè°ƒç”¨èµ„æºåŠ è½½å™¨åŠ è½½å®ƒä»¬ï¼Œä½†è¿™äº›æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œä¸ä¼šé˜»ç¢å½“å‰DOMæ ‘ç»§ç»­åˆ›å»ºï¼›å¦‚æœæ˜¯JavaScriptèµ„æºURLï¼ˆæ²¡æœ‰æ ‡è®°å¼‚æ­¥æ–¹å¼ï¼‰ï¼Œåˆ™éœ€è¦åœæ­¢å½“å‰DOMæ ‘åˆ›å»ºï¼Œç›´åˆ°JavaScriptåŠ è½½å¹¶è¢«JavaScriptå¼•æ“æ‰§è¡Œåæ‰ç»§ç»­DOMæ ‘çš„åˆ›å»ºã€‚</li></ol><h5 id="1-2-2-ä»DOMæ ‘åˆ°æ„å»ºWebKitç»˜å›¾ä¸Šä¸‹æ–‡"><a href="#1-2-2-ä»DOMæ ‘åˆ°æ„å»ºWebKitç»˜å›¾ä¸Šä¸‹æ–‡" class="headerlink" title="1.2.2.ä»DOMæ ‘åˆ°æ„å»ºWebKitç»˜å›¾ä¸Šä¸‹æ–‡"></a>1.2.2.ä»DOMæ ‘åˆ°æ„å»ºWebKitç»˜å›¾ä¸Šä¸‹æ–‡</h5><ol><li>CSSæ–‡ä»¶è¢«CSSè§£é‡Šå™¨è§£é‡Šæˆå†…éƒ¨è¡¨ç¤ºï¼›</li><li>CSSè§£é‡Šå™¨å®Œæˆå·¥ä½œåï¼Œåœ¨DOMæ ‘ä¸Šé™„åŠ æ ·å¼ä¿¡æ¯ï¼Œç”ŸæˆRenderObjectæ ‘ï¼›</li><li>RenderObjectèŠ‚ç‚¹åœ¨åˆ›å»ºçš„åŒæ—¶ï¼ŒWebKitä¼šæ ¹æ®ç½‘é¡µå±‚æ¬¡ç»“æ„æ„å»ºRenderLayeræ ‘ï¼ŒåŒæ—¶æ„å»ºä¸€ä¸ªè™šæ‹Ÿç»˜å›¾ä¸Šä¸‹æ–‡ã€‚</li></ol><h5 id="1-2-3-ç»˜å›¾ä¸Šä¸‹æ–‡åˆ°æœ€ç»ˆå›¾åƒå‘ˆç°"><a href="#1-2-3-ç»˜å›¾ä¸Šä¸‹æ–‡åˆ°æœ€ç»ˆå›¾åƒå‘ˆç°" class="headerlink" title="1.2.3.ç»˜å›¾ä¸Šä¸‹æ–‡åˆ°æœ€ç»ˆå›¾åƒå‘ˆç°"></a>1.2.3.ç»˜å›¾ä¸Šä¸‹æ–‡åˆ°æœ€ç»ˆå›¾åƒå‘ˆç°</h5><ol><li>ç»˜å›¾ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªä¸å¹³å°æ— å…³çš„æŠ½è±¡ç±»ï¼Œå®ƒå°†æ¯ä¸ªç»˜å›¾æ“ä½œæ¡¥æ¥åˆ°ä¸åŒçš„å…·ä½“å®ç°ç±»ï¼Œä¹Ÿå°±æ˜¯ç»˜å›¾å…·ä½“å®ç°ç±»ï¼›</li><li>ç»˜å›¾å®ç°ç±»ä¹Ÿå¯èƒ½æœ‰ç®€å•çš„å®ç°ï¼Œä¹Ÿå¯èƒ½æœ‰å¤æ‚çš„å®ç°ï¼Œè½¯ä»¶æ¸²æŸ“ã€ç¡¬ä»¶æ¸²æŸ“ã€åˆæˆæ¸²æŸ“ç­‰ï¼›</li><li>ç»˜å›¾å®ç°ç±»å°†2Då›¾å½¢åº“æˆ–è€…3Då›¾å½¢åº“ç»˜åˆ¶ç»“æœä¿å­˜ï¼Œäº¤ç»™æµè§ˆå™¨ç•Œé¢è¿›è¡Œå±•ç¤ºã€‚</li></ol><p>ä¸Šè¿°æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œç°ä»£ç½‘é¡µå¾ˆå¤šéƒ½æ˜¯åŠ¨æ€çš„ï¼Œéšç€ç½‘é¡µä¸ç”¨æˆ·çš„äº¤äº’ï¼Œæµè§ˆå™¨éœ€è¦ä¸æ–­çš„é‡å¤æ¸²æŸ“è¿‡ç¨‹ã€‚</p><h4 id="1-3-JavaScriptå¼•æ“"><a href="#1-3-JavaScriptå¼•æ“" class="headerlink" title="1.3.JavaScriptå¼•æ“"></a>1.3.JavaScriptå¼•æ“</h4><p><img src="https://pic1.zhimg.com/80/v2-0f5471e21a25e237dcfae2d34a306788_720w.png" alt="https://pic1.zhimg.com/80/v2-0f5471e21a25e237dcfae2d34a306788_720w.png"></p><p>JavaScriptæœ¬è´¨ä¸Šæ˜¯ä¸€ç§è§£é‡Šå‹è¯­è¨€ï¼Œä¸ç¼–è¯‘å‹è¯­è¨€ä¸åŒçš„æ˜¯å®ƒéœ€è¦ä¸€éæ‰§è¡Œä¸€è¾¹è§£æï¼Œè€Œç¼–è¯‘å‹è¯­è¨€åœ¨æ‰§è¡Œæ—¶å·²ç»å®Œæˆç¼–è¯‘ï¼Œå¯ç›´æ¥æ‰§è¡Œï¼Œæœ‰æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦(å¦‚ä¸Šå›¾æ‰€ç¤º)ã€‚JavaScriptä»£ç æ˜¯åœ¨æµè§ˆå™¨ç«¯è§£æå’Œæ‰§è¡Œçš„ï¼Œå¦‚æœéœ€è¦æ—¶é—´å¤ªé•¿ï¼Œä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚é‚£ä¹ˆæé«˜JavaScriptçš„è§£æé€Ÿåº¦å°±æ˜¯å½“åŠ¡ä¹‹æ€¥ã€‚JavaScriptå¼•æ“å’Œæ¸²æŸ“å¼•æ“çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://pic4.zhimg.com/80/v2-43b71b75cd4f28db05ab967e3aad5a97_720w.png" alt="https://pic4.zhimg.com/80/v2-43b71b75cd4f28db05ab967e3aad5a97_720w.png"></p><p>JavaScriptè¯­è¨€æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¼•å…¥äº†Javaè™šæ‹Ÿæœºå’ŒC++ç¼–è¯‘å™¨ä¸­çš„ä¼—å¤šæŠ€æœ¯ã€‚ç°åœ¨JavaScriptå¼•æ“çš„æ‰§è¡Œè¿‡ç¨‹å¤§è‡´æ˜¯ï¼š</p><p>æºä»£ç -â†’æŠ½è±¡è¯­æ³•æ ‘-â†’å­—èŠ‚ç -â†’JIT-â†’æœ¬åœ°ä»£ç (V8å¼•æ“æ²¡æœ‰ä¸­é—´å­—èŠ‚ç )ã€‚ä¸€æ®µä»£ç çš„æŠ½è±¡è¯­æ³•æ ‘ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠ½è±¡è¯­æ³•æ ‘å¦‚ä¸‹ï¼š<br><img src="https://pic4.zhimg.com/80/v2-4ee7dc5c0787930c03ff203c41a1482b_720w.png" alt="https://pic4.zhimg.com/80/v2-4ee7dc5c0787930c03ff203c41a1482b_720w.png"></p><p>V8æ›´åŠ ç›´æ¥çš„å°†æŠ½è±¡è¯­æ³•æ ‘é€šè¿‡JITæŠ€æœ¯è½¬æ¢æˆæœ¬åœ°ä»£ç ï¼Œæ”¾å¼ƒäº†åœ¨å­—èŠ‚ç é˜¶æ®µå¯ä»¥è¿›è¡Œçš„ä¸€äº›æ€§èƒ½ä¼˜åŒ–ï¼Œä½†ä¿è¯äº†æ‰§è¡Œé€Ÿåº¦ã€‚åœ¨V8ç”Ÿæˆæœ¬åœ°ä»£ç åï¼Œä¹Ÿä¼šé€šè¿‡Profileré‡‡é›†ä¸€äº›ä¿¡æ¯ï¼Œæ¥ä¼˜åŒ–æœ¬åœ°ä»£ç ã€‚è™½ç„¶ï¼Œå°‘äº†ç”Ÿæˆå­—èŠ‚ç è¿™ä¸€é˜¶æ®µçš„æ€§èƒ½ä¼˜åŒ–ï¼Œä½†æå¤§å‡å°‘äº†è½¬æ¢æ—¶é—´ã€‚</p><p>ä½†æ˜¯åœ¨2017å¹´4æœˆåº•ï¼Œv8 çš„ 5.9 ç‰ˆæœ¬å‘å¸ƒäº†ï¼Œæ–°å¢äº†ä¸€ä¸ª Ignition å­—èŠ‚ç è§£é‡Šå™¨ï¼Œå°†é»˜è®¤å¯åŠ¨ï¼Œä»æ­¤ä¹‹åå°†ä¸JSCoreæœ‰å¤§è‡´ç›¸åŒçš„æµç¨‹ã€‚åšå‡ºè¿™ä¸€æ”¹å˜çš„åŸå› ä¸ºï¼šï¼ˆä¸»è¦åŠ¨æœºï¼‰å‡è½»æœºå™¨ç å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œå³ç‰ºç‰²æ—¶é—´æ¢ç©ºé—´ï¼›æé«˜ä»£ç çš„å¯åŠ¨é€Ÿåº¦ï¼›å¯¹ v8 çš„ä»£ç è¿›è¡Œé‡æ„ï¼Œé™ä½ v8 çš„ä»£ç å¤æ‚åº¦(<a href="https://link.zhihu.com/?target=https%3A//cnodejs.org/topic/59084a9cbbaf2f3f569be482">V8 Ignitionï¼šJS å¼•æ“ä¸å­—èŠ‚ç çš„ä¸è§£ä¹‹ç¼˜ - CNodeæŠ€æœ¯ç¤¾åŒº</a>)ã€‚</p><p>JavaScriptçš„æ€§èƒ½å’ŒCç›¸æ¯”è¿˜æœ‰ä¸å°çš„è·ç¦»ï¼Œå¯é¢„è§çš„æœªæ¥ä¼°è®¡ä¹Ÿåªèƒ½æ¥è¿‘å®ƒï¼Œè€Œä¸æ˜¯ä¸å®ƒç›¸æ¯”ï¼Œè¿™ä»è¯­è¨€ç±»å‹ä¸Šå·²ç»å†³å®šã€‚ä¸‹é¢å°†å¯¹V8å¼•æ“è¿›è¡Œæ›´ä¸ºç»†è‡´çš„ä»‹ç»ã€‚</p><h3 id="2-V8å¼•æ“"><a href="#2-V8å¼•æ“" class="headerlink" title="2.V8å¼•æ“"></a>2.V8å¼•æ“</h3><p>V8å¼•æ“æ˜¯ä¸€ä¸ªJavaScriptå¼•æ“å®ç°ï¼Œæœ€åˆç”±ä¸€äº›è¯­è¨€æ–¹é¢ä¸“å®¶è®¾è®¡ï¼Œåè¢«è°·æ­Œæ”¶è´­ï¼Œéšåè°·æ­Œå¯¹å…¶è¿›è¡Œäº†å¼€æºã€‚V8ä½¿ç”¨C++å¼€å‘ï¼Œï¼Œåœ¨è¿è¡ŒJavaScriptä¹‹å‰ï¼Œç›¸æ¯”å…¶å®ƒçš„JavaScriptçš„å¼•æ“è½¬æ¢æˆå­—èŠ‚ç æˆ–è§£é‡Šæ‰§è¡Œï¼ŒV8å°†å…¶ç¼–è¯‘æˆåŸç”Ÿæœºå™¨ç ï¼ˆIA-32, x86-64, ARM, or MIPS CPUsï¼‰ï¼Œå¹¶ä¸”ä½¿ç”¨äº†å¦‚å†…è”ç¼“å­˜ï¼ˆinline cachingï¼‰ç­‰æ–¹æ³•æ¥æé«˜æ€§èƒ½ã€‚æœ‰äº†è¿™äº›åŠŸèƒ½ï¼ŒJavaScriptç¨‹åºåœ¨V8å¼•æ“ä¸‹çš„è¿è¡Œé€Ÿåº¦åª²ç¾äºŒè¿›åˆ¶ç¨‹åºã€‚V8æ”¯æŒä¼—å¤šæ“ä½œç³»ç»Ÿï¼Œå¦‚windowsã€linuxã€androidç­‰ï¼Œä¹Ÿæ”¯æŒå…¶ä»–ç¡¬ä»¶æ¶æ„ï¼Œå¦‚IA32,X64,ARMç­‰ï¼Œå…·æœ‰å¾ˆå¥½çš„å¯ç§»æ¤å’Œè·¨å¹³å°ç‰¹æ€§ã€‚<br>V8é¡¹ç›®ä»£ç ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://pic4.zhimg.com/80/v2-cb5e37b2c362ad0335d6331ef3be6daf_720w.png" alt="https://pic4.zhimg.com/80/v2-cb5e37b2c362ad0335d6331ef3be6daf_720w.png"></p><h4 id="2-1-æ•°æ®è¡¨ç¤º"><a href="#2-1-æ•°æ®è¡¨ç¤º" class="headerlink" title="2.1.æ•°æ®è¡¨ç¤º"></a>2.1.æ•°æ®è¡¨ç¤º</h4><p>JavaScriptæ˜¯ä¸€ç§åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œåœ¨ç¼–è¯‘æ—¶å¹¶ä¸èƒ½å‡†ç¡®çŸ¥é“å˜é‡çš„ç±»å‹ï¼Œåªå¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®å®šï¼Œè¿™å°±ä¸åƒc++æˆ–è€…javaç­‰é™æ€ç±»å‹è¯­è¨€ï¼Œåœ¨ç¼–è¯‘æ—¶å€™å°±å¯ä»¥ç¡®åˆ‡çŸ¥é“å˜é‡çš„ç±»å‹ã€‚ç„¶è€Œï¼Œåœ¨è¿è¡Œæ—¶è®¡ç®—å’Œå†³å®šç±»å‹ï¼Œä¼šä¸¥é‡å½±å“è¯­è¨€æ€§èƒ½ï¼Œè¿™ä¹Ÿå°±æ˜¯JavaScriptè¿è¡Œæ•ˆç‡æ¯”C++æˆ–è€…JAVAä½å¾ˆå¤šçš„åŸå› ä¹‹ä¸€ã€‚</p><p>åœ¨C++ä¸­ï¼Œæºä»£ç éœ€è¦ç»è¿‡ç¼–è¯‘æ‰èƒ½æ‰§è¡Œï¼Œåœ¨ç”Ÿæˆæœ¬åœ°ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œå˜é‡çš„åœ°å€å’Œç±»å‹å·²ç»ç¡®å®šï¼Œè¿è¡Œæœ¬åœ°ä»£ç æ—¶åˆ©ç”¨æ•°ç»„å’Œä½ç§»å°±å¯ä»¥å­˜å–å˜é‡å’Œæ–¹æ³•çš„åœ°å€ï¼Œä¸éœ€è¦å†è¿›è¡Œé¢å¤–çš„æŸ¥æ‰¾ï¼Œå‡ ä¸ªæœºå™¨æŒ‡ä»¤å³å¯å®Œæˆï¼ŒèŠ‚çœäº†ç¡®å®šç±»å‹å’Œåœ°å€çš„æ—¶é—´ã€‚ç”±äºJavaScriptæ˜¯æ— ç±»å‹è¯­è¨€ï¼Œé‚£å°±ä¸èƒ½åƒc++é‚£æ ·åœ¨æ‰§è¡Œæ—¶å·²ç»çŸ¥é“å˜é‡çš„ç±»å‹å’Œåœ°å€ï¼Œéœ€è¦ä¸´æ—¶ç¡®å®šã€‚JavaScript å’ŒC++æœ‰ä»¥ä¸‹å‡ ä¸ªåŒºåˆ«ï¼š</p><ul><li>ç¼–è¯‘ç¡®å®šä½ç½®ï¼ŒC++ç¼–è¯‘é˜¶æ®µç¡®å®šä½ç½®åç§»ä¿¡æ¯ï¼Œåœ¨æ‰§è¡Œæ—¶ç›´æ¥å­˜å–ï¼ŒJavaScriptåœ¨æ‰§è¡Œé˜¶æ®µç¡®å®šï¼Œè€Œä¸”æ‰§è¡ŒæœŸé—´å¯ä»¥ä¿®æ”¹å¯¹è±¡å±æ€§ï¼›</li><li>åç§»ä¿¡æ¯å…±äº«ï¼ŒC++æœ‰ç±»å‹å®šä¹‰ï¼Œæ‰§è¡Œæ—¶ä¸èƒ½åŠ¨æ€æ”¹å˜ï¼Œå¯å…±äº«åç§»ä¿¡æ¯ï¼ŒJavaScriptæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯è‡ªæè¿°ï¼Œå±æ€§å’Œä½ç½®åç§»ä¿¡æ¯éƒ½åŒ…å«åœ¨è‡ªèº«çš„ç»“æ„ä¸­ï¼›</li><li>åç§»ä¿¡æ¯æŸ¥æ‰¾ï¼ŒC++æŸ¥æ‰¾åç§»åœ°å€å¾ˆç®€å•ï¼Œåœ¨ç¼–è¯‘ä»£ç é˜¶æ®µï¼Œå¯¹ä½¿ç”¨çš„æŸç±»å‹æˆå‘˜å˜é‡ç›´æ¥è®¾ç½®åç§»ä½ç½®ï¼ŒJavaScriptä¸­ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦é€šè¿‡å±æ€§ååŒ¹é…æ‰èƒ½æ‰¾åˆ°ç›¸åº”çš„å€¼ï¼Œéœ€è¦æ›´å¤šçš„æ“ä½œã€‚<br>åœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå˜é‡çš„å­˜å–æ˜¯éå¸¸æ™®éå’Œé¢‘ç¹çš„ï¼Œé€šè¿‡åç§»é‡æ¥å­˜å–ï¼Œä½¿ç”¨å°‘æ•°ä¸¤ä¸ªæ±‡ç¼–æŒ‡ä»¤å°±èƒ½å®Œæˆï¼Œå¦‚æœé€šè¿‡å±æ€§ååŒ¹é…åˆ™éœ€è¦æ›´å¤šçš„æ±‡ç¼–æŒ‡ä»¤ï¼Œä¹Ÿéœ€è¦æ›´å¤šçš„å†…å­˜ç©ºé—´ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</li></ul><p><img src="https://pic3.zhimg.com/80/v2-794bcbcc25818b827d77ff712271ce56_720w.jpg" alt="https://pic3.zhimg.com/80/v2-794bcbcc25818b827d77ff712271ce56_720w.jpg"></p><p>åœ¨JavaScriptä¸­ï¼Œé™¤booleanï¼Œnumberï¼Œstringï¼Œnullï¼Œundefinedè¿™ä¸ªäº”ä¸ªç®€å•å˜é‡å¤–ï¼Œå…¶ä»–çš„æ•°æ®éƒ½æ˜¯å¯¹è±¡ï¼ŒV8ä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„æ–¹å¼æ¥è¡¨ç¤ºå®ƒä»¬ï¼Œè¿›è€Œä¼˜åŒ–JavaScriptçš„å†…éƒ¨è¡¨ç¤ºé—®é¢˜ã€‚</p><p>åœ¨V8ä¸­ï¼Œæ•°æ®çš„å†…éƒ¨è¡¨ç¤ºç”±æ•°æ®çš„å®é™…å†…å®¹å’Œæ•°æ®çš„å¥æŸ„æ„æˆã€‚æ•°æ®çš„å®é™…å†…å®¹æ˜¯å˜é•¿çš„ï¼Œç±»å‹ä¹Ÿæ˜¯ä¸åŒçš„ï¼›å¥æŸ„å›ºå®šå¤§å°ï¼ŒåŒ…å«æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆã€‚è¿™ç§è®¾è®¡å¯ä»¥æ–¹ä¾¿V8è¿›è¡Œåƒåœ¾å›æ”¶å’Œç§»åŠ¨æ•°æ®å†…å®¹ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨æŒ‡é’ˆçš„è¯å°±ä¼šå‡ºé—®é¢˜æˆ–è€…éœ€è¦æ›´å¤§çš„å¼€é”€ï¼Œä½¿ç”¨å¥æŸ„çš„è¯ï¼Œåªéœ€ä¿®æ”¹å¥æŸ„ä¸­çš„æŒ‡é’ˆå³å¯ï¼Œä½¿ç”¨è€…ä½¿ç”¨çš„è¿˜æ˜¯å¥æŸ„ï¼ŒæŒ‡é’ˆæ”¹åŠ¨æ˜¯å¯¹ä½¿ç”¨è€…é€æ˜çš„ã€‚</p><p>é™¤å°‘æ•°æ•°æ®(å¦‚æ•´å‹æ•°æ®)ç”±handleæœ¬èº«å­˜å‚¨å¤–ï¼Œå…¶ä»–å†…å®¹é™äºå¥æŸ„å¤§å°å’Œå˜é•¿ç­‰åŸå› ï¼Œéƒ½å­˜å‚¨åœ¨å †ä¸­ã€‚æ•´æ•°ç›´æ¥ä»valueä¸­å–å€¼ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å®ƒï¼Œå¯ä»¥å‡å°‘å†…å­˜çš„å ç”¨å¹¶æé«˜è®¿é—®é€Ÿåº¦ã€‚ä¸€ä¸ªå¥æŸ„å¯¹è±¡çš„å¤§å°æ˜¯4å­—èŠ‚(32ä½è®¾å¤‡)æˆ–è€…8å­—èŠ‚(64ä½è®¾å¤‡)ï¼Œè€Œåœ¨JavaScriptCoreä¸­ï¼Œä½¿ç”¨çš„8ä¸ªå­—èŠ‚è¡¨ç¤ºå¥æŸ„ã€‚åœ¨å †ä¸­å­˜æ”¾çš„å¯¹è±¡éƒ½æ˜¯4å­—èŠ‚å¯¹é½çš„ï¼Œæ‰€ä»¥å®ƒä»¬æŒ‡é’ˆçš„åä¸¤ä½æ˜¯ä¸éœ€è¦çš„ï¼ŒV8ç”¨è¿™ä¸¤ä½è¡¨ç¤ºæ•°æ®çš„ç±»å‹ï¼Œ00ä¸ºæ•´æ•°ï¼Œ01ä¸ºå…¶ä»–ã€‚</p><p>JavaScriptå¯¹è±¡åœ¨V8ä¸­çš„å®ç°åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼šéšè—ç±»æŒ‡é’ˆï¼Œè¿™æ˜¯v8ä¸ºJavaScriptå¯¹è±¡åˆ›å»ºçš„éšè—ç±»ï¼›å±æ€§å€¼è¡¨æŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥å¯¹è±¡åŒ…å«çš„å±æ€§å€¼ï¼›å…ƒç´ è¡¨æŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥å¯¹è±¡åŒ…å«çš„å±æ€§ã€‚</p><h4 id="2-2-å·¥ä½œè¿‡ç¨‹"><a href="#2-2-å·¥ä½œè¿‡ç¨‹" class="headerlink" title="2.2.å·¥ä½œè¿‡ç¨‹"></a>2.2.å·¥ä½œè¿‡ç¨‹</h4><p>å‰é¢æœ‰è¿‡ä»‹ç»ï¼ŒV8å¼•æ“åœ¨æ‰§è¡ŒJavaScriptçš„è¿‡ç¨‹ä¸­ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªé˜¶æ®µï¼šç¼–è¯‘å’Œè¿è¡Œï¼Œä¸C++çš„æ‰§è¡Œå‰å®Œå…¨ç¼–è¯‘ä¸åŒçš„æ˜¯ï¼ŒJavaScriptéœ€è¦åœ¨ç”¨æˆ·ä½¿ç”¨æ—¶å®Œæˆç¼–è¯‘å’Œæ‰§è¡Œã€‚åœ¨V8ä¸­ï¼ŒJavaScriptç›¸å…³ä»£ç å¹¶éä¸€ä¸‹å®Œæˆç¼–è¯‘çš„ï¼Œè€Œæ˜¯åœ¨æŸäº›ä»£ç éœ€è¦æ‰§è¡Œæ—¶ï¼Œæ‰ä¼šè¿›è¡Œç¼–è¯‘ï¼Œè¿™å°±æé«˜äº†å“åº”æ—¶é—´ï¼Œå‡å°‘äº†æ—¶é—´å¼€é”€ã€‚åœ¨V8å¼•æ“ä¸­ï¼Œæºä»£ç å…ˆè¢«è§£æå™¨è½¬å˜ä¸ºæŠ½è±¡è¯­æ³•æ ‘(AST)ï¼Œç„¶åä½¿ç”¨JITç¼–è¯‘å™¨çš„å…¨ä»£ç ç”Ÿæˆå™¨ä»ASTç›´æ¥ç”Ÿæˆæœ¬åœ°å¯æ‰§è¡Œä»£ç ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸åŒäºJAVAå…ˆç”Ÿæˆå­—èŠ‚ç æˆ–ä¸­é—´è¡¨ç¤ºï¼Œå‡å°‘äº†ASTåˆ°å­—èŠ‚ç çš„è½¬æ¢æ—¶é—´ï¼Œæé«˜äº†ä»£ç çš„æ‰§è¡Œé€Ÿåº¦ã€‚ä½†ç”±äºç¼ºå°‘äº†è½¬æ¢ä¸ºå­—èŠ‚ç è¿™ä¸€ä¸­é—´è¿‡ç¨‹ï¼Œä¹Ÿå°±å‡å°‘äº†ä¼˜åŒ–ä»£ç çš„æœºä¼šã€‚</p><p>V8å¼•æ“ç¼–è¯‘æœ¬åœ°ä»£ç æ—¶ä½¿ç”¨çš„ä¸»è¦ç±»å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>Scriptï¼šè¡¨ç¤ºJavaScriptä»£ç ï¼Œå³åŒ…å«æºä»£ç ï¼ŒåˆåŒ…å«ç¼–è¯‘ä¹‹åç”Ÿæˆçš„æœ¬åœ°ä»£ç ï¼Œå³æ˜¯ç¼–è¯‘å…¥å£ï¼Œåˆæ˜¯è¿è¡Œå…¥å£ï¼›</li><li>Compilerï¼šç¼–è¯‘å™¨ç±»ï¼Œè¾…ç»„Scriptç±»æ¥ç¼–è¯‘ç”Ÿæˆä»£ç ï¼Œè°ƒç”¨è§£é‡Šå™¨(Parser)æ¥ç”ŸæˆASTå’Œå…¨ä»£ç ç”Ÿæˆå™¨ï¼Œå°†ASTè½¬å˜ä¸ºæœ¬åœ°ä»£ç ï¼›</li><li>AstNodeï¼šæŠ½è±¡è¯­æ³•æ ‘èŠ‚ç‚¹ç±»ï¼Œæ˜¯å…¶ä»–æ‰€æœ‰èŠ‚ç‚¹çš„åŸºç±»ï¼ŒåŒ…å«éå¸¸å¤šçš„å­ç±»ï¼Œåé¢ä¼šé’ˆå¯¹ä¸åŒçš„å­ç±»ç”Ÿæˆä¸åŒçš„æœ¬åœ°ä»£ç ï¼›</li><li>AstVisitorï¼šæŠ½è±¡è¯­æ³•æ ‘çš„è®¿é—®è€…ç±»ï¼Œä¸»è¦ç”¨æ¥éå†å¼‚æ„çš„æŠ½è±¡è¯­æ³•æ ‘ï¼›</li><li>FullCodeGeneratorï¼šAstVisitorç±»çš„å­ç±»ï¼Œé€šè¿‡éå†ASTæ¥ä¸ºJavaScriptç”Ÿæˆæœ¬åœ°å¯æ‰§è¡Œä»£ç ã€‚</li></ul><p><img src="https://pic1.zhimg.com/80/v2-274bcd0e43b8b718ce58de8ae51e1b70_720w.png" alt="https://pic1.zhimg.com/80/v2-274bcd0e43b8b718ce58de8ae51e1b70_720w.png"></p><p>JavaScriptä»£ç ç¼–è¯‘çš„è¿‡ç¨‹å¤§è‡´ä¸ºï¼šScriptç±»è°ƒç”¨Compilerç±»çš„Compileå‡½æ•°ä¸ºå…¶ç”Ÿæˆæœ¬åœ°ä»£ç ã€‚Compileå‡½æ•°å…ˆä½¿ç”¨Parserç±»ç”ŸæˆASTï¼Œå†ä½¿ç”¨FullCodeGeneratorç±»æ¥ç”Ÿæˆæœ¬åœ°ä»£ç ã€‚æœ¬åœ°ä»£ç ä¸å…·ä½“çš„ç¡¬ä»¶å¹³å°å¯†åˆ‡ç›¸å…³ï¼ŒFullCodeGeneratorä½¿ç”¨å¤šä¸ªåç«¯æ¥ç”Ÿæˆä¸å¹³å°ç›¸åŒ¹é…çš„æœ¬åœ°æ±‡ç¼–ä»£ç ã€‚ç”±äºFullCodeGeneratoré€šè¿‡éå†ASTæ¥ä¸ºæ¯ä¸ªèŠ‚ç‚¹ç”Ÿæˆç›¸åº”çš„æ±‡ç¼–ä»£ç ï¼Œç¼ºå¤±äº†å…¨å±€è§†å›¾ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„ä¼˜åŒ–ä¹Ÿå°±æ— ä»è°ˆèµ·ã€‚</p><p>åœ¨æ‰§è¡Œç¼–è¯‘ä¹‹å‰ï¼ŒV8ä¼šæ„å»ºä¼—å¤šå…¨å±€å¯¹è±¡å¹¶åŠ è½½ä¸€äº›å†…ç½®çš„åº“ï¼ˆå¦‚mathåº“ï¼‰ï¼Œæ¥æ„å»ºä¸€ä¸ªè¿è¡Œç¯å¢ƒã€‚è€Œä¸”åœ¨JavaScriptæºä»£ç ä¸­ï¼Œå¹¶éæ‰€æœ‰çš„å‡½æ•°éƒ½è¢«ç¼–è¯‘ç”Ÿæˆæœ¬åœ°ä»£ç ï¼Œè€Œæ˜¯å»¶è¿Ÿç¼–è¯‘ï¼Œåœ¨è°ƒç”¨æ—¶æ‰ä¼šç¼–è¯‘ã€‚</p><p>ç”±äºV8ç¼ºå°‘äº†ç”Ÿæˆä¸­é—´ä»£ç è¿™ä¸€ç¯èŠ‚ï¼Œç¼ºå°‘äº†å¿…è¦çš„ä¼˜åŒ–ï¼Œä¸ºäº†æå‡æ€§èƒ½ï¼ŒV8ä¼šåœ¨ç”Ÿæˆæœ¬åœ°ä»£ç åï¼Œä½¿ç”¨æ•°æ®åˆ†æå™¨(profiler)é‡‡é›†ä¸€äº›ä¿¡æ¯ï¼Œç„¶åæ ¹æ®è¿™äº›æ•°æ®å°†æœ¬åœ°ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œç”Ÿæˆæ›´é«˜æ•ˆçš„æœ¬åœ°ä»£ç ï¼Œè¿™æ˜¯ä¸€ä¸ªé€æ­¥æ”¹è¿›çš„è¿‡ç¨‹ã€‚åŒæ—¶ï¼Œå½“å‘ç°ä¼˜åŒ–åä»£ç çš„æ€§èƒ½è¿˜ä¸å¦‚æœªä¼˜åŒ–çš„ä»£ç ï¼ŒV8å°†é€€å›åŸæ¥çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ä¼˜åŒ–å›æ»šã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹è¿è¡Œé˜¶æ®µï¼Œè¯¥é˜¶æ®µä½¿ç”¨çš„ä¸»è¦ç±»å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>Scriptï¼šè¡¨ç¤ºJavaScriptä»£ç ï¼Œå³åŒ…å«æºä»£ç ï¼ŒåˆåŒ…å«ç¼–è¯‘ä¹‹åç”Ÿæˆçš„æœ¬åœ°ä»£ç ï¼Œå³æ˜¯ç¼–è¯‘å…¥å£ï¼Œåˆæ˜¯è¿è¡Œå…¥å£ï¼›</li><li>Executionï¼šè¿è¡Œä»£ç çš„è¾…ç»„ç±»ï¼ŒåŒ…å«ä¸€äº›é‡è¦å‡½æ•°ï¼Œå¦‚Callå‡½æ•°ï¼Œå®ƒè¾…ç»„è¿›å…¥å’Œæ‰§è¡ŒScriptä»£ç ï¼›</li><li>JSFunctionï¼šéœ€è¦æ‰§è¡Œçš„JavaScriptå‡½æ•°è¡¨ç¤ºç±»ï¼›</li><li>Runtimeï¼šè¿è¡Œè¿™äº›æœ¬åœ°ä»£ç çš„è¾…ç»„ç±»ï¼Œä¸»è¦æä¾›è¿è¡Œæ—¶æ‰€éœ€çš„è¾…ç»„å‡½æ•°ï¼Œå¦‚ï¼šå±æ€§è®¿é—®ã€ç±»å‹è½¬æ¢ã€ç¼–è¯‘ã€ç®—æœ¯ã€ä½æ“ä½œã€æ¯”è¾ƒã€æ­£åˆ™è¡¨è¾¾å¼ç­‰ï¼›</li><li>Heapï¼šè¿è¡Œæœ¬åœ°ä»£ç éœ€è¦ä½¿ç”¨çš„å†…å­˜å †ç±»ï¼›</li><li>MarkCompactCollectorï¼šåƒåœ¾å›æ”¶æœºåˆ¶çš„ä¸»è¦å®ç°ç±»ï¼Œç”¨æ¥æ ‡è®°ã€æ¸…é™¤å’Œæ•´ç†ç­‰åŸºæœ¬çš„åƒåœ¾å›æ”¶è¿‡ç¨‹ï¼›</li><li>SweeperThreadï¼šè´Ÿè´£åƒåœ¾å›æ”¶çš„çº¿ç¨‹ã€‚</li></ul><p><img src="https://pic4.zhimg.com/80/v2-d9eaec9f9912dd0e26c636675fe10fe3_720w.png" alt="https://pic4.zhimg.com/80/v2-d9eaec9f9912dd0e26c636675fe10fe3_720w.png"></p><p>å…ˆæ ¹æ®éœ€è¦ç¼–è¯‘å’Œç”Ÿæˆè¿™äº›æœ¬åœ°ä»£ç ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ç¼–è¯‘é˜¶æ®µé‚£äº›ç±»å’Œæ“ä½œã€‚åœ¨V8ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªåŸºæœ¬å•ä½ï¼Œå½“æŸä¸ªJavaScriptå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼ŒV8ä¼šæŸ¥æ‰¾è¯¥å‡½æ•°æ˜¯å¦å·²ç»ç”Ÿæˆæœ¬åœ°ä»£ç ï¼Œå¦‚æœå·²ç»ç”Ÿæˆï¼Œåˆ™ç›´æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚å¦åˆ™ï¼ŒV8å¼•æ“ä¼šç”Ÿæˆå±äºè¯¥å‡½æ•°çš„æœ¬åœ°ä»£ç ã€‚è¿™å°±èŠ‚çº¦äº†æ—¶é—´ï¼Œå‡å°‘äº†å¤„ç†é‚£äº›ä½¿ç”¨ä¸åˆ°çš„ä»£ç çš„æ—¶é—´ã€‚å…¶æ¬¡ï¼Œæ‰§è¡Œç¼–è¯‘åçš„ä»£ç ä¸ºJavaScriptæ„å»ºJSå¯¹è±¡ï¼Œè¿™éœ€è¦Runtimeç±»æ¥è¾…ç»„åˆ›å»ºå¯¹è±¡ï¼Œå¹¶éœ€è¦ä»Heapç±»åˆ†é…å†…å­˜ã€‚å†æ¬¡ï¼Œå€ŸåŠ©Runtimeç±»ä¸­çš„è¾…ç»„å‡½æ•°æ¥å®Œæˆä¸€äº›åŠŸèƒ½ï¼Œå¦‚å±æ€§è®¿é—®ç­‰ã€‚æœ€åï¼Œå°†ä¸ç”¨çš„ç©ºé—´è¿›è¡Œæ ‡è®°æ¸…é™¤å’Œåƒåœ¾å›æ”¶ã€‚</p><h4 id="2-3-ä¼˜åŒ–å›æ»š"><a href="#2-3-ä¼˜åŒ–å›æ»š" class="headerlink" title="2.3.ä¼˜åŒ–å›æ»š"></a>2.3.ä¼˜åŒ–å›æ»š</h4><p>å› ä¸ºV8æ˜¯åŸºäºASTç›´æ¥ç”Ÿæˆæœ¬åœ°ä»£ç ï¼Œæ²¡æœ‰ç»è¿‡ä¸­é—´è¡¨ç¤ºå±‚çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æœ¬åœ°ä»£ç å°šæœªç»è¿‡å¾ˆå¥½çš„ä¼˜åŒ–ã€‚äºæ˜¯ï¼Œåœ¨2010å¹´ï¼ŒV8å¼•å…¥äº†æ–°çš„ç¼–è¯‘å™¨-Crankshaftï¼Œå®ƒä¸»è¦é’ˆå¯¹çƒ­ç‚¹å‡½æ•°è¿›è¡Œä¼˜åŒ–ï¼ŒåŸºäºJavaScriptæºä»£ç å¼€å§‹åˆ†æè€Œéæœ¬åœ°ä»£ç ï¼ŒåŒæ—¶æ„å»ºHydrogerå›¾å¹¶åŸºäºæ­¤æ¥è¿›è¡Œä¼˜åŒ–åˆ†æã€‚</p><p>Crankshaftç¼–è¯‘å™¨ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œé€šå¸¸ä¼šåšå‡ºæ¯”è¾ƒä¹è§‚å’Œå¤§èƒ†çš„é¢„æµ‹â€”ä»£ç ç¨³å®šä¸”å˜é‡ç±»å‹ä¸å˜ï¼Œæ‰€ä»¥å¯ä»¥ç”Ÿæˆé«˜æ•ˆçš„æœ¬åœ°ä»£ç ã€‚ä½†æ˜¯ï¼Œé‰´äºJavaScriptçš„ä¸€ä¸ªå¼±ç±»å‹çš„è¯­è¨€ï¼Œå˜é‡ç±»å‹ä¹Ÿå¯èƒ½åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­è¿›è¡Œæ”¹å˜ï¼Œé‰´äºè¿™ç§æƒ…å†µï¼ŒV8ä¼šå°†è¯¥ç¼–è¯‘å™¨åšçš„æƒ³å½“ç„¶çš„ä¼˜åŒ–è¿›è¡Œå›æ»šï¼Œç§°ä¸ºä¼˜åŒ–å›æ»šã€‚</p><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  counter++;</span><br><span class="line">  <span class="keyword">if</span> (counter &lt; <span class="number">1000000</span>) &#123;</span><br><span class="line">      <span class="comment">// do something</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">'jeri'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> unknown = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="built_in">console</span>.log(unknown);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥å‡½æ•°è¢«è°ƒç”¨å¤šæ¬¡ä¹‹åï¼ŒV8å¼•æ“å¯èƒ½ä¼šè§¦å‘Crankshaftç¼–è¯‘å™¨å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œè€Œä¼˜åŒ–ä»£ç è®¤ä¸ºç¤ºä¾‹ä»£ç çš„ç±»å‹ä¿¡æ¯éƒ½å·²ç»è¢«ç¡®å®šã€‚ä½†ï¼Œç”±äºå°šæœªçœŸæ­£æ‰§è¡Œåˆ°new Date()è¿™ä¸ªåœ°æ–¹ï¼Œå¹¶æœªè·å–unknownè¿™ä¸ªå˜é‡çš„ç±»å‹ï¼ŒV8åªå¾—å°†è¯¥éƒ¨åˆ†ä»£ç è¿›è¡Œå›æ»šã€‚ä¼˜åŒ–å›æ»šæ˜¯ä¸€ä¸ªå¾ˆè€—æ—¶çš„æ“ä½œï¼Œåœ¨å†™ä»£ç è¿‡ç¨‹ä¸­ï¼Œå°½é‡ä¸è¦è§¦å‘ä¼˜åŒ–è¯¥æ“ä½œã€‚</p><p>åœ¨æœ€è¿‘å‘å¸ƒçš„ V8 5.9 ç‰ˆæœ¬ä¸­ï¼Œæ–°å¢äº†ä¸€ä¸ª Ignition å­—èŠ‚ç è§£é‡Šå™¨ï¼ŒTurboFan å’Œ Ignition ç»“åˆèµ·æ¥å…±åŒå®ŒæˆJavaScriptçš„ç¼–è¯‘ã€‚è¿™ä¸ªç‰ˆæœ¬ä¸­æ¶ˆé™¤ Cranshaft è¿™ä¸ªæ—§çš„ç¼–è¯‘å™¨ï¼Œå¹¶è®©æ–°çš„ Turbofan ç›´æ¥ä»å­—èŠ‚ç æ¥ä¼˜åŒ–ä»£ç ï¼Œå¹¶å½“éœ€è¦è¿›è¡Œåä¼˜åŒ–çš„æ—¶å€™ç›´æ¥åä¼˜åŒ–åˆ°å­—èŠ‚ç ï¼Œè€Œä¸éœ€è¦å†è€ƒè™‘ JS æºä»£ç ã€‚</p><h4 id="2-4-éšè—ç±»ä¸å†…åµŒç¼“å­˜"><a href="#2-4-éšè—ç±»ä¸å†…åµŒç¼“å­˜" class="headerlink" title="2.4.éšè—ç±»ä¸å†…åµŒç¼“å­˜"></a>2.4.éšè—ç±»ä¸å†…åµŒç¼“å­˜</h4><h5 id="2-4-1-éšè—ç±»"><a href="#2-4-1-éšè—ç±»" class="headerlink" title="2.4.1.éšè—ç±»"></a>2.4.1.éšè—ç±»</h5><p>åœ¨æ‰§è¡ŒC++ä»£ç æ—¶ï¼Œä»…å‡­å‡ ä¸ªæŒ‡ä»¤å³å¯æ ¹æ®åç§»ä¿¡æ¯è·å–å˜é‡ä¿¡æ¯ï¼Œè€ŒJavaScripté‡Œéœ€è¦é€šè¿‡å­—ç¬¦ä¸²åŒ¹é…æ¥æŸ¥æ‰¾å±æ€§å€¼çš„ï¼Œè¿™å°±éœ€è¦æ›´å¤šçš„æ“ä½œæ‰èƒ½è®¿é—®åˆ°å˜é‡ä¿¡æ¯ï¼Œè€Œä»£ç é‡å˜é‡å­˜å–æ˜¯ååˆ†é¢‘ç¹çš„ï¼Œè¿™ä¹Ÿå°±åˆ¶çº¦äº†JavaScriptçš„æ€§èƒ½ã€‚V8å€Ÿç”¨äº†ç±»å’Œåç§»ä½ç½®çš„æ€æƒ³ï¼Œå°†æœ¬æ¥é€šè¿‡å±æ€§ååŒ¹é…æ¥è®¿é—®å±æ€§å€¼çš„æ–¹æ³•è¿›è¡Œäº†æ”¹è¿›ï¼Œä½¿ç”¨ç±»ä¼¼C++ç¼–è¯‘å™¨çš„åç§»ä½ç½®æœºåˆ¶æ¥å®ç°ï¼Œè¿™å°±æ˜¯éšè—ç±»ã€‚</p><p>éšè—ç±»å°†å¯¹è±¡åˆ’åˆ†æˆä¸åŒçš„ç»„ï¼Œå¯¹äºç»„å†…å¯¹è±¡æ‹¥æœ‰ç›¸åŒçš„å±æ€§åå’Œå±æ€§å€¼çš„æƒ…å†µï¼Œå°†è¿™äº›ç»„çš„å±æ€§åå’Œå¯¹åº”çš„åç§»ä½ç½®ä¿å­˜åœ¨ä¸€ä¸ªéšè—ç±»ä¸­ï¼Œç»„å†…æ‰€æœ‰å¯¹è±¡å…±äº«è¯¥ä¿¡æ¯ã€‚åŒæ—¶ï¼Œä¹Ÿå¯ä»¥è¯†åˆ«å±æ€§ä¸åŒçš„å¯¹è±¡ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://pic2.zhimg.com/80/v2-bf67f5eb2667ddd86bfde785612aca35_720w.png" alt="https://pic2.zhimg.com/80/v2-bf67f5eb2667ddd86bfde785612aca35_720w.png"></p><p>ä½¿ç”¨Pointæ„é€ äº†ä¸¤ä¸ªå¯¹è±¡på’Œqï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡å…·æœ‰ç›¸åŒçš„å±æ€§åï¼ŒV8å°†å®ƒä»¬å½’ä¸ºåŒä¸€ä¸ªç»„ï¼Œä¹Ÿå°±æ˜¯éšè—ç±»ï¼Œè¿™äº›å±æ€§åœ¨éšè—ç±»ä¸­æœ‰ç›¸åŒçš„åç§»å€¼ï¼Œpå’Œqå…±äº«è¿™ä¸€ä¿¡æ¯ï¼Œè¿›è¡Œå±æ€§è®¿é—®æ—¶ï¼Œåªéœ€æ ¹æ®éšè—ç±»çš„åç§»å€¼å³å¯ã€‚ç”±äºJavaScriptæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œåœ¨æ‰§è¡Œæ—¶å¯ä»¥æ›´æ”¹å˜é‡çš„ç±»å‹ï¼Œå¦‚æœä¸Šè¿°ä»£ç æ‰§è¡Œä¹‹åï¼Œæ‰§è¡Œq.z=2ï¼Œé‚£ä¹ˆpå’Œqå°†ä¸å†è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªç»„ï¼Œqå°†æ˜¯ä¸€ä¸ªæ–°çš„éšè—ç±»ã€‚</p><h5 id="2-4-2-å†…åµŒç¼“å­˜"><a href="#2-4-2-å†…åµŒç¼“å­˜" class="headerlink" title="2.4.2.å†…åµŒç¼“å­˜"></a>2.4.2.å†…åµŒç¼“å­˜</h5><p>æ­£å¸¸è®¿é—®å¯¹è±¡å±æ€§çš„è¿‡ç¨‹æ˜¯ï¼šé¦–å…ˆè·å–éšè—ç±»çš„åœ°å€ï¼Œç„¶åæ ¹æ®å±æ€§åæŸ¥æ‰¾åç§»å€¼ï¼Œç„¶åè®¡ç®—è¯¥å±æ€§çš„åœ°å€ã€‚è™½ç„¶ç›¸æ¯”ä»¥å¾€åœ¨æ•´ä¸ªæ‰§è¡Œç¯å¢ƒä¸­æŸ¥æ‰¾å‡å°äº†å¾ˆå¤§çš„å·¥ä½œé‡ï¼Œä½†ä¾ç„¶æ¯”è¾ƒè€—æ—¶ã€‚èƒ½ä¸èƒ½å°†ä¹‹å‰æŸ¥è¯¢çš„ç»“æœç¼“å­˜èµ·æ¥ï¼Œä¾›å†æ¬¡è®¿é—®å‘¢ï¼Ÿå½“ç„¶æ˜¯å¯è¡Œçš„ï¼Œè¿™å°±æ˜¯å†…åµŒç¼“å­˜ã€‚</p><p>å†…åµŒç¼“å­˜çš„å¤§è‡´æ€è·¯å°±æ˜¯å°†åˆæ¬¡æŸ¥æ‰¾çš„éšè—ç±»å’Œåç§»å€¼ä¿å­˜èµ·æ¥ï¼Œå½“ä¸‹æ¬¡æŸ¥æ‰¾çš„æ—¶å€™ï¼Œå…ˆæ¯”è¾ƒå½“å‰å¯¹è±¡æ˜¯å¦æ˜¯ä¹‹å‰çš„éšè—ç±»ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œç›´æ¥ä½¿ç”¨ä¹‹å‰çš„ç¼“å­˜ç»“æœï¼Œå‡å°‘å†æ¬¡æŸ¥æ‰¾è¡¨çš„æ—¶é—´ã€‚å½“ç„¶ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰å¤šä¸ªå±æ€§ï¼Œé‚£ä¹ˆç¼“å­˜å¤±è¯¯çš„æ¦‚ç‡å°±ä¼šæé«˜ï¼Œå› ä¸ºæŸä¸ªå±æ€§çš„ç±»å‹å˜åŒ–ä¹‹åï¼Œå¯¹è±¡çš„éšè—ç±»ä¹Ÿä¼šå˜åŒ–ï¼Œå°±ä¸ä¹‹å‰çš„ç¼“å­˜ä¸ä¸€è‡´ï¼Œéœ€è¦é‡æ–°ä½¿ç”¨ä»¥å‰çš„æ–¹å¼æŸ¥æ‰¾å“ˆå¸Œè¡¨ã€‚</p><h4 id="2-5-å†…å­˜ç®¡ç†"><a href="#2-5-å†…å­˜ç®¡ç†" class="headerlink" title="2.5.å†…å­˜ç®¡ç†"></a>2.5.å†…å­˜ç®¡ç†</h4><p>Nodeä¸­é€šè¿‡JavaScriptä½¿ç”¨å†…å­˜æ—¶å°±ä¼šå‘ç°åªèƒ½ä½¿ç”¨éƒ¨åˆ†å†…å­˜ï¼ˆ64ä½ç³»ç»Ÿä¸‹çº¦ä¸º1.4 GBï¼Œ32ä½ç³»ç»Ÿä¸‹çº¦ä¸º0.7 GBï¼‰ï¼Œå…¶æ·±å±‚åŸå› æ˜¯ V8 åƒåœ¾å›æ”¶æœºåˆ¶çš„é™åˆ¶æ‰€è‡´ï¼ˆå¦‚æœå¯ä½¿ç”¨å†…å­˜å¤ªå¤§ï¼ŒV8åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶éœ€è€—è´¹æ›´å¤šçš„èµ„æºå’Œæ—¶é—´ï¼Œä¸¥é‡å½±å“JSçš„æ‰§è¡Œæ•ˆç‡ï¼‰ã€‚ä¸‹é¢å¯¹å†…å­˜ç®¡ç†è¿›è¡Œä»‹ç»ã€‚</p><p>å†…å­˜çš„ç®¡ç†ç»„è¦ç”±åˆ†é…å’Œå›æ”¶ä¸¤ä¸ªéƒ¨åˆ†æ„æˆã€‚V8çš„å†…å­˜åˆ’åˆ†å¦‚ä¸‹ï¼š</p><ul><li>Zoneï¼šç®¡ç†å°å—å†…å­˜ã€‚å…¶å…ˆè‡ªå·±ç”³è¯·ä¸€å—å†…å­˜ï¼Œç„¶åç®¡ç†å’Œåˆ†é…ä¸€äº›å°å†…å­˜ï¼Œå½“ä¸€å—å°å†…å­˜è¢«åˆ†é…ä¹‹åï¼Œä¸èƒ½è¢«Zoneå›æ”¶ï¼Œåªèƒ½ä¸€æ¬¡æ€§å›æ”¶Zoneåˆ†é…çš„æ‰€æœ‰å°å†…å­˜ã€‚å½“ä¸€ä¸ªè¿‡ç¨‹éœ€è¦å¾ˆå¤šå†…å­˜ï¼ŒZoneå°†éœ€è¦åˆ†é…å¤§é‡çš„å†…å­˜ï¼Œå´åˆä¸èƒ½åŠæ—¶å›æ”¶ï¼Œä¼šå¯¼è‡´å†…å­˜ä¸è¶³æƒ…å†µã€‚</li><li>å †ï¼šç®¡ç†JavaScriptä½¿ç”¨çš„æ•°æ®ã€ç”Ÿæˆçš„ä»£ç ã€å“ˆå¸Œè¡¨ç­‰ã€‚ä¸ºæ–¹ä¾¿å®ç°åƒåœ¾å›æ”¶ï¼Œå †è¢«åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</li></ul><p>å¹´è½»åˆ†ä»£ï¼šä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´ï¼Œç»å¸¸éœ€è¦è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ä¸ºæ–¹ä¾¿å¹´è½»åˆ†ä»£ä¸­çš„å†…å®¹å›æ”¶ï¼Œå¯å†å°†å¹´è½»åˆ†ä»£åˆ†ä¸ºä¸¤åŠï¼Œä¸€åŠç”¨æ¥åˆ†é…ï¼Œå¦ä¸€åŠåœ¨å›æ”¶æ—¶è´Ÿè´£å°†ä¹‹å‰è¿˜éœ€è¦ä¿ç•™çš„å¯¹è±¡å¤åˆ¶è¿‡æ¥ã€‚<br>å¹´è€åˆ†ä»£ï¼šæ ¹æ®éœ€è¦å°†å¹´è€çš„å¯¹è±¡ã€æŒ‡é’ˆã€ä»£ç ç­‰æ•°æ®ä¿å­˜èµ·æ¥ï¼Œè¾ƒå°‘åœ°è¿›è¡Œåƒåœ¾å›æ”¶ã€‚<br>å¤§å¯¹è±¡ï¼šä¸ºé‚£äº›éœ€è¦ä½¿ç”¨è¾ƒå¤šå†…å­˜å¯¹è±¡åˆ†é…å†…å­˜ï¼Œå½“ç„¶åŒæ ·å¯èƒ½åŒ…å«æ•°æ®å’Œä»£ç ç­‰åˆ†é…çš„å†…å­˜ï¼Œä¸€ä¸ªé¡µé¢åªåˆ†é…ä¸€ä¸ªå¯¹è±¡ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-76f0fb426e86e9b54fecb6bef2582e8b_720w.png" alt="https://pic4.zhimg.com/80/v2-76f0fb426e86e9b54fecb6bef2582e8b_720w.png"></p><h5 id="åƒåœ¾å›æ”¶"><a href="#åƒåœ¾å›æ”¶" class="headerlink" title="åƒåœ¾å›æ”¶"></a>åƒåœ¾å›æ”¶</h5><p>V8 ä½¿ç”¨äº†åˆ†ä»£å’Œå¤§æ•°æ®çš„å†…å­˜åˆ†é…ï¼Œåœ¨å›æ”¶å†…å­˜æ—¶ä½¿ç”¨ç²¾ç®€æ•´ç†çš„ç®—æ³•æ ‡è®°æœªå¼•ç”¨çš„å¯¹è±¡ï¼Œç„¶åæ¶ˆé™¤æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡ï¼Œæœ€åæ•´ç†å’Œå‹ç¼©é‚£äº›è¿˜æœªä¿å­˜çš„å¯¹è±¡ï¼Œå³å¯å®Œæˆåƒåœ¾å›æ”¶ã€‚</p><p>åœ¨V8ä¸­ï¼Œä½¿ç”¨è¾ƒå¤šçš„æ˜¯å¹´è½»åˆ†ä»£å’Œå¹´è€åˆ†ä»£ã€‚å¹´è½»åˆ†ä»£ä¸­çš„å¯¹è±¡åƒåœ¾å›æ”¶ä¸»è¦é€šè¿‡Scavengeç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚åœ¨Scavengeçš„å…·ä½“å®ç°ä¸­ï¼Œä¸»è¦é‡‡ç”¨äº†Cheneyç®—æ³•ï¼šé€šè¿‡å¤åˆ¶çš„æ–¹å¼å®ç°çš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚å®ƒå°†å †å†…å­˜åˆ†ä¸ºä¸¤ä¸ª semispaceï¼Œä¸€ä¸ªå¤„äºä½¿ç”¨ä¸­ï¼ˆFromç©ºé—´ï¼‰ï¼Œå¦ä¸€ä¸ªå¤„äºé—²ç½®çŠ¶æ€ï¼ˆToç©ºé—´ï¼‰ã€‚å½“åˆ†é…å¯¹è±¡æ—¶ï¼Œå…ˆæ˜¯åœ¨Fromç©ºé—´ä¸­è¿›è¡Œåˆ†é…ã€‚å½“å¼€å§‹è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¼šæ£€æŸ¥Fromç©ºé—´ä¸­çš„å­˜æ´»å¯¹è±¡ï¼Œè¿™äº›å­˜æ´»å¯¹è±¡å°†è¢«å¤åˆ¶åˆ°Toç©ºé—´ä¸­ï¼Œè€Œéå­˜æ´»å¯¹è±¡å ç”¨çš„ç©ºé—´å°†ä¼šè¢«é‡Šæ”¾ã€‚å®Œæˆå¤åˆ¶åï¼ŒFromç©ºé—´å’ŒToç©ºé—´çš„è§’è‰²å‘ç”Ÿå¯¹æ¢ã€‚åœ¨åƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ï¼Œå°±æ˜¯é€šè¿‡å°†å­˜æ´»å¯¹è±¡åœ¨ä¸¤ä¸ª semispace ç©ºé—´ä¹‹é—´è¿›è¡Œå¤åˆ¶ã€‚å¹´è½»åˆ†ä»£ä¸­çš„å¯¹è±¡æœ‰æœºä¼šæ™‹å‡ä¸ºå¹´è€åˆ†ä»£ï¼Œæ¡ä»¶ä¸»è¦æœ‰ä¸¤ä¸ªï¼šä¸€ä¸ªæ˜¯å¯¹è±¡æ˜¯å¦ç»å†è¿‡Scavengeå›æ”¶ï¼Œä¸€ä¸ªæ˜¯Toç©ºé—´çš„å†…å­˜å ç”¨æ¯”è¶…è¿‡é™åˆ¶ã€‚</p><p>å¯¹äºå¹´è€åˆ†ä»£ä¸­çš„å¯¹è±¡ï¼Œç”±äºå­˜æ´»å¯¹è±¡å è¾ƒå¤§æ¯”é‡ï¼Œå†é‡‡ç”¨ä¸Šé¢çš„æ–¹å¼ä¼šæœ‰ä¸¤ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ˜¯å­˜æ´»å¯¹è±¡è¾ƒå¤šï¼Œå¤åˆ¶å­˜æ´»å¯¹è±¡çš„æ•ˆç‡å°†ä¼šå¾ˆä½ï¼›å¦ä¸€ä¸ªé—®é¢˜ä¾ç„¶æ˜¯æµªè´¹ä¸€åŠç©ºé—´çš„é—®é¢˜ã€‚ä¸ºæ­¤ï¼ŒV8åœ¨å¹´è€åˆ†ä»£ä¸­ä¸»è¦é‡‡ç”¨äº†Mark-Sweepï¼ˆæ ‡è®°æ¸…é™¤ï¼‰æ ‡è®°æ¸…é™¤å’ŒMark-Compactï¼ˆæ ‡è®°æ•´ç†ï¼‰ç›¸ç»“åˆçš„æ–¹å¼è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p><h4 id="2-6-å¿«ç…§"><a href="#2-6-å¿«ç…§" class="headerlink" title="2.6.å¿«ç…§"></a>2.6.å¿«ç…§</h4><p>åœ¨V8å¼•æ“å¯åŠ¨æ—¶ï¼Œéœ€è¦æ„å»ºJavaScriptè¿è¡Œç¯å¢ƒï¼Œéœ€è¦åŠ è½½å¾ˆå¤šå†…ç½®å¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å»ºç«‹å†…ç½®çš„å‡½æ•°ï¼Œå¦‚Arrayï¼ŒStringï¼ŒMathç­‰ã€‚ä¸ºäº†ä½¿V8æ›´åŠ æ•´æ´ï¼ŒåŠ è½½å¯¹è±¡å’Œå»ºç«‹å‡½æ•°ç­‰ä»»åŠ¡éƒ½æ˜¯ä½¿ç”¨JavaScriptæ–‡ä»¶æ¥å®ç°çš„ï¼ŒV8å¼•æ“è´Ÿè´£æä¾›æœºåˆ¶æ¥æ”¯æŒï¼Œå°±æ˜¯åœ¨ç¼–è¯‘å’Œæ‰§è¡ŒJavaScriptå‰å…ˆåŠ è½½è¿™äº›æ–‡ä»¶ã€‚</p><p>V8å¼•æ“éœ€è¦ç¼–è¯‘å’Œæ‰§è¡Œè¿™äº›å†…ç½®çš„JavaScriptä»£ç ï¼ŒåŒæ—¶ä½¿ç”¨å †ç­‰æ¥ä¿å­˜æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ›å»ºçš„å¯¹è±¡ã€ä»£ç ç­‰ï¼Œè¿™äº›éƒ½éœ€è¦æ—¶é—´ã€‚ä¸ºæ­¤ï¼ŒV8å¼•å…¥äº†å¿«ç…§æœºåˆ¶ã€‚å°†è¿™äº›å†…ç½®çš„å¯¹è±¡å’Œå‡½æ•°åŠ è½½ä¹‹åçš„å†…å­˜ä¿å­˜å¹¶åºåˆ—åŒ–ã€‚åºåˆ—åŒ–ä¹‹åçš„ç»“æœå¾ˆå®¹æ˜“ååºåˆ—åŒ–ï¼Œç»è¿‡å¿«ç…§æœºåˆ¶çš„å¯åŠ¨æ—¶é—´å¯ä»¥ç¼©å‡å‡ æ¯«ç§’ã€‚å¿«ç…§æœºåˆ¶ä¹Ÿå¯ä»¥å°†ä¸€äº›å¼€å‘è€…è®¤ä¸ºéœ€è¦çš„JavaScriptæ–‡ä»¶åºåˆ—åŒ–ï¼Œä»¥å‡å°‘å¤„ç†æ—¶é—´ã€‚ä¸è¿‡å¿«ç…§æœºåˆ¶çš„åŠ è½½çš„ä»£ç ä¸èƒ½è¢«CrankShaftè¿™æ ·çš„ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œå¯èƒ½ä¼šå­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚</p><h3 id="3-V8-VS-JavaScriptCore"><a href="#3-V8-VS-JavaScriptCore" class="headerlink" title="3.V8 VS JavaScriptCore"></a>3.V8 VS JavaScriptCore</h3><p>JavaScriptCoreå¼•æ“æ˜¯WebKitä¸­é»˜è®¤çš„JavaScriptå¼•æ“ï¼Œä¹Ÿæ˜¯è‹¹æœå¼€æºçš„ä¸€ä¸ªé¡¹ç›®ï¼Œåº”ç”¨è¾ƒä¸ºå¹¿æ³›ã€‚æœ€åˆï¼Œæ€§èƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œä»2008å¹´å¼€å§‹äº†ä¸€ç³»åˆ—çš„ä¼˜åŒ–ï¼Œé‡æ–°å®ç°äº†ç¼–è¯‘å™¨å’Œå­—èŠ‚ç è§£é‡Šå™¨ï¼Œä½¿å¾—å¼•æ“çš„æ€§èƒ½æœ‰è¾ƒå¤§çš„æå‡ã€‚éšåå†…åµŒç¼“å­˜ã€åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„JITã€ç®€å•çš„JITåŠå­—èŠ‚ç è§£é‡Šå™¨ç­‰æŠ€æœ¯å¼•å…¥è¿›æ¥ï¼ŒJavaScriptCoreå¼•æ“ä¹Ÿåœ¨ä¸æ–­çš„è¿­ä»£å’Œå‘å±•ã€‚</p><p>V8å¼•æ“è‡ªè¯ç”Ÿä¹‹æ—¥èµ·å°±ä»¥æ€§èƒ½ä¼˜åŒ–ä½œä¸ºç›®æ ‡ï¼Œå¼•å…¥äº†ä¼—å¤šæ–°æŠ€æœ¯ï¼Œæå¤§äº†å¸¦åŠ¨äº†æ•´ä¸ªä¸šç•ŒJavaScriptå¼•æ“æ€§èƒ½çš„å¿«é€Ÿå‘å±•ã€‚æ€»çš„æ¥è¯´ï¼ŒV8å¼•æ“è¾ƒä¸ºæ¿€è¿›ï¼Œé’çå¯ä»¥æé«˜æ€§èƒ½çš„æ–°æŠ€æœ¯ï¼Œè€ŒJavaScriptCoreå¼•æ“è¾ƒä¸ºç¨³å¥ï¼Œæ¸è¿›å¼çš„æ”¹å˜ç€è‡ªå·±çš„æ€§èƒ½ã€‚æ€»çš„æ¥è¯´JavaScriptå¼•æ“å·¥ä½œæµç¨‹ï¼ˆåŒ…å«v8å’ŒJavaScriptCoreï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://pic1.zhimg.com/80/v2-993bbf0a46f6feaef5f7b5005aa1aa34_720w.png" alt="https://pic1.zhimg.com/80/v2-993bbf0a46f6feaef5f7b5005aa1aa34_720w.png"></p><p>JavaScriptCore çš„å¤§è‡´æµç¨‹ä¸ºï¼šæºä»£ç -â†’æŠ½è±¡è¯­æ³•æ ‘-â†’å­—èŠ‚ç -â†’JIT-â†’æœ¬åœ°ä»£ç ã€‚JavaScriptCoreä¸V8æœ‰ä¸€äº›ä¸åŒä¹‹å¤„ï¼Œå…¶ä¸­æœ€å¤§çš„ä¸åŒå°±æ˜¯æ–°å¢äº†å­—èŠ‚ç çš„ä¸­é—´è¡¨ç¤ºï¼Œå¹¶åŠ å…¥äº†å¤šå±‚JITç¼–è¯‘å™¨ï¼ˆå¦‚ï¼šç®€å•JITç¼–è¯‘å™¨ã€DFG JITç¼–è¯‘å™¨ã€LLVMç­‰ï¼‰ä¼˜åŒ–æ€§èƒ½ï¼Œä¸åœçš„å¯¹æœ¬åœ°ä»£ç è¿›è¡Œä¼˜åŒ–ã€‚(<strong>åœ¨ V8 çš„ 5.9 ç‰ˆæœ¬ä¸­ï¼Œæ–°å¢äº†ä¸€ä¸ª Ignition å­—èŠ‚ç è§£é‡Šå™¨ï¼ŒTurboFan å’Œ Ignition ç»“åˆèµ·æ¥å…±åŒå®ŒæˆJavaScriptçš„ç¼–è¯‘ï¼Œæ­¤å V8 å°†ä¸ JavaScriptCore æœ‰å¤§è‡´ç›¸åŒçš„æµç¨‹ï¼ŒNode 8.0ä¸­ V8 ç‰ˆæœ¬ä¸º 5.8</strong>)</p><p>è¿˜æœ‰å°±æ˜¯åœ¨æ•°æ®è¡¨ç¤ºæ–¹é¢ï¼ŒV8åœ¨ä¸åŒçš„æœºå™¨ä¸Šä½¿ç”¨ä¸æœºå™¨ä½æ•°ç›¸åŒ¹é…çš„æ•°æ®è¡¨ç¤ºï¼Œè€Œåœ¨JavaScriptCoreä¸­å¥æŸ„éƒ½æ˜¯ä½¿ç”¨64ä½è¡¨ç¤ºï¼Œå…¶å¯ä»¥è¡¨ç¤ºæ›´å¤§èŒƒå›´çš„æ•°å­—ï¼Œæ‰€ä»¥å³ä½¿åœ¨32ä½æœºå™¨ä¸Šï¼Œæµ®ç‚¹ç±»å‹åŒæ ·å¯ä»¥ä¿å­˜åœ¨å¥æŸ„ä¸­ï¼Œä¸å†éœ€è¦è®¿é—®å †ä¸­çš„æ•°æ®ï¼Œå½“ä¹Ÿä¼šå ç”¨æ›´å¤šçš„ç©ºé—´ã€‚</p><h3 id="4-åŠŸèƒ½æ‰©å±•"><a href="#4-åŠŸèƒ½æ‰©å±•" class="headerlink" title="4.åŠŸèƒ½æ‰©å±•"></a>4.åŠŸèƒ½æ‰©å±•</h3><p>JavaScriptå¼•æ“çš„ä¸»è¦åŠŸèƒ½æ˜¯è§£æå’Œæ‰§è¡ŒJavaScriptä»£ç ï¼Œå¾€å¾€ä¸èƒ½æ»¡è¶³ä½¿ç”¨è€…å¤šæ ·åŒ–çš„éœ€è¦ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¢åŠ æ‰©å±•ä»¥æå‡å®ƒçš„èƒ½åŠ›ã€‚V8å¼•æ“æœ‰ä¸¤ç§æ‰©å±•æœºåˆ¶ï¼šç»‘å®šå’Œæ‰©å±•ã€‚</p><h4 id="4-1-ç»‘å®šæœºåˆ¶"><a href="#4-1-ç»‘å®šæœºåˆ¶" class="headerlink" title="4.1.ç»‘å®šæœºåˆ¶"></a>4.1.ç»‘å®šæœºåˆ¶</h4><p>ä½¿ç”¨IDLæ–‡ä»¶æˆ–æ¥å£æ–‡ä»¶ç”Ÿæˆç»‘å®šæ–‡ä»¶ï¼Œå°†è¿™äº›æ–‡ä»¶åŒV8å¼•æ“ä¸€èµ·ç¼–è¯‘ã€‚WebKitä¸­ä½¿ç”¨IDLæ¥å®šä¹‰JavaScriptï¼Œä½†åˆä¸IDLæœ‰æ‰€ä¸åŒï¼Œæœ‰ä¸€äº›æ”¹å˜ã€‚å®šä¹‰ä¸€ä¸ªæ–°çš„æ¥å£çš„æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼š</p><ol><li><p>å®šä¹‰æ–°çš„æ¥å£æ–‡ä»¶ï¼Œå¯ä»¥åœ¨JavaScriptä»£ç è¿›è¡Œè°ƒç”¨ï¼Œå¦‚mymodule.MyObj.myAttrï¼›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module mymodule &#123;</span><br><span class="line">  interface [</span><br><span class="line">    InterfaceName &#x3D; MyObject</span><br><span class="line">  ] MyObj &#123; </span><br><span class="line">    readonly attribute long myAttr;</span><br><span class="line">    DOMString myMethod (DOMString myArg);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æŒ‰ç…§å¼•æ“å®šä¹‰çš„æ ‡å‡†æ¥å£ä¸ºåŸºç¡€å®ç°æ¥å£ç±»ï¼Œç”ŸæˆJavaScriptå¼•æ“æ‰€éœ€çš„ç»‘å®šæ–‡ä»¶ã€‚WebKitæä¾›äº†å·¥å…·å¸®åŠ©ç”Ÿæˆæ‰€éœ€çš„ç»‘å®šç±»ï¼Œæ ¹æ®å¼•æ“ä¸åŒå’Œå¼•æ“å¼€å‘è¯­è¨€çš„ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚V8å¼•æ“ä¼šä¸ºä¸Šè¿°ç¤ºä¾‹ä»£ç ç”Ÿæˆ v8MyObj.h (MyObjç±»å…·ä½“çš„å®ç°ä»£ç )å’Œ V8MyObj.cpp (æ¡¥æ¥ä»£ç ï¼Œè¾…ç»„æ³¨å†Œæ¡¥æ¥çš„å‡½æ•°åˆ°V8å¼•æ“)ä¸¤ä¸ªç»‘å®šæ–‡ä»¶ã€‚</p></li></ol><p>JavaScriptå¼•æ“ç»‘å®šæœºåˆ¶éœ€è¦å°†æ‰©å±•ä»£ç å’ŒJavaScriptå¼•æ“ä¸€å—ç¼–è¯‘å’Œæ‰“åŒ…ï¼Œä¸èƒ½æ ¹æ®éœ€è¦åœ¨å¼•æ“å¯åŠ¨åå†åŠ¨æ€æ³¨å…¥è¿™äº›æœ¬åœ°ä»£ç ã€‚åœ¨å®é™…WEBå¼€å‘ä¸­ï¼Œå¼€å‘è€…éƒ½æ˜¯åŸºäºç°æœ‰æµè§ˆå™¨çš„ï¼Œæ ¹æœ¬ä¸å¯èƒ½ä»‹å…¥åˆ°JavaScriptå¼•æ“çš„ç¼–è¯‘ä¸­ï¼Œç»‘å®šæœºåˆ¶æœ‰å¾ˆå¤§çš„å±€é™æ€§ï¼Œä½†å…¶éå¸¸é«˜æ•ˆï¼Œé€‚ç”¨äºå¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ã€‚</p><h4 id="4-2-Extensionæœºåˆ¶"><a href="#4-2-Extensionæœºåˆ¶" class="headerlink" title="4.2. Extensionæœºåˆ¶"></a>4.2. Extensionæœºåˆ¶</h4><p>é€šè¿‡V8çš„åŸºç±»Extensionè¿›è¡Œèƒ½åŠ›æ‰©å±•ï¼Œæ— éœ€å’ŒV8å¼•æ“ä¸€èµ·ç¼–è¯‘ï¼Œå¯ä»¥åŠ¨æ€ä¸ºå¼•æ“å¢åŠ åŠŸèƒ½ç‰¹æ€§ï¼Œå…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚</p><p>Extensionæœºåˆ¶çš„å¤§è‡´æ€è·¯å°±æ˜¯ï¼ŒV8æä¾›ä¸€ä¸ªåŸºç±»Extensionå’Œä¸€ä¸ªå…¨å±€æ³¨å†Œå‡½æ•°ï¼Œè¦æƒ³æ‰©å±•JavaScriptèƒ½åŠ›ï¼Œéœ€è¦ç»è¿‡ä»¥ä¸‹æ­¥éª¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class MYExtension : public v8::Extension &#123;</span><br><span class="line">  public:</span><br><span class="line">    MYExtension() : v8::Extension(&quot;v8&#x2F;My&quot;, &quot;native function my();&quot;) &#123;&#125;</span><br><span class="line">    virtual v8::Handle&lt;v8::FunctionTemplate&gt; GetNativeFunction (</span><br><span class="line">    v8::Handle&lt;v8::String&gt; name) &#123;</span><br><span class="line">      &#x2F;&#x2F; å¯ä»¥æ ¹æ®nameæ¥è¿”å›ä¸åŒçš„å‡½æ•°</span><br><span class="line">      return v8::FunctionTemplate::New(MYExtention::MY);</span><br><span class="line">    &#125;</span><br><span class="line">    static v8::Handle&lt;v8::Value&gt; MY(const v8::Arguments&amp; args) &#123;</span><br><span class="line">      &#x2F;&#x2F; Do sth here</span><br><span class="line">      return v8::Undefined();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">MYExtension extension;</span><br><span class="line">RegisterExtension(&amp;extension);</span><br></pre></td></tr></table></figure><ol><li>åŸºäºExtensionåŸºç±»æ„å»ºä¸€ä¸ªå®ƒçš„å­ç±»ï¼Œå¹¶å®ç°å®ƒçš„è™šå‡½æ•°â€”GetNativeFunctionï¼Œæ ¹æ®å‚æ•°nameæ¥å†³å®šè¿”å›å®å‡½æ•°ï¼›</li><li>åˆ›å»ºä¸€ä¸ªè¯¥å­ç±»çš„å¯¹è±¡ï¼Œå¹¶é€šè¿‡æ³¨å†Œå‡½æ•°å°†è¯¥å¯¹è±¡æ³¨å†Œåˆ°V8å¼•æ“ï¼Œå½“JavaScriptè°ƒç”¨â€™myâ€™å‡½æ•°æ—¶å°±å¯è¢«è°ƒç”¨åˆ°ã€‚</li></ol><p>Extensionæœºåˆ¶æ˜¯è°ƒç”¨V8çš„æ¥å£æ³¨å…¥æ–°å‡½æ•°ï¼ŒåŠ¨æ€æ‰©å±•éå¸¸æ–¹ä¾¿ï¼Œä½†æ²¡æœ‰ç»‘å®šæœºåˆ¶é«˜æ•ˆï¼Œé€‚ç”¨äºå¯¹æ€§èƒ½è¦æ±‚ä¸é«˜çš„åœºæ™¯ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åœ¨è¿‡å»å‡ å¹´ï¼ŒJavaScriptåœ¨å¾ˆå¤šé¢†åŸŸå¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œç„¶è€Œé™äºJavaScriptè¯­è¨€æœ¬èº«çš„ä¸è¶³ï¼Œæ‰§è¡Œæ•ˆç‡ä¸é«˜ã€‚Googleä¹Ÿæ¨å‡ºäº†ä¸€äº›JavaScriptç½‘ç»œåº”ç”¨ï¼Œå¦‚Gmailã€Google MapsåŠGoogle Docs officeç­‰ã€‚è¿™äº›åº”ç”¨çš„æ€§èƒ½ä¸ä»…å—åˆ°æœåŠ¡å™¨ã€ç½‘ç»œã€æ¸²æŸ“å¼•æ“ä»¥åŠå…¶ä»–è¯¸å¤šå› ç´ çš„å½±å“ï¼ŒåŒæ—¶ä¹Ÿå—åˆ°JavaScriptæœ¬èº«æ‰§è¡Œé€Ÿåº¦çš„å½±å“ã€‚ç„¶è€Œæ—¢æœ‰çš„JavaScriptå¼•æ“æ— æ³•æ»¡è¶³æ–°çš„éœ€æ±‚ï¼Œè€Œæ€§èƒ½ä¸ä½³ä¸€ç›´æ˜¯ç½‘ç»œåº”ç”¨å¼€å‘è€…æœ€å…³å¿ƒçš„ã€‚Googleå°±å¼€å§‹äº†V8å¼•æ“çš„ç ”ç©¶ï¼Œå°†ä¸€ç³»åˆ—æ–°æŠ€æœ¯å¼•å…¥JavaScriptå¼•æ“ä¸­ï¼Œå¤§å¤§æé«˜äº†JavaScriptçš„æ‰§è¡Œæ•ˆç‡ã€‚ç›¸ä¿¡éšç€V8å¼•æ“çš„ä¸æ–­å‘å±•ï¼ŒJavaScriptä¹Ÿä¼šæœ‰æ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆä¹Ÿä¼šæœ‰æ›´å¥½çš„æœªæ¥ï¼<br>é‚£ä¹ˆç»“åˆä¸Šé¢å¯¹äºV8å¼•æ“çš„ä»‹ç»ï¼Œæˆ‘ä»¬åœ¨ç¼–ç¨‹ä¸­åº”æ³¨æ„ï¼š</p><ul><li>ç±»å‹ã€‚å¯¹äºå‡½æ•°ï¼ŒJavaScriptæ˜¯ä¸€ç§åŠ¨æ€ç±»å‹è¯­è¨€ï¼ŒJavaScriptCoreå’ŒV8éƒ½ä½¿ç”¨éšè—ç±»å’Œå†…åµŒç¼“å­˜æ¥æé«˜æ€§èƒ½ï¼Œä¸ºäº†ä¿è¯ç¼“å­˜å‘½ä¸­ç‡ï¼Œä¸€ä¸ªå‡½æ•°åº”è¯¥ä½¿ç”¨è¾ƒå°‘çš„æ•°æ®ç±»å‹ï¼›å¯¹äºæ•°ç»„ï¼Œåº”å°½é‡å­˜æ”¾ç›¸åŒç±»å‹çš„æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡åç§»ä½ç½®æ¥è®¿é—®ã€‚</li><li>æ•°æ®è¡¨ç¤ºã€‚ç®€å•ç±»å‹æ•°æ®ï¼ˆå¦‚æ•´å‹ï¼‰ç›´æ¥ä¿å­˜åœ¨å¥æŸ„ä¸­ï¼Œå¯ä»¥å‡å°‘å¯»å€æ—¶é—´å’Œå†…å­˜å ç”¨ï¼Œå¦‚æœå¯ä»¥ä½¿ç”¨æ•´æ•°è¡¨ç¤ºçš„ï¼Œå°½é‡ä¸è¦ç”¨æµ®ç‚¹ç±»å‹ã€‚</li><li>å†…å­˜ã€‚è™½ç„¶JavaScriptè¯­è¨€ä¼šè‡ªå·±è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä½†æˆ‘ä»¬ä¹Ÿåº”å°½é‡åšåˆ°åŠæ—¶å›æ”¶ä¸ç”¨çš„å†…å­˜ï¼Œå¯¹ä¸å†ä½¿ç”¨çš„å¯¹è±¡è®¾ç½®ä¸ºnullæˆ–ä½¿ç”¨deleteæ–¹æ³•æ¥åˆ é™¤(ä½¿ç”¨deleteæ–¹æ³•åˆ é™¤ä¼šè§¦å‘éšè—ç±»æ–°å»ºï¼Œéœ€è¦æ›´å¤šçš„é¢å¤–æ“ä½œ)ã€‚</li><li>ä¼˜åŒ–å›æ»šã€‚åœ¨æ‰§è¡Œå¤šæ¬¡ä¹‹åï¼Œä¸è¦å‡ºç°ä¿®æ”¹å¯¹è±¡ç±»å‹çš„è¯­å¥ï¼Œå°½é‡ä¸è¦è§¦å‘ä¼˜åŒ–å›æ»šï¼Œå¦åˆ™ä¼šå¤§å¹…åº¦é™ä½ä»£ç çš„æ€§èƒ½ã€‚</li><li>æ–°æœºåˆ¶ã€‚ä½¿ç”¨JavaScriptå¼•æ“æˆ–è€…æ¸²æŸ“å¼•æ“æä¾›çš„æ–°æœºåˆ¶å’Œæ–°æ¥å£æé«˜æ€§èƒ½ã€‚</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li>ã€ŠWebKitæŠ€æœ¯å†…å¹•ã€‹</li><li>ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹</li><li>ã€Šæ·±å…¥æµ…å‡ºNode.jsã€‹</li></ul><p><a href="https://cnodejs.org/topic/59084a9cbbaf2f3f569be482" target="_blank" rel="noopener">V8 Ignitionï¼šJS å¼•æ“ä¸å­—èŠ‚ç çš„ä¸è§£ä¹‹ç¼˜ - CNodeæŠ€æœ¯ç¤¾åŒº</a></p><blockquote><p>ä½œè€…ï¼šé»˜è¯­<br>é“¾æ¥ï¼š<a href="https://zhuanlan.zhihu.com/p/27628685" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/27628685</a><br>æ¥æºï¼šçŸ¥ä¹</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-4dce785ff4595de55623611ab0055d33_1200x500.jpg&quot; alt=&quot;https://pic2.zhimg.com/v2-4dce785ff4595de55623611ab0055d33_1200x500.jpg&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;JavaScriptç»å¯¹æ˜¯æœ€ç«çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ï¼Œä¸€ç›´å…·æœ‰å¾ˆå¤§çš„ç”¨æˆ·ç¾¤ï¼Œéšç€åœ¨æœåŠ¡ç«¯çš„ä½¿ç”¨ï¼ˆNodeJsï¼‰ï¼Œæ›´æ˜¯çˆ†å‘äº†æå¼ºçš„ç”Ÿå‘½åŠ›ã€‚ç¼–ç¨‹è¯­è¨€åˆ†ä¸ºç¼–è¯‘å‹è¯­è¨€å’Œè§£é‡Šå‹è¯­è¨€ä¸¤ç±»ï¼Œç¼–è¯‘å‹è¯­è¨€åœ¨æ‰§è¡Œä¹‹å‰è¦å…ˆè¿›è¡Œå®Œå…¨ç¼–è¯‘ï¼Œè€Œè§£é‡Šå‹è¯­è¨€ä¸€è¾¹ç¼–è¯‘ä¸€è¾¹æ‰§è¡Œï¼Œå¾ˆæ˜æ˜¾è§£é‡Šå‹è¯­è¨€çš„æ‰§è¡Œé€Ÿåº¦æ˜¯æ…¢äºç¼–è¯‘å‹è¯­è¨€çš„ï¼Œè€ŒJavaScriptå°±æ˜¯ä¸€ç§è§£é‡Šå‹è„šæœ¬è¯­è¨€ï¼Œæ”¯æŒåŠ¨æ€ç±»å‹ã€å¼±ç±»å‹ã€åŸºäºåŸå‹çš„è¯­è¨€ï¼Œå†…ç½®æ”¯æŒç±»å‹ã€‚é‰´äºJavaScriptéƒ½æ˜¯åœ¨å‰ç«¯æ‰§è¡Œï¼Œè€Œä¸”éœ€è¦åŠæ—¶å“åº”ç”¨æˆ·ï¼Œè¿™å°±è¦æ±‚JavaScriptå¯ä»¥å¿«é€Ÿçš„è§£æåŠæ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;éšç€Webç›¸å…³æŠ€æœ¯çš„å‘å±•ï¼ŒJavaScriptæ‰€è¦æ‰¿æ‹…çš„å·¥ä½œä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œæ—©å°±è¶…è¶Šäº†â€œè¡¨å•éªŒè¯â€çš„èŒƒç•´ï¼Œè¿™å°±æ›´éœ€è¦å¿«é€Ÿçš„è§£æå’Œæ‰§è¡ŒJavaScriptè„šæœ¬ã€‚V8å¼•æ“å°±æ˜¯ä¸ºè§£å†³è¿™ä¸€é—®é¢˜è€Œç”Ÿï¼Œåœ¨nodeä¸­ä¹Ÿæ˜¯é‡‡ç”¨è¯¥å¼•æ“æ¥è§£æJavaScriptã€‚&lt;/p&gt;
&lt;p&gt;V8æ˜¯å¦‚ä½•ä½¿å¾—JavaScriptæ€§èƒ½æœ‰å¤§å¹…æå‡çš„å‘¢ï¼Ÿé€šè¿‡å¯¹ä¸€äº›ä¹¦ç±å’Œæ–‡ç« çš„å­¦ä¹ ï¼Œæ¢³ç†äº†V8çš„ç›¸å…³å†…å®¹ï¼Œæœ¬æ–‡å°†å¸¦ä½ è®¤è¯† V8ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="V8" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/V8/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="V8" scheme="https://heiyehk.github.io/blog/tags/V8/"/>
    
  </entry>
  
  <entry>
    <title>CDNåŸç†</title>
    <link href="https://heiyehk.github.io/blog/CDN%E5%8E%9F%E7%90%86/"/>
    <id>https://heiyehk.github.io/blog/CDN%E5%8E%9F%E7%90%86/</id>
    <published>2020-05-20T07:30:35.000Z</published>
    <updated>2020-05-20T08:56:54.949Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¼ ç»Ÿç½‘ç«™è®¿é—®æ–¹å¼"><a href="#ä¼ ç»Ÿç½‘ç«™è®¿é—®æ–¹å¼" class="headerlink" title="ä¼ ç»Ÿç½‘ç«™è®¿é—®æ–¹å¼"></a>ä¼ ç»Ÿç½‘ç«™è®¿é—®æ–¹å¼</h3><p>ç”±äºäº’è”ç½‘çš„é£é€Ÿå‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹ä½¿ç”¨å¹¶ä¾èµ–ç½‘ç»œï¼Œé‚£åœ¨è†¨èƒ€çš„ç”¨æˆ·ç¾¤çš„ç°è¡Œçš„ç½‘ç»œè´Ÿè½½èƒ½åŠ›å°±å½¢æˆäº†çŸ›ç›¾ï¼Œäººä»¬å¼€å§‹å¸Œæœ›ç½‘ç»œæ›´åŠ çš„å¿«é€Ÿï¼Œè€Œä¸æ˜¯åœ¨æ— ä¼‘æ­¢çš„ç­‰å¾…ä¸­ä¸Šç½‘ã€‚è¿™æ ·CDNå°±å¾—åˆ°äº†é£é€Ÿçš„å‘å±•ï¼Œé‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼ŒCDNæ˜¯å¦‚ä½•æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢?</p><p>ä¼ ç»Ÿçš„ç½‘ç«™è®¿é—®è¿‡ç¨‹ä¸º:</p><ul><li>ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è¦è®¿é—®çš„åŸŸå;</li><li>æµè§ˆå™¨å‘åŸŸåè§£ææœåŠ¡å™¨å‘å‡ºè§£æè¯·æ±‚ï¼Œè·å¾—æ­¤åŸŸåå¯¹åº”çš„IP åœ°å€;</li><li>æµè§ˆå™¨åˆ©ç”¨æ‰€å¾—åˆ°çš„IP åœ°å€ï¼Œå‘è¯¥IPå¯¹åº”çš„æœåŠ¡å™¨å‘å‡ºè®¿é—®è¯·æ±‚;</li><li>æœåŠ¡å™¨å¯¹æ­¤å“åº”ï¼Œå°†æ•°æ®å›ä¼ è‡³ç”¨æˆ·æµè§ˆå™¨ç«¯æ˜¾ç¤ºå‡ºæ¥ã€‚</li></ul><p><img src="https://pic2.zhimg.com/80/v2-ca8f789d66f23fe6043356e255d07d25_720w.jpg" alt="https://pic2.zhimg.com/80/v2-ca8f789d66f23fe6043356e255d07d25_720w.jpg"></p><a id="more"></a><h3 id="CDNè®¿é—®æ–¹å¼"><a href="#CDNè®¿é—®æ–¹å¼" class="headerlink" title="CDNè®¿é—®æ–¹å¼"></a>CDNè®¿é—®æ–¹å¼</h3><p>ä¸ä¼ ç»Ÿè®¿é—®æ–¹å¼ä¸åŒï¼ŒCDN ç½‘ç»œåˆ™æ˜¯åœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´å¢åŠ  Cache å±‚ï¼Œå°†ç”¨æˆ·çš„è®¿é—®è¯·æ±‚å¼•å¯¼åˆ°Cache èŠ‚ç‚¹è€Œä¸æ˜¯æœåŠ¡å™¨æºç«™ç‚¹ï¼Œè¦å®ç°è¿™ä¸€ç›®çš„ï¼Œä¸»è¦æ˜¯é€šè¿‡æ¥ç®¡DNS å®ç°ã€‚</p><p>ä½¿ç”¨CDN ç¼“å­˜åçš„ç½‘ç«™è®¿é—®è¿‡ç¨‹æ¼”å˜ä¸ºï¼š<br><img src="https://pic1.zhimg.com/80/v2-7b2506ccba72ac30c54e4cf74741beec_720w.jpg" alt="https://pic1.zhimg.com/80/v2-7b2506ccba72ac30c54e4cf74741beec_720w.jpg"></p><ol><li>ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è¦è®¿é—®çš„åŸŸå;</li><li>æµè§ˆå™¨å‘åŸŸåè§£ææœåŠ¡å™¨å‘å‡ºè§£æè¯·æ±‚ï¼Œç”±äºCDN å¯¹åŸŸåè§£æè¿‡ç¨‹è¿›è¡Œäº†è°ƒæ•´ï¼Œæ‰€ä»¥ç”¨æˆ·ç«¯ä¸€èˆ¬å¾—åˆ°çš„æ˜¯è¯¥åŸŸåå¯¹åº”çš„ CNAME è®°å½•ï¼Œæ­¤æ—¶æµè§ˆå™¨éœ€è¦å†æ¬¡å¯¹è·å¾—çš„ CNAME åŸŸåè¿›è¡Œè§£ææ‰èƒ½å¾—åˆ°ç¼“å­˜æœåŠ¡å™¨å®é™…çš„IP åœ°å€ã€‚ æ³¨ï¼šåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå…¨å±€è´Ÿè½½å‡è¡¡DNS è§£ææœåŠ¡å™¨ä¼šæ ¹æ®ç”¨æˆ·ç«¯çš„æºIP åœ°å€ï¼Œå¦‚åœ°ç†ä½ç½®(åŒ—äº¬è¿˜æ˜¯ä¸Šæµ·)ã€æ¥å…¥ç½‘ç±»å‹(ç”µä¿¡è¿˜æ˜¯ç½‘é€š)å°†ç”¨æˆ·çš„è®¿é—®è¯·æ±‚å®šä½åˆ°ç¦»ç”¨æˆ·è·¯ç”±æœ€çŸ­ã€ä½ç½®æœ€è¿‘ã€è´Ÿè½½æœ€è½»çš„Cache èŠ‚ç‚¹(ç¼“å­˜æœåŠ¡å™¨)ä¸Šï¼Œå®ç°å°±è¿‘å®šä½ã€‚å®šä½ä¼˜å…ˆåŸåˆ™å¯æŒ‰ä½ç½®ã€å¯æŒ‰è·¯ç”±ã€ä¹Ÿå¯æŒ‰è´Ÿè½½ç­‰ã€‚</li><li>å†æ¬¡è§£æåæµè§ˆå™¨å¾—åˆ°è¯¥åŸŸåCDN ç¼“å­˜æœåŠ¡å™¨çš„å®é™…IP åœ°å€ï¼Œå‘ç¼“å­˜æœåŠ¡å™¨å‘å‡ºè®¿é—®è¯·æ±‚;</li><li>ç¼“å­˜æœåŠ¡å™¨æ ¹æ®æµè§ˆå™¨æä¾›çš„åŸŸåï¼Œé€šè¿‡Cache å†…éƒ¨ä¸“ç”¨DNS è§£æå¾—åˆ°æ­¤åŸŸåæºæœåŠ¡å™¨çš„çœŸå®IP åœ°å€ï¼Œå†ç”±ç¼“å­˜æœåŠ¡å™¨å‘æ­¤çœŸå®IP åœ°å€æäº¤è®¿é—®è¯·æ±‚;</li><li>ç¼“å­˜æœåŠ¡å™¨ä»çœŸå®IP åœ°å€å¾—åˆ°å†…å®¹åï¼Œä¸€æ–¹é¢åœ¨æœ¬åœ°è¿›è¡Œä¿å­˜ï¼Œä»¥å¤‡ä»¥åä½¿ç”¨ï¼ŒåŒæ—¶æŠŠå¾—åˆ°çš„æ•°æ®å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œå®Œæˆè®¿é—®çš„å“åº”è¿‡ç¨‹;</li><li>ç”¨æˆ·ç«¯å¾—åˆ°ç”±ç¼“å­˜æœåŠ¡å™¨ä¼ å›çš„æ•°æ®åæ˜¾ç¤ºå‡ºæ¥ï¼Œè‡³æ­¤å®Œæˆæ•´ä¸ªåŸŸåè®¿é—®è¿‡ç¨‹ã€‚  </li></ol><p>é€šè¿‡ä»¥ä¸Šåˆ†æå¯ä»¥çœ‹åˆ°ï¼Œä¸è®ºæ˜¯å¦ä½¿ç”¨CDN ç½‘ç»œï¼Œæ™®é€šç”¨æˆ·å®¢æˆ·ç«¯è®¾ç½®ä¸éœ€åšä»»ä½•æ”¹å˜ï¼Œç›´æ¥ä½¿ç”¨è¢«åŠ é€Ÿç½‘ç«™åŸæœ‰åŸŸåè®¿é—®å³å¯ã€‚å¯¹äºè¦åŠ é€Ÿçš„ç½‘ç«™ï¼Œåªéœ€ä¿®æ”¹æ•´ä¸ªè®¿é—®è¿‡ç¨‹ä¸­çš„åŸŸåè§£æéƒ¨åˆ†ï¼Œä¾¿èƒ½å®ç°é€æ˜çš„ç½‘ç»œåŠ é€ŸæœåŠ¡ã€‚</p><p>CDN é€Ÿåº¦å¿«ã€ä¼ è¾“å®‰å…¨ã€æ‰©å±•æ€§å¼ºï¼Œå°¤å…¶åœ¨åº”å¯¹å¤§å®¹é‡è¿¸å‘æ—¶æ¸¸åˆƒæœ‰ä½™ï¼Œä¸»è¦åº”ç”¨äºè·¨åœ°åŸŸçš„é—¨æˆ·åŠè¡Œä¸šç½‘ç«™ï¼Œå¦‚æ¸¸æˆã€å¨±ä¹ã€ITã€æ–°é—»ä¼ åª’ã€VODã€è¿œç¨‹æ•™è‚²ã€éŸ³è§†é¢‘ã€ä¸‹è½½ã€IPTVã€é‡‘èè¯åˆ¸ç­‰ã€‚</p><p>CDN ç½‘ç»œï¼Œç½‘ç«™ç”¨æˆ·æ— éœ€æŠ•èµ„ä»·å€¼ä¸è²çš„æœåŠ¡å™¨ã€ç½‘ç»œå¸¦å®½åŠç›¸åº”çš„äººåŠ›æˆæœ¬ï¼Œä¾¿èƒ½å®ç°å°†ç½‘ç«™å†…å®¹å‘å¸ƒåˆ°ç¦»ç»ˆç«¯ç”¨æˆ·è·ç¦»æœ€è¿‘ã€è·¯ç”±æœ€çŸ­çš„ç½‘é™…è¾¹ç¼˜Cache èŠ‚ç‚¹ï¼Œåˆ›é€ å®Œç¾ã€å¿«æ·çš„ç½‘ç«™ä½¿ç”¨ä½“éªŒã€‚</p><blockquote><p>é“¾æ¥: <a href="https://zhuanlan.zhihu.com/p/44966787" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/44966787</a><br>æ¥æº: çŸ¥ä¹</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä¼ ç»Ÿç½‘ç«™è®¿é—®æ–¹å¼&quot;&gt;&lt;a href=&quot;#ä¼ ç»Ÿç½‘ç«™è®¿é—®æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;ä¼ ç»Ÿç½‘ç«™è®¿é—®æ–¹å¼&quot;&gt;&lt;/a&gt;ä¼ ç»Ÿç½‘ç«™è®¿é—®æ–¹å¼&lt;/h3&gt;&lt;p&gt;ç”±äºäº’è”ç½‘çš„é£é€Ÿå‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹ä½¿ç”¨å¹¶ä¾èµ–ç½‘ç»œï¼Œé‚£åœ¨è†¨èƒ€çš„ç”¨æˆ·ç¾¤çš„ç°è¡Œçš„ç½‘ç»œè´Ÿè½½èƒ½åŠ›å°±å½¢æˆäº†çŸ›ç›¾ï¼Œäººä»¬å¼€å§‹å¸Œæœ›ç½‘ç»œæ›´åŠ çš„å¿«é€Ÿï¼Œè€Œä¸æ˜¯åœ¨æ— ä¼‘æ­¢çš„ç­‰å¾…ä¸­ä¸Šç½‘ã€‚è¿™æ ·CDNå°±å¾—åˆ°äº†é£é€Ÿçš„å‘å±•ï¼Œé‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼ŒCDNæ˜¯å¦‚ä½•æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢?&lt;/p&gt;
&lt;p&gt;ä¼ ç»Ÿçš„ç½‘ç«™è®¿é—®è¿‡ç¨‹ä¸º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è¦è®¿é—®çš„åŸŸå;&lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨å‘åŸŸåè§£ææœåŠ¡å™¨å‘å‡ºè§£æè¯·æ±‚ï¼Œè·å¾—æ­¤åŸŸåå¯¹åº”çš„IP åœ°å€;&lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨åˆ©ç”¨æ‰€å¾—åˆ°çš„IP åœ°å€ï¼Œå‘è¯¥IPå¯¹åº”çš„æœåŠ¡å™¨å‘å‡ºè®¿é—®è¯·æ±‚;&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å¯¹æ­¤å“åº”ï¼Œå°†æ•°æ®å›ä¼ è‡³ç”¨æˆ·æµè§ˆå™¨ç«¯æ˜¾ç¤ºå‡ºæ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://pic2.zhimg.com/80/v2-ca8f789d66f23fe6043356e255d07d25_720w.jpg&quot; alt=&quot;https://pic2.zhimg.com/80/v2-ca8f789d66f23fe6043356e255d07d25_720w.jpg&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="CDN" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/CDN/"/>
    
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="CDN" scheme="https://heiyehk.github.io/blog/tags/CDN/"/>
    
  </entry>
  
  <entry>
    <title>é¢è¯•çµé­‚åå¤§é—®ï¼Œä½ ä»¬éƒ½ä¼šå›ç­”äº†å—ï¼Ÿ</title>
    <link href="https://heiyehk.github.io/blog/%E9%9D%A2%E8%AF%95%E7%81%B5%E9%AD%82%E5%8D%81%E5%A4%A7%E9%97%AE%EF%BC%8C%E4%BD%A0%E4%BB%AC%E9%83%BD%E4%BC%9A%E5%9B%9E%E7%AD%94%E4%BA%86%E5%90%97%EF%BC%9F/"/>
    <id>https://heiyehk.github.io/blog/%E9%9D%A2%E8%AF%95%E7%81%B5%E9%AD%82%E5%8D%81%E5%A4%A7%E9%97%AE%EF%BC%8C%E4%BD%A0%E4%BB%AC%E9%83%BD%E4%BC%9A%E5%9B%9E%E7%AD%94%E4%BA%86%E5%90%97%EF%BC%9F/</id>
    <published>2020-04-30T09:03:48.000Z</published>
    <updated>2020-04-30T09:27:49.165Z</updated>
    
    <content type="html"><![CDATA[<ul><li>ä½ æœ€å¤§çš„ä¼˜ç‚¹å’Œç¼ºç‚¹</li><li>ä½ æ˜¯å¦æ¥å—åŠ ç­ï¼Ÿ</li><li>ä½ å¯¹è–ªèµ„æœ‰ä»€ä¹ˆè¦æ±‚å—ï¼Ÿ</li><li>åœ¨äº”å¹´çš„æ—¶é—´å†…ï¼Œä½ çš„èŒä¸šè§„åˆ’ï¼Ÿ</li><li>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è˜ç”¨ä½ ï¼Ÿ</li><li>ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘ï¼Ÿ</li><li>ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸ï¼Ÿ</li><li>ä¸ä¸Šçº§æ„è§ä¸ä¸€è‡´ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ</li><li>ä½ ç¼ºä¹å·¥ä½œç»éªŒï¼Œå¦‚ä½•èƒ½èƒœä»»è¿™ä»½å·¥ä½œï¼Ÿ</li><li>å·¥ä½œä¸­ä¸åŒäº‹å‘ç”Ÿäº‰æ‰§ï¼Œä½ ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ</li></ul><a id="more"></a><h3 id="ä¸‹é¢æ¥å¸¦å¤§å®¶çœ‹çœ‹ï¼Œå¦‚ä½•è½»æ¾æ‹†è§£åå¤§é—®"><a href="#ä¸‹é¢æ¥å¸¦å¤§å®¶çœ‹çœ‹ï¼Œå¦‚ä½•è½»æ¾æ‹†è§£åå¤§é—®" class="headerlink" title="ä¸‹é¢æ¥å¸¦å¤§å®¶çœ‹çœ‹ï¼Œå¦‚ä½•è½»æ¾æ‹†è§£åå¤§é—®"></a>ä¸‹é¢æ¥å¸¦å¤§å®¶çœ‹çœ‹ï¼Œå¦‚ä½•è½»æ¾æ‹†è§£åå¤§é—®</h3><h4 id="1-ä½ æœ€å¤§çš„ä¼˜ç‚¹å’Œç¼ºç‚¹"><a href="#1-ä½ æœ€å¤§çš„ä¼˜ç‚¹å’Œç¼ºç‚¹" class="headerlink" title="1.ä½ æœ€å¤§çš„ä¼˜ç‚¹å’Œç¼ºç‚¹"></a>1.ä½ æœ€å¤§çš„ä¼˜ç‚¹å’Œç¼ºç‚¹</h4><p><strong>è°ˆä¼˜ç‚¹</strong></p><p>ä¸è¦ç¬¼ç»Ÿåœ°è¯´è‡ªå·±çš„ä¼˜ç‚¹ï¼Œä¾‹å¦‚åŠ©äººä¸ºä¹ï¼Œå–„è§£äººæ„è¿™äº›ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚éœ€è¦æ ¹æ®åº”è˜å²—ä½æ‰€éœ€çš„ç‰¹æ€§æœ‰é’ˆå¯¹æ€§åœ°è°ˆè‡ªå·±çš„æœ‰ç‚¹ã€‚ä¾‹å¦‚åº”è˜äº§å“ç»ç†ï¼Œä¼˜ç‚¹ä¸ºé€»è¾‘èƒ½åŠ›å¼ºã€å–„äºä¸äººæ²Ÿé€šï¼›åº”è˜è¿è¥ï¼Œä¼˜ç‚¹ä¸ºå–„äºç«™åœ¨ä»–äººçš„è§’åº¦ä¸ºäººç€æƒ³ï¼Œå–„äºä¸äººæ‰“äº¤é“ç­‰ç­‰ã€‚</p><p><strong>è°ˆç¼ºç‚¹éœ€è¦æ³¨æ„2ç‚¹</strong></p><p>1ï¼‰é¿å…è°ˆèŒä¸šè‡´å‘½ç¼ºç‚¹ï¼Œæ¯”å¦‚ï¼šåº”è˜äº§å“ç»ç†ï¼Œä½ è¯´è‡ªå·±çš„ç¼ºç‚¹æ˜¯æ€ç»´æ··ä¹±ã€æ²¡æœ‰æ—¶é—´è§‚å¿µï¼Œæ€§æ ¼å†…å‘ï¼Œé‚£åŸºæœ¬ä¸Šå°±GGäº†<br>2ï¼‰é¿å…é¿é‡å°±è½»ï¼Œè°ˆä¸ç®—ç¼ºç‚¹çš„ç¼ºç‚¹ï¼Œæ¯”å¦‚ï¼šå·¥ä½œè¿›åº¦å¿«ï¼Œå®¹æ˜“è®©å…¶ä»–åŒäº‹èµ¶ä¸ä¸Šè¿›åº¦è¿™äº›<br>å¯ä»¥è°ˆå·²ç»æ‰¾åˆ°æ–¹æ³•å¹¶æ­£åœ¨æ”¹æ­£çš„ç¼ºç‚¹ï¼Œå¹¶è¯´æ¸…æ¥šè‡ªå·±çš„æ”¹æ­£è®¡åˆ’ï¼Œæˆ–è€…è°ˆä¸€ä¸ªåˆ©ç”¨ä½ çš„ä¼˜ç‚¹æ”¹æ­£çš„ç¼ºç‚¹ï¼Œé¡ºä¾¿å¸¦å‡ºè‡ªå·±çš„ä¸€ä¸ªä¼˜ç‚¹ç­‰ã€‚ä¾‹å¦‚ï¼šå–œæ¬¢è¿½æ±‚å®Œç¾ï¼Œå¯¼è‡´ä»»åŠ¡å»¶æœŸï¼Œå·²ç»é€šè¿‡å­¦ä¹ æ—¶é—´ç®¡ç†ï¼Œæœ‰æ„è¯†åœ°æ”¹å˜å·¥ä½œæ–¹å¼ï¼Œäº‰å–å¦‚æœŸå®Œæˆè‡ªå·±çš„å·¥ä½œ</p><h4 id="2-ä½ æ˜¯å¦æ¥å—åŠ ç­ï¼Ÿ"><a href="#2-ä½ æ˜¯å¦æ¥å—åŠ ç­ï¼Ÿ" class="headerlink" title="2.ä½ æ˜¯å¦æ¥å—åŠ ç­ï¼Ÿ"></a>2.ä½ æ˜¯å¦æ¥å—åŠ ç­ï¼Ÿ</h4><p>é¢è¯•å®˜è¿™æ ·é—®ï¼Œä¸€èˆ¬æœ‰2ä¸ªæ„å›¾ã€‚ä¸€å°±æ˜¯å…¬å¸ç»å¸¸åŠ ç­ï¼Œéœ€è¦ä½ æ˜ç¡®è¡¨è¾¾ä¸ªäººæ„æ„¿ï¼›äºŒå°±æ˜¯å…¬å¸åªæ˜¯æƒ³äº†è§£ä½ å¯¹è¿™ä¸ªé—®é¢˜çš„ä¸ªäººçœ‹æ³•ï¼Œä»¥åŠä½ çš„å·¥ä½œæ€åº¦ã€‚</p><p><strong>å¯¹äºè¿™ç§é—®é¢˜ï¼Œä½œæ­»çš„å›ç­”æ˜¯ï¼š</strong></p><ul><li>æˆ‘æ— æ¡ä»¶æ¥å—åŠ ç­</li><li>æˆ‘ä¼šåœ¨å·¥ä½œæ—¶é—´å®Œæˆè‡ªå·±çš„å·¥ä½œ</li><li>æˆ‘ä¸å–œæ¬¢åŠ ç­ï¼Œä¸èƒ½æ¥å—åŠ ç­</li></ul><p>å‰ä¸¤ä¸ªå›ç­”å¤ªç»å¯¹ï¼Œå¯ä¿¡åº¦ä¸é«˜ï¼Œé¢è¯•å®˜ä¹Ÿä¸ä¼šç›¸ä¿¡è¿™ä¸ªç­”æ¡ˆï¼Œæœ€åçš„å›ç­”ï¼Œå¤§å®¶éƒ½æ‡‚ï¼Œæ²¡æœ‰é¢è¯•å®˜å–œæ¬¢å¬åˆ°è¿™æ ·çš„ç­”æ¡ˆã€‚</p><p>å»ºè®®å¤§å®¶å›ç­”çš„æ—¶å€™éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p><ul><li><p>ä»è¨€è¯­ä¸­ä½“ç°è‡ªå·±çš„æŠ—å‹èƒ½åŠ›ã€è´£ä»»å¿ƒã€ä»¥åŠå·¥ä½œæ•ˆç‡</p></li><li><p>å¼ºè°ƒå·¥ä½œéœ€è¦ï¼Œè¡¨ç°å‡ºç§¯æå¿ƒæ€ï¼Œå¯¹äºåŠ ç­ï¼Œå…·ä½“æƒ…å†µå…·ä½“å¯¹å¾…ã€‚</p></li></ul><p>å¤§å®¶å¯ä»¥è¿™æ ·æœºæ™ºå›ç­”ï¼šæˆ‘å¾ˆæ„¿æ„æ¥å—æŒ‘æˆ˜ï¼Œä½†æˆ‘ä¼šæé«˜å·¥ä½œæ—¶é—´çš„æ•ˆç‡ï¼Œäº‰å–åœ¨è§„å®šçš„æ—¶é—´å†…å®Œæˆå·¥ä½œã€‚ä½†å¦‚æœå·¥ä½œä»»åŠ¡ç´§æ€¥ï¼Œæˆ‘æ„¿æ„å’ŒåŒäº‹ä»¬ä¸€èµ·åŠ ç­å®Œæˆå·¥ä½œï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸ªäººèŒè´£ã€‚</p><h4 id="3-ä½ å¯¹è–ªèµ„æœ‰ä»€ä¹ˆè¦æ±‚å—ï¼Ÿ"><a href="#3-ä½ å¯¹è–ªèµ„æœ‰ä»€ä¹ˆè¦æ±‚å—ï¼Ÿ" class="headerlink" title="3.ä½ å¯¹è–ªèµ„æœ‰ä»€ä¹ˆè¦æ±‚å—ï¼Ÿ"></a>3.ä½ å¯¹è–ªèµ„æœ‰ä»€ä¹ˆè¦æ±‚å—ï¼Ÿ</h4><p>è¿™ä¸ªé—®é¢˜å¾€å¾€æ˜¯æ±‚èŒè€…è®¤ä¸ºå¾ˆéš¾å›ç­”çš„ä¸€ä¸ªé—®é¢˜ï¼Œè¯´é«˜äº†æ€•ä¸¢äº†offerï¼Œè¯´ä½äº†ï¼Œè‡ªå·±ä¸æ„¿æ„ã€‚æœ‰çš„åŒå­¦å¹²è„†ä¼šè¯´è‡ªå·±ä¸å¤ªè¿½æ±‚è–ªèµ„ï¼Œå¯¹è–ªèµ„æ²¡è¦æ±‚ã€‚è¿™æ ·çš„å›ç­”ï¼Œä¸ä»…è®©é¢è¯•å®˜è§‰å¾—ä½ å¯¹è¡Œä¸šè–ªèµ„æ²¡æœ‰æœ€åŸºæœ¬çš„è®¤çŸ¥ï¼Œç”šè‡³è®¤ä¸ºä½ å¯¹è‡ªå·±æ²¡æœ‰ä¿¡å¿ƒï¼Œä¸æ•¢è°ˆè–ªèµ„ã€‚</p><p>å¤§å®¶å¯ä»¥åœ¨é¢è¯•å‰å¤šå»äº†è§£è‡ªå·±åº”è˜çš„è¡Œä¸šã€ä¼ä¸šã€å²—ä½çš„å¤§æ¦‚è–ªèµ„èŒƒå›´ï¼Œå†è‡ªæˆ‘è¯„ä¼°ä¸€ä¸‹è‡ªå·±å„æ–¹é¢çš„æ¡ä»¶ï¼Œå®šä¸€ä¸ªè‡ªå·±æ»¡æ„çš„è–ªèµ„åŒºé—´ã€‚æœ€åå†ç°åœºè¯„ä¼°è‡ªå·±é¢è¯•çš„è¡¨ç°ï¼Œé¢è¯•å®˜çš„æ€åº¦ï¼Œè§‰å¾—æœ‰æŠŠæ¡ï¼Œå¯ä»¥åœ¨é¢„è®¾å¥½è–ªèµ„åŒºé—´å†…å¤šè¦ç‚¹ï¼Œåä¹‹å¯ä»¥ä¿å®ˆä¸€äº›ã€‚</p><h4 id="4-åœ¨äº”å¹´çš„æ—¶é—´å†…ï¼Œä½ çš„èŒä¸šè§„åˆ’ï¼Ÿ"><a href="#4-åœ¨äº”å¹´çš„æ—¶é—´å†…ï¼Œä½ çš„èŒä¸šè§„åˆ’ï¼Ÿ" class="headerlink" title="4.åœ¨äº”å¹´çš„æ—¶é—´å†…ï¼Œä½ çš„èŒä¸šè§„åˆ’ï¼Ÿ"></a>4.åœ¨äº”å¹´çš„æ—¶é—´å†…ï¼Œä½ çš„èŒä¸šè§„åˆ’ï¼Ÿ</h4><p>ä¸€ä¸ªå¯¹æœªæ¥æœ‰è§„åˆ’çš„äººï¼Œä¼šè®¤çœŸè¸å®åœ°å·¥ä½œï¼Œå¹¶æœ‰æ„è¯†åœ°æå‡è‡ªå·±ï¼Œè¿™æ˜¯é¢è¯•å®˜éœ€è¦ç¡®è®¤çš„ã€‚è¿™ä¸ªé—®é¢˜éœ€è¦ä½ å¯¹è¯¥å²—ä½çš„èŒä¸šå‘å±•è·¯å¾„æœ‰ä¸€å®šçš„äº†è§£ï¼ŒçŸ¥é“æ™‹å‡è·¯å¾„ã€èŠ±è´¹çš„æ—¶é—´ä»¥åŠç›¸åº”çš„èƒ½åŠ›éœ€æ±‚ã€‚å¯ä»¥åšä»¥æ—¶é—´çº¿åšä¸€ä¸ªè§„åˆ’ï¼Œä¾‹å¦‚1-3å¹´ï¼Œå¦‚ä½•åŸ¹å…»è‡ªå·±çš„ä»€ä¹ˆæŠ€èƒ½ã€æ™‹å‡ä¸ºä»€ä¹ˆå²—ä½ã€‚</p><h4 id="5-æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è˜ç”¨ä½ ï¼Ÿ"><a href="#5-æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è˜ç”¨ä½ ï¼Ÿ" class="headerlink" title="5.æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è˜ç”¨ä½ ï¼Ÿ"></a>5.æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è˜ç”¨ä½ ï¼Ÿ</h4><p>è¿™å¥è¯çš„æ½œå°è¯æ˜¯â€œä½ å‡­ä»€ä¹ˆèƒœä»»è¿™ä¸ªå²—ä½â€ï¼Œè¿™æ—¶å€™ä½ å°±è¦å‘é¢è¯•å®˜å±•ç°å‡ºä½ çš„èƒ½åŠ›äº†ã€‚</p><p>ä¸€èˆ¬å¯ä»¥å›´ç»•ä»¥ä¸‹ä¸‰å›ç­”è¿™ä¸ªé—®é¢˜ï¼š</p><ul><li><p>å¼ºè°ƒè‡ªå·±çš„èƒ½åŠ›ä¸èŒä½åŒ¹é…ï¼Œç”¨æ•°æ®ã€å®ä¾‹æ¥è¯æ˜è‡ªå·±å¯ä»¥èƒœä»»è¿™ä¸ªèŒä½ã€‚</p></li><li><p>æè¿°ä½ åŠ å…¥å…¬å¸åèƒ½ä¸ºå…¬å¸å¸¦æ¥ä»€ä¹ˆï¼Œè¦è¾¾æˆä»€ä¹ˆçš„ç›®æ ‡ï¼Œä¸ºå…¬å¸ä¸šç»©å¸¦æ¥å¤šå°‘å¢é•¿ç­‰ã€‚</p></li><li><p>å±•ç°è‡ªå·±çš„ä¸èŒä½ç›¸å…³çš„è‡ªèº«ä¼˜åŠ¿ã€‚</p></li></ul><h4 id="6-ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘ï¼Ÿ"><a href="#6-ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘ï¼Ÿ" class="headerlink" title="6.ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘ï¼Ÿ"></a>6.ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘ï¼Ÿ</h4><p>è¿™ä¸ªé—®é¢˜å°±å¾ˆéš¾æœ‰å½“åœºå–å·§çš„å›ç­”æ–¹å¼äº†ï¼Œå»ºè®®å¤§å®¶åº”è˜å‰è¦æå‰åšå¥½åŠŸè¯¾ï¼Œåˆ°ç™¾åº¦æˆ–è€…å…¬å¸å®˜ç½‘ä¸Šäº†è§£ä¸€ä¸‹è¯¥å…¬å¸å¤§æ¦‚æƒ…å†µï¼Œä¾‹å¦‚ï¼šä¸»è¥ä¸šåŠ¡ã€è¿‘å‡ å¹´çš„é‡ç‚¹ä¸šåŠ¡ã€å‘å±•æ–¹å‘ï¼Œè¿‘æœŸçš„é‡å¤§æˆ˜ç•¥è°ƒæ•´ç­‰ç­‰ã€‚</p><h4 id="7-ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸ï¼Ÿ"><a href="#7-ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸ï¼Ÿ" class="headerlink" title="7.ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸ï¼Ÿ"></a>7.ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸ï¼Ÿ</h4><p>é¢è¯•å®˜æƒ³é€šè¿‡ä½ çš„å›ç­”äº†è§£2ç‚¹ã€‚ç¬¬ä¸€ç‚¹æ˜¯ä½ çš„æ±‚èŒåŠ¨æœºã€‚ç¬¬äºŒç‚¹æ˜¯ä½ å¯¹ä¼ä¸šæ˜¯å¦æœ‰ä¸€å®šçš„äº†è§£ã€‚</p><p>é‚£è¦æ€ä¹ˆè¿›è¡Œå›ç­”å‘¢ï¼Œå»ºè®®ä»è¡Œä¸šã€ä¼ä¸šã€å²—ä½ä¸‰ä¸ªè§’åº¦å»å›ç­”</p><ul><li><p><strong>è¡Œä¸šå±‚é¢</strong>ï¼šé€šè¿‡å®è§‚åˆ†æè¡Œä¸šæƒ…å†µï¼Œè¡¨è¾¾ä½ å¯¹è¡Œä¸šå‘å±•å‰æ™¯çš„çœ‹å¥½ä»¥åŠä¸ªäººå–œæ¬¢è¿™ä¸ªè¡Œä¸š</p></li><li><p><strong>ä¼ä¸šå±‚é¢</strong>ï¼šæå‰ç†Ÿæ‚‰å…¬å¸çš„åŸºæœ¬æƒ…å†µï¼Œè¡¨è¾¾å‡ºä½ å¯¹å…¬å¸å“ªä¸€æ–¹é¢çš„è®¤åŒå’Œèµèµï¼ˆæ°›å›´/å·¥ä½œç¯å¢ƒ/å‘å±•å‰æ™¯ç­‰ç­‰ï¼‰ã€‚</p></li><li><p><strong>å²—ä½å±‚é¢</strong>ï¼šå……åˆ†äº†è§£åº”è˜å²—ä½çš„å®é™…æƒ…å†µã€èŒèƒ½èŒƒå›´ä¸èƒ½åŠ›è¦æ±‚ï¼Œè¡¨è¾¾è‡ªå·±å¯¹å²—ä½çš„å–œæ¬¢ï¼Œå¹¶é€šè¿‡å±•ç°è‡ªå·±çš„è‡ªèº«ä¼˜åŠ¿ï¼Œè¯´æœé¢è¯•å®˜ä½ é€‚åˆè¿™ä¸ªå²—ä½ã€‚</p></li></ul><h4 id="8-ä¸ä¸Šçº§æ„è§ä¸ä¸€è‡´ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ"><a href="#8-ä¸ä¸Šçº§æ„è§ä¸ä¸€è‡´ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ" class="headerlink" title="8.ä¸ä¸Šçº§æ„è§ä¸ä¸€è‡´ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ"></a>8.ä¸ä¸Šçº§æ„è§ä¸ä¸€è‡´ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ</h4><p>é¢è¯•å®˜å¸Œæœ›é€šè¿‡è¿™ä¸ªé—®é¢˜ï¼Œäº†è§£ä½ ä¸ºäººå¤„ä¸–ï¼Œæ²Ÿé€šäº¤æµçš„èƒ½åŠ›ã€‚</p><p>å›ç­”å¯ä»¥å›´ç»•è¿™å‡ ä¸ªç‚¹è¿›è¡Œå±•å¼€ï¼šå…·ä½“æƒ…å†µå…·ä½“åˆ†æã€æ²Ÿé€šã€æ¢ä½æ€è€ƒã€å°Šé‡</p><p>å¯ä»¥è¿™æ ·å›ç­”ï¼šé¦–å…ˆæˆ‘ä¼šå°Šé‡ä¸Šçº§çš„æ„è§ï¼Œå¯¹äºéåŸåˆ™æ€§é—®é¢˜ï¼Œæˆ‘ä¼šé€‰æ‹©å»æœä»ä¸Šçº§çš„å®‰æ’ã€‚ä½†å¯¹äºæ¶‰åŠå…¬å¸åˆ©ç›Šæˆ–è€…å…¶ä»–é‡å¤§æ€§çš„é—®é¢˜ï¼Œæˆ‘ä¼šé€‰æ‹©æ¢ä½æ€è€ƒï¼Œäº†è§£ä¸Šçº§çš„æƒ³æ³•åå»å’Œä¸Šçº§è¿›è¡Œç§¯æçš„æ²Ÿé€šï¼Œå‘Šè¯‰ä»–æˆ‘çš„æƒ³æ³•ï¼Œç»™äºˆä¸Šçº§ä¸€äº›å»ºè®®ã€‚</p><h4 id="9-ä½ ç¼ºä¹å·¥ä½œç»éªŒï¼Œå¦‚ä½•èƒ½èƒœä»»è¿™ä»½å·¥ä½œï¼Ÿ"><a href="#9-ä½ ç¼ºä¹å·¥ä½œç»éªŒï¼Œå¦‚ä½•èƒ½èƒœä»»è¿™ä»½å·¥ä½œï¼Ÿ" class="headerlink" title="9.ä½ ç¼ºä¹å·¥ä½œç»éªŒï¼Œå¦‚ä½•èƒ½èƒœä»»è¿™ä»½å·¥ä½œï¼Ÿ"></a>9.ä½ ç¼ºä¹å·¥ä½œç»éªŒï¼Œå¦‚ä½•èƒ½èƒœä»»è¿™ä»½å·¥ä½œï¼Ÿ</h4><p>é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¤§å®¶ä¸éœ€è¦æƒŠæ…Œï¼Œå› ä¸ºå¤§å®¶éƒ½æ˜¯åº”å±Šç”Ÿï¼Œæ²¡æœ‰å·¥ä½œç»éªŒæ˜¯å¾ˆæ­£å¸¸çš„ã€‚åªéœ€è¦å›ç­”çš„æ—¶å€™èƒ½ç»™å‡ºä¸€ä¸ªä»¤äººä¿¡æœçš„ç­”æ¡ˆå³å¯ã€‚é¦–å…ˆè¦è°¦è™šåœ°æ‰¿è®¤è‡ªå·±åœ°ç»éªŒä¸è¶³ï¼Œç„¶åå¯ä»¥è°ˆä¸€ä¸‹è‡ªå·±å¯¹å²—ä½åœ°ç†è§£ï¼Œå¹¶è¡¨ç¤ºå‡ºè‡ªå·±æ­£åœ¨ä¸æ–­åœ°å­¦ä¹ ï¼Œå¹¶ä¸¾å‡ºå®ä¾‹ã€‚å¦‚æœæœ‰ç›¸å…³åœ°å®ä¹ ã€é¡¹ç›®ç»å†ï¼Œä¹Ÿå¯ç”¨æ¥è¿›è¡Œåˆ†æï¼Œå……åˆ†å±•ç¤ºè‡ªå·±ã€‚æœ€åå¯ä»¥è¡¨æ˜ä¸€ä¸‹è‡ªå·±çš„å†³å¿ƒã€‚</p><h4 id="10-å·¥ä½œä¸­ä¸åŒäº‹å‘ç”Ÿäº‰æ‰§ï¼Œä½ ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ"><a href="#10-å·¥ä½œä¸­ä¸åŒäº‹å‘ç”Ÿäº‰æ‰§ï¼Œä½ ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ" class="headerlink" title="10.å·¥ä½œä¸­ä¸åŒäº‹å‘ç”Ÿäº‰æ‰§ï¼Œä½ ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ"></a>10.å·¥ä½œä¸­ä¸åŒäº‹å‘ç”Ÿäº‰æ‰§ï¼Œä½ ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ</h4><p>å·¥ä½œä¸­é‡åˆ°äº‰æ‰§ã€æ„è§ä¸ç»Ÿä¸€æ˜¯ç»å¸¸äº‹æƒ…ï¼Œé¢è¯•å®˜æƒ³é€šè¿‡è¿™ä¸ªé—®é¢˜ï¼Œäº†è§£ä½ çš„å¤„äº‹èƒ½åŠ›ï¼Œèƒ½ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†åŒäº‹é—®é¢˜ã€‚</p><p><strong>å›ç­”é—®é¢˜äº‹æŠ“ä½3ç‚¹å³å¯ï¼š</strong></p><ol><li>ç§¯æä¸åŒäº‹è¿›è¡Œæ²Ÿé€šï¼Œå¹¶ä¼šåœ¨æ²Ÿé€šå‰åšå¥½å‡†å¤‡ï¼Œå¯¹å·¥ä½œè¿›è¡Œæ¢³ç†ï¼Œçœ‹çœ‹å“ªé‡Œæœ‰é—®é¢˜ï¼Œæé«˜æ²Ÿé€šæ—¶çš„æ•ˆç‡</li><li>æ²Ÿé€šçš„æ—¶å€™å¤šå»å€¾å¬åŒäº‹çš„æ„è§ï¼Œå¹¶ä½œæ·±å…¥çš„æ€è€ƒï¼Œä¸ä¼šå›ºæ‰§å·±è§ï¼Œä¸ä¼šä¸€å‘³ç›²ç›®åœ°åšæŒè‡ªå·±çš„ç®¡çš„</li><li>ä¼šé€šè¿‡ä¸€äº›æ•°æ®ã€äº‹å®å»å°è¯è‡ªå·±è§‚ç‚¹ï¼Œè¯´æœåŒäº‹</li></ol><blockquote><p>ä½œè€…ï¼šæ†¨æ†¨æ<br>é“¾æ¥ï¼š<a href="https://www.nowcoder.com/discuss/414288" target="_blank" rel="noopener">https://www.nowcoder.com/discuss/414288</a><br>æ¥æºï¼šç‰›å®¢ç½‘</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;ä½ æœ€å¤§çš„ä¼˜ç‚¹å’Œç¼ºç‚¹&lt;/li&gt;
&lt;li&gt;ä½ æ˜¯å¦æ¥å—åŠ ç­ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä½ å¯¹è–ªèµ„æœ‰ä»€ä¹ˆè¦æ±‚å—ï¼Ÿ&lt;/li&gt;
&lt;li&gt;åœ¨äº”å¹´çš„æ—¶é—´å†…ï¼Œä½ çš„èŒä¸šè§„åˆ’ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è˜ç”¨ä½ ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä¸ä¸Šçº§æ„è§ä¸ä¸€è‡´ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä½ ç¼ºä¹å·¥ä½œç»éªŒï¼Œå¦‚ä½•èƒ½èƒœä»»è¿™ä»½å·¥ä½œï¼Ÿ&lt;/li&gt;
&lt;li&gt;å·¥ä½œä¸­ä¸åŒäº‹å‘ç”Ÿäº‰æ‰§ï¼Œä½ ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="é¢è¯•" scheme="https://heiyehk.github.io/blog/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="é¢è¯•" scheme="https://heiyehk.github.io/blog/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript ä¸­å¸¸è§è®¾è®¡æ¨¡å¼æ•´ç†</title>
    <link href="https://heiyehk.github.io/blog/JavaScript-%E4%B8%AD%E5%B8%B8%E8%A7%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%95%B4%E7%90%86/"/>
    <id>https://heiyehk.github.io/blog/JavaScript-%E4%B8%AD%E5%B8%B8%E8%A7%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%95%B4%E7%90%86/</id>
    <published>2020-04-30T08:42:27.000Z</published>
    <updated>2020-05-20T08:57:25.957Z</updated>
    
    <content type="html"><![CDATA[<p>å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æˆ–å¤šæˆ–å°‘åœ°æ¥è§¦äº†è®¾è®¡æ¨¡å¼ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ä¸çŸ¥é“è‡ªå·±ä½¿ç”¨äº†å“ªç§è®¾è®¡æ¨¡å¼æˆ–è€…è¯´è¯¥ä½¿ç”¨ä½•ç§è®¾è®¡æ¨¡å¼ã€‚æœ¬æ–‡æ„åœ¨æ¢³ç†å¸¸è§è®¾è®¡æ¨¡å¼çš„ç‰¹ç‚¹ï¼Œä»è€Œå¯¹å®ƒä»¬æœ‰æ¯”è¾ƒæ¸…æ™°çš„è®¤çŸ¥ã€‚</p><h3 id="JavaScript-ä¸­å¸¸è§è®¾è®¡æ¨¡å¼"><a href="#JavaScript-ä¸­å¸¸è§è®¾è®¡æ¨¡å¼" class="headerlink" title="JavaScript ä¸­å¸¸è§è®¾è®¡æ¨¡å¼"></a>JavaScript ä¸­å¸¸è§è®¾è®¡æ¨¡å¼</h3><a id="more"></a><ul><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">å•ä¾‹æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">ç­–ç•¥æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">ä»£ç†æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">è¿­ä»£å™¨æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">å‘å¸ƒ-è®¢é˜…æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">å‘½ä»¤æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">ç»„åˆæ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">äº«å…ƒæ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">èŒè´£é“¾æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">ä¸­ä»‹è€…æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">è£…é¥°è€…æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">çŠ¶æ€æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E8%80%85%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">é€‚é…è€…æ¨¡å¼</a></li><li><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">è§‚å¯Ÿè€…æ¨¡å¼</a></li></ul><h3 id="å„è®¾è®¡æ¨¡å¼å…³é”®è¯"><a href="#å„è®¾è®¡æ¨¡å¼å…³é”®è¯" class="headerlink" title="å„è®¾è®¡æ¨¡å¼å…³é”®è¯"></a>å„è®¾è®¡æ¨¡å¼å…³é”®è¯</h3><p>çœ‹å®Œäº†ä¸Šè¿°è®¾è®¡æ¨¡å¼åï¼ŒæŠŠå®ƒä»¬çš„å…³é”®è¯ç‰¹ç‚¹ç½—åˆ—å‡ºæ¥ï¼Œä»¥åæåˆ°æŸç§è®¾è®¡æ¨¡å¼ï¼Œè¿›è€Œè”æƒ³ç›¸åº”çš„å…³é”®è¯å’Œä¾‹å­ï¼Œä»è€Œå¿ƒä¸­æœ‰æ•°ã€‚</p><table><thead><tr><th>è®¾è®¡æ¨¡å¼</th><th>ç‰¹ç‚¹</th><th>æ¡ˆä¾‹</th></tr></thead><tbody><tr><td>å•ä¾‹æ¨¡å¼</td><td>ä¸€ä¸ªç±»åªèƒ½æ„é€ å‡ºå”¯ä¸€å®ä¾‹</td><td>åˆ›å»ºèœå•å¯¹è±¡</td></tr><tr><td>ç­–ç•¥æ¨¡å¼</td><td>æ ¹æ®ä¸åŒå‚æ•°å¯ä»¥å‘½ä¸­ä¸åŒçš„ç­–ç•¥</td><td>åŠ¨ç”»åº“é‡Œçš„ç®—æ³•å‡½æ•°</td></tr><tr><td>ä»£ç†æ¨¡å¼</td><td>ä»£ç†å¯¹è±¡å’Œæœ¬ä½“å¯¹è±¡å…·æœ‰ä¸€è‡´çš„æ¥å£</td><td>å›¾ç‰‡é¢„åŠ è½½</td></tr><tr><td>è¿­ä»£å™¨æ¨¡å¼</td><td>èƒ½è·å–èšåˆå¯¹è±¡çš„é¡ºåºå’Œå…ƒç´ </td><td>each([1, 2, 3], cb)</td></tr><tr><td>å‘å¸ƒ-è®¢é˜…æ¨¡å¼</td><td>PubSub</td><td>ç€‘å¸ƒæµåº“</td></tr><tr><td>å‘½ä»¤æ¨¡å¼</td><td>ä¸åŒå¯¹è±¡é—´çº¦å®šå¥½ç›¸åº”çš„æ¥å£</td><td>æŒ‰é’®å’Œå‘½ä»¤çš„åˆ†ç¦»</td></tr><tr><td>ç»„åˆæ¨¡å¼</td><td>ç»„åˆæ¨¡å¼åœ¨å¯¹è±¡é—´å½¢æˆä¸€è‡´å¯¹å¾…çš„æ ‘å½¢ç»“æ„</td><td>æ‰«ææ–‡ä»¶å¤¹</td></tr><tr><td>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</td><td>çˆ¶ç±»ä¸­å®šå¥½æ‰§è¡Œé¡ºåº</td><td>å’–å•¡å’ŒèŒ¶</td></tr><tr><td>äº«å…ƒæ¨¡å¼</td><td>å‡å°‘åˆ›å»ºå®ä¾‹çš„ä¸ªæ•°</td><td>ç”·å¥³æ¨¡å…·è¯•è£…</td></tr><tr><td>èŒè´£é“¾æ¨¡å¼</td><td>é€šè¿‡è¯·æ±‚ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä¼šæŒç»­æ‰§è¡Œåç»­çš„æ¡ä»¶ï¼Œç›´åˆ°è¿”å›ç»“æœä¸ºæ­¢</td><td>if else ä¼˜åŒ–</td></tr><tr><td>ä¸­ä»‹è€…æ¨¡å¼</td><td>å¯¹è±¡å’Œå¯¹è±¡ä¹‹é—´å€ŸåŠ©ç¬¬ä¸‰æ–¹ä¸­ä»‹è€…è¿›è¡Œé€šä¿¡</td><td>æµ‹è¯•ç»“æŸå‘ŠçŸ¥ç»“æœ</td></tr><tr><td>è£…é¥°è€…æ¨¡å¼</td><td>åŠ¨æ€åœ°ç»™å‡½æ•°èµ‹èƒ½</td><td>å¤©å†·äº†ç©¿è¡£æœï¼Œçƒ­äº†è„±è¡£æœ</td></tr><tr><td>çŠ¶æ€æ¨¡å¼</td><td>æ¯ä¸ªçŠ¶æ€å»ºç«‹ä¸€ä¸ªç±»ï¼ŒçŠ¶æ€æ”¹å˜ä¼šäº§ç”Ÿä¸åŒè¡Œä¸º</td><td>ç”µç¯æ¢æŒ¡</td></tr><tr><td>é€‚é…è€…æ¨¡å¼</td><td>ä¸€ç§æ•°æ®ç»“æ„æ”¹æˆå¦ä¸€ç§æ•°æ®ç»“æ„</td><td>æšä¸¾å€¼æ¥å£å˜æ›´</td></tr><tr><td>è§‚å¯Ÿè€…æ¨¡å¼</td><td>å½“è§‚å¯Ÿå¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨ç›¸å…³å‡½æ•°</td><td>vue åŒå‘ç»‘å®š</td></tr></tbody></table><h3 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h3><blockquote><p>ã€ŠJavaScriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹</p></blockquote><blockquote><p>ä½œè€…ï¼šç‰§äº‘äº‘<br>é“¾æ¥ï¼š<a href="https://juejin.im/post/5afe6430518825428630bc4d" target="_blank" rel="noopener">https://juejin.im/post/5afe6430518825428630bc4d</a><br>æ¥æºï¼šæ˜é‡‘</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æˆ–å¤šæˆ–å°‘åœ°æ¥è§¦äº†è®¾è®¡æ¨¡å¼ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ä¸çŸ¥é“è‡ªå·±ä½¿ç”¨äº†å“ªç§è®¾è®¡æ¨¡å¼æˆ–è€…è¯´è¯¥ä½¿ç”¨ä½•ç§è®¾è®¡æ¨¡å¼ã€‚æœ¬æ–‡æ„åœ¨æ¢³ç†å¸¸è§è®¾è®¡æ¨¡å¼çš„ç‰¹ç‚¹ï¼Œä»è€Œå¯¹å®ƒä»¬æœ‰æ¯”è¾ƒæ¸…æ™°çš„è®¤çŸ¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;JavaScript-ä¸­å¸¸è§è®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#JavaScript-ä¸­å¸¸è§è®¾è®¡æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;JavaScript ä¸­å¸¸è§è®¾è®¡æ¨¡å¼&quot;&gt;&lt;/a&gt;JavaScript ä¸­å¸¸è§è®¾è®¡æ¨¡å¼&lt;/h3&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/"/>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/tags/js/"/>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://heiyehk.github.io/blog/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯é¢è¯•ï¼šè°ˆè°ˆ JS åƒåœ¾å›æ”¶æœºåˆ¶</title>
    <link href="https://heiyehk.github.io/blog/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%EF%BC%9A%E8%B0%88%E8%B0%88-JS-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/"/>
    <id>https://heiyehk.github.io/blog/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%EF%BC%9A%E8%B0%88%E8%B0%88-JS-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</id>
    <published>2020-04-30T08:25:16.000Z</published>
    <updated>2020-05-20T08:55:54.323Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åƒåœ¾å›æ”¶"><a href="#åƒåœ¾å›æ”¶" class="headerlink" title="åƒåœ¾å›æ”¶"></a>åƒåœ¾å›æ”¶</h3><p>JavaScript ä¸­çš„å†…å­˜ç®¡ç†æ˜¯è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œè€Œä¸”æ˜¯ä¸å¯è§çš„ã€‚æˆ‘ä»¬åˆ›å»ºåŸºæœ¬ç±»å‹ã€å¯¹è±¡ã€å‡½æ•°â€¦â€¦æ‰€æœ‰è¿™äº›éƒ½éœ€è¦å†…å­˜ã€‚</p><p>å½“ä¸å†éœ€è¦æŸæ ·ä¸œè¥¿æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ? JavaScript å¼•æ“æ˜¯å¦‚ä½•å‘ç°å¹¶æ¸…ç†å®ƒ?</p><h3 id="å¯è¾¾æ€§"><a href="#å¯è¾¾æ€§" class="headerlink" title="å¯è¾¾æ€§"></a>å¯è¾¾æ€§</h3><p>JavaScript ä¸­å†…å­˜ç®¡ç†çš„ä¸»è¦æ¦‚å¿µæ˜¯å¯è¾¾æ€§ã€‚</p><a id="more"></a><p>ç®€å•åœ°è¯´ï¼Œâ€œå¯è¾¾æ€§â€ å€¼å°±æ˜¯é‚£äº›ä»¥æŸç§æ–¹å¼å¯è®¿é—®æˆ–å¯ç”¨çš„å€¼ï¼Œå®ƒä»¬è¢«ä¿è¯å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</p><ol><li>æœ‰ä¸€ç»„åŸºæœ¬çš„å›ºæœ‰å¯è¾¾å€¼ï¼Œç”±äºæ˜¾è€Œæ˜“è§çš„åŸå› æ— æ³•åˆ é™¤ã€‚ä¾‹å¦‚:<ul><li>æœ¬åœ°å‡½æ•°çš„å±€éƒ¨å˜é‡å’Œå‚æ•°</li><li>å½“å‰åµŒå¥—è°ƒç”¨é“¾ä¸Šçš„å…¶ä»–å‡½æ•°çš„å˜é‡å’Œå‚æ•°</li><li>å…¨å±€å˜é‡</li><li>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ï¼Œå†…éƒ¨çš„</li></ul></li></ol><p><strong>è¿™äº›å€¼ç§°ä¸ºæ ¹ã€‚</strong></p><ol start="2"><li>å¦‚æœå¼•ç”¨æˆ–å¼•ç”¨é“¾å¯ä»¥ä»æ ¹è®¿é—®ä»»ä½•å…¶ä»–å€¼ï¼Œåˆ™è®¤ä¸ºè¯¥å€¼æ˜¯å¯è®¿é—®çš„ã€‚</li></ol><p>ä¾‹å¦‚ï¼Œå¦‚æœå±€éƒ¨å˜é‡ä¸­æœ‰å¯¹è±¡ï¼Œå¹¶ä¸”è¯¥å¯¹è±¡å…·æœ‰å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œåˆ™è¯¥å¯¹è±¡è¢«è§†ä¸ºå¯è¾¾æ€§ï¼Œ å®ƒå¼•ç”¨çš„é‚£äº›ä¹Ÿæ˜¯å¯ä»¥è®¿é—®çš„ï¼Œè¯¦ç»†çš„ä¾‹å­å¦‚ä¸‹ã€‚</p><p>JavaScript å¼•æ“ä¸­æœ‰ä¸€ä¸ªåå°è¿›ç¨‹ç§°ä¸º<a href="https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29" target="_blank" rel="noopener">åƒåœ¾å›æ”¶å™¨</a>ï¼Œå®ƒç›‘è§†æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶åˆ é™¤é‚£äº›ä¸å¯è®¿é—®çš„å¯¹è±¡ã€‚</p><h3 id="ä¸€ä¸ªç®€å•çš„ä¾‹å­"><a href="#ä¸€ä¸ªç®€å•çš„ä¾‹å­" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ä¾‹å­"></a>ä¸€ä¸ªç®€å•çš„ä¾‹å­</h3><p>ä¸‹é¢æ˜¯æœ€ç®€å•çš„ä¾‹å­:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// user å…·æœ‰å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  name: <span class="string">"John"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://image-static.segmentfault.com/289/469/2894691528-5c92e57b9339d_articlex" alt="ä¾‹å­"></p><p>è¿™é‡Œç®­å¤´è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡å¼•ç”¨ã€‚å…¨å±€å˜é‡â€œuserâ€å¼•ç”¨å¯¹è±¡ {name:â€œJohnâ€} (ä¸ºäº†ç®€æ´èµ·è§ï¼Œæˆ‘ä»¬å°†å…¶å‘½åä¸ºJohn)ã€‚John çš„ â€œnameâ€ å±æ€§å­˜å‚¨ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œå› æ­¤å®ƒè¢«ç»˜åˆ¶åœ¨å¯¹è±¡ä¸­ã€‚</p><p>å¦‚æœ user çš„å€¼è¢«è¦†ç›–ï¼Œåˆ™å¼•ç”¨ä¸¢å¤±:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p><img src="https://image-static.segmentfault.com/138/680/1386806337-5c93267a5206f_articlex" alt="ä¾‹å­"></p><p>ç°åœ¨ John å˜æˆä¸å¯è¾¾çš„çŠ¶æ€ï¼Œæ²¡æœ‰åŠæ³•è®¿é—®å®ƒï¼Œæ²¡æœ‰å¯¹å®ƒçš„å¼•ç”¨ã€‚åƒåœ¾å›æ”¶å™¨å°†ä¸¢å¼ƒ John æ•°æ®å¹¶é‡Šæ”¾å†…å­˜ã€‚</p><h3 id="ä¸¤ä¸ªå¼•ç”¨"><a href="#ä¸¤ä¸ªå¼•ç”¨" class="headerlink" title="ä¸¤ä¸ªå¼•ç”¨"></a>ä¸¤ä¸ªå¼•ç”¨</h3><p>ç°åœ¨è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬å°†å¼•ç”¨ä» user å¤åˆ¶åˆ° admin:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// userå…·æœ‰å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  name: <span class="string">"John"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> admin = user;</span><br></pre></td></tr></table></figure><p><img src="https://image-static.segmentfault.com/133/655/133655656-5c9327b57caa3_articlex" alt="ä¾‹å­"></p><p>ç°åœ¨å¦‚æœæˆ‘ä»¬åšåŒæ ·çš„äº‹æƒ…:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p>è¯¥å¯¹è±¡ä»ç„¶å¯ä»¥é€šè¿‡ admin å…¨å±€å˜é‡è®¿é—®ï¼Œæ‰€ä»¥å®ƒåœ¨å†…å­˜ä¸­ã€‚å¦‚æœæˆ‘ä»¬ä¹Ÿè¦†ç›–adminï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è¢«é‡Šæ”¾ã€‚</p><h3 id="ç›¸äº’å…³è”çš„å¯¹è±¡"><a href="#ç›¸äº’å…³è”çš„å¯¹è±¡" class="headerlink" title="ç›¸äº’å…³è”çš„å¯¹è±¡"></a>ç›¸äº’å…³è”çš„å¯¹è±¡</h3><p>ç°åœ¨æ¥çœ‹ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼Œ family å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">marry</span> (<span class="params">man, woman</span>) </span>&#123;</span><br><span class="line">  woman.husban = man;</span><br><span class="line">  man.wife = woman;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    father: man,</span><br><span class="line">    mother: woman</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> family = marry(&#123;</span><br><span class="line">  name: <span class="string">"John"</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  name: <span class="string">"Ann"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å‡½æ•° <code>marry</code> é€šè¿‡ç»™ä¸¤ä¸ªå¯¹è±¡å½¼æ­¤æä¾›å¼•ç”¨æ¥â€œè”å§»â€å®ƒä»¬ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå¯¹è±¡çš„æ–°å¯¹è±¡ã€‚</p><p>äº§ç”Ÿçš„å†…å­˜ç»“æ„:</p><p><img src="https://image-static.segmentfault.com/447/270/447270667-5c9329b9e28bb_articlex" alt="ç»“æ„"></p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æ˜¯å¯è®¿é—®çš„ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬åˆ é™¤ä¸¤ä¸ªå¼•ç”¨:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> family.father;</span><br><span class="line"><span class="keyword">delete</span> family.mother.husband;</span><br></pre></td></tr></table></figure><p><img src="https://image-static.segmentfault.com/359/593/3595939355-5c932ad1e5d2d_articlex" alt="æµç¨‹"></p><p>ä»…ä»…åˆ é™¤è¿™ä¸¤ä¸ªå¼•ç”¨ä¸­çš„ä¸€ä¸ªæ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæ‰€æœ‰å¯¹è±¡ä»ç„¶æ˜¯å¯è®¿é—®çš„ã€‚</p><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªéƒ½åˆ é™¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ° John ä¸å†æœ‰ä¼ å…¥çš„å¼•ç”¨:</p><p><img src="https://image-static.segmentfault.com/162/805/1628058185-5c932b9750b6d_articlex" alt="æµç¨‹"></p><p>è¾“å‡ºå¼•ç”¨æ— å…³ç´§è¦ã€‚åªæœ‰ä¼ å…¥çš„å¯¹è±¡æ‰èƒ½ä½¿å¯¹è±¡å¯è®¿é—®ï¼Œå› æ­¤ï¼ŒJohn ç°åœ¨æ˜¯ä¸å¯è®¿é—®çš„ï¼Œå¹¶å°†ä»å†…å­˜ä¸­åˆ é™¤æ‰€æœ‰ä¸å¯è®¿é—®çš„æ•°æ®ã€‚</p><p>åƒåœ¾å›æ”¶ä¹‹åï¼š</p><p><img src="https://image-static.segmentfault.com/129/587/1295875551-5c932c350dd1e_articlex" alt="æµç¨‹"></p><h3 id="æ— æ³•è®¿é—®çš„æ•°æ®å—"><a href="#æ— æ³•è®¿é—®çš„æ•°æ®å—" class="headerlink" title="æ— æ³•è®¿é—®çš„æ•°æ®å—"></a>æ— æ³•è®¿é—®çš„æ•°æ®å—</h3><p>æœ‰å¯èƒ½æ•´ä¸ªç›¸äº’è¿æ¥çš„å¯¹è±¡å˜å¾—ä¸å¯è®¿é—®å¹¶ä»å†…å­˜ä¸­åˆ é™¤ã€‚</p><p>æºå¯¹è±¡ä¸ä¸Šé¢çš„ç›¸åŒã€‚ç„¶å:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">family = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p>å†…å­˜ä¸­çš„å›¾ç‰‡å˜æˆ:</p><p><img src="https://image-static.segmentfault.com/420/035/420035998-5c932d8f3b867_articlex" alt="æµç¨‹"></p><p>è¿™ä¸ªä¾‹å­è¯´æ˜äº†å¯è¾¾æ€§çš„æ¦‚å¿µæ˜¯å¤šä¹ˆé‡è¦ã€‚</p><p>å¾ˆæ˜æ˜¾ï¼ŒJohnå’ŒAnnä»ç„¶é“¾æ¥åœ¨ä¸€èµ·ï¼Œéƒ½æœ‰ä¼ å…¥çš„å¼•ç”¨ã€‚ä½†è¿™è¿˜ä¸å¤Ÿã€‚</p><p>â€œfamilyâ€å¯¹è±¡å·²ç»ä»æ ¹ä¸Šæ–­å¼€äº†é“¾æ¥ï¼Œä¸å†æœ‰å¯¹å®ƒçš„å¼•ç”¨ï¼Œå› æ­¤ä¸‹é¢çš„æ•´ä¸ªå—å˜å¾—ä¸å¯åˆ°è¾¾ï¼Œå¹¶å°†è¢«åˆ é™¤ã€‚</p><h3 id="å†…éƒ¨ç®—æ³•"><a href="#å†…éƒ¨ç®—æ³•" class="headerlink" title="å†…éƒ¨ç®—æ³•"></a>å†…éƒ¨ç®—æ³•</h3><p>åŸºæœ¬çš„åƒåœ¾å›æ”¶ç®—æ³•ç§°ä¸º<strong>*â€œæ ‡è®°-æ¸…é™¤â€</strong>ï¼Œå®šæœŸæ‰§è¡Œä»¥ä¸‹â€œåƒåœ¾å›æ”¶â€æ­¥éª¤:</p><ul><li>åƒåœ¾å›æ”¶å™¨è·å–æ ¹å¹¶<strong>â€œæ ‡è®°â€</strong>(è®°ä½)å®ƒä»¬ã€‚</li><li>ç„¶åå®ƒè®¿é—®å¹¶â€œæ ‡è®°â€æ‰€æœ‰æ¥è‡ªå®ƒä»¬çš„å¼•ç”¨ã€‚</li><li>ç„¶åå®ƒè®¿é—®æ ‡è®°çš„å¯¹è±¡å¹¶æ ‡è®°å®ƒä»¬çš„å¼•ç”¨ã€‚æ‰€æœ‰è¢«è®¿é—®çš„å¯¹è±¡éƒ½è¢«è®°ä½ï¼Œä»¥ä¾¿ä»¥åä¸å†è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ä¸¤æ¬¡ã€‚</li><li>ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æœ‰æœªè®¿é—®çš„å¼•ç”¨(å¯ä»¥ä»æ ¹è®¿é—®)ä¸ºæ­¢ã€‚</li><li>é™¤æ ‡è®°çš„å¯¹è±¡å¤–ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½è¢«åˆ é™¤ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œå¯¹è±¡ç»“æ„å¦‚ä¸‹:</p><p><img src="https://image-static.segmentfault.com/170/734/1707342869-5c9358c332559_articlex" alt="ç»“æ„"></p><p>æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å³è¾¹æœ‰ä¸€ä¸ªâ€œä¸å¯åˆ°è¾¾çš„å—â€ã€‚ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹<strong>â€œæ ‡è®°å¹¶æ¸…é™¤â€</strong>åƒåœ¾å›æ”¶å™¨å¦‚ä½•å¤„ç†å®ƒã€‚</p><h4 id="ç¬¬ä¸€æ­¥æ ‡è®°æ ¹"><a href="#ç¬¬ä¸€æ­¥æ ‡è®°æ ¹" class="headerlink" title="ç¬¬ä¸€æ­¥æ ‡è®°æ ¹"></a>ç¬¬ä¸€æ­¥æ ‡è®°æ ¹</h4><p><img src="https://image-static.segmentfault.com/269/043/269043904-5c9359379ef4a_articlex" alt="æ ‡è®°"></p><h4 id="ç„¶åæ ‡è®°ä»–ä»¬çš„å¼•ç”¨"><a href="#ç„¶åæ ‡è®°ä»–ä»¬çš„å¼•ç”¨" class="headerlink" title="ç„¶åæ ‡è®°ä»–ä»¬çš„å¼•ç”¨"></a>ç„¶åæ ‡è®°ä»–ä»¬çš„å¼•ç”¨</h4><p><img src="https://image-static.segmentfault.com/423/514/4235146972-5c9359632ee4e_articlex" alt="å¼•ç”¨"></p><h4 id="ä»¥åŠå­å­™ä»£çš„å¼•ç”¨"><a href="#ä»¥åŠå­å­™ä»£çš„å¼•ç”¨" class="headerlink" title="ä»¥åŠå­å­™ä»£çš„å¼•ç”¨:"></a>ä»¥åŠå­å­™ä»£çš„å¼•ç”¨:</h4><p><img src="https://image-static.segmentfault.com/198/890/1988905638-5c9359b1138ea_articlex" alt="å¼•ç”¨"></p><h4 id="ç°åœ¨è¿›ç¨‹ä¸­ä¸èƒ½è®¿é—®çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯ä¸å¯è®¿é—®çš„ï¼Œå°†è¢«åˆ é™¤"><a href="#ç°åœ¨è¿›ç¨‹ä¸­ä¸èƒ½è®¿é—®çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯ä¸å¯è®¿é—®çš„ï¼Œå°†è¢«åˆ é™¤" class="headerlink" title="ç°åœ¨è¿›ç¨‹ä¸­ä¸èƒ½è®¿é—®çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯ä¸å¯è®¿é—®çš„ï¼Œå°†è¢«åˆ é™¤:"></a>ç°åœ¨è¿›ç¨‹ä¸­ä¸èƒ½è®¿é—®çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯ä¸å¯è®¿é—®çš„ï¼Œå°†è¢«åˆ é™¤:</h4><p><img src="https://image-static.segmentfault.com/434/932/434932871-5c9359fc2ac1b_articlex" alt="å¼•ç”¨"></p><p>è¿™å°±æ˜¯åƒåœ¾æ”¶é›†çš„å·¥ä½œåŸç†ã€‚JavaScriptå¼•æ“åº”ç”¨äº†è®¸å¤šä¼˜åŒ–ï¼Œä½¿å…¶è¿è¡Œå¾—æ›´å¿«ï¼Œå¹¶ä¸”ä¸å½±å“æ‰§è¡Œã€‚</p><p>ä¸€äº›ä¼˜åŒ–:</p><ul><li><code>åˆ†ä»£å›æ”¶</code>â€”â€”å¯¹è±¡åˆ†ä¸ºä¸¤ç»„:â€œæ–°å¯¹è±¡â€å’Œâ€œæ—§å¯¹è±¡â€ã€‚è®¸å¤šå¯¹è±¡å‡ºç°ï¼Œå®Œæˆå®ƒä»¬çš„å·¥ä½œå¹¶è¿…é€Ÿç»“ ï¼Œå®ƒä»¬å¾ˆå¿«å°±ä¼šè¢«æ¸…ç†å¹²å‡€ã€‚é‚£äº›æ´»å¾—è¶³å¤Ÿä¹…çš„å¯¹è±¡ï¼Œä¼šå˜â€œè€â€ï¼Œå¹¶ä¸”å¾ˆå°‘æ¥å—æ£€æŸ¥ã€‚</li><li><code>å¢é‡å›æ”¶</code>â€”â€”å¦‚æœæœ‰å¾ˆå¤šå¯¹è±¡ï¼Œå¹¶ä¸”æˆ‘ä»¬è¯•å›¾ä¸€æ¬¡éå†å¹¶æ ‡è®°æ•´ä¸ªå¯¹è±¡é›†ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šèŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œå¹¶åœ¨æ‰§è¡Œä¸­ä¼šæœ‰ä¸€å®šçš„å»¶è¿Ÿã€‚å› æ­¤ï¼Œå¼•æ“è¯•å›¾å°†åƒåœ¾å›æ”¶åˆ†è§£ä¸ºå¤šä¸ªéƒ¨åˆ†ã€‚ç„¶åï¼Œå„ä¸ªéƒ¨åˆ†åˆ†åˆ«æ‰§è¡Œã€‚è¿™éœ€è¦é¢å¤–çš„æ ‡è®°æ¥è·Ÿè¸ªå˜åŒ–ï¼Œè¿™æ ·æœ‰å¾ˆå¤šå¾®å°çš„å»¶è¿Ÿï¼Œè€Œä¸æ˜¯å¾ˆå¤§çš„å»¶è¿Ÿã€‚</li><li><code>ç©ºé—²æ—¶é—´æ”¶é›†</code>â€”â€”åƒåœ¾å›æ”¶å™¨åªåœ¨ CPU ç©ºé—²æ—¶è¿è¡Œï¼Œä»¥å‡å°‘å¯¹æ‰§è¡Œçš„å¯èƒ½å½±å“ã€‚</li></ul><h3 id="é¢è¯•æ€ä¹ˆå›ç­”"><a href="#é¢è¯•æ€ä¹ˆå›ç­”" class="headerlink" title="é¢è¯•æ€ä¹ˆå›ç­”"></a>é¢è¯•æ€ä¹ˆå›ç­”</h3><h4 id="1ï¼‰é—®ä»€ä¹ˆæ˜¯åƒåœ¾"><a href="#1ï¼‰é—®ä»€ä¹ˆæ˜¯åƒåœ¾" class="headerlink" title="1ï¼‰é—®ä»€ä¹ˆæ˜¯åƒåœ¾"></a>1ï¼‰é—®ä»€ä¹ˆæ˜¯åƒåœ¾</h4><p>ä¸€èˆ¬æ¥è¯´æ²¡æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡å°±æ˜¯åƒåœ¾ï¼Œå°±æ˜¯è¦è¢«æ¸…é™¤ï¼Œ æœ‰ä¸ªä¾‹å¤–å¦‚æœå‡ ä¸ªå¯¹è±¡å¼•ç”¨å½¢æˆä¸€ä¸ªç¯ï¼Œäº’ç›¸å¼•ç”¨ï¼Œä½†æ ¹è®¿é—®ä¸åˆ°å®ƒä»¬ï¼Œè¿™å‡ ä¸ªå¯¹è±¡ä¹Ÿæ˜¯åƒåœ¾ï¼Œä¹Ÿè¦è¢«æ¸…é™¤ã€‚</p><h4 id="2ï¼‰å¦‚ä½•æ£€åƒåœ¾"><a href="#2ï¼‰å¦‚ä½•æ£€åƒåœ¾" class="headerlink" title="2ï¼‰å¦‚ä½•æ£€åƒåœ¾"></a>2ï¼‰å¦‚ä½•æ£€åƒåœ¾</h4><p>ä¸€ç§ç®—æ³•æ˜¯æ ‡è®° <code>æ ‡è®°-æ¸…é™¤</code> ç®—æ³•ï¼Œè¿˜æƒ³è¯´å‡ºä¸åŒçš„ç®—æ³•å¯ä»¥å‚è€ƒ<a href="https://www.jianshu.com/p/a8a04fd00c3c" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><p>æ›´æ·±å…¥ä¸€äº›çš„è®²è§£ <a href="http://newhtml.net/v8-garbage-collection/" target="_blank" rel="noopener">http://newhtml.net/v8-garbageâ€¦</a></p><p>è¿˜æœ‰ä¸€ç§ç‰›é€¼çš„ç­”æ³•å°±æ˜¯è¯´çœ‹æˆ‘çš„åšå®¢ï¼Œå½“ç„¶æ˜¯è¦è‡ªå·±æ€»ç»“çš„åšå®¢ã€‚</p><p>ä»£ç éƒ¨ç½²åå¯èƒ½å­˜åœ¨çš„BUGæ²¡æ³•å®æ—¶çŸ¥é“ï¼Œäº‹åä¸ºäº†è§£å†³è¿™äº›BUGï¼ŒèŠ±äº†å¤§é‡çš„æ—¶é—´è¿›è¡Œlog è°ƒè¯•ï¼Œè¿™è¾¹é¡ºä¾¿ç»™å¤§å®¶æ¨èä¸€ä¸ªå¥½ç”¨çš„BUGç›‘æ§å·¥å…· <a href="https://www.fundebug.com/?utm_source=xiaozhi" target="_blank" rel="noopener">Fundebug</a>ã€‚</p><blockquote><p>ä½œè€…ï¼šå‰ç«¯å°æ™º<br>é“¾æ¥ï¼š<a href="https://segmentfault.com/a/1190000018605776" target="_blank" rel="noopener">https://segmentfault.com/a/1190000018605776</a><br>æ¥æºï¼šæ€å¦</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;åƒåœ¾å›æ”¶&quot;&gt;&lt;a href=&quot;#åƒåœ¾å›æ”¶&quot; class=&quot;headerlink&quot; title=&quot;åƒåœ¾å›æ”¶&quot;&gt;&lt;/a&gt;åƒåœ¾å›æ”¶&lt;/h3&gt;&lt;p&gt;JavaScript ä¸­çš„å†…å­˜ç®¡ç†æ˜¯è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œè€Œä¸”æ˜¯ä¸å¯è§çš„ã€‚æˆ‘ä»¬åˆ›å»ºåŸºæœ¬ç±»å‹ã€å¯¹è±¡ã€å‡½æ•°â€¦â€¦æ‰€æœ‰è¿™äº›éƒ½éœ€è¦å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä¸å†éœ€è¦æŸæ ·ä¸œè¥¿æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ? JavaScript å¼•æ“æ˜¯å¦‚ä½•å‘ç°å¹¶æ¸…ç†å®ƒ?&lt;/p&gt;
&lt;h3 id=&quot;å¯è¾¾æ€§&quot;&gt;&lt;a href=&quot;#å¯è¾¾æ€§&quot; class=&quot;headerlink&quot; title=&quot;å¯è¾¾æ€§&quot;&gt;&lt;/a&gt;å¯è¾¾æ€§&lt;/h3&gt;&lt;p&gt;JavaScript ä¸­å†…å­˜ç®¡ç†çš„ä¸»è¦æ¦‚å¿µæ˜¯å¯è¾¾æ€§ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/"/>
    
      <category term="åƒåœ¾å›æ”¶" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/"/>
    
      <category term="jsåº•å±‚" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/js/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/js%E5%BA%95%E5%B1%82/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="js" scheme="https://heiyehk.github.io/blog/tags/js/"/>
    
      <category term="åƒåœ¾å›æ”¶" scheme="https://heiyehk.github.io/blog/tags/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/"/>
    
      <category term="jsåº•å±‚" scheme="https://heiyehk.github.io/blog/tags/js%E5%BA%95%E5%B1%82/"/>
    
  </entry>
  
  <entry>
    <title>MarkDownåŸºæœ¬è¯­æ³•</title>
    <link href="https://heiyehk.github.io/blog/MarkDown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
    <id>https://heiyehk.github.io/blog/MarkDown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</id>
    <published>2020-04-30T07:25:00.000Z</published>
    <updated>2020-05-20T08:06:22.484Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨mdä¸­ä½ éœ€è¦æŸä¸ªå­—ç¬¦æˆ–æ ‡ç­¾ä¸è¢«ç¼–è¯‘çš„è¯åœ¨å‰é¢åŠ ä¸Š<code>\</code>æ–œæ <br>MarkDownåœ¨çº¿ç¼–è¾‘å™¨<br><a href="http://mahua.jser.me/" target="_blank" rel="noopener">MaHua åœ¨çº¿markdownç¼–è¾‘å™¨</a><br><a href="https://www.zybuluo.com/mdeditor" target="_blank" rel="noopener">Cmd Markdown ç¼–è¾‘é˜…è¯»å™¨ - ä½œä¸šéƒ¨è½å‡ºå“</a>  </p></blockquote><h3 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a>æ ‡é¢˜</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># h1</span></span><br><span class="line"><span class="section">## h2</span></span><br><span class="line"><span class="section">### h3</span></span><br><span class="line">....</span><br><span class="line"><span class="section">###### h6</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="åŠ ç²—"><a href="#åŠ ç²—" class="headerlink" title="åŠ ç²—"></a>åŠ ç²—</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">**åŠ ç²—**</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹: <strong>åŠ ç²—å</strong></p><h3 id="æ–œä½“"><a href="#æ–œä½“" class="headerlink" title="æ–œä½“"></a>æ–œä½“</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">*æ–œä½“*</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹: <em>æ–œä½“</em></p><h3 id="æ–œä½“åŠ ç²—"><a href="#æ–œä½“åŠ ç²—" class="headerlink" title="æ–œä½“åŠ ç²—"></a>æ–œä½“åŠ ç²—</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">***æ–œä½“åŠ ç²—**</span>*</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹: <strong><em>æ–œä½“åŠ ç²—</em></strong></p><h3 id="åˆ é™¤çº¿"><a href="#åˆ é™¤çº¿" class="headerlink" title="åˆ é™¤çº¿"></a>åˆ é™¤çº¿</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~~åˆ é™¤çº¿~~</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹: <del>åˆ é™¤çº¿</del></p><h3 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; å¼•ç”¨</span></span><br><span class="line">&gt;&gt; å¯ä»¥åµŒå¥—</span><br></pre></td></tr></table></figure><blockquote><p>ç¤ºä¾‹: å¼•ç”¨</p><blockquote><p>å¯ä»¥åµŒå¥—</p></blockquote></blockquote><h3 id="åˆ†å‰²çº¿"><a href="#åˆ†å‰²çº¿" class="headerlink" title="åˆ†å‰²çº¿"></a>åˆ†å‰²çº¿</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä»¥ä¸‹å­—ç¬¦éƒ½éœ€è¦3ä¸ªä»¥ä¸Š</span><br><span class="line">---</span><br><span class="line"><span class="emphasis">***</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹: </p><hr><hr><h3 id="æŠ˜å "><a href="#æŠ˜å " class="headerlink" title="æŠ˜å "></a>æŠ˜å </h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">summary</span>&gt;</span></span>æŠ˜å æ–‡æœ¬<span class="xml"><span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span></span><br><span class="line">  æ­¤å¤„å¯ä¹¦å†™æ–‡æœ¬  </span><br><span class="line">  </span><br><span class="line">  å—¯ï¼Œæ˜¯å¯ä»¥ä¹¦å†™æ–‡æœ¬çš„</span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">summary</span>&gt;</span></span>æŠ˜å ä»£ç å—<span class="xml"><span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span></span><br><span class="line">  <span class="code">```</span> js</span><br><span class="line">  console.log(1)</span><br></pre></td></tr></table></figure></details>ç¤ºä¾‹ï¼š<details>  <summary>æŠ˜å æ–‡æœ¬</summary>  æ­¤å¤„å¯ä¹¦å†™æ–‡æœ¬  <p>  å—¯ï¼Œæ˜¯å¯ä»¥ä¹¦å†™æ–‡æœ¬çš„</p></details><details>  <summary>æŠ˜å ä»£ç å—</summary>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></details><h3 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å›¾ç‰‡altå°±æ˜¯å½“å›¾ç‰‡ä¸èƒ½æ˜¾ç¤ºæˆ–è€…æ˜¾ç¤ºé”™è¯¯æ—¶çš„æ–‡å­—ï¼Œå›¾ç‰‡titleå¯é€‰</span><br><span class="line">![<span class="string">å›¾ç‰‡alt</span>](<span class="link">å›¾ç‰‡åœ°å€ 'å›¾ç‰‡title'</span>)</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹: <img src="http://heiyehk.top/public/img/logo.jpg" alt="å›¾ç‰‡alt" title="title"></p><h3 id="è¶…é“¾æ¥"><a href="#è¶…é“¾æ¥" class="headerlink" title="è¶…é“¾æ¥"></a>è¶…é“¾æ¥</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">titleå¯é€‰</span><br><span class="line">[<span class="string">è¶…é“¾æ¥æ–‡æ¡ˆ</span>](<span class="link">åœ°å€ 'title'</span>)</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹: <a href="https://www.baidu.com" target="_blank" rel="noopener" title="ç™¾åº¦">baidu</a></p><h3 id="æ— åºåˆ—è¡¨"><a href="#æ— åºåˆ—è¡¨" class="headerlink" title="æ— åºåˆ—è¡¨"></a>æ— åºåˆ—è¡¨</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è®°å¾—ç¬¦å·åé¢æœ‰ä¸ªç©ºæ ¼,åµŒå¥—æ¢è¡ŒåŠ ç©ºæ ¼å†åŠ ç¬¦å·ç©ºæ ¼çš„æ–¹å¼</span><br><span class="line"><span class="bullet">- </span>å†…å®¹</span><br><span class="line"><span class="bullet">  - </span>åµŒå¥—å†…å®¹</span><br><span class="line"><span class="bullet">+ </span>å†…å®¹</span><br><span class="line"><span class="bullet">* </span>å†…å®¹</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹:</p><ul><li>å‡å·å†…å®¹<ul><li>åµŒå¥—å†…å®¹</li></ul></li></ul><ul><li>åŠ å·å†…å®¹</li></ul><ul><li>æ˜Ÿå·å†…å®¹</li></ul><h3 id="æœ‰åºåˆ—è¡¨"><a href="#æœ‰åºåˆ—è¡¨" class="headerlink" title="æœ‰åºåˆ—è¡¨"></a>æœ‰åºåˆ—è¡¨</h3><p>éœ€è¦æ³¨æ„çš„æ˜¯,ä¸åŒçš„ç¼–è¾‘å™¨å’Œç¼–è¯‘mdæ–¹å¼ä¸ä¸€æ ·,é‚£ä¹ˆä½¿ç”¨æ–¹æ³•ä¹Ÿä¸ä¸€æ ·,æœ‰äº›ä¸èƒ½ä½¿ç”¨æœ‰åºåµŒå¥—</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ•°å­—åŠ ç‚¹åŠ ç©ºæ ¼,åµŒå¥—æ¢è¡ŒåŠ ç©ºæ ¼å†åŠ ç¬¦å·ç©ºæ ¼çš„æ–¹å¼</span><br><span class="line"><span class="bullet">1. </span>ç¬¬ä¸€</span><br><span class="line"><span class="bullet"> 1. </span>ç¬¬ä¸€ä¸ªä¸­çš„ç¬¬ä¸€ä¸ª</span><br><span class="line"><span class="bullet">2. </span>ç¬¬äºŒ</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹:</p><ol><li>ç¬¬ä¸€ä¸ª<ol><li>ç¬¬ä¸€ä¸ªä¸­çš„ç¬¬ä¸€ä¸ª</li></ol></li><li>ç¬¬äºŒä¸ª</li></ol><h3 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¡¨æ ¼å†…å®¹å…è®¸ä¸ºç©º</span><br><span class="line">æ ‡é¢˜1 | æ ‡é¢˜2 | æ ‡é¢˜3</span><br><span class="line">-|-|-</span><br><span class="line">å†…å®¹1 | å†…å®¹2 | å†…å®¹3</span><br><span class="line"> | å†…å®¹2 |</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹:</p><table><thead><tr><th>æ ‡é¢˜1</th><th>æ ‡é¢˜2</th><th>æ ‡é¢˜3</th></tr></thead><tbody><tr><td>å†…å®¹1</td><td>å†…å®¹2</td><td>å†…å®¹3</td></tr><tr><td></td><td>å†…å®¹2</td><td></td></tr></tbody></table><h3 id="é«˜äº®"><a href="#é«˜äº®" class="headerlink" title="é«˜äº®"></a>é«˜äº®</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">`é«˜äº®å†…å®¹`</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹: <code>é«˜äº®</code></p><h3 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å»æ‰å¤šä½™çš„\</span><br><span class="line"><span class="code">```</span> js</span><br><span class="line">var a = 0;</span><br><span class="line">console.log(a);</span><br><span class="line">\</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">width</span>: 1<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">height</span>: 1<span class="selector-tag">px</span>;</span><br><span class="line">\</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nums = <span class="number">1</span></span><br><span class="line">strs = <span class="string">'aaa'</span></span><br><span class="line">\</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹:</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96; js</span><br><span class="line">var a &#x3D; 0;</span><br><span class="line">console.log(a);</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">width</span>: 1<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">height</span>: 1<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nums = <span class="number">1</span></span><br><span class="line">strs = <span class="string">'aaa'</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åœ¨mdä¸­ä½ éœ€è¦æŸä¸ªå­—ç¬¦æˆ–æ ‡ç­¾ä¸è¢«ç¼–è¯‘çš„è¯åœ¨å‰é¢åŠ ä¸Š&lt;code&gt;\&lt;/code&gt;æ–œæ &lt;br&gt;MarkDownåœ¨çº¿ç¼–è¾‘å™¨&lt;br&gt;&lt;a href=&quot;http://mahua.jser.me/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MaHua åœ¨çº¿markdownç¼–è¾‘å™¨&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.zybuluo.com/mdeditor&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Cmd Markdown ç¼–è¾‘é˜…è¯»å™¨ - ä½œä¸šéƒ¨è½å‡ºå“&lt;/a&gt;  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;æ ‡é¢˜&quot;&gt;&lt;a href=&quot;#æ ‡é¢˜&quot; class=&quot;headerlink&quot; title=&quot;æ ‡é¢˜&quot;&gt;&lt;/a&gt;æ ‡é¢˜&lt;/h3&gt;&lt;figure class=&quot;highlight md&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;# h1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;## h2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;### h3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;###### h6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="MarkDown" scheme="https://heiyehk.github.io/blog/categories/MarkDown/"/>
    
    
      <category term="MarkDown" scheme="https://heiyehk.github.io/blog/tags/MarkDown/"/>
    
  </entry>
  
  <entry>
    <title>JSäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼ˆevent loopï¼‰ä¹‹å®ä»»åŠ¡/å¾®ä»»åŠ¡</title>
    <link href="https://heiyehk.github.io/blog/JS%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6%EF%BC%88event-loop%EF%BC%89%E4%B9%8B%E5%AE%8F%E4%BB%BB%E5%8A%A1-%E5%BE%AE%E4%BB%BB%E5%8A%A1/"/>
    <id>https://heiyehk.github.io/blog/JS%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6%EF%BC%88event-loop%EF%BC%89%E4%B9%8B%E5%AE%8F%E4%BB%BB%E5%8A%A1-%E5%BE%AE%E4%BB%BB%E5%8A%A1/</id>
    <published>2020-04-30T06:39:18.000Z</published>
    <updated>2020-05-20T08:57:50.635Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åŸæ–‡åœ°å€ï¼š<a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/?utm_source=html5weekly" target="_blank" rel="noopener">Tasks, microtasks, queues and schedules</a><br>åŒç±»æ–‡ç«  <a href="https://juejin.im/post/59e85eebf265da430d571f89" target="_blank" rel="noopener">è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶</a></p></blockquote><p>é‰´äºä¸Šç¯‡æ–‡ç« æœ‰æåˆ°è¿‡ å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼Œæ‰€ä»¥ï¼Œåœ¨æ­¤åšä¸ªç»†è‡´è¡¥å……ï¼š è¯ä¸å¤šè¯´ï¼Œç›´æ¥è¿›å…¥æ­£æ–‡ï¼š</p><blockquote><ul><li>[1] æœ¬æ–‡ä¸»è¦æ ¹æ®ç½‘ä¸Šèµ„æºæ€»ç»“è€Œæ¥ï¼Œå¦‚æœ‰ä¸å¯¹ï¼Œè¯·æ–§æ­£ã€‚</li><li>[2] éœ€è¦çŸ¥é“çš„ä¸“ä¸šåè¯æœ¯è¯­ï¼šsynchronousï¼šåŒæ­¥ä»»åŠ¡ã€asynchronousï¼šå¼‚æ­¥ä»»åŠ¡ã€task queue/callback queueï¼šä»»åŠ¡é˜Ÿåˆ—ã€execution context stackï¼šæ‰§è¡Œæ ˆã€heapï¼šå †ã€stackï¼šæ ˆã€macro-taskï¼šå®ä»»åŠ¡ã€micro-taskï¼šå¾®ä»»åŠ¡</li></ul></blockquote><a id="more"></a><h3 id="é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä¸¤ç‚¹ï¼š"><a href="#é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä¸¤ç‚¹ï¼š" class="headerlink" title="é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä¸¤ç‚¹ï¼š"></a>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä¸¤ç‚¹ï¼š</h3><ul><li>JavaScriptæ˜¯å•çº¿ç¨‹çš„è¯­è¨€</li><li>Event Loopæ˜¯javascriptçš„æ‰§è¡Œæœºåˆ¶</li></ul><h3 id="javascriptäº‹ä»¶å¾ªç¯"><a href="#javascriptäº‹ä»¶å¾ªç¯" class="headerlink" title="javascriptäº‹ä»¶å¾ªç¯"></a>javascriptäº‹ä»¶å¾ªç¯</h3><p>jsæ˜¯å•çº¿ç¨‹ï¼Œå°±åƒå­¦ç”Ÿæ’é˜Ÿä¸Šå•æ‰€ï¼Œå­¦ç”Ÿéœ€è¦æ’é˜Ÿä¸€ä¸ªä¸€ä¸ªä¸Šå•æ‰€ï¼ŒåŒç†jsä»»åŠ¡ä¹Ÿè¦ä¸€ä¸ªä¸€ä¸ªé¡ºåºæ‰§è¡Œã€‚å¦‚æœä¸€ä¸ªä»»åŠ¡è€—æ—¶è¿‡é•¿ï¼Œé‚£ä¹ˆåä¸€ä¸ªä»»åŠ¡ä¹Ÿå¿…é¡»ç­‰ç€ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå‡å¦‚æˆ‘ä»¬æƒ³æµè§ˆæ–°é—»ï¼Œä½†æ˜¯æ–°é—»åŒ…å«çš„è¶…æ¸…å›¾ç‰‡åŠ è½½å¾ˆæ…¢ï¼Œéš¾é“æˆ‘ä»¬çš„ç½‘é¡µè¦ä¸€ç›´å¡ç€ç›´åˆ°å›¾ç‰‡å®Œå…¨æ˜¾ç¤ºå‡ºæ¥ï¼Ÿå› æ­¤èªæ˜çš„ç¨‹åºå‘˜å°†ä»»åŠ¡åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>åŒæ­¥ä»»åŠ¡</li><li>å¼‚æ­¥ä»»åŠ¡</li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/7/14/164974fa38dcffce?imageslim" alt="æ‰§è¡Œå›¾ç‰‡"><br>ä»å›¾ç‰‡å¯çŸ¥ï¼Œä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¼šå‘æ‰§è¡Œæ ˆä¸­åŠ å…¥è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œç¯å¢ƒï¼Œåœ¨è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸­è¿˜å¯ä»¥è°ƒç”¨å…¶ä»–æ–¹æ³•ï¼Œç”šè‡³æ˜¯è‡ªå·±ï¼Œå…¶ç»“æœä¸è¿‡æ˜¯åœ¨æ‰§è¡Œæ ˆä¸­å†æ·»åŠ ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥æ˜¯æ— é™è¿›è¡Œä¸‹å»çš„ï¼Œé™¤éå‘ç”Ÿäº†æ ˆæº¢å‡ºï¼Œå³è¶…è¿‡äº†æ‰€èƒ½ä½¿ç”¨å†…å­˜çš„æœ€å¤§å€¼ã€‚</p><hr><p>å½“æˆ‘ä»¬æ‰“å¼€ç½‘ç«™æ—¶ï¼Œç½‘é¡µçš„æ¸²æŸ“è¿‡ç¨‹å°±æ˜¯ä¸€å¤§å †åŒæ­¥ä»»åŠ¡ï¼Œæ¯”å¦‚é¡µé¢éª¨æ¶å’Œé¡µé¢å…ƒç´ çš„æ¸²æŸ“ã€‚è€ŒåƒåŠ è½½å›¾ç‰‡éŸ³ä¹ä¹‹ç±»å ç”¨èµ„æºå¤§è€—æ—¶ä¹…çš„ä»»åŠ¡ï¼Œå°±æ˜¯å¼‚æ­¥ä»»åŠ¡ã€‚å…³äºè¿™éƒ¨åˆ†æœ‰ä¸¥æ ¼çš„æ–‡å­—å®šä¹‰ï¼Œä½†æœ¬æ–‡çš„ç›®çš„æ˜¯ç”¨æœ€å°çš„å­¦ä¹ æˆæœ¬å½»åº•å¼„æ‡‚æ‰§è¡Œæœºåˆ¶</p><h4 id="å…ˆçœ‹ä¸€æ®µä»£ç ï¼š"><a href="#å…ˆçœ‹ä¸€æ®µä»£ç ï¼š" class="headerlink" title="å…ˆçœ‹ä¸€æ®µä»£ç ï¼š"></a>å…ˆçœ‹ä¸€æ®µä»£ç ï¼š</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'promise1'</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'promise2'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>);</span><br></pre></td></tr></table></figure><p>æ‰“å°é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼šscript start, script end, promise1, promise2, setTimeout å·²è’™åœˆã€‚ã€‚ã€‚</p><h4 id="ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·æ‰“å°é¡ºåºå‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·æ‰“å°é¡ºåºå‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·æ‰“å°é¡ºåºå‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·æ‰“å°é¡ºåºå‘¢ï¼Ÿ</h4><ul><li>å¦‚ä¸‹å¯¼å›¾ï¼ˆæ­¤å›¾ä»ç½‘ç«™ä¸‹è½½ï¼‰<br><img src="https://user-gold-cdn.xitu.io/2018/7/14/164974fb89da87c5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="æ‰§è¡Œé¡ºåº"></li></ul><p>è§£è¯»ï¼š</p><ul><li>åŒæ­¥å’Œå¼‚æ­¥ä»»åŠ¡åˆ†åˆ«è¿›å…¥ä¸åŒçš„æ‰§è¡Œâ€åœºæ‰€â€ï¼ŒåŒæ­¥çš„è¿›å…¥ä¸»çº¿ç¨‹ï¼Œå¼‚æ­¥çš„è¿›å…¥Event Tableå¹¶æ³¨å†Œå‡½æ•°</li><li>å½“æŒ‡å®šçš„äº‹æƒ…å®Œæˆæ—¶ï¼ŒEvent Tableä¼šå°†è¿™ä¸ªå‡½æ•°ç§»å…¥Event Queueã€‚</li><li>ä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸ºç©ºï¼Œä¼šå»Event Queueè¯»å–å¯¹åº”çš„å‡½æ•°ï¼Œè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</li><li>ä¸Šè¿°è¿‡ç¨‹ä¼šä¸æ–­é‡å¤ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„Event Loop(äº‹ä»¶å¾ªç¯)ã€‚</li></ul><p>æˆ‘ä»¬ä¸ç¦è¦é—®äº†ï¼Œé‚£æ€ä¹ˆçŸ¥é“ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆä¸ºç©ºå‘¢ï¼Ÿjså¼•æ“å­˜åœ¨monitoring processè¿›ç¨‹ï¼Œä¼šæŒç»­ä¸æ–­çš„æ£€æŸ¥ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆæ˜¯å¦ä¸ºç©ºï¼Œä¸€æ—¦ä¸ºç©ºï¼Œå°±ä¼šå»Event Queueé‚£é‡Œæ£€æŸ¥æ˜¯å¦æœ‰ç­‰å¾…è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</p><p>çœ‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = [];</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  url:www.javascript.com,</span><br><span class="line">  data:data,</span><br><span class="line">  success:<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å‘é€æˆåŠŸ!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'ä»£ç æ‰§è¡Œç»“æŸ'</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯ä¸€æ®µç®€æ˜“çš„ajaxè¯·æ±‚ä»£ç ï¼š</p><ul><li>ajaxè¿›å…¥Event Tableï¼Œæ³¨å†Œå›è°ƒå‡½æ•°successã€‚</li><li>æ‰§è¡Œconsole.log(â€˜ä»£ç æ‰§è¡Œç»“æŸâ€™)ã€‚</li><li>ajaxäº‹ä»¶å®Œæˆï¼Œå›è°ƒå‡½æ•°successè¿›å…¥Event Queueã€‚</li><li>ä¸»çº¿ç¨‹ä»Event Queueè¯»å–å›è°ƒå‡½æ•°successå¹¶æ‰§è¡Œã€‚<br>ç›¸ä¿¡é€šè¿‡ä¸Šé¢çš„æ–‡å­—å’Œä»£ç ï¼Œä½ å·²ç»å¯¹jsçš„æ‰§è¡Œé¡ºåºæœ‰äº†åˆæ­¥äº†è§£ã€‚</li></ul><hr><h3 id="å¾®ä»»åŠ¡-Microtasks-ã€å®ä»»åŠ¡-task-ï¼Ÿ"><a href="#å¾®ä»»åŠ¡-Microtasks-ã€å®ä»»åŠ¡-task-ï¼Ÿ" class="headerlink" title="å¾®ä»»åŠ¡(Microtasks)ã€å®ä»»åŠ¡(task)ï¼Ÿ"></a>å¾®ä»»åŠ¡(Microtasks)ã€å®ä»»åŠ¡(task)ï¼Ÿ</h3><p>å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡çš†ä¸ºå¼‚æ­¥ä»»åŠ¡ï¼Œå®ƒä»¬éƒ½å±äºä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸»è¦åŒºåˆ«åœ¨äºä»–ä»¬çš„æ‰§è¡Œé¡ºåºï¼ŒEvent Loopçš„èµ°å‘å’Œå–å€¼ã€‚é‚£ä¹ˆä»–ä»¬ä¹‹é—´åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/14/164974fa4b42e4af?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="æ‰§è¡Œé¡ºåº"></p><blockquote><p>ä¸€ä¸ªæ˜é‡‘çš„è€å“¥ï¼ˆssssyokiï¼‰çš„æ–‡ç« æ‘˜è¦ï¼š<br>é‚£ä¹ˆå¦‚æ­¤çœ‹æ¥æˆ‘ç»™çš„ç­”æ¡ˆè¿˜æ˜¯å¯¹çš„ã€‚ä½†æ˜¯jså¼‚æ­¥æœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œå°±æ˜¯é‡åˆ°å®ä»»åŠ¡ï¼Œå…ˆæ‰§è¡Œå®ä»»åŠ¡ï¼Œå°†å®ä»»åŠ¡æ”¾å…¥eventqueueï¼Œç„¶ååœ¨æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå°†å¾®ä»»åŠ¡æ”¾å…¥eventqueueæœ€éªšçš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªqueueä¸æ˜¯ä¸€ä¸ªqueueã€‚å½“ä½ å¾€å¤–æ‹¿çš„æ—¶å€™å…ˆä»å¾®ä»»åŠ¡é‡Œæ‹¿è¿™ä¸ªå›æ‰å‡½æ•°ï¼Œç„¶åå†ä»å®ä»»åŠ¡çš„queueä¸Šæ‹¿å®ä»»åŠ¡çš„å›æ‰å‡½æ•°ã€‚ æˆ‘å½“æ—¶çœ‹åˆ°è¿™æˆ‘å°±æœäº†è¿˜æœ‰è¿™ç§éªšæ“ä½œã€‚</p></blockquote><ul><li>è€Œå®ä»»åŠ¡ä¸€èˆ¬æ˜¯ï¼šåŒ…æ‹¬æ•´ä½“ä»£ç scriptï¼ŒsetTimeoutï¼ŒsetIntervalã€setImmediateã€‚</li><li>å¾®ä»»åŠ¡ï¼šåŸç”ŸPromise(æœ‰äº›å®ç°çš„promiseå°†thenæ–¹æ³•æ”¾åˆ°äº†å®ä»»åŠ¡ä¸­)ã€process.nextTickã€Object.observe(å·²åºŸå¼ƒ)ã€ MutationObserver</li><li>è®°ä½å°±è¡Œäº†ã€‚</li><li>processæ˜¯ä»€ä¹ˆï¼Ÿ</li></ul><hr><p>ä¸åºŸè¯ï¼Œçœ‹ä»¥ä¸‹ä¾‹å­ï¼š</p><h4 id="setTimeout"><a href="#setTimeout" class="headerlink" title="setTimeout"></a>setTimeout</h4><p>å¤§åé¼é¼çš„setTimeoutæ— éœ€å†å¤šè¨€ï¼Œå¤§å®¶å¯¹ä»–çš„ç¬¬ä¸€å°è±¡å°±æ˜¯å¼‚æ­¥å¯ä»¥å»¶æ—¶æ‰§è¡Œï¼Œæˆ‘ä»¬ç»å¸¸è¿™ä¹ˆå®ç°å»¶æ—¶3ç§’æ‰§è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å»¶æ—¶3ç§’'</span>);</span><br><span class="line">&#125;,<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><p>æ¸æ¸çš„setTimeoutç”¨çš„åœ°æ–¹å¤šäº†ï¼Œé—®é¢˜ä¹Ÿå‡ºç°äº†ï¼Œæœ‰æ—¶å€™æ˜æ˜å†™çš„å»¶æ—¶3ç§’ï¼Œå®é™…å´5ï¼Œ6ç§’æ‰æ‰§è¡Œå‡½æ•°ï¼Œè¿™åˆå’‹å›äº‹å•Šï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  task();</span><br><span class="line">&#125;,<span class="number">3000</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'æ‰§è¡Œconsole'</span>);</span><br></pre></td></tr></table></figure><p>æ ¹æ®å‰é¢æˆ‘ä»¬çš„ç»“è®ºï¼ŒsetTimeoutæ˜¯å¼‚æ­¥çš„ï¼Œåº”è¯¥å…ˆæ‰§è¡Œconsole.logè¿™ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç»“è®ºæ˜¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡Œconsole</span></span><br><span class="line"><span class="comment">// task()</span></span><br></pre></td></tr></table></figure><p>å»éªŒè¯ä¸€ä¸‹ï¼Œç»“æœæ­£ç¡®ï¼ ç„¶åæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å‰é¢çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  task()</span><br><span class="line">&#125;,<span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">10000000</span>)</span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹å…¶å®å·®ä¸å¤šå˜›ï¼Œä½†æˆ‘ä»¬æŠŠè¿™æ®µä»£ç åœ¨chromeæ‰§è¡Œä¸€ä¸‹ï¼Œå´å‘ç°æ§åˆ¶å°æ‰§è¡Œtask()éœ€è¦çš„æ—¶é—´è¿œè¿œè¶…è¿‡3ç§’ï¼Œè¯´å¥½çš„å»¶æ—¶ä¸‰ç§’ï¼Œä¸ºå•¥ç°åœ¨éœ€è¦è¿™ä¹ˆé•¿æ—¶é—´å•Šï¼Ÿ è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦é‡æ–°ç†è§£<code>setTimeout</code>çš„å®šä¹‰ã€‚æˆ‘ä»¬å…ˆè¯´ä¸Šè¿°ä»£ç æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼š</p><ul><li>ask()è¿›å…¥Event Tableå¹¶æ³¨å†Œ,è®¡æ—¶å¼€å§‹ã€‚</li><li>æ‰§è¡Œsleepå‡½æ•°ï¼Œå¾ˆæ…¢ï¼Œéå¸¸æ…¢ï¼Œè®¡æ—¶ä»åœ¨ç»§ç»­ã€‚</li><li>3ç§’åˆ°äº†ï¼Œè®¡æ—¶äº‹ä»¶timeoutå®Œæˆï¼Œtask()è¿›å…¥Event Queueï¼Œä½†æ˜¯sleepä¹Ÿå¤ªæ…¢äº†å§ï¼Œè¿˜æ²¡æ‰§è¡Œå®Œï¼Œåªå¥½ç­‰ç€ã€‚</li><li>sleepç»ˆäºæ‰§è¡Œå®Œäº†ï¼Œtask()ç»ˆäºä»Event Queueè¿›å…¥äº†ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</li></ul><p>ä¸Šè¿°çš„æµç¨‹èµ°å®Œï¼Œæˆ‘ä»¬çŸ¥é“setTimeoutè¿™ä¸ªå‡½æ•°ï¼Œæ˜¯ç»è¿‡æŒ‡å®šæ—¶é—´åï¼ŒæŠŠè¦æ‰§è¡Œçš„ä»»åŠ¡(æœ¬ä¾‹ä¸­ä¸ºtask())åŠ å…¥åˆ°Event Queueä¸­ï¼Œåˆå› ä¸ºæ˜¯å•çº¿ç¨‹ä»»åŠ¡è¦ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡éœ€è¦çš„æ—¶é—´å¤ªä¹…ï¼Œé‚£ä¹ˆåªèƒ½ç­‰ç€ï¼Œå¯¼è‡´çœŸæ­£çš„å»¶è¿Ÿæ—¶é—´è¿œè¿œå¤§äº3ç§’ã€‚</p><hr><p>æˆ‘ä»¬è¿˜ç»å¸¸é‡åˆ°<code>setTimeout(fn,0)</code>è¿™æ ·çš„ä»£ç ï¼Œ0ç§’åæ‰§è¡Œåˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å¯ä»¥ç«‹å³æ‰§è¡Œå‘¢ï¼Ÿ<br>ç­”æ¡ˆæ˜¯ä¸ä¼šçš„ï¼Œ<code>setTimeout(fn,0)</code>çš„å«ä¹‰æ˜¯ï¼ŒæŒ‡å®šæŸä¸ªä»»åŠ¡åœ¨ä¸»çº¿ç¨‹æœ€æ—©å¯å¾—çš„ç©ºé—²æ—¶é—´æ‰§è¡Œï¼Œæ„æ€å°±æ˜¯ä¸ç”¨å†ç­‰å¤šå°‘ç§’äº†ï¼Œåªè¦ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆå†…çš„åŒæ­¥ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œæ ˆä¸ºç©ºå°±é©¬ä¸Šæ‰§è¡Œã€‚ä¸¾ä¾‹è¯´æ˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç 1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'å…ˆæ‰§è¡Œè¿™é‡Œ'</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æ‰§è¡Œå•¦'</span>)</span><br><span class="line">&#125;,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»£ç 2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'å…ˆæ‰§è¡Œè¿™é‡Œ'</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æ‰§è¡Œå•¦'</span>)</span><br><span class="line">&#125;,<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>ä»£ç 1çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å…ˆæ‰§è¡Œè¿™é‡Œ</span><br><span class="line">æ‰§è¡Œå•¦</span><br></pre></td></tr></table></figure><p>ä»£ç 2çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å…ˆæ‰§è¡Œè¿™é‡Œ</span><br><span class="line">&#x2F;&#x2F; ... 3s later</span><br><span class="line">&#x2F;&#x2F; æ‰§è¡Œå•¦</span><br></pre></td></tr></table></figure><p><strong>å…³äº<code>setTimeout</code>è¦è¡¥å……çš„æ˜¯ï¼Œå³ä¾¿ä¸»çº¿ç¨‹ä¸ºç©ºï¼Œ0æ¯«ç§’å®é™…ä¸Šä¹Ÿæ˜¯è¾¾ä¸åˆ°çš„ã€‚æ ¹æ®<code>HTML</code>çš„æ ‡å‡†ï¼Œæœ€ä½æ˜¯<code>4æ¯«ç§’</code>ã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</strong></p><h4 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval"></a>setInterval</h4><p>ä¸Šé¢è¯´å®Œäº†<code>setTimeout</code>ï¼Œå½“ç„¶ä¸èƒ½é”™è¿‡å®ƒçš„å­ªç”Ÿå…„å¼Ÿ<code>setInterval</code>ã€‚ä»–ä¿©å·®ä¸å¤šï¼Œåªä¸è¿‡åè€…æ˜¯å¾ªç¯çš„æ‰§è¡Œã€‚å¯¹äºæ‰§è¡Œé¡ºåºæ¥è¯´ï¼Œ<code>setInterval</code>ä¼šæ¯éš”æŒ‡å®šçš„æ—¶é—´å°†æ³¨å†Œçš„å‡½æ•°ç½®å…¥<code>Event Queue</code>ï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡è€—æ—¶å¤ªä¹…ï¼Œé‚£ä¹ˆåŒæ ·éœ€è¦ç­‰å¾…ã€‚</p><p>å”¯ä¸€éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¯¹äº<code>setInterval(fn,ms)</code>æ¥è¯´ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ä¸æ˜¯æ¯è¿‡<code>ms</code>ç§’ä¼šæ‰§è¡Œä¸€æ¬¡<code>fn</code>ï¼Œè€Œæ˜¯æ¯è¿‡<code>ms</code>ç§’ï¼Œä¼šæœ‰<code>fn</code>è¿›å…¥<code>Event Queue</code>ã€‚ä¸€æ—¦<code>setInterval</code>çš„å›è°ƒå‡½æ•°<code>fn</code>æ‰§è¡Œæ—¶é—´è¶…è¿‡äº†å»¶è¿Ÿæ—¶é—´<code>ms</code>ï¼Œé‚£ä¹ˆå°±å®Œå…¨çœ‹ä¸å‡ºæ¥æœ‰æ—¶é—´é—´éš”äº†ã€‚è¿™å¥è¯è¯·è¯»è€…ä»”ç»†å“å‘³ã€‚</p><h3 id="Promiseä¸process-nextTick-callback"><a href="#Promiseä¸process-nextTick-callback" class="headerlink" title="Promiseä¸process.nextTick(callback)"></a>Promiseä¸process.nextTick(callback)</h3><p><code>Promise</code>çš„å®šä¹‰å’ŒåŠŸèƒ½æœ¬æ–‡ä¸å†èµ˜è¿°ï¼Œå¯ä»¥å­¦ä¹ ä¸€ä¸‹ <a href="http://es6.ruanyifeng.com/#docs/promise" target="_blank" rel="noopener">é˜®ä¸€å³°è€å¸ˆçš„Promise</a><br>è€Œ<code>process.nextTick(callback)</code>ç±»ä¼¼<code>node.js</code>ç‰ˆçš„â€<code>setTimeout</code>â€œï¼Œåœ¨äº‹ä»¶å¾ªç¯çš„ä¸‹ä¸€æ¬¡å¾ªç¯ä¸­è°ƒç”¨ <code>callback</code> å›è°ƒå‡½æ•°ã€‚</p><p><strong>ä¸åŒç±»å‹çš„ä»»åŠ¡ä¼šè¿›å…¥å¯¹åº”çš„<code>Event Queue</code>ï¼Œæ¯”å¦‚<code>setTimeout</code>å’Œ<code>setInterval</code>ä¼šè¿›å…¥ç›¸åŒçš„<code>Event Queue</code>ã€‚</strong></p><p>çœ‹ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout1'</span>)</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise1'</span>)</span><br><span class="line">  resolve()</span><br><span class="line">&#125;)</span><br><span class="line">p.then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise2'</span>)    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>æœ€åè¾“å‡ºç»“æœæ˜¯Promise1ï¼ŒPromise2ï¼ŒsetTimeout1</strong></p><p><code>Promise</code>å‚æ•°ä¸­çš„<code>Promise1</code>æ˜¯åŒæ­¥æ‰§è¡Œçš„ å…¶æ¬¡æ˜¯å› ä¸º<code>Promise</code>æ˜¯<code>microtasks</code>ï¼Œä¼šåœ¨åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œåä¼šå»æ¸…ç©º<code>microtasks queues</code>ï¼Œ æœ€å<code>æ¸…ç©ºå®Œå¾®ä»»åŠ¡å†å»å®ä»»åŠ¡é˜Ÿåˆ—å–å€¼</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise1'</span>)  </span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'setTimeout2'</span>)</span><br><span class="line">  &#125;,<span class="number">0</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout1'</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Promise2'</span>)    </span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><strong>è¿™å›æ˜¯åµŒå¥—ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹ï¼Œæœ€åè¾“å‡ºç»“æœæ˜¯<code>Promise1ï¼ŒsetTimeout1ï¼ŒPromise2ï¼ŒsetTimeout2</code></strong></p><ul><li>ä¸€å¼€å§‹æ‰§è¡Œæ ˆçš„åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œä¼šå» <code>microtasks queues</code> æ‰¾æ¸…ç©º <code>microtasks queues</code> ï¼Œè¾“å‡º<code>Promise1</code>ï¼ŒåŒæ—¶ä¼šç”Ÿæˆä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ <code>setTimeout1</code></li><li>å»å®ä»»åŠ¡é˜Ÿåˆ—æŸ¥çœ‹æ­¤æ—¶é˜Ÿåˆ—æ˜¯ <code>setTimeout1</code> åœ¨ <code>setTimeout2</code> ä¹‹å‰ï¼Œå› ä¸º<code>setTimeout1</code>æ‰§è¡Œæ ˆä¸€å¼€å§‹çš„æ—¶å€™å°±å¼€å§‹å¼‚æ­¥æ‰§è¡Œ,æ‰€ä»¥è¾“å‡º <code>setTimeout1</code></li><li>åœ¨æ‰§è¡Œ<code>setTimeout1</code>æ—¶ä¼šç”ŸæˆPromise2çš„ä¸€ä¸ª <code>microtasks</code> ï¼Œæ”¾å…¥ <code>microtasks queues</code> ä¸­ï¼Œæ¥ç€åˆæ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œå»æ¸…ç©º <code>microtasks queues</code> ï¼Œè¾“å‡º <code>Promise2</code></li><li>æ¸…ç©ºå®Œ <code>microtasks queues</code> ï¼Œå°±åˆä¼šå»å®ä»»åŠ¡é˜Ÿåˆ—å–ä¸€ä¸ªï¼Œè¿™å›å–çš„æ˜¯ <code>setTimeout2</code></li></ul><p>å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/14/1649751a2eb3953f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="æ‰§è¡Œå›¾"></p><p>æœ€åæˆ‘ä»¬æ¥åˆ†æä¸€æ®µè¾ƒå¤æ‚çš„ä»£ç ï¼Œçœ‹çœ‹ä½ æ˜¯å¦çœŸçš„æŒæ¡äº†jsçš„æ‰§è¡Œæœºåˆ¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'2'</span>);</span><br><span class="line">  process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'3'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'4'</span>);</span><br><span class="line">    resolve();</span><br><span class="line">  &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'5'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'6'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'7'</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'8'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'9'</span>);</span><br><span class="line">  process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'10'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11'</span>);</span><br><span class="line">    resolve();</span><br><span class="line">  &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'12'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æµç¨‹åˆ†æå¦‚ä¸‹ï¼š</p><ul><li>æ•´ä½“scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼Œé‡åˆ°console.logï¼Œè¾“å‡º<code>1</code>ã€‚</li><li>é‡åˆ°<code>setTimeout</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡<code>Event Queue</code>ä¸­ã€‚æˆ‘ä»¬æš‚ä¸”è®°ä¸º<code>setTimeout1</code>ã€‚</li><li>é‡åˆ°<code>process.nextTick()</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬è®°ä¸º<code>process1</code>ã€‚</li><li>é‡åˆ°<code>Promise</code>ï¼Œ<code>new Promise</code>ç›´æ¥æ‰§è¡Œï¼Œè¾“å‡º<code>7</code>ã€‚<code>then</code>è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡<code>Event Queue</code>ä¸­ã€‚æˆ‘ä»¬è®°ä¸º<code>then1</code>ã€‚</li><li>åˆé‡åˆ°äº†<code>setTimeout</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡<code>Event Queue</code>ä¸­ï¼Œæˆ‘ä»¬è®°ä¸º<code>setTimeout2</code>ã€‚</li></ul><table><thead><tr><th>å®ä»»åŠ¡Event Queue</th><th>å¾®ä»»åŠ¡Event Queue</th></tr></thead><tbody><tr><td>setTimeout1</td><td>process1</td></tr><tr><td>setTimeout2</td><td>then1</td></tr></tbody></table><p>ä¸Šè¡¨æ˜¯ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸæ—¶å„Event Queueçš„æƒ…å†µï¼Œæ­¤æ—¶å·²ç»è¾“å‡ºäº†<code>1</code>å’Œ<code>7</code>ã€‚<br>æˆ‘ä»¬å‘ç°äº†<code>process1</code>å’Œ<code>then1</code>ä¸¤ä¸ªå¾®ä»»åŠ¡ã€‚</p><ul><li>æ‰§è¡Œ<code>process1</code>,è¾“å‡º<code>6</code>ã€‚</li><li>æ‰§è¡Œ<code>then1</code>ï¼Œè¾“å‡º<code>8</code>ã€‚</li></ul><p>å¥½äº†ï¼Œç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æ­£å¼ç»“æŸï¼Œè¿™ä¸€è½®çš„ç»“æœæ˜¯è¾“å‡º<code>1ï¼Œ7ï¼Œ6ï¼Œ8</code>ã€‚é‚£ä¹ˆç¬¬äºŒè½®æ—¶é—´å¾ªç¯ä»<code>setTimeout1</code>å®ä»»åŠ¡å¼€å§‹ï¼š</p><ul><li>é¦–å…ˆè¾“å‡º<code>2</code>ã€‚æ¥ä¸‹æ¥é‡åˆ°äº†<code>process.nextTick()</code>ï¼ŒåŒæ ·å°†å…¶åˆ†å‘åˆ°å¾®ä»»åŠ¡<code>Event Queue</code>ä¸­ï¼Œè®°ä¸º<code>process2</code>ã€‚</li><li><code>new Promise</code>ç«‹å³æ‰§è¡Œè¾“å‡º<code>4</code>ï¼Œ<code>then</code>ä¹Ÿåˆ†å‘åˆ°å¾®ä»»åŠ¡<code>Event Queue</code>ä¸­ï¼Œè®°ä¸º<code>then2</code></li></ul><table><thead><tr><th>å®ä»»åŠ¡Event Queue</th><th>å¾®ä»»åŠ¡Event Queue</th></tr></thead><tbody><tr><td>setTimeout2</td><td>process3</td></tr><tr><td></td><td>then3</td></tr></tbody></table><ul><li>ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œæ‰§è¡Œä¸¤ä¸ªå¾®ä»»åŠ¡process3å’Œthen3ã€‚</li><li>è¾“å‡º10ã€‚</li><li>è¾“å‡º12ã€‚</li><li>ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬ä¸‰è½®è¾“å‡º9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚</li><li>æ•´æ®µä»£ç ï¼Œå…±è¿›è¡Œäº†ä¸‰æ¬¡äº‹ä»¶å¾ªç¯ï¼Œå®Œæ•´çš„è¾“å‡ºä¸º1ï¼Œ7ï¼Œ6ï¼Œ8ï¼Œ2ï¼Œ4ï¼Œ3ï¼Œ5ï¼Œ9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚(è¯·æ³¨æ„ï¼Œnodeç¯å¢ƒä¸‹çš„äº‹ä»¶ç›‘å¬ä¾èµ–libuvä¸å‰ç«¯ç¯å¢ƒä¸å®Œå…¨ç›¸åŒï¼Œè¾“å‡ºé¡ºåºå¯èƒ½ä¼šæœ‰è¯¯å·®)</li></ul><blockquote><p>ä½œè€…ï¼šå¼ å€©qianniuer<br>é“¾æ¥ï¼š<a href="https://juejin.im/post/5b498d245188251b193d4059" target="_blank" rel="noopener">https://juejin.im/post/5b498d245188251b193d4059</a><br>æ¥æºï¼šæ˜é‡‘</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åŸæ–‡åœ°å€ï¼š&lt;a href=&quot;https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/?utm_source=html5weekly&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Tasks, microtasks, queues and schedules&lt;/a&gt;&lt;br&gt;åŒç±»æ–‡ç«  &lt;a href=&quot;https://juejin.im/post/59e85eebf265da430d571f89&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é‰´äºä¸Šç¯‡æ–‡ç« æœ‰æåˆ°è¿‡ å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼Œæ‰€ä»¥ï¼Œåœ¨æ­¤åšä¸ªç»†è‡´è¡¥å……ï¼š è¯ä¸å¤šè¯´ï¼Œç›´æ¥è¿›å…¥æ­£æ–‡ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;[1] æœ¬æ–‡ä¸»è¦æ ¹æ®ç½‘ä¸Šèµ„æºæ€»ç»“è€Œæ¥ï¼Œå¦‚æœ‰ä¸å¯¹ï¼Œè¯·æ–§æ­£ã€‚&lt;/li&gt;
&lt;li&gt;[2] éœ€è¦çŸ¥é“çš„ä¸“ä¸šåè¯æœ¯è¯­ï¼šsynchronousï¼šåŒæ­¥ä»»åŠ¡ã€asynchronousï¼šå¼‚æ­¥ä»»åŠ¡ã€task queue/callback queueï¼šä»»åŠ¡é˜Ÿåˆ—ã€execution context stackï¼šæ‰§è¡Œæ ˆã€heapï¼šå †ã€stackï¼šæ ˆã€macro-taskï¼šå®ä»»åŠ¡ã€micro-taskï¼šå¾®ä»»åŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="JS" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/JS/"/>
    
      <category term="event loop" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/JS/event-loop/"/>
    
      <category term="å¾®ä»»åŠ¡" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/JS/event-loop/%E5%BE%AE%E4%BB%BB%E5%8A%A1/"/>
    
      <category term="å®ä»»åŠ¡" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/JS/event-loop/%E5%BE%AE%E4%BB%BB%E5%8A%A1/%E5%AE%8F%E4%BB%BB%E5%8A%A1/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="JS" scheme="https://heiyehk.github.io/blog/tags/JS/"/>
    
      <category term="event loop" scheme="https://heiyehk.github.io/blog/tags/event-loop/"/>
    
      <category term="å¾®ä»»åŠ¡" scheme="https://heiyehk.github.io/blog/tags/%E5%BE%AE%E4%BB%BB%E5%8A%A1/"/>
    
      <category term="å®ä»»åŠ¡" scheme="https://heiyehk.github.io/blog/tags/%E5%AE%8F%E4%BB%BB%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>Webå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆç¼–ç¨‹èƒ½åŠ›é£å‡ä¹‹è·¯</title>
    <link href="https://heiyehk.github.io/blog/Web%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%BC%96%E7%A8%8B%E8%83%BD%E5%8A%9B%E9%A3%9E%E5%8D%87%E4%B9%8B%E8%B7%AF/"/>
    <id>https://heiyehk.github.io/blog/Web%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%BC%96%E7%A8%8B%E8%83%BD%E5%8A%9B%E9%A3%9E%E5%8D%87%E4%B9%8B%E8%B7%AF/</id>
    <published>2020-04-30T05:50:26.000Z</published>
    <updated>2020-05-20T08:58:06.653Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ã€èƒŒæ™¯ã€‘"><a href="#ã€èƒŒæ™¯ã€‘" class="headerlink" title="ã€èƒŒæ™¯ã€‘"></a>ã€èƒŒæ™¯ã€‘</h3><p>å¦‚æœä½ æ˜¯åˆšè¿›å…¥webå‰ç«¯ç ”å‘é¢†åŸŸï¼Œæƒ³è¯•è¯•è¿™æ½­æ°´æœ‰å¤šæ·±ï¼Œçœ‹è¿™ç¯‡æ–‡ç« å§ï¼›<br>å¦‚æœä½ æ˜¯åšäº†ä¸¤ä¸‰å¹´webäº§å“å‰ç«¯ç ”å‘ï¼Œè¿·èŒ«æ‰¾ä¸ç€æé«˜ä¹‹è·¯ï¼Œçœ‹è¿™ç¯‡æ–‡ç« å§ï¼›<br>å¦‚æœä½ æ˜¯å››äº”å¹´çš„å‰ç«¯å¼€å‘é«˜æ‰‹ï¼Œæ²¡æœ‰éš¾é¢˜èƒ½éš¾å¾—ä½ä½ çš„å¯‚å¯é«˜æ‰‹ï¼Œæ¥çœ‹è¿™ç¯‡æ–‡ç« å§ï¼›</p><p>webå‰ç«¯ç ”å‘å·¥ç¨‹å¸ˆï¼Œåœ¨å›½å†…æ˜¯ä¸€ä¸ªæœé˜³èŒä¸šï¼Œè‡ª07-08å¹´æ­£å¼æœ‰è¿™ä¸ªèŒä¸šä»¥æ¥ï¼Œä¹Ÿä¸è¿‡ä¸‰å››å¹´çš„æ—¶é—´ã€‚è¿™ä¸ªé¢†åŸŸæ²¡æœ‰å­¦æ ¡çš„æ­£è§„æ•™è‚²ï¼Œæ²¡æœ‰è¡Œå†…æˆä½“ ç³»çš„ç†è®ºæŒ‡å¼•ï¼Œå‡ ä¹æ‰€æœ‰ä»äº‹è¿™ä¸ªèŒä¸šçš„äººéƒ½æ˜¯é è‡ªå·±è‡ªå­¦æˆæ‰ã€‚è‡ªå­¦æˆæ‰ï¼Œä¸€æ¡è‰°è¾›çš„åå·è·¯ï¼Œæˆ‘ä¹Ÿæ˜¯è¿™æ ·ä¸€è·¯èµ°æ¥ã€‚ä»2002å¹´å¼€å§‹æ¥è§¦webå‰ç«¯ç ”å‘è‡³ä»Š å·²ç„¶æœ‰äº†9ä¸ªå¹´å¤´ï¼Œå¦‚ä»Šå†å›é¦–ï¼ŒæœŸé—´çš„èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚æ¨å·²åŠäººï¼Œå¦‚æœèƒ½è®©é‚£äº›åæ¥è€…å°‘èµ°äº›å¼¯è·¯ï¼Œè¾›ç”šè¾›ç”šï¼</p><a id="more"></a><h3 id="ã€å‰è¨€ã€‘"><a href="#ã€å‰è¨€ã€‘" class="headerlink" title="ã€å‰è¨€ã€‘"></a>ã€å‰è¨€ã€‘</h3><p>æ‰€è°“çš„å¤©æ‰ï¼Œåªä¸è¿‡æ˜¯æ¯”å¹³å¸¸äººæ›´å¿«çš„æŒæ¡æŠ€èƒ½ã€å®Œæˆå·¥ä½œç½¢äº†ï¼›åªè¦ä½ æ‰¾åˆ°äº†æ­£ç¡®çš„æ–¹å‘ï¼Œå¹¶è¾…ä»¥è¶³å¤Ÿçš„æ—¶é—´ï¼Œä½ ä¸€æ ·èƒ½å¤Ÿè¸ä¸ŠæˆåŠŸå½¼å²¸ã€‚</p><p>æœ¬æ–‡å°†webå‰ç«¯ç ”å‘ç¼–ç¨‹èƒ½åŠ›åˆ’åˆ†äº†å…«ä¸ªç­‰çº§ï¼Œæ¯ä¸ªç­‰çº§éƒ½åˆ—ä¸¾å‡ºäº†å¯¹åº”çš„ç‰¹å¾åŠç ´çº§æå‡ä¹‹æ–¹æ³•ï¼Œå¸Œæœ›æ¯ä½åœ¨çœ‹æœ¬æ–‡çš„åŒå­¦å…ˆå‡†ç¡®å®šä½è‡ªå·±çš„ç­‰çº§ï¼ˆä¸è¦ä»¥ä½ ç›®å‰èƒ½åŠ›çš„æœ€é«˜ç‚¹ï¼Œè€Œæ˜¯ä»¥ä½ å½“å‰èƒ½åŠ›çš„ä¸­æ¡£ä¸ä¹‹ç­‰çº§ä½œå¯¹æ¯”ï¼Œä»¥å…å¤šèµ°å¼¯è·¯ï¼‰ï¼Œå‚è€ƒçªç ´ä¹‹æ³•ç ´ä¹‹ã€‚</p><p>æ‰€è°“çš„çº§åˆ«ï¼Œåªæ˜¯ä½ é¢å¯¹éœ€æ±‚æ—¶çš„ä¸€ç§æ€åº¦ï¼šèƒ½å¤Ÿå®Œæˆã€èƒ½å¤Ÿå®Œç¾åœ°å®Œæˆã€èƒ½å¤Ÿè¶…å‡ºé¢„æœŸåœ°å®Œæˆã€‚ä»¥è¿½æ±‚å®Œç¾çš„æ€åº¦åŠ ä»¥æ‰å®çš„ç¼–ç¨‹åŠŸåŠ›ï¼Œé‚£å°±æ˜¯ä½ çš„ç¼–ç¨‹æ°´å¹³ã€‚<br>åˆ‡è®°å¿ƒæµ®æ°”ç‡¥ï¼Œçº§åˆ«å¤Ÿäº†ï¼Œé‚£çº§åˆ«é‡Œçš„ä¸œè¥¿è‡ªç„¶å°±æ‡‚äº†ã€‚æ‚Ÿäº†å°±æ˜¯æ‚Ÿäº†ï¼Œæ²¡æ‚Ÿä¹Ÿæ²¡å…³ç³»ï¼Œé™ä¸‹å¿ƒæ¥ï¼ŒæŠ•å…¥æ—¶é—´è€Œå·²ã€‚</p><h3 id="ã€å…¥é—¨ã€‘"><a href="#ã€å…¥é—¨ã€‘" class="headerlink" title="ã€å…¥é—¨ã€‘"></a>ã€å…¥é—¨ã€‘</h3><p>èƒ½å¤Ÿè§£å†³ä¸€äº›é—®é¢˜çš„æ°´å¹³ã€‚æœ‰ä¸€å®šçš„åŸºç¡€ï¼ˆæ¯”å¦‚æœ€å¸¸è§çš„htmlæ ‡ç­¾åŠå…¶å±æ€§ã€äº‹ä»¶ã€æ–¹æ³•ï¼›æœ€å¸¸è§çš„csså±æ€§ï¼›åŸºç¡€çš„javascriptç¼–ç¨‹èƒ½åŠ›ï¼‰ï¼Œèƒ½å¤Ÿå®Œæˆä¸€äº›ç®€å•çš„webå‰ç«¯ç ”å‘éœ€æ±‚ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼šåˆ é™¤ä¸€å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å­—ç¬¦ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"www.baidu.com/?page"</span>;  </span><br><span class="line">str=str.replace(<span class="string">'?page'</span>,<span class="string">""</span>);  </span><br><span class="line">alert(str);  </span><br><span class="line">str=str.substring(<span class="number">0</span>,str.indexof(<span class="string">"/"</span>));  </span><br><span class="line">alert(str);</span><br></pre></td></tr></table></figure><p>é¦–å…ˆä¸è¦è‹›è´£ä»£ç çš„å¯¹é”™ä¸¥è°¨ï¼Œæ¯•ç«Ÿæ¯ä¸ªç¨‹åºå‘˜éƒ½æœ‰è¿™æ ·çš„ä¸€ä¸ªè¿‡ç¨‹ï¼›å…¶æ¬¡ï¼Œè¿™ä¸¤æ®µä»£ç åœ¨è¿™ä¸ªå®ä¾‹é‡Œæ²¡æœ‰ä»€ä¹ˆå¤§è¿‡é”™ï¼Œå¯èƒ½ä¼šæœ‰ç‘•ç–µï¼Œä½†èƒ½å¤Ÿè§£å†³é—®é¢˜ï¼ˆåˆ é™¤æŒ‡å®šçš„å­—ç¬¦ï¼‰ï¼Œè¿™å°±æ˜¯è¿™ä¸ªçº§åˆ«çš„ç‰¹å¾ã€‚<br>å†ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¡ç®—ç³»ç»Ÿå½“å‰æ˜¯æ˜ŸæœŸå‡   </span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">var</span> week = <span class="keyword">new</span> date().getday();</span><br><span class="line"><span class="keyword">if</span> (week == <span class="number">0</span>) &#123;</span><br><span class="line">  str = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸæ—¥"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (week == <span class="number">1</span>) &#123;</span><br><span class="line">  str = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸä¸€"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (week == <span class="number">2</span>) &#123;</span><br><span class="line">  str = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸäºŒ"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (week == <span class="number">3</span>) &#123;</span><br><span class="line">  str = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸä¸‰"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (week == <span class="number">4</span>) &#123;</span><br><span class="line">  str = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸå››"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (week == <span class="number">5</span>) &#123;</span><br><span class="line">  str = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸäº”"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (week == <span class="number">6</span>) &#123;</span><br><span class="line">  str = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸå…­"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æˆ–è€…æ›´å¥½ä¸€äº›  </span></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸ"</span>;</span><br><span class="line"><span class="keyword">var</span> week = <span class="keyword">new</span> date().getday();</span><br><span class="line"><span class="keyword">switch</span> (week) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    str1 += <span class="string">"æ—¥"</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    str1 += <span class="string">"ä¸€"</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    str1 += <span class="string">"äºŒ"</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    str1 += <span class="string">"ä¸‰"</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">    str1 += <span class="string">"å››"</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">    str1 += <span class="string">"äº”"</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">    str1 += <span class="string">"å…­"</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">alert(str);</span><br><span class="line">alert(str1);</span><br></pre></td></tr></table></figure><p>å…¥é—¨â€é˜¶æ®µæ˜¯æ¯ä¸ªç¨‹åºå‘˜çš„å¿…ç»ä¹‹è·¯ï¼Œåªè¦â€å…¥é—¨â€ï¼Œä½ å°±ä¸Šè·¯äº†ã€‚æ‰€è°“â€å¸ˆå‚…é¢†è¿›é—¨ï¼Œä¿®è¡Œé ä¸ªäººâ€ï¼Œæœ‰äº†è¿™ä¸ªâ€å…¥é—¨â€çš„åŸºç¡€ï¼Œè‡ªå·±å°±å¯ä»¥æ‘¸ç´¢ç€å‰è¿›äº†ã€‚</p><p>è¿›é˜¶ä¹‹è·¯</p><p>å°†javascriptã€htmlã€cssä¹‹ç±»çš„ç¼–ç å¸®åŠ©æ‰‹å†Œé‡Œçš„æ¯ä¸ªæ–¹æ³•/å±æ€§éƒ½é€šè¯»å‡ éï¼åªæœ‰å°†åŸºç¡€æ‰“å¥½ï¼Œä»¥åçš„è·¯æ‰èƒ½èµ°çš„é¡ºç•…ã€‚å‚è€ƒè¿™äº›å¸®åŠ©æ–‡æ¡£ï¼ŒåŠ›äº‰å†™å‡ºæ— ç‘•ç–µçš„ä»£ç ã€‚<br>è¿™äº›ç¼–ç æ–‡æ¡£å»ºè®®ä¸ä»…æ˜¯åœ¨å…¥é—¨æé«˜æœŸçœ‹ï¼Œåœ¨ä½ ä»¥åæ¯ä¸ªé˜¶æ®µç ´é˜¶çš„æ—¶å€™éƒ½åº”è¯¥çœ‹çœ‹ï¼Œæœ€åŸºç¡€çš„ä¸œè¥¿å¾€å¾€ä¹Ÿæ˜¯æœ€ç»™åŠ›çš„ä¸œè¥¿ï¼Œæœ‰æ—¶èƒ½å¤Ÿç»™ä½ å¸¦æ¥æ„æƒ³ä¸åˆ°çš„æ”¶è·ã€‚</p><h3 id="ã€ç™»å ‚ã€‘"><a href="#ã€ç™»å ‚ã€‘" class="headerlink" title="ã€ç™»å ‚ã€‘"></a>ã€ç™»å ‚ã€‘</h3><p>èƒ½å¤Ÿæ­£ç¡®åœ°è§£å†³é—®é¢˜ã€‚ä¸ç®¡ä½ æ˜¯é€šè¿‡æœç´¢ç½‘ç»œï¼Œæˆ–è€…é€šè¿‡æ”¹é€ æŸäº›æˆå“ä»£ç ï¼ˆjquery/dojo/ext/yuiï¼‰æ¡ˆä¾‹ï¼Œåªè¦èƒ½å¤Ÿæ— é”™åœ°å®Œæˆéœ€æ±‚ã€‚<br>åŒæ ·ä»¥ä¸Šé¢çš„é‚£æ®µâ€å­—ç¬¦ä¸²å‰ªè£â€ä»£ç ä¸ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"www.baidu.com/?page"</span>;</span><br><span class="line">str=str.replace(<span class="regexp">/?page/</span>,<span class="string">""</span>);</span><br><span class="line">alert(str);</span><br></pre></td></tr></table></figure><p>ä»…ä»…è§£å†³é—®é¢˜å¯¹äºâ€ç™»å ‚â€é˜¶æ®µæ¥è¯´å·²ç»ä¸æ˜¯é—®é¢˜ï¼Œè¿™ä¸ªçº§åˆ«æ‰€ç»™å‡ºæ–¹æ¡ˆä¸èƒ½æ˜¯æ¼æ´ç™¾å‡ºã€‚ä»¥ä¸Šé¢è¿™æ®µä»£ç ä¸ºä¾‹ï¼šreplaceæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°è™½ç„¶å¯ä»¥æ”¯æŒå­—ç¬¦ä¸²ï¼Œä½†æœ€ä½³çš„ç±»å‹æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> array(<span class="string">"æ—¥"</span>, <span class="string">"ä¸€"</span>, <span class="string">"äºŒ"</span>, <span class="string">"ä¸‰"</span>, <span class="string">"å››"</span>, <span class="string">"äº”"</span>, <span class="string">"å…­"</span>);</span><br><span class="line"><span class="keyword">var</span> week = <span class="keyword">new</span> date().getday();</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸ"</span>+ a[week];</span><br><span class="line">alert(str);</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”â€å…¥é—¨çº§â€çš„ä»£ç ï¼Œä¸ç®¡æ˜¯ä»ä»£ç é‡ã€ä»£ç æ•ˆç‡ã€ä»£ç ä¼˜ç¾æ€§ã€ä»£ç æ€è·¯æ¥è¯´ï¼Œâ€ç™»å ‚â€çº§çš„è¿™ä¸ªæ—¥æœŸå¤„ç†ä»£ç éƒ½è¦ä¼˜ç§€å¾ˆå¤šã€‚</p><p>è¿›é˜¶ä¹‹è·¯</p><p>è¿™ä¸ªé˜¶æ®µè™½ç„¶èƒ½å¤Ÿç»™å‡ºæ­£ç¡®çš„è§£é¢˜æ–¹æ¡ˆï¼Œä½†æ˜¯ä¸ä¸€å®šæ˜¯æœ€ä¼˜ç§€çš„æ–¹æ¡ˆã€‚å¦‚ä½•æ‰èƒ½å¾—åˆ°æœ€ä¼˜ç§€çš„æ–¹æ¡ˆå‘¢ï¼Ÿé¦–å…ˆå°±æ˜¯ç§¯ç´¯å„ç§èƒ½å¤Ÿè§£å†³éœ€æ±‚çš„æ–¹æ¡ˆï¼Œç„¶åå†éªŒè¯æ¯ä¸ªæ–¹æ¡ˆï¼Œåœ¨è¿™äº›æ–¹æ¡ˆä¸­é€‰æ‹©æœ€å¥½çš„ä¸€ç§ã€‚å› æ­¤è¯¥é˜¶æ®µçš„è¿›é˜¶ä¹‹è·¯å°±æ˜¯â€è¡Œä¸‡é‡Œè·¯ï¼Œçœ‹ä¸‡å·ä¹¦â€ï¼Œç§¯ç´¯å„ä¸ªéœ€æ±‚çš„å„ä¸ªè§£å†³æ–¹æ¡ˆã€‚</p><p>ä½ å¯ä»¥æ‰èº«åœ¨ä¸“ä¸šè®ºå›ï¼ˆè“è‰²ç†æƒ³ã€æ— å¿§ã€csdnï¼‰é‡Œï¼Œé€šè¯»æ‰€æœ‰çš„faqåŠå¸–å­ï¼›ä½ å¯ä»¥æ‰“å¼€æœç´¢å¼•æ“ï¼Œç©·ä¸¾æ‰€æœ‰çš„æœç´¢ç»“æœã€‚è‡ªå·±å»ºç«‹æµ‹è¯•ç¯å¢ƒä¸€ä¸€ éªŒ  è¯è¿™äº›ä»£ç ï¼šå»æ£æ‘©æ¯æ®µä»£ç çš„æ„å›¾ï¼Œå»æ¯”è¾ƒæ¯æ®µä»£ç ä¹‹é—´çš„å·®å¼‚ã€‚è¿™ä¸¤æ¡è·¯å¯ä»¥è®©ä½ å¿«é€Ÿå®ŒæˆåŸå§‹ç§¯ç´¯ï¼Œå½“ä½ å†é¢å¯¹å¤§å¤šæ•°éœ€æ±‚æ—¶èƒ½å¤Ÿè¯´è¿™äº›é—®é¢˜æˆ‘ä»¥å‰åšè¿‡ï¼Œ é‚£  ä½ å°±æ°´åˆ°æ¸ æˆåœ°æ™‹é˜¶äº†ã€‚</p><h3 id="ã€å…¥å®¤ã€‘"><a href="#ã€å…¥å®¤ã€‘" class="headerlink" title="ã€å…¥å®¤ã€‘"></a>ã€å…¥å®¤ã€‘</h3><p>æœ€å¼ºä»£ç ï¼ŒçŸ¥é“æ‰€æœ‰èƒ½å¤Ÿè§£å†³éœ€æ±‚çš„å„ç§æ–¹æ¡ˆï¼Œèƒ½å¤Ÿé€‰æ‹©ä½¿ç”¨æœ€ä¼˜ç§€çš„æ–¹æ¡ˆæ»¡è¶³éœ€æ±‚ã€‚è¿™ä¸ªçº§åˆ«åŸºæœ¬ä¸Šäº§å“å¼€å‘ç¼–ç¨‹ä¸­çš„ä»£ç ä¸»åŠ›ã€‚ç»™å‡ºçš„ä¸€æ‹›ä¸€å¼ï¼Œæ‹›æ‹›éƒ½æ˜¯ç»æ‹›ã€‚<br>è¿˜ä»¥ä¸Šé¢çš„é‚£ä¸ªä¾‹å­ä¸ºä¾‹ï¼Œä½ èƒ½è¯´å‡º1ã€2ã€3ä¹‹é—´çš„å·®åˆ«ï¼Œä»¥åŠé€‚ç”¨äºé‚£ç§ç¯å¢ƒå—ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"www.baidu.com/?page"</span>;</span><br><span class="line"><span class="comment">// 1ã€å­—ç¬¦ä¸²å‰ªè£</span></span><br><span class="line">str.substring(<span class="number">0</span>, str.indexof(<span class="string">"?page"</span>));</span><br><span class="line"><span class="comment">// 2ã€æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">str.replace(<span class="regexp">/?page/</span>, <span class="string">""</span>);</span><br><span class="line"><span class="comment">// 3ã€å­—ç¬¦ä¸²åˆ†æ‹†ã€åˆå¹¶</span></span><br><span class="line">str.split(<span class="string">"?page"</span>).join(<span class="string">""</span>);</span><br></pre></td></tr></table></figure><p>èƒ½å¤Ÿè§£å†³é—®é¢˜çš„æ–¹æ³•ä¼šæœ‰å¾ˆå¤šï¼Œä½†æ˜¯å¯¹äºç¨‹åºå‘˜æ¥è¯´åº”è¯¥é€‰æ‹©æœ€ä¼˜ç§€çš„ã€‚ä¸Šé¢è¿™æ®µä»£ç ä»ä»£ç é‡æ¥è¯´â€æ­£åˆ™è¡¨è¾¾å¼â€æœ€ä¼˜ç§€ï¼›ä»ä»£ç æ‰§è¡Œæ•ˆç‡æ¥è¯´ï¼š â€œå­—ç¬¦ä¸²å‰ªè£â€æ³•æœ€é«˜ï¼ˆchromeä¸­â€æ­£åˆ™è¡¨è¾¾å¼â€æ•ˆç‡æœ€é«˜ï¼‰ï¼Œsplitæ³•æœ€æ¬¡ï¼›ä»å¯æ‰©å±•æ€§ä¸Šæ¥è¯´ï¼Œâ€æ­£åˆ™è¡¨è¾¾å¼â€æ³•æœ€ä¼˜ã€‚å…·ä½“ä½¿ç”¨é‚£ç§æ–¹æ¡ˆè§†å…·ä½“ çš„  éœ€æ±‚ç¯å¢ƒè€Œå®šã€‚</p><p>â€œå…¥å®¤â€é˜¶æ®µï¼Œç¨‹åºå‘˜åº”è¯¥èƒ½å¤Ÿè‚¯å®šçš„å›ç­”ï¼šå¯¹äºè¿™ä¸ªéœ€æ±‚è€Œè¨€ï¼Œæˆ‘çš„ä»£ç å°±æ˜¯æœ€ä¼˜ç§€çš„ä»£ç ã€‚</p><p>å†ä»¥â€ä»Šå¤©æ˜¯æ˜ŸæœŸå‡ â€ä¸ºä¾‹ï¼Œâ€ç™»å ‚â€çº§çš„ä»£ç ä½ æ•¢è¯´æ˜¯æœ€ä¼˜ç§€çš„ä»£ç äº†å—ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¡ç®—ç³»ç»Ÿå½“å‰æ˜¯æ˜ŸæœŸå‡ </span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸ"</span> + <span class="string">"æ—¥ä¸€äºŒä¸‰å››äº”å…­"</span>.charat(<span class="keyword">new</span> date().getday());</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”â€ç™»å ‚â€çº§çš„ç¤ºä¾‹ä»£ç ï¼Œä¸Šé¢è¿™æ®µä»£ç ç»™ä½ ä»€ä¹ˆæ„Ÿå—ï¼Ÿç¨‹åºå‘˜è¿½æ±‚çš„å°±æ˜¯å®Œç¾ã€‚â€å…¥å®¤â€çº§åˆ«è¿½æ±‚çš„å°±æ˜¯æ¯ä¸€æ‹›æ¯ä¸€å¼çš„å®Œç¾æ— ç¼ºã€‚</p><p>ä»webå‰ç«¯ç¼–ç¨‹æ¥è¯´ï¼Œé€šè¿‡2å¹´å·¦å³çš„åŠªåŠ›ï¼Œå¾ˆå¤šäººèƒ½å¤Ÿè¾¾åˆ°è¿™ä¸ªæ°´å¹³ï¼Œä½†æ˜¯ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†äººçš„ç¼–ç¨‹èƒ½åŠ›ä¹Ÿå°±æ­¢æ­¥äºæ­¤ã€‚æˆ–é™äºäº§å“çš„éœ€æ±‚å•ä¸€æ€§ï¼Œæˆ–é™äºéœ€æ±‚å¼€å‘çš„æ—¶é—´ç´§è¿«æ€§ï¼Œæˆ–é™äºäººçš„æƒ°æ€§ï¼Œèƒ½å¤Ÿå®Œç¾åœ°è§£å†³å½“å‰çš„éœ€æ±‚å°±å¤Ÿäº†ã€‚</p><p>ç”±äºé•¿æœŸå¤„äºæŠ€æœ¯å¹³å°æœŸï¼ŒæŠ€æœ¯ä¸Šå¾—ä¸åˆ°æé«˜ï¼Œé€šå¸¸è¿™ä¸ªçº§åˆ«çš„å·¥ç¨‹å¸ˆä¼šæ¯”è¾ƒç‡¥ã€‚æŠ€æœ¯ä¸Šå°æœ‰æ‰€æˆï¼›æˆ–è¿½æ±‚ä¸ªäººçš„çªç ´ï¼›æˆ–è¿½æ±‚äº§å“å·®å¼‚æ€§å¸¦æ¥çš„æ–°é²œæ„Ÿï¼›æˆ–è€…åªæ˜¯æƒ³æ¢ä¸ªå¿ƒæƒ…ï¼›å› æ­¤å¾ˆå¤šæ­¤çº§åˆ«çš„å·¥ç¨‹å¸ˆä¼šç»å¸¸æ¢å…¬å¸ã€‚</p><p>æˆ’éª„æˆ’èºï¼š</p><p>åˆ‡å‹¿ä»¥ä¸ºè‡ªå·±èƒ½å†™ä¸€æ‰‹æ¼‚äº®çš„ä»£ç è€Œè‡ªæ»¡ï¼›<br>åˆ‡è«ä»¥ä¸ºåˆ«äººâ€å°Šç§°â€ä½ ä¸€å£°â€å¤§ä¾ â€ä½ å°±ä»¥ â€œå¤§ä¾ â€è‡ªå±…ï¼›<br>åˆ‡è«ä»¥ä¸ºè‡ªå·±ç§¯ç´¯äº†ä¸€äº›å¾—æ„çš„ä»£ç å°±æˆäº†æ¡†æ¶å¼å¼€å‘ã€‚</p><p>ç»†èŠ‚å†³å®šæˆè´¥ï¼Œä¼˜ç§€çš„æ–¹æ¡ˆå¹¶ä¸èƒ½ä¿è¯æœ€ç»ˆçš„æˆåŠŸã€‚è¿˜ä»¥â€åˆ é™¤æŒ‡å®šå­—ç¬¦ä¸²â€ä¸ºä¾‹ï¼ŒåŸå§‹å­—ç¬¦ä¸²ä»æ ¼å¼ä¸Šæ¥çœ‹åº”è¯¥æ˜¯äº†ä¸ªurlé“¾æ¥ï¼Œåœ¨å»é™¤â€pn=0â€³ä¹‹ åï¼Œæœ€æœ«å°¾å¤„ç•™äº†ä¸€ä¸ªå°¾å·´â€?â€ï¼›å¦‚æœåŸå§‹å­—ç¬¦ä¸²æ˜¯â€<code>http://www.xxx.com/?pn=0&amp;a=1</code>â€³ï¼Œå»é™¤â€pn=0â€³ä¹‹å ? å’Œ &amp; ä¸¤ä¸ªç¬¦å·ç´§è´´ä¸€èµ·ï¼Œè¿™æ›´æ˜¯æ˜æ˜¾çš„bugã€‚</p><p>è¿›é˜¶ä¹‹è·¯</p><p>æ­¤é˜¶æ®µè¿›é˜¶ä¹‹è·¯å°±æ˜¯ï¼šåˆ‡å‹¿å¿ƒæµ®æ°”èºï¼›ä½ ä¸å†è¢«éœ€æ±‚ç‰µç€èµ°ï¼Œè€Œæ˜¯ä½ ç‰µç€éœ€æ±‚èµ°ã€‚æ³¨é‡ç»†èŠ‚ï¼Œæ³¨æ„é‚£äº›å½“å‰éœ€æ±‚é‡Œæ²¡æœ‰æ˜æ–‡ç»™å‡ºçš„ç»†èŠ‚ï¼šä»£ç æ€§èƒ½çš„å·®å¼‚ã€è¿è¡Œå¹³å°ï¼ˆæµè§ˆå™¨ï¼‰çš„å·®å¼‚ã€éœ€æ±‚çš„éšæ€§æ‰©å±•ã€ä»£ç çš„å‘åå…¼å®¹ç­‰ç­‰ã€‚</p><p>å†é€šè¯»å‡ éhtml/css/javascriptå¸®åŠ©æ–‡æ¡£ã€‚</p><p>æˆ‘å»ºè®®è¿™ä¸ªçº§åˆ«çš„å·¥ç¨‹å¸ˆåšä¸€åšwebtreeviewæ§ä»¶ï¼Œè¦æ±‚æ€»èŠ‚ç‚¹é‡ä¸€ä¸‡å·¦å³æ“ä½œæµç•…ï¼Œä½ çš„æ™‹å‡ä¹‹è·¯å°±åœ¨è¿™ä¸ªæ§ä»¶çš„ç¼–ç è¿‡ç¨‹ä¸­ã€‚</p><h3 id="ã€å…¥å¾®ã€‘"><a href="#ã€å…¥å¾®ã€‘" class="headerlink" title="ã€å…¥å¾®ã€‘"></a>ã€å…¥å¾®ã€‘</h3><p>æœ€å¼ºè§£å†³æ–¹æ¡ˆã€‚ä½ èƒ½å¤Ÿèµ°åœ¨éœ€æ±‚çš„å‰é¢ï¼Œå°†å½“å‰éœ€æ±‚é‡Œæœ‰çš„ã€æ²¡æœ‰ç›´æ¥æå‡ºæ¥çš„ã€ç°åœ¨æš‚æ—¶æ²¡æœ‰ä½†å°†æ¥å¯èƒ½æœ‰çš„ç­‰ç­‰ï¼ŒåŠå‰ç«¯ç¼–ç¨‹æ½œè§„åˆ™ç­‰å„ä¸ªæ–¹æ–¹é¢é¢éƒ½ç»¼åˆè€ƒè™‘ï¼Œç»™å‡ºæœ€ä¼˜æ–¹æ¡ˆã€‚ä»¥ä¸€æ‹›èƒœä¸‡æ‹›ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"http://www.xxx.com/?pn=0"</span>; <span class="comment">// åˆ é™¤æŒ‡å®šå­—ç¬¦ pn=0</span></span><br><span class="line"><span class="comment">// æˆ‘å°†è¿™ä¸ªå­—ç¬¦ä¸²é‡Œæ‰€å¯èƒ½æƒ³åˆ°çš„å„ç§æƒ…å†µéƒ½åˆ—ä¸¾å‡ºæ¥</span></span><br><span class="line"><span class="keyword">var</span> a = [</span><br><span class="line">  <span class="string">"http://www.xxx.com/vmpn=?pn=0"</span>, <span class="comment">// pn= å¯èƒ½å‡ºç°åœ¨ ? å‰</span></span><br><span class="line">  <span class="string">"http://www.xxx.com/vmpn=?pn="</span>, <span class="comment">// urlé‡Œå…è®¸pn å€¼ä¸ºç©º</span></span><br><span class="line">  <span class="string">"http://www.xxx.com/vmpn=?pn=0&amp;a=1"</span>, <span class="comment">// url é‡Œå¯æœ‰å¤šä¸ªå­—æ®µ</span></span><br><span class="line">  <span class="string">"http://www.xxx.com/vmpn=?a=1&amp;pn=0"</span>, <span class="comment">// å¯èƒ½æ’åœ¨æœ€å</span></span><br><span class="line">  <span class="string">"http://www.xxx.com/vmpn=?a=1&amp;pn=0&amp;pn=1"</span>, <span class="comment">// å¯èƒ½æœ‰å¤šä¸ª pn å­—æ®µ</span></span><br><span class="line">  <span class="string">"http://www.xxx.com/vmpn=?a=1&amp;pn=0&amp;b=2"</span>, <span class="comment">// å¯èƒ½åœ¨ä¸­é—´</span></span><br><span class="line">  <span class="string">"http://www.xxx.com/vmpn=?a=1&amp;pn=0&amp;pn=1&amp;b=1"</span>, <span class="comment">// å¯èƒ½åœ¨ä¸­é—´æˆç»„</span></span><br><span class="line">  <span class="string">"http://www.xxx.com/vmpn=?a=1&amp;pn=0&amp;b=1&amp;pn=1"</span> <span class="comment">// å¯èƒ½é›¶æ˜Ÿåˆ†å¸ƒ</span></span><br><span class="line">];</span><br><span class="line"><span class="comment">/* éœ€æ±‚çš„ä¸è¨€ä¹‹ç§˜</span></span><br><span class="line"><span class="comment">? è‹¥å‡ºç°åœ¨å­—ç¬¦ä¸²æœ€å°¾åˆ™è¦å»ä¹‹</span></span><br><span class="line"><span class="comment">? &amp; ä¸¤ä¸ªç¬¦å·ä¸å¯é‡å </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/((\?)(pn=[^&amp;]*&amp;)+(?!pn=))|(((\?|&amp;)pn=[^&amp;]*)+$)|(&amp;pn=[^&amp;]*)/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">  alert(a + <span class="string">"\n"</span> + a.replace(reg, <span class="string">"$2"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé˜¶æ®µå·²ç»ä¸å†è¿½æ±‚ä¸€æ‹›ä¸€å¼ï¼Œå¯¹ä½ æ¥è¯´ä¸æ˜¯ä½¿ç”¨ä»€ä¹ˆåˆ›æ–°ç»æ‹›è§£å†³éœ€æ±‚ï¼Œè€Œæ˜¯ç»™å‡ºæˆç†Ÿç¨³é‡çš„æ–¹æ¡ˆï¼Œä»æ ¹ä¸Šè§£å†³é—®é¢˜ã€‚é’ˆå¯¹æŸä¸ªå½“å‰éœ€æ±‚ä½ çš„ä»£ç å¯èƒ½ä¸æ˜¯æœ€ä¼˜ï¼Œä½†æ˜¯é’ˆå¯¹æ­¤ç±»çš„éœ€æ±‚ä½ çš„ä»£ç å´æ˜¯æœ€ä¼˜ç§€çš„ä»£ç ã€‚</p><p>è¿›é˜¶ä¹‹è·¯</p><p>å¾ˆå¤šwebå‰ç«¯ç ”å‘å·¥ç¨‹å¸ˆåœ¨åšäº†3-4å¹´ä¹‹åå°±ä¼šè¿›å…¥ä¸€ä¸ªç“¶é¢ˆæœŸï¼šäº§å“å¼€å‘éœ€æ±‚æ˜¯å°èœä¸€ç¢Ÿï¼Œæ²¡æœ‰æ–°é²œçš„å¯ä»¥æŒ‘æˆ˜çš„ä¸œè¥¿ï¼›ä»£ç å¼€å‘ä¸­çš„ç¨€å¥‡çš„è§£é¢˜æ–¹ æ³•  éƒ½å·²ç»å°è¯•è¿‡ã€‚æ²¡æœ‰äº†å¯æŒ‘æˆ˜çš„éš¾é¢˜ï¼Œå¤±å»äº†æ¢ç´¢çš„æ¿€æƒ…ï¼Œä¹Ÿå°±æ²¡æœ‰äº†å†ä¸Šå‡çš„åŠ¨åŠ›ï¼Œå¥½ä¸å®¹æ˜“èµ°è¿‡â€å…¥å®¤â€çº§åˆ«çš„äººåˆä¼šæœ‰å…«ä¹æˆæ­¢æ­¥äºæ­¤ã€‚æˆ–è½¬åšæŠ€æœ¯é¢†å¯¼ äººï¼Œ  æˆ–è½¬åˆ°å…¶å®ƒçš„é¢†åŸŸï¼Œæˆ–æ¢å…¬å¸ã€‚</p><p>è¿™äº›äººçš„ä¸Šå‡ä¹‹è·¯åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><p>è¿™ä¸ªé˜¶æ®µå•å•ä¾é æŠ€å·§å’Œæ•°é‡çš„ç´¯ç§¯å·²ç»æ²¡æœ‰ä»€ä¹ˆæ•ˆæœäº†ï¼Œçªç ´ä¹‹è·¯åœ¨ç¬¬5å±‚ã€ŠåŒ–è¶ã€‹é‡Œä¼šè¯¦ç»†è¯´æ˜ï¼Œæˆ‘å»ºè®®ä½ åœ¨è¿™ä¸ªé˜¶æ®µæœ«å°¾ç€é‡å…³æ³¨ç¼–ç¨‹ç†è®ºï¼šé¢å‘å¯¹è±¡/è¿‡ç¨‹ã€ä»£ç ç»„ç»‡å½¢å¼ã€ç¼–è¯‘ã€ä»£ç è§„èŒƒã€å…¶å®ƒçš„æ¡†æ¶è®¾è®¡ç­‰ç­‰ã€‚</p><p>æˆ‘å»ºè®®è¿™ä¸ªçº§åˆ«çš„å·¥ç¨‹å¸ˆåšä¸€åšwebeditoræ§ä»¶ï¼Œä¸è¦æ±‚å®Œæ•´åŠŸèƒ½ï¼Œä½†æ˜¯è¯¥æ§ä»¶é‡Œçš„æ¨¡å—åˆ’åˆ†ã€ä»£ç ç»„ç»‡ã€ç¼–ç¨‹æ€æƒ³åšåˆ°ä½ï¼Œç»™å‡ºä¸€ä¸ªç³»ç»Ÿçš„è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="ã€åŒ–è¶ã€‘"><a href="#ã€åŒ–è¶ã€‘" class="headerlink" title="ã€åŒ–è¶ã€‘"></a>ã€åŒ–è¶ã€‘</h3><p>ç ´èŒ§é‡ç”Ÿï¼Œè¿™ä¸ªå±‚æ¬¡å…³æ³¨çš„æ˜¯ç¼–ç¨‹è¯­è¨€æœ¬èº«ï¼Œè€Œä¸å†å…³å¿ƒäº§å“éœ€æ±‚ã€‚ä»€ä¹ˆæ˜¯èŒ§ï¼Ÿäº§å“éœ€æ±‚å°±æ˜¯èŒ§ã€‚å½“ä½ ä¸€æ‹›èƒœä¸‡æ‹›ï¼Œæ‰“éå¤©ä¸‹éœ€æ±‚ä¹‹æ—¶ï¼Œä½ å¦‚æœè¿˜æ‹˜æ³¥äºéœ€æ±‚å¼€å‘ï¼Œé‚£å°±æ˜¯ä½ é™äºèŒ§ä¸­è€Œä¸è‡ªçŸ¥ã€‚è¦ä¹ˆå°±åœ¨è¿™ä¸ªèŒ§é‡Œé»˜é»˜åœ°è€å»ï¼Œè¦ä¹ˆå°±ç ´å¼€èŒ§è·å¾—æ–°ç”Ÿã€‚</p><p>è¿˜æ˜¯ä»¥é‚£ä¸ªâ€å­—ç¬¦ä¸²å‰ªè£â€çš„è€ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åœ¨æ‹¼æ¥æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²æ—¶ï¼Œæ¶ˆé™¤åŸå­—ç¬¦ä¸²ä¸­ç‰¹æ®Šå­—ç¬¦å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„å¹²æ‰°</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>:meizz</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span>: 2010/12/16</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param               <span class="type">&#123;string&#125;</span>        </span>str     è¢«æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ä¿æŠ¤ç¼–ç çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return              <span class="type">&#123;string&#125;</span>                </span>è¢«ä¿æŠ¤å¤„ç†è¿‡åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escapereg</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(<span class="keyword">new</span> regexp(<span class="string">"([.*+?^=!:\x24&#123;&#125;()|[\\]\/\\\\])"</span>, <span class="string">"g"</span>), <span class="string">"\\\x241"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ é™¤urlå­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„ query</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>:meizz</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span>:2010/12/16</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param               <span class="type">&#123;string&#125;</span>        </span>url     urlå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param               <span class="type">&#123;string&#125;</span>        </span>key     è¢«åˆ é™¤çš„queryå</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return              <span class="type">&#123;string&#125;</span>                </span>è¢«åˆ é™¤æŒ‡å®š query åçš„urlå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delurlquery</span>(<span class="params">url, key</span>) </span>&#123;</span><br><span class="line">  key = escapereg(key);</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> regexp(<span class="string">"((\\?)("</span>+ key +<span class="string">"=[^&amp;]*&amp;)+(?!"</span>+ key + <span class="string">"=))|(((\\?|&amp;)"</span>+ key +<span class="string">"=[^&amp;]*)+$)|(&amp;"</span>+ key +<span class="string">"=[^&amp;]*)"</span>, <span class="string">"g"</span>);</span><br><span class="line">  <span class="keyword">return</span> url.replace(reg, <span class="string">"\x241"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åº”ç”¨å®ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"http://www.xxx.com/?pn=0"</span>; <span class="comment">// åˆ é™¤æŒ‡å®šå­—ç¬¦ pn=0</span></span><br><span class="line">delurlquery(str, <span class="string">"pn"</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ç›¸å¯¹äºå±‚æ¬¡4ã€Šå…¥å¾®ã€‹æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿä»ä»£ç å®ç°ä¸Šæ¥è¯´æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œä½†æ˜¯ä»æ€è·¯ä¸Šæ¥è¯´å´æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼š1ã€ä¸å†æ˜¯å°±äº‹è®ºäº‹ï¼Œå¤´ç–¼åŒ»å¤´ï¼Œè€Œæ˜¯æŠŠä¸€ç±»é—®é¢˜æŠ½è±¡ç†è®ºåŒ–ï¼Œä¸€æ‹›ç ´ä¸‡æ‹›ï¼›2ã€æœ‰å°è£…çš„æ¦‚å¿µï¼Œä¸å†æ˜¯æ¯æ¬¡ä»é›¶å¼€å§‹ï¼Œè€Œæ˜¯ç«™åœ¨åŠå±±è…°å¼€å§‹çˆ¬ã€‚</p><p>åœ¨webå‰ç«¯ç ”å‘é˜Ÿä¼é‡Œä¹Ÿæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†äººã€Šå…¥å®¤ã€‹å±‚æ¬¡æ—¶å°±è‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½ï¼Œç›´æ¥è·¨è·ƒåˆ°ã€ŠåŒ–è¶ã€‹ï¼Œç§¯ç´¯è‡ªå·±çš„ä»£ç åº“ï¼ŒæŠ½è±¡åŒ–é—®é¢˜ã€‚ä½†æ²¡æœ‰åŸºç¡€ï¼Œç¼ºå°‘å¼º å¤§  çš„ååŠ²ï¼Œå³ä½¿èƒ½å¤Ÿç ´èŒ§ä¹Ÿç»å—ä¸äº†é£å¹é›¨æ‰“ã€‚ä¸€ä»½ä¸æˆç†Ÿçš„æ¶æ„è®¾è®¡å¯¹å›¢é˜Ÿå¼€å‘å¸¦æ¥çš„å±å®³è¿œå¤§äºå®ƒå¸¦æ¥çš„å¥½å¤„ï¼Œè¿™ç§ä¾‹å­åœ¨ä¸šç•Œå±¡è§ä¸é²œã€‚ä¸è¦æ‹”è‹—åŠ©é•¿ï¼Œä¸è¦ ä¸  ä¼šèµ°å°±æƒ³ç€è·‘ï¼Œå¤¯å®åŸºç¡€ï¼Œæ°´åˆ°æ¸ æˆåœ°æˆé•¿ï¼Œåšç§¯è–„å‘ï¼Œå¼ºåŠ›åœ°ç ´èŒ§è€Œå‡ºã€‚</p><p>è¿›é˜¶ä¹‹è·¯</p><p>ä½ å·²ç»ä»åŸå§‹ç§¯ç´¯ï¼Œåˆ°åšç§¯è–„å‘ï¼Œåˆ°ç ´èŒ§è€Œå‡ºä¹‹åï¼Œä½ æ‰€å…³æ³¨çš„åº”è¯¥ä¸å†æ˜¯ä¸€æ‹›ä¸€å¼ã€ä¸€ä¸ªé¡¹ç›®ã€ä¸€ä¸ªæ¨¡å—ï¼Œè€Œåº”è¯¥æ˜¯ä¸€ç§æ€è·¯ï¼Œä¸€ç§ç†è®ºã€‚ä½ å¯ä»¥åšä»¥ä¸‹ å‡   ä¸ªæ­¥éª¤ä»¥çªç ´åˆ°æ›´é«˜å±‚æ¬¡ï¼šå†ä»”ç»†çœ‹å‡ éhtml/css/javascriptæ¥å£å¸®åŠ©æ–‡æ¡£ï¼›é€‰æ‹©ä¸€é—¨å¼ºè¯­è¨€ï¼ˆc++/c#/javaç­‰ï¼‰è§‚å¯Ÿç†è§£è¿™äº› è¯­  è¨€çš„ç»„ç»‡ç»“æ„ï¼Œè¯­è¨€è®¾è®¡ï¼›çœ‹çœ‹åŸå‹é“¾ï¼Œé“¾å¼è¯­æ³•ç¼–ç¨‹ï¼Œæ³›å‹ï¼Œæ¥å£ç¼–ç¨‹ï¼Œdomé¥æ§å™¨ç­‰ç­‰ï¼›ä»”ç»†é˜…è¯»æˆç†Ÿçš„webå‰ç«¯å¼€å‘æ¡†æ¶çš„è®¾è®¡æ–‡æ¡£ï¼Œçœ‹ä»–ä»¬ä¸ºä»€ä¹ˆè¦ è¿™  æ ·è®¾è®¡ã€‚</p><h3 id="ã€å¤§ä¾ ã€‘"><a href="#ã€å¤§ä¾ ã€‘" class="headerlink" title="ã€å¤§ä¾ ã€‘"></a>ã€å¤§ä¾ ã€‘</h3><p>è¿™é‡Œæ‰€è¯´çš„å¤§ä¾ ï¼Œä¸æ˜¯å¤§å®¶äº’ç›¸å¹æ§çš„â€å¤§ä¾ â€ï¼Œè€Œæ˜¯å®è‡³åå½’çš„é«˜æ‰‹ã€‚è¿™ä¸ªçº§åˆ«çš„äººå®Œå…¨æœ‰èƒ½åŠ›å†™å‡ºä¸å·®äºbindows/jquery/ext/yui/dojoçš„åŒç­‰çº§åˆ«è§„æ¨¡çš„å‰ç«¯å¼€å‘æ¡†æ¶ã€‚åº”ç”¨æˆç†Ÿçš„å¼€å‘æ¡†æ¶æŒ‡å¯¼ã€è§£å†³é—®é¢˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åº“æ–‡ä»¶ /mz/string/escapereg.js</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åœ¨æ‹¼æ¥æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²æ—¶ï¼Œæ¶ˆé™¤åŸå­—ç¬¦ä¸²ä¸­ç‰¹æ®Šå­—ç¬¦å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„å¹²æ‰°</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>:meizz</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span>: 2010/12/16</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param               <span class="type">&#123;string&#125;</span>        </span>str     è¢«æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ä¿æŠ¤ç¼–ç çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return              <span class="type">&#123;string&#125;</span>                </span>è¢«ä¿æŠ¤å¤„ç†è¿‡åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">mz.string.escapereg = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(<span class="keyword">new</span> regexp(<span class="string">"([.*+?^=!:\x24&#123;&#125;()|[\\]\/\\\\])"</span>, <span class="string">"g"</span>), <span class="string">"\\\x241"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº“æ–‡ä»¶ /mz/url/delquery.js</span></span><br><span class="line"><span class="comment">/// include mz.string.escapereg;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ é™¤urlå­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„ query</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>:meizz</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span>:2010/12/16</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param               <span class="type">&#123;string&#125;</span>        </span>url     urlå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param               <span class="type">&#123;string&#125;</span>        </span>key     è¢«åˆ é™¤çš„queryå</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return              <span class="type">&#123;string&#125;</span>                </span>è¢«åˆ é™¤æŒ‡å®š query åçš„urlå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">mz.url.delquery = <span class="function"><span class="keyword">function</span>(<span class="params">url, key</span>) </span>&#123;</span><br><span class="line">  key = mz.string.escapereg(key);</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> regexp(<span class="string">"((\\?)("</span> + key + <span class="string">"=[^&amp;]*&amp;)+(?!"</span> + key + <span class="string">"=))|(((\\?|&amp;)"</span> + key + <span class="string">"=[^&amp;]*)+$)|(&amp;"</span> + key + <span class="string">"=[^&amp;]*)"</span>, <span class="string">"g"</span>);</span><br><span class="line">  <span class="keyword">return</span> url.replace(reg, <span class="string">"\x241"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨å®ä¾‹</span></span><br><span class="line"><span class="comment">/// include mz.url.delquery;</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"http://www.xxx.com/?pn=0"</span>; <span class="comment">// åˆ é™¤æŒ‡å®šå­—ç¬¦ pn=0</span></span><br><span class="line">mz.url.delquery(str, <span class="string">"pn"</span>);</span><br></pre></td></tr></table></figure><p>è‡ªæˆä½“ç³»ï¼Œæœ‰åŸºç¡€ï¼Œä¹Ÿæœ‰ç†è®ºé«˜åº¦ã€‚çŸ¥é“ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Œä¹ŸçŸ¥é“ä»€ä¹ˆæ ·çš„è®¾è®¡æœ€å¥½ã€‚æ¯”å¦‚è¿™ä¸ªä¾‹å­å¯ä»¥æœ‰è¿™æ ·çš„å°è£…ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åº“æ–‡ä»¶ /mz/url/delquery.js</span></span><br><span class="line"><span class="comment">/// include mz.string.escapereg;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ é™¤urlå­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„ query</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>:meizz</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span>:2010/12/16</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param               <span class="type">&#123;string&#125;</span>        </span>url     urlå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param               <span class="type">&#123;string&#125;</span>        </span>key     è¢«åˆ é™¤çš„queryå</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return              <span class="type">&#123;string&#125;</span>                </span>è¢«åˆ é™¤æŒ‡å®š query åçš„urlå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">string.prototype.delquery = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    key = mz.string.escapereg(key);</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> regexp(<span class="string">"((\\?)("</span> + key + <span class="string">"=[^&amp;]*&amp;)+(?!"</span> + key + <span class="string">"=))|(((\\?|&amp;)"</span> + key + <span class="string">"=[^&amp;]*)+$)|(&amp;"</span> + key + <span class="string">"=[^&amp;]*)"</span>, <span class="string">"g"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.replace(reg, <span class="string">"\x241"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨å®ä¾‹</span></span><br><span class="line"><span class="comment">/// include mz.url.delquery;</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"http://www.xxx.com/?pn=0"</span>; <span class="comment">// åˆ é™¤æŒ‡å®šå­—ç¬¦ pn=0</span></span><br><span class="line">str.delquery(<span class="string">"pn"</span>);</span><br></pre></td></tr></table></figure><p>è€Œä¸ºä»€ä¹ˆä¸é‡‡ç”¨ä¸‹é¢çš„é‚£ç§å°è£…å‘¢ï¼Ÿç»è¿‡äº†ã€ŠçŸ¥å¾®ã€‹å’Œã€ŠåŒ–è¶ã€‹ä½ å°±æ‡‚äº†ã€‚</p><p>è¿›é˜¶å‡ºè·¯</p><p>é“æ³•è‡ªç„¶ï¼Œä»æ ¹ä¸Šå»å¯»æ‰¾çªç ´çš„å¥‘æœºã€‚ä½ å¯ä»¥ç ”è¯»htmlè§£æå¼•æ“è®¾è®¡ä¸å®ç°ï¼Œjsè§£æå¼•æ“è®¾è®¡ä¸å®ç°ï¼Œå…¶å®ƒè¯­è¨€çš„ä»£ç è§£æä¸ç¼–è¯‘å®ç°ç­‰ç­‰ã€‚<br>æˆ–è€…å‡ºäº›ä¹¦ã€‚ä½çº§åˆ«çš„äººå†™çš„ä¹¦è¦ä¹ˆæ˜¯ä¸€å¤§æŠ„ï¼Œç©ºæ— ä¸€ç‰©ï¼›è¦ä¹ˆæ˜¯å®³äººã€‚</p><h3 id="ã€å®—å¸ˆã€‘"><a href="#ã€å®—å¸ˆã€‘" class="headerlink" title="ã€å®—å¸ˆã€‘"></a>ã€å®—å¸ˆã€‘</h3><p>è¿™ä¸ªçº§åˆ«çš„äººå·²ç„¶åˆ°äº†æ— æ‹›èƒœæœ‰æ‹›çš„å¢ƒç•Œã€‚é¡¹ç›®å¼€å‘ä¸­çš„éš¾é¢˜ï¼Ÿæ²¡æœ‰éš¾é¢˜ï¼è¿è¡Œå¹³å°çš„å·®å¼‚ï¼Ÿä»æ ¹æœ¬ä¸Šæå®šï¼ä»£ç è§„èŒƒã€å¼€å‘æ¨¡å¼ï¼Œæ—©å·²ç»è¢«æŠ›åœ¨èº«åã€‚è¿™ä¸ªçº§åˆ«çš„äººå·²ç»ä¸å†å…³æ³¨äºæŸä¸ªå‰ç«¯å¼€å‘æ¡†æ¶ï¼Œè€Œæ˜¯åº”å¯¹å…·ä½“çš„ç¯å¢ƒç»™å‡ºæœ€ä½³çš„ç†è®ºæŒ‡å¯¼ã€‚</p><p>è¿™ä¸ªçº§åˆ«çš„äººæ‰€æ³¨æ„çš„åº”è¯¥æ˜¯ä»¥æœ€åˆç†çš„ç³»ç»Ÿæ¶æ„å¼•é¢†ç€æ•´ä¸ªå›¢é˜Ÿçš„è¿›æ­¥ï¼Œåœ¨ä»€ä¹ˆæ ·çš„åœºæ™¯ä¸‹è¯¥ç”¨ä»€ä¹ˆæ ·çš„æ¶æ„è®¾è®¡ã€‚3ä¸ªã€10ä¸ªã€50ä¸ªã€100ä¸ªäººçš„å›¢é˜Ÿæœ€åº”è¯¥ç”¨å“ªç§æ¨¡å¼ï¼Ÿç­‰ä½ åˆ°äº†å®—å¸ˆçº§åˆ«ï¼Œä½ å†æ¥å›ç­”å§ã€‚</p><p>è¿›é˜¶å‡ºè·¯</p><p>æ¯ä¸€ä¸ªå®—å¸ˆå°±æ˜¯ä¸€ä¸ªé«˜å±±ï¼Œå°±æ˜¯ä¸€ä¸ªé¢†åŸŸé‡Œçš„ç¥ï¼Œä½†æ˜¯ä½ ä»…æ»¡è¶³äºåœ¨ä¸€ç¾¤æ¯”ä½ å¼±çš„ç¾¤ä½“å±•ç°ä½ çš„å¼ºå¤§å—ï¼Ÿå¦‚æœè¿˜ä½ æ˜¯æ­¢æ­¥åŸåœ°ï¼Œé‚£æ€»ä¼šæœ‰äººä¹˜ç€é£æœºã€å®‡å®™é£èˆ¹ä»ä½ çš„å¤´é¢†æ è¿‡ï¼Œé«˜å¤„ä¸èƒœå¯’ï¼</p><p>è¦çªç ´è¿™ç‰‡é¢†åŸŸï¼Œé‚£å°±å¿…é¡»è·³å‡ºè¿™ç‰‡é¢†åŸŸã€‚è¦æƒ³çªç ´webå‰ç«¯ç ”å‘çš„å®—å¸ˆçº§ï¼Œé‚£å°±è·³å‡ºwebå‰ç«¯å§ï¼Œä¸Šé¢è¿˜æœ‰webå¼€å‘ã€‚å³ä½¿ä½ æ˜¯webå‰ç«¯çš„å®—å¸ˆï¼Œ ä½†æ²¡æœ‰å¿«é€Ÿçš„æ•°æ®å“åº”ï¼Œæ²¡æœ‰é«˜é€Ÿçš„ç½‘ç»œæ¶æ„ï¼Œæ²¡æœ‰ä¼˜ç¾çš„ç³»ç»Ÿæ”¯æŒï¼Œä½ åˆèƒ½å¦‚ä½•ï¼Ÿæ‰€ä»¥çªç ´ä¹‹è·¯å°±æ˜¯æŠŠç›®å…‰æŠ•åˆ°æ•´æ¡webå¼€å‘çš„é“¾æ¡ä¸­å»ã€‚</p><h3 id="ã€é£å‡ã€‘"><a href="#ã€é£å‡ã€‘" class="headerlink" title="ã€é£å‡ã€‘"></a>ã€é£å‡ã€‘</h3><p>å…¶å®ä¸¥æ ¼æ¥è¯´ï¼Œé£å‡å·²ç»ä¸æ˜¯åŸé¢†åŸŸçš„èŒƒå›´äº†ã€‚åœ¨webç ”å‘é¢†åŸŸï¼Œå¯¹äºè¿™ä¸ªå±‚æ¬¡çš„æœ‰ä¸€ä¸ªå¾ˆå¥½å¬çš„ç§°è°“ï¼šæ¶æ„å¸ˆã€‚å½“ç„¶é‚£äº›â€ä¼ªæ¶æ„å¸ˆâ€å¦å½“åˆ«è®ºã€‚</p><p>ä¸€æ³•é€šï¼Œä¸‡æ³•é€šã€‚åœ¨å…¶å®ƒçš„æŠ€æœ¯é¢†åŸŸï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§ã€Šå…¥é—¨ã€‹ã€Šç™»å ‚ã€‹ã€Šå…¥å®¤ã€‹ã€Šå…¥å¾®ã€‹ã€ŠåŒ–è¶ã€‹ã€Šå¤§ä¾ ã€‹ã€Šå®—å¸ˆã€‹æ¥åˆ’åˆ†ç­‰çº§ï¼›ä¸€æ ·ä¹Ÿå¯ä»¥æŒ‰ç…§æˆ‘è¿™é‡Œæ‰€å†™çš„æ¯ä¸ªçº§åˆ«çš„ã€è¿›é˜¶ä¹‹è·¯ã€‘æ¥å¿«é€Ÿæå‡ã€‚</p><p>ç¥è´ºä½ å†è·è¾‰ç…Œï¼</p><h3 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h3><blockquote><p>åŸæ–‡åœ°å€å·²ç»æ‰¾ä¸åˆ°äº†,æœ€æ—©2011å¹´3æœˆ23æ—¥åªä»CSDNåˆ«äººè½¬è½½å¤„æ‰¾åˆ°åœ°å€(ä¸ç¡®å®šæ˜¯ä¸æ˜¯è¿™ä¸ªæ˜¯åŸæ–‡): <a href="http://hszy00232.blog.163.com/blog/static/430227532011119105237357/" target="_blank" rel="noopener">http://hszy00232.blog.163.com/blog/static/430227532011119105237357/</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ã€èƒŒæ™¯ã€‘&quot;&gt;&lt;a href=&quot;#ã€èƒŒæ™¯ã€‘&quot; class=&quot;headerlink&quot; title=&quot;ã€èƒŒæ™¯ã€‘&quot;&gt;&lt;/a&gt;ã€èƒŒæ™¯ã€‘&lt;/h3&gt;&lt;p&gt;å¦‚æœä½ æ˜¯åˆšè¿›å…¥webå‰ç«¯ç ”å‘é¢†åŸŸï¼Œæƒ³è¯•è¯•è¿™æ½­æ°´æœ‰å¤šæ·±ï¼Œçœ‹è¿™ç¯‡æ–‡ç« å§ï¼›&lt;br&gt;å¦‚æœä½ æ˜¯åšäº†ä¸¤ä¸‰å¹´webäº§å“å‰ç«¯ç ”å‘ï¼Œè¿·èŒ«æ‰¾ä¸ç€æé«˜ä¹‹è·¯ï¼Œçœ‹è¿™ç¯‡æ–‡ç« å§ï¼›&lt;br&gt;å¦‚æœä½ æ˜¯å››äº”å¹´çš„å‰ç«¯å¼€å‘é«˜æ‰‹ï¼Œæ²¡æœ‰éš¾é¢˜èƒ½éš¾å¾—ä½ä½ çš„å¯‚å¯é«˜æ‰‹ï¼Œæ¥çœ‹è¿™ç¯‡æ–‡ç« å§ï¼›&lt;/p&gt;
&lt;p&gt;webå‰ç«¯ç ”å‘å·¥ç¨‹å¸ˆï¼Œåœ¨å›½å†…æ˜¯ä¸€ä¸ªæœé˜³èŒä¸šï¼Œè‡ª07-08å¹´æ­£å¼æœ‰è¿™ä¸ªèŒä¸šä»¥æ¥ï¼Œä¹Ÿä¸è¿‡ä¸‰å››å¹´çš„æ—¶é—´ã€‚è¿™ä¸ªé¢†åŸŸæ²¡æœ‰å­¦æ ¡çš„æ­£è§„æ•™è‚²ï¼Œæ²¡æœ‰è¡Œå†…æˆä½“ ç³»çš„ç†è®ºæŒ‡å¼•ï¼Œå‡ ä¹æ‰€æœ‰ä»äº‹è¿™ä¸ªèŒä¸šçš„äººéƒ½æ˜¯é è‡ªå·±è‡ªå­¦æˆæ‰ã€‚è‡ªå­¦æˆæ‰ï¼Œä¸€æ¡è‰°è¾›çš„åå·è·¯ï¼Œæˆ‘ä¹Ÿæ˜¯è¿™æ ·ä¸€è·¯èµ°æ¥ã€‚ä»2002å¹´å¼€å§‹æ¥è§¦webå‰ç«¯ç ”å‘è‡³ä»Š å·²ç„¶æœ‰äº†9ä¸ªå¹´å¤´ï¼Œå¦‚ä»Šå†å›é¦–ï¼ŒæœŸé—´çš„èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚æ¨å·²åŠäººï¼Œå¦‚æœèƒ½è®©é‚£äº›åæ¥è€…å°‘èµ°äº›å¼¯è·¯ï¼Œè¾›ç”šè¾›ç”šï¼&lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="èƒ½åŠ›æå‡" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/%E8%83%BD%E5%8A%9B%E6%8F%90%E5%8D%87/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="èƒ½åŠ›æå‡" scheme="https://heiyehk.github.io/blog/tags/%E8%83%BD%E5%8A%9B%E6%8F%90%E5%8D%87/"/>
    
  </entry>
  
  <entry>
    <title>ä½ åº”è¯¥çŸ¥é“çš„å‰ç«¯--ç¼“å­˜</title>
    <link href="https://heiyehk.github.io/blog/%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84%E5%89%8D%E7%AB%AF-%E7%BC%93%E5%AD%98/"/>
    <id>https://heiyehk.github.io/blog/%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84%E5%89%8D%E7%AB%AF-%E7%BC%93%E5%AD%98/</id>
    <published>2020-04-30T05:36:11.000Z</published>
    <updated>2020-05-20T08:55:42.654Z</updated>
    
    <content type="html"><![CDATA[<h3 id="web-ç¼“å­˜"><a href="#web-ç¼“å­˜" class="headerlink" title="web ç¼“å­˜"></a>web ç¼“å­˜</h3><p>web ç¼“å­˜æ˜¯å¯ä»¥é€šè¿‡è‡ªåŠ¨ä¿å­˜å¸¸è§æ–‡æ¡£å‰¯æœ¬çš„ HTTP è®¾å¤‡ã€‚å½“ Web è¯·æ±‚æŠµè¾¾ç¼“å­˜æ—¶,å¦‚æœæœ¬åœ°æœ‰ä»¥ç¼“å­˜çš„å‰¯æœ¬,å°±å¯ä»¥ä»æœ¬åœ°å­˜å‚¨è®¾å¤‡è€Œä¸æ˜¯åŸå§‹æœåŠ¡å™¨ä¸­æå–è¿™ä¸ªæ–‡æ¡£ã€‚</p><h3 id="1-ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜" class="headerlink" title="1. ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜"></a>1. ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜</h3><ul><li>å†—ä½™çš„æ•°æ®ä¼ è¾“</li></ul><p>æœ‰å¾ˆå¤šå®¢æˆ·ç«¯è®¿é—®ä¸€ä¸ªæµè¡Œçš„åŸå§‹æœåŠ¡å™¨é¡µé¢æ—¶,æœåŠ¡å™¨ä¼šå¤šæ¬¡ä¼ è¾“åŒä¸€ä»½æ–‡æ¡£,æ¯æ¬¡ä¼ é€ç»™ä¸€ä¸ªå®¢æˆ·ç«¯,ä¸€äº›ç›¸åŒçš„å­—èŠ‚ä¼šåœ¨ç½‘ç»œä¸­ä¸€ééçš„ä¼ è¾“ã€‚è¿™äº›å†—ä½™çš„æ•°æ®ä¼ è¾“ä¼šè€—å°½æ˜‚è´µçš„ç½‘ç»œå¸¦å®½ã€‚è€Œé€šè¿‡ç¼“å­˜æˆ‘ä»¬å¯ä»¥ä¿ç•™ç¬¬ä¸€å®¶æœåŠ¡å™¨å“åº”çš„å‰¯æœ¬,åç»§è¯·æ±‚å°±å¯ä»¥ç”±ç¼“å­˜çš„å‰¯æœ¬æ¥åº”å¯¹</p><ul><li>å¸¦å®½ç“¶é¢ˆ</li></ul><a id="more"></a><p>ç¼“å­˜è¿˜å¯ä»¥ç¼“è§£ç½‘ç»œçš„ç“¶é¢ˆé—®é¢˜ã€‚å¾ˆå¤šç½‘ç»œä¼šä¸ºæœ¬åœ°ç½‘ç»œå®¢æˆ·ç«¯æä¾›çš„å¸¦å®½æ¯”ä¸ºè¿œç¨‹æœåŠ¡å™¨æä¾›çš„å¸¦å®½è¦å®½ã€‚å®¢æˆ·ç«¯ä¼šä»¥è·¯å¾„ä¸Šæœ€æ…¢çš„ç½‘é€Ÿè®¿é—®æœåŠ¡å™¨ã€‚å¦‚æœå®¢æˆ·ç«¯ä»ä¸€ä¸ªå¿«é€Ÿå±€åŸŸç½‘çš„ç¼“å­˜ä¸­å¾—åˆ°ä¸€ä»½å‰¯æœ¬,é‚£ä¹ˆç¼“å­˜å°±å¯ä»¥æé«˜æ€§èƒ½â€”â€”å°¤å…¶æ˜¯è¦ä¼ è¾“æ¯”è¾ƒå¤§çš„æ–‡ä»¶æ—¶</p><ul><li>ç¬é—´æ‹¥å¡</li></ul><p>ç¼“å­˜åœ¨ç ´ç¯ç¬é—´æ‹¥å¡æ—¶æ˜¾å¾—éå¸¸ä¸­é‡è¦ã€‚çªå‘äº‹ä»¶(æ¯”å¦‚çˆ†ç‚¸æ€§æ–°é—»,æ‰¹é‡ E-mail å…¬å‘Š, æˆ–è€…æŸä¸ªåäººäº‹ä»¶)æ˜¯å¾ˆå¤šäººå‡ ä¹åŒæ—¶å»è®¿é—®ä¸€ä¸ª web æ–‡æ¡£æ—¶,å°±ä¼šå‡ºç°ç¬é—´æ‹¥å¡ã€‚ç”±æ­¤é€ æˆçš„è¿‡å¤šæµé‡å³°å€¼å¯èƒ½ä¼šä½¿ç½‘ç»œå’Œ web æœåŠ¡å™¨å‘ç”Ÿç¾éš¾æ€§çš„å´©æºƒ</p><ul><li>è·ç¦»æ—¶å»¶</li></ul><p>å³ä½¿å¸¦å®½ä¸æ˜¯é—®é¢˜,è·ç¦»ä¹Ÿå¯èƒ½ç§°ä¸ºé—®é¢˜ã€‚æ¯å°ç½‘ç»œè·¯ç”±å™¨éƒ½ä¼šå¢åŠ å› ç‰¹ç½‘æµé‡çš„æ—¶å»¶,å³ä½¿å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ²¡æœ‰å¤ªå¤šè·¯ç”±å™¨,å…‰é€Ÿæœ¬èº«ä¹Ÿä¼šé€ æˆæ—¶å»¶é•¿ã€‚å°†ç¼“å­˜æ”¾åœ¨é™„è¿‘çš„æœºæˆ¿é‡Œå¯ä»¥å°†æ–‡ä»¶ä¼ è¾“è·ç¦»ä»æ•°åƒè‹±é‡Œç¼©çŸ­ä¸ºæ•°åç±³</p><h3 id="2-ç¼“å­˜çš„å‘½ä¸­å’Œæœªå‘½ä¸­"><a href="#2-ç¼“å­˜çš„å‘½ä¸­å’Œæœªå‘½ä¸­" class="headerlink" title="2. ç¼“å­˜çš„å‘½ä¸­å’Œæœªå‘½ä¸­"></a>2. ç¼“å­˜çš„å‘½ä¸­å’Œæœªå‘½ä¸­</h3><p>ä½†æ˜¯ç¼“å­˜æ— æ³•ä¿å­˜ä¸–ç•Œä¸Šæ¯ä»½æ–‡æ¡£çš„å‰¯æœ¬,è¿™æ ·å°±ä¼šåˆ†æˆä¸¤ç§æƒ…å†µï¼š</p><ul><li>å¯ä»¥ç”¨å·²æœ‰çš„å‰¯æœ¬ä¸ºæŸäº›åˆ°è¾¾ç¼“å­˜çš„è¯·æ±‚æä¾›æœåŠ¡,è¿™è¢«ç§°ä¹‹ä¸ºç¼“å­˜å‘½ä¸­</li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcfaa771243b4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="avatar"></p><ul><li>å…¶ä»–ä¸€äº›åˆ°è¾¾ç¼“å­˜çš„è¯·æ±‚å¯èƒ½ä¼šç”±äºæ²¡æœ‰å‰¯æœ¬å¯ç”¨,è€Œè¢«è½¬å‘ç»™åŸå§‹æœåŠ¡å™¨,è¿™è¢«ç§°ä¹‹ä¸ºç¼“å­˜æœªå‘½ä¸­</li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcfab46a3b1c3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="avatar"></p><h3 id="3-æ–°é²œåº¦æ£€æµ‹è§„åˆ™"><a href="#3-æ–°é²œåº¦æ£€æµ‹è§„åˆ™" class="headerlink" title="3. æ–°é²œåº¦æ£€æµ‹è§„åˆ™"></a>3. æ–°é²œåº¦æ£€æµ‹è§„åˆ™</h3><p>HTTPé€šè¿‡ç¼“å­˜å°†æœåŠ¡å™¨æ–‡æ¡£çš„å‰¯æœ¬ä¿ç•™ä¸€æ®µæ—¶é—´ã€‚åœ¨è¿™æ®µæ—¶é—´é‡Œ,éƒ½è®¤ä¸ºæ–‡æ¡£æ—¶æ–°é²œçš„,ç¼“å­˜å¯ä»¥åœ¨ä¸è”ç³»æœåŠ¡å™¨çš„æƒ…å†µä¸‹,ç›´æ¥æä¾›è¯¥æ–‡æ¡£ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>å¼ºç¼“å­˜å‘½ä¸­</strong>,æ­¤æ—¶æµè§ˆå™¨ä¼šè¿”å›200çŠ¶æ€ç (from cache)</p><p><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcfaa771243b4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="avatar"></p><p>ä½†ä¸€æ—¦ä»¥ç¼“å­˜å‰¯æœ¬åœç•™çš„æ—¶é—´å¤ªé•¿,è¶…è¿‡äº†æ–‡æ¡£çš„æ–°é²œåº¦é™å€¼,å°±è®¤ä¸ºæ–‡æ¡£è¿‡æœŸäº†ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcfaa7726cf25?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="avatar"></p><p>å†æä¾›æ–‡æ¡£ä¹‹å‰,ç¼“å­˜è¦å†æ¬¡ä¸æœåŠ¡å™¨è¿›è¡Œå†éªŒè¯,å·²æŸ¥çœ‹æ–‡æ¡£æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>åå•†ç¼“å­˜</strong></p><p><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcfaa770151bc?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="avatar"></p><ul><li>åœ¨éªŒè¯å‘½ä¸­: å¦‚æœæœåŠ¡å™¨å¯¹è±¡æ²¡æœ‰è¢«ä¿®æ”¹,æœåŠ¡å™¨ä¼šå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå°çš„HTTP 304 Not Modeifiedå“åº”</li><li>å†éªŒè¯æœªå‘½ä¸­: å¦‚æœæœåŠ¡å™¨å¯¹è±¡ä¸ä»¥ç¼“å­˜å‰¯æœ¬ä¸åŒ,æœåŠ¡å™¨å‘å®¢æˆ·ç«¯é€ä¸€æ¡æ™®é€šçš„å¸¦æœ‰å®Œæ•´å†…å®¹çš„HTTP 200 ok å“åº”</li><li>å¯¹è±¡è¢«åˆ é™¤: å¦‚æœæœåŠ¡å™¨å¯¹è±¡å·²ç»è¢«åˆ é™¤äº†,æœåŠ¡å™¨å°±å›é€ä¸€ä¸ª404 Not Found å“åº”,ç¼“å­˜ä¹Ÿä¼šå°†å…¶å‰¯æœ¬åˆ é™¤</li></ul><h3 id="4-å¼ºç¼“å­˜åŸç†"><a href="#4-å¼ºç¼“å­˜åŸç†" class="headerlink" title="4. å¼ºç¼“å­˜åŸç†"></a>4. å¼ºç¼“å­˜åŸç†</h3><p>é€šè¿‡ç‰¹æ®Šçš„<strong>HTTPCache-Control</strong>é¦–éƒ¨å’Œ<strong>Expries</strong>é¦–éƒ¨,HTTPè®©åŸå§‹æœåŠ¡å™¨å‘æ¯ä¸ªæ–‡æ¡£é™„åŠ äº†ä¸€ä¸ª<strong>è¿‡æœŸæ—¥æœŸ</strong>,è¿™äº›é¦–éƒ¨è¯´æ˜äº†åœ¨å¤šé•¿æ—¶é—´å†…å¯ä»¥å°†è¿™äº›å†…å®¹è§†ä¸ºæ–°é²œçš„ã€‚</p><p>æµè§ˆå™¨ç¬¬äºŒæ¬¡å‘é€è¯·æ±‚ç›¸åŒèµ„æºæ—¶,æ‹¿å‡ºè¿‡æœŸæ—¶é—´å’Œå½“å‰æ—¶é—´è¿›è¡Œæ¯”è¾ƒ,å¦‚æœåœ¨è¿‡æœŸæ—¥æœŸä¹‹å‰,åˆ™å¼ºç¼“å­˜å‘½ä¸­,å¦‚æœç¼“å­˜æ–‡æ¡£è¿‡æœŸ,ç¼“å­˜å°±å¿…é¡»ä¸æœåŠ¡å™¨è¿›è¡Œæ ¸å¯¹,è¯¢é—®æ–‡æ¡£æ˜¯å¦è¿‡æœŸ,å¦‚æœè¢«ä¿®æ”¹è¿‡,å°±è¦è·å–ä¸€ä»½æ–°é²œ(å¸¦æœ‰æ–°çš„è¿‡æœŸæ—¥æœŸ)çš„å‰¯æœ¬</p><h4 id="4-1-å¼ºç¼“å­˜é¦–éƒ¨"><a href="#4-1-å¼ºç¼“å­˜é¦–éƒ¨" class="headerlink" title="4.1 å¼ºç¼“å­˜é¦–éƒ¨"></a>4.1 å¼ºç¼“å­˜é¦–éƒ¨</h4><ul><li><strong>Cache-Control: max-age:</strong></li></ul><p><strong>max-age</strong>å€¼å®šä¹‰äº†æ–‡æ¡£çš„æœ€å¤§ä½¿ç”¨æœŸâ€”â€”ä»ç¬¬ä¸€æ¬¡ç”Ÿæˆæ–‡æ¡£åˆ°æ–‡æ¡£ä¸å†æ–°é²œ,æ— æ³•ä½¿ç”¨ä¸ºæ­¢,æœ€å¤§çš„åˆæ³•ç”Ÿå­˜æ—¶é—´(ä»¥ç§’ä¸ºå•ä½)</p><ul><li><strong>Expires:</strong></li></ul><p>æŒ‡å®šä¸€ä¸ªç»å¯¹çš„è¿‡æœŸæ—¥æœŸ,å¦‚æœè¿‡æœŸæ—¥æœŸå·²ç»è¿‡äº†,å°±è¯´æ˜æ–‡æ¡£ä¸åœ¨æ–°é²œäº†,ä¸è¿‡ç”±äºæˆ‘ä»¬å¯ä»¥å»æ›´æ”¹å®¢æˆ·ç«¯çš„æ—¶é—´,å› æ­¤å¯ä»¥æ›´æ”¹ç¼“å­˜å‘½ä¸­çš„ç»“æœã€‚å› æ­¤æˆ‘ä»¬ä¼˜å…ˆä½¿ç”¨<strong>Cache-Control</strong><br><strong>Cache-Control</strong>æŒ‡ä»¤ï¼š</p><ul><li><strong>no-cacheå’Œno-store:</strong></li></ul><p><strong>no-cache</strong>è¡¨ç¤ºå¿…é¡»å…ˆä¸æœåŠ¡å™¨ç¡®è®¤è¿”å›çš„å“åº”æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–,ç„¶åæ‰èƒ½ä½¿ç”¨å“åº”æ¥æ»¡è¶³åç»­å¯¹åŒæ„ç½‘å€çš„è¯·æ±‚ã€‚å› æ­¤å¦‚æœå­˜åœ¨åˆé€‚çš„éªŒè¯ä»¤ç‰Œ(<strong>ETag</strong>),<strong>no-cache</strong>ä¼šå‘èµ·å¾€è¿”é€šä¿¡æ¥éªŒè¯ç¼“å­˜çš„å“åº”,ä½†å¦‚æœèµ„æºæœªå‘ç”Ÿå˜åŒ–,åˆ™å¯é¿å…ä¸‹è½½<br><strong>no-store</strong>è¡¨ç¤ºç›´æ¥ç¦æ­¢æµè§ˆå™¨ä»¥åŠæ‰€æœ‰ä¸­é—´ç¼“å­˜å­˜å‚¨ä»»ä½•ç‰ˆæœ¬çš„è¿”å›å“åº”,ä¾‹å¦‚,åŒ…å«ä¸ªäººéšç§æ•°æ®æˆ–é“¶è¡Œä¸šåŠ¡æ•°æ®çš„å“åº”ã€‚æ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¯¥èµ„äº§æ—¶,éƒ½ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚,å¹¶ä¸‹è½½å®Œæ•´çš„å“åº”</p><ul><li><strong>publicä¸private:</strong></li></ul><p><strong>public</strong>å‡ºç°å†å“åº”é¦–éƒ¨,åˆ™å³ä½¿ä»–æœ‰å…³è”çš„HTTPéªŒè¯,ç”šè‡³å“åº”çŠ¶æ€ä»£ç ä»£ç é€šå¸¸æ— æ³•ç¼“å­˜,ä¹Ÿå¯ä»¥ç¼“å­˜å“åº”ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹,<strong>public</strong>ä¸æ˜¯å¿…é¡»çš„,å› ä¸ºæ˜ç¡®çš„ç¼“å­˜ä¿¡æ¯(ä¾‹å¦‚<strong>max-age</strong>)å·²è¡¨ç¤ºå“åº”æ˜¯å¯ä»¥ç¼“å­˜<br>ç›¸æ¯”ä¹‹ä¸‹,æµè§ˆå™¨å¯ä»¥ç¼“å­˜privateå“åº”ã€‚ä¸è¿‡è¿™äº›å“åº”é€šå¸¸åªä¸ºå•ä¸ªç”¨æˆ·ç¼“å­˜,å› æ­¤ä¸å…è®¸ä»»ä½•ä¸­é—´ç¼“å­˜å¯¹å…¶è¿›è¡Œç¼“å­˜,ä¾‹å¦‚,ç”¨æˆ·çš„æµè§ˆå™¨å¯ä»¥ç¼“å­˜åŒ…å«ç”¨æˆ·ç§äººä¿¡æ¯çš„HTMLç½‘é¡µ,ä½†CDNä¸èƒ½ç¼“å­˜</p><ul><li><strong>max-age:</strong></li></ul><p>æŒ‡ä»¤æŒ‡å®šä»è¯·æ±‚çš„æ—¶é—´å¼€å§‹,å…è®¸è·å–çš„å“åº”è¢«é‡ç”¨çš„æœ€é•¿æ—¶é—´ã€‚ä¾‹å¦‚<strong>max-age=60</strong>è¡¨ç¤ºå¯ä»¥åœ¨æ¥ä¸‹æ¥çš„60sç¼“å­˜å’Œé‡ç”¨å“åº”</p><ul><li><strong>must-revalidate:</strong></li></ul><p><strong>must-revalidate</strong>å‘Šè¯‰ç¼“å­˜,å†äº‹å…ˆæ²¡æœ‰è·ŸåŸå§‹æœåŠ¡å™¨è¿›è¡Œå†éªŒè¯çš„æƒ…å†µä¸‹,ä¸èƒ½æä¾›è¿™ä¸ªå¯¹è±¡çš„é™ˆæ—§å‰¯æœ¬,ç¼“å­˜ä»ç„¶å¯ä»¥éšæ„æä¾›æ–°é²œçš„å‰¯æœ¬ã€‚å¦‚æœåœ¨ç¼“å­˜è¿›è¡Œ<strong>must-revalidate</strong>æ–°é²œåº¦æ£€æŸ¥æ—¶,åŸå§‹æœåŠ¡å™¨ä¸å¯ç”¨,ç¼“å­˜å°±å¿…é¡»è¿”å›ä¸€æ¡504é”™è¯¯</p><p>æœ€ä½³Cache-Controlç­–ç•¥:</p><p><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcfab954de5e8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="avatar"></p><h3 id="5-åå•†ç¼“å­˜åŸç†"><a href="#5-åå•†ç¼“å­˜åŸç†" class="headerlink" title="5. åå•†ç¼“å­˜åŸç†"></a>5. åå•†ç¼“å­˜åŸç†</h3><p>ä»…ä»…æ˜¯ä»¥ç¼“å­˜è¿‡æœŸäº†å¹¶ä¸æ„å‘³ç€ä»–å’ŒåŸå§‹æœåŠ¡å™¨ç›®å‰å¤„äºæ´»è·ƒçŠ¶æ€çš„æ–‡æ¡£æœ‰å®é™…çš„åŒºåˆ«,è¿™åªæ˜¯æ„å‘³ç€åˆ°äº†è¦è¿›è¡Œæ ¸å¯¹çš„æ—¶é—´äº†,è¿™ç§æƒ…å†µè¢«ç§°ä¸º<strong>åå•†ç¼“å­˜</strong>,è¯´æ˜ç¼“å­˜éœ€è¦è¯¢é—®åŸå§‹æœåŠ¡å™¨æ˜¯å¦å‘ç”Ÿå˜åŒ–</p><ul><li>å¦‚æœå†éªŒè¯æ˜¾ç¤ºå†…å®¹å‘ç”Ÿäº†å˜åŒ–,ç¼“å­˜ä¼šè·å–ä¸€ä»½æ–°çš„æ–‡æ¡£å‰¯æœ¬,å¹¶å°†å…¶å­˜å‚¨åœ¨æ—§æ–‡æ¡£çš„ä½ç½®ä¸Š,ç„¶åå°†æ–‡æ¡£å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li><li>å¦‚æœå†éªŒè¯å†…å®¹æ²¡æœ‰å‘ç”Ÿå˜åŒ–,ç¼“å­˜åªéœ€è¦è·å–æ–°çš„é¦–éƒ¨,åŒ…æ‹¬ä¸€ä¸ªæ–°çš„è¿‡æœŸæ—¥æœŸ,å¹¶å¯¹ç¼“å­˜ä¸­çš„é¦–éƒ¨è¿›è¡Œæ›´æ–°,å¹¶å¯¹ç¼“å­˜ä¸­çš„é¦–éƒ¨è¿›è¡Œæ›´æ–°å°±è¡Œäº†</li></ul><h4 id="5-1-ç”¨æ¡ä»¶æ–¹æ³•è¿›è¡Œå†éªŒè¯"><a href="#5-1-ç”¨æ¡ä»¶æ–¹æ³•è¿›è¡Œå†éªŒè¯" class="headerlink" title="5.1 ç”¨æ¡ä»¶æ–¹æ³•è¿›è¡Œå†éªŒè¯"></a>5.1 ç”¨æ¡ä»¶æ–¹æ³•è¿›è¡Œå†éªŒè¯</h4><p>HTTPçš„æ¡ä»¶æ–¹æ³•å¯ä»¥é«˜æ•ˆçš„å®ç°å†éªŒè¯ã€‚HTTPå…è®¸ç¼“å­˜å‘åŸå§‹æœåŠ¡å™¨å‘é€ä¸€ä¸ªæ¡ä»¶GET,è¯·æ±‚æœåŠ¡å™¨åªæœ‰åœ¨æ–‡æ¡£ä¸ç¼“å­˜ä¸­ç°æœ‰çš„å‰¯æœ¬ä¸åŒæ—¶,æ‰å›é€å¯¹è±¡ä¸»ä½“,å¯¹äºç¼“å­˜åœ¨éªŒè¯æ¥è¯´æœ€æœ‰ç”¨çš„2ä¸ªé¦–éƒ¨æ—¶</p><ul><li><code>If-Modified-Since: &lt;date&gt;</code>  </li></ul><p>å¦‚æœä»æŒ‡å®šæ—¥æœŸä¹‹å,æ–‡æ¡£è¢«ä¿®æ”¹äº†,å°±æ‰§è¡Œè¯·æ±‚çš„æ–¹æ³•ã€‚å¯ä»¥ä¸<strong>Last-Modfied</strong>æœåŠ¡å™¨å“åº”é¦–éƒ¨é…åˆä½¿ç”¨,åªæœ‰åœ¨å†…å®¹ä¿®æ”¹åä¸å·²ç¼“å­˜ç‰ˆæœ¬æœ‰æ‰€ä¸åŒçš„æ—¶å€™æ‰å»è·å–å†…å®¹</p><ul><li><code>If-None-Match:&lt;tags&gt;:</code></li></ul><p>æœåŠ¡å™¨å¯ä»¥ä¸ºæ–‡æ¡£æä¾›ç‰¹æ®Šçš„æ ‡ç­¾(ETag),è€Œä¸æ˜¯å°†å…¶ä¸æœ€è¿‘ä¿®æ”¹æ—¥æœŸå‘åŒ¹é…,è¿™äº›æ ‡ç­¾å°±åƒåºåˆ—å·ä¸€æ ·ã€‚å¦‚æœå·²ç¼“å­˜æ ‡ç­¾ä¸æœåŠ¡å™¨æ–‡æ¡£ä¸­çš„æ ‡ç­¾æœ‰æ‰€ä¸åŒ,<strong>If-None-Match</strong>é¦–éƒ¨å°±ä¼šæ‰§è¡Œæ‰€è¯·æ±‚çš„æ–¹æ³•</p><h4 id="5-2-If-Modified-Since-Last-Modified"><a href="#5-2-If-Modified-Since-Last-Modified" class="headerlink" title="5.2 If-Modified-Since:  / Last-Modified####"></a>5.2 If-Modified-Since:  / Last-Modified####</h4><p>å…·ä½“æµç¨‹å¦‚ä¸‹:</p><ol><li>å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚,æœåŠ¡å™¨å°†æœ€åçš„ä¿®æ”¹æ—¥æœŸ(<strong>Last-Modified</strong>)é™„åŠ åˆ°æ‰€æä¾›çš„æ–‡æ¡£ä¸Šå»</li><li>å½“å†ä¸€æ¬¡è¯·æ±‚èµ„æºæ—¶é—´,å¦‚æœæ²¡æœ‰å‘½ä¸­å¼ºç¼“å­˜,åœ¨æ‰§è¡Œåœ¨éªŒè¯æ—¶,ä¼šåŒ…å«ä¸€ä¸ª<strong>If-Modifed-Since</strong>é¦–éƒ¨,å…¶ä¸­æºå¸¦æœ‰æœ€åä¿®æ”¹å·²ç¼“å­˜å‰¯æœ¬çš„æ—¥æœŸ: <code>If-Modified-Since: &lt;cached last-modified data&gt;</code></li><li>å¦‚æœå†…å®¹è¢«ä¿®æ”¹äº†,æœåŠ¡å™¨å›é€æ–°çš„æ–‡æ¡£,è¿”å›200çŠ¶æ€ç å’Œæœ€æ–°çš„ä¿®æ”¹æ—¥æœŸ</li><li>å¦‚æœå†…å®¹æ²¡æœ‰è¢«ä¿®æ”¹,ä¼šè¿”å›ä¸€ä¸ª<strong>304 Not Modified</strong>å“åº”</li></ol><h4 id="5-3-If-None-Match-ETag"><a href="#5-3-If-None-Match-ETag" class="headerlink" title="5.3 If-None-Match / ETag"></a>5.3 If-None-Match / ETag</h4><p>æœ‰äº›æƒ…å†µä¸‹ä»…ä½¿ç”¨æœ€åä¿®æ”¹æ—¥æœŸè¿›è¡Œå†éªŒè¯æ˜¯ä¸å¤Ÿçš„</p><ul><li>æœ‰äº›æ–‡æ¡£æœ‰å¯èƒ½ä¼šè¢«å‘¨æœŸæ€§çš„é‡å†™(æ¯”å¦‚: ä»ä¸€ä¸ªåå°è¿›ç¨‹ä¸­å†™å…¥),ä½†å®é™…ä¸ŠåŒ…å«çš„æ•°æ®å¸¸å¸¸æ˜¯ä¸€æ ·åˆ†,å°½ç®¡å†…å®¹æ²¡æœ‰å˜åŒ–,ä½†ä¿®æ”¹æ—¥æœŸä¼šå‘ç”Ÿå˜åŒ–</li><li>æœ‰äº›æ–‡æ¡£å¯èƒ½è¢«ä¿®æ”¹äº†,ä½†æ‰€åšä¿®æ”¹å¹¶ä¸é‡è¦.ä¸éœ€è¦è®©ä¸–ç•ŒèŒƒå›´å†…çš„ç¼“å­˜éƒ½é‡è£…æ•°æ®(æ¯”å¦‚å¡«å†™æ³¨é‡Š)</li><li>æœ‰äº›æœåŠ¡å™¨æ— æ³•å‡†ç¡®åˆ¤å®šå…¶é¡µé¢çš„æœ€åä¿®æ”¹æ—¥æœŸ</li><li>æœ‰äº›æœåŠ¡å™¨æä¾›çš„æ–‡æ¡£ä¼šåœ¨æ¯«ç§’é—´éš™å‘ç”Ÿå˜åŒ–(æ¯”å¦‚,å®æ—¶ç›‘è§†å™¨),å¯¹è¿™äº›æœåŠ¡å™¨æ¥è¯´,ä»¥ä¸€ç§’ä¸ºç²’åº¦çš„ä¿®æ”¹æ—¥æœŸå¯èƒ½å°±ä¸å¤Ÿç”¨äº†</li></ul><p>å› æ­¤HTTPå…è®¸ç”¨æˆ·å¯¹è¢«ç§°ä¸ºå®ä½“æ ‡ç­¾çš„(<strong>ETag</strong>)çš„ç‰ˆæœ¬æ ‡è¯†ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚å®ä½“æ ‡ç­¾æ˜¯é™„åŠ åˆ°æ–‡æ¡£ä¸Šçš„ä»»æ„æ ‡ç­¾(å¼•ç”¨å­—ç¬¦ä¸²),æœåŠ¡å™¨ç”Ÿæˆå¹¶è¿”å›çš„éšæœºä»¤ç‰Œé€šå¸¸æ˜¯æ–‡ä»¶å†…å®¹çš„å“ˆå¸Œå€¼æˆ–å…¶ä»–æŒ‡çº¹ã€‚å®¢æˆ·ç«¯ä¸éœ€è¦æŒ‡çº¹æ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Œåªéœ€åœ¨ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶å°†å…¶å‘é€è‡³æœåŠ¡å™¨ã€‚å¦‚æœæŒ‡çº¹ä»ç„¶ç›¸åŒï¼Œåˆ™è¡¨ç¤ºèµ„æºæœªå‘ç”Ÿå˜åŒ–ï¼Œæ‚¨å°±å¯ä»¥è·³è¿‡ä¸‹è½½ã€‚</p><p>åœ¨ä¸Šä¾‹ä¸­ï¼Œå®¢æˆ·ç«¯è‡ªåŠ¨åœ¨<strong>â€œIf-None-Matchâ€ HTTP è¯·æ±‚æ ‡å¤´å†…æä¾› ETag ä»¤ç‰Œ</strong>ã€‚æœåŠ¡å™¨æ ¹æ®å½“å‰èµ„æºæ ¸å¯¹ä»¤ç‰Œã€‚å¦‚æœå®ƒæœªå‘ç”Ÿå˜åŒ–ï¼ŒæœåŠ¡å™¨å°†è¿”å›304 Not Modifiedå“åº”ï¼Œå‘ŠçŸ¥æµè§ˆå™¨ç¼“å­˜ä¸­çš„å“åº”æœªå‘ç”Ÿå˜åŒ–ï¼Œå¯ä»¥å†å»¶ç”¨ 120 ç§’ã€‚è¯·æ³¨æ„ï¼Œæ‚¨ä¸å¿…å†æ¬¡ä¸‹è½½å“åº”ï¼Œè¿™èŠ‚çº¦äº†æ—¶é—´å’Œå¸¦å®½ã€‚</p><p><strong>æ›´æ–°å’ŒåºŸå¼ƒå“åº”</strong></p><p>æµè§ˆå™¨å‘å‡ºçš„æ‰€æœ‰HTTPè¯·æ±‚ä¼šé¦–å…ˆè·¯ç”±åˆ°æµè§ˆå™¨ç¼“å­˜,å·²ç¡®è®¤æ˜¯å¦ç¼“å­˜å¯ç”¨äºè¯·æ±‚çš„æœ‰æ•ˆå“åº”ã€‚å¦‚æœæœ‰åŒ¹é…çš„å“åº”,åˆ™ä»ç¼“å­˜ä¸­è¯»å–å“åº”,è¿™æ ·å°±é¿å…äº†ç½‘è·¯å»¶è¿Ÿå’Œä¼ é€äº§ç”Ÿçš„æµé‡è´¹ç”¨</p><p>*<em>ä¸è¿‡å¦‚æœæˆ‘ä»¬å‘æ›´æ–°æˆ–åºŸå¼ƒç¼“å­˜çš„å“åº”,è¯¥æ€ä¹ˆåŠ, *</em>ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªcssæ ·å¼è¡¨ç¼“å­˜é•¿è¾¾24å°æ—¶,ä½†æ˜¯æˆ‘ä»¬éœ€è¦ç«‹å³æ›´æ–°ä»–,æˆ‘ä»¬å¦‚ä½•é€šçŸ¥å·²è¿‡æ—¶çš„CSSç¼“å­˜å‰¯æœ¬çš„æ‰€æœ‰è®¿é—®è€…æ›´æ–°å…¶ç¼“å­˜ã€‚åœ¨ä¸æ›´æ”¹èµ„æºç½‘å€çš„æƒ…å†µä¸‹,æ˜¯åšä¸åˆ°çš„ã€‚</p><p>æ‰€ä»¥,å¦‚ä½•æ‰èƒ½å®ç°å®¢æˆ·ç«¯ç¼“å­˜å’Œå¿«é€Ÿæ›´æ–°,ä½ å¯ä»¥åœ¨èµ„æºå†…å®¹å‘ç”Ÿå˜åŒ–æ—¶,æ›´æ”¹å®ƒçš„ç½‘å€,å¼ºåˆ¶ç”¨æˆ·ä¸‹è½½æ–°å“åº”ã€‚é€šå¸¸æƒ…å†µä¸‹,å¯ä»¥é€šè¿‡å†æ–‡ä»¶åä¸­åµŒå…¥æ–‡ä»¶çš„æŒ‡çº¹æˆ–ç‰ˆæœ¬å·æ¥å®ç°</p><p><img src="https://user-gold-cdn.xitu.io/2018/4/25/162fcfaaf3b76754?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="avatar"></p><ul><li>HTMLè¢«æ ‡è®°ä¸º<strong>no-cache</strong>,è¿™æ„å‘³ç€æµè§ˆå™¨å†æ¯æ¬¡è¯·æ±‚æ—¶éƒ½å§‹ç»ˆé‡æ–°éªŒè¯æ–‡æ¡£,å¹¶åœ¨å†…å®¹å˜åŒ–æ—¶è·å–æœ€æ–°ç‰ˆæœ¬ã€‚æ­¤å¤–å†HTMLæ ‡è®°å†…,å†CSSå’Œjavascriptä¸­åµŒå…¥æŒ‡çº¹,å¦‚æœè¿™äº›æ–‡ä»¶çš„å†…å®¹å‘ç”Ÿå˜åŒ–,ç½‘é¡µçš„HTMLä¹Ÿä¼šéšä¹‹æ”¹å˜,å¹¶ä¼šä¸‹è½½HTMLå“åº”çš„æ–°å‰¯æœ¬</li><li>å…è®¸æµè§ˆå™¨å’Œä¸­é—´ç¼“å­˜(ä¾‹å¦‚CDN)ç¼“å­˜CSS,å¹¶å°†CSSè®¾ç½®ä¸º1å¹´ååˆ°æœŸ,å› ä¸ºå†æ–‡ä»¶åä¸­åµŒå…¥äº†æ–‡ä»¶çš„æŒ‡çº¹,CSSæ›´æ–°æ—¶ç½‘å€ä¹Ÿä¼šéšä¹‹å˜åŒ–</li><li>JavaScriptåŒæ ·è®¾ç½®ä¸º1å¹´ååˆ°æœŸ,ä½†æ ‡è®°ä¸º<strong>private</strong>,è¿™æˆ–è®¸æ˜¯å› ä¸ºå®ƒåŒ…å«çš„æŸäº›ç”¨æˆ·ç§äººæ•°æ®æ˜¯CDNä¸åº”ç¼“å­˜çš„ã€‚</li><li>å›¾åƒç¼“å­˜æ—¶ä¸åŒ…å«ç‰ˆæœ¬æˆ–å”¯ä¸€æŒ‡çº¹,å¹¶è®¾ç½®ä¸ºä¸€å¤©ååˆ°æœŸ</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching?hl=zh-cn" target="_blank" rel="noopener">HTTPç¼“å­˜</a></li><li><a href="https://www.cnblogs.com/lyzg/p/5125934.html#_label4" target="_blank" rel="noopener">æµè§ˆå™¨ç¼“å­˜çŸ¥è¯†å°ç»“åŠåº”ç”¨</a></li><li><a href="http://www.yzmspirit.com/2017/03/28/http%E7%88%86%E7%82%B8%E9%87%8D%E7%82%B9%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E7%BC%93%E5%AD%98/" target="_blank" rel="noopener">httpçˆ†ç‚¸é‡ç‚¹å­¦ä¹ â€”â€”ç¼“å­˜</a></li></ul><blockquote><p>ä½œè€…ï¼šSGAMER-rain<br>é“¾æ¥ï¼š<a href="https://juejin.im/post/5ae081aaf265da0b767d263a" target="_blank" rel="noopener">https://juejin.im/post/5ae081aaf265da0b767d263a</a><br>æ¥æºï¼šæ˜é‡‘</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;web-ç¼“å­˜&quot;&gt;&lt;a href=&quot;#web-ç¼“å­˜&quot; class=&quot;headerlink&quot; title=&quot;web ç¼“å­˜&quot;&gt;&lt;/a&gt;web ç¼“å­˜&lt;/h3&gt;&lt;p&gt;web ç¼“å­˜æ˜¯å¯ä»¥é€šè¿‡è‡ªåŠ¨ä¿å­˜å¸¸è§æ–‡æ¡£å‰¯æœ¬çš„ HTTP è®¾å¤‡ã€‚å½“ Web è¯·æ±‚æŠµè¾¾ç¼“å­˜æ—¶,å¦‚æœæœ¬åœ°æœ‰ä»¥ç¼“å­˜çš„å‰¯æœ¬,å°±å¯ä»¥ä»æœ¬åœ°å­˜å‚¨è®¾å¤‡è€Œä¸æ˜¯åŸå§‹æœåŠ¡å™¨ä¸­æå–è¿™ä¸ªæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1-ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜&quot;&gt;&lt;a href=&quot;#1-ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜&quot; class=&quot;headerlink&quot; title=&quot;1. ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜&quot;&gt;&lt;/a&gt;1. ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å†—ä½™çš„æ•°æ®ä¼ è¾“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ‰å¾ˆå¤šå®¢æˆ·ç«¯è®¿é—®ä¸€ä¸ªæµè¡Œçš„åŸå§‹æœåŠ¡å™¨é¡µé¢æ—¶,æœåŠ¡å™¨ä¼šå¤šæ¬¡ä¼ è¾“åŒä¸€ä»½æ–‡æ¡£,æ¯æ¬¡ä¼ é€ç»™ä¸€ä¸ªå®¢æˆ·ç«¯,ä¸€äº›ç›¸åŒçš„å­—èŠ‚ä¼šåœ¨ç½‘ç»œä¸­ä¸€ééçš„ä¼ è¾“ã€‚è¿™äº›å†—ä½™çš„æ•°æ®ä¼ è¾“ä¼šè€—å°½æ˜‚è´µçš„ç½‘ç»œå¸¦å®½ã€‚è€Œé€šè¿‡ç¼“å­˜æˆ‘ä»¬å¯ä»¥ä¿ç•™ç¬¬ä¸€å®¶æœåŠ¡å™¨å“åº”çš„å‰¯æœ¬,åç»§è¯·æ±‚å°±å¯ä»¥ç”±ç¼“å­˜çš„å‰¯æœ¬æ¥åº”å¯¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¸¦å®½ç“¶é¢ˆ&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="ç¼“å­˜" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/%E6%B5%8F%E8%A7%88%E5%99%A8/%E7%BC%93%E5%AD%98/"/>
    
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="ç¼“å­˜" scheme="https://heiyehk.github.io/blog/tags/%E7%BC%93%E5%AD%98/"/>
    
  </entry>
  
  <entry>
    <title>ä»è¾“å…¥urlåˆ°æ˜¾ç¤ºç½‘é¡µå‘ç”Ÿäº†ä»€ä¹ˆ</title>
    <link href="https://heiyehk.github.io/blog/%E4%BB%8E%E8%BE%93%E5%85%A5url%E5%88%B0%E6%98%BE%E7%A4%BA%E7%BD%91%E9%A1%B5%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/"/>
    <id>https://heiyehk.github.io/blog/%E4%BB%8E%E8%BE%93%E5%85%A5url%E5%88%B0%E6%98%BE%E7%A4%BA%E7%BD%91%E9%A1%B5%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/</id>
    <published>2020-04-30T05:29:44.000Z</published>
    <updated>2020-04-30T09:27:42.758Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥urlåˆ°æ˜¾ç¤ºç½‘é¡µä¸»è¦åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š <strong>ç½‘ç»œé€šä¿¡å’Œé¡µé¢æ¸²æŸ“</strong></p><p>äº’è”ç½‘å†…å„ç½‘ç»œè®¾å¤‡é—´çš„é€šä¿¡éƒ½éµå¾ªTCP/IPåè®®ï¼Œåˆ©ç”¨TCP/IPåè®®æ—è¿›è¡Œç½‘ç»œé€šä¿¡æ—¶ï¼Œä¼šé€šè¿‡åˆ†å±‚é¡ºåºä¸å¯¹æ–¹è¿›è¡Œé€šä¿¡ã€‚åˆ†å±‚ç”±é«˜åˆ°ä½åˆ†åˆ«ä¸ºï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€‚å‘é€ç«¯ä»åº”ç”¨å±‚å¾€ä¸‹èµ°ï¼Œæ¥æ”¶ç«¯ä»æ•°æ®é“¾è·¯å±‚ç½‘ä¸Šèµ°</p><a id="more"></a><h3 id="1-æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥URLå¹¶æŒ‰ä¸‹å›è½¦"><a href="#1-æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥URLå¹¶æŒ‰ä¸‹å›è½¦" class="headerlink" title="1.æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥URLå¹¶æŒ‰ä¸‹å›è½¦"></a>1.æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥URLå¹¶æŒ‰ä¸‹å›è½¦</h3><p>æˆ‘ä»¬å¸¸è§çš„RULæ˜¯è¿™æ ·çš„: <code>www.baidu.com</code>,åŸŸåé€šå¸¸ç”±3éƒ¨åˆ†ç»„æˆï¼š<strong>åè®® åŸŸå ç«¯å£å·</strong></p><ol><li>åè®®ï¼šä¸»è¦æ˜¯HTTPåè®®ï¼ŒHTTPSåè®®ï¼ŒFTPåè®®ï¼ŒFILeåè®®</li><li>åŸŸåï¼šurlä¸­é—´éƒ¨åˆ†ä¸ºåŸŸåæˆ–è€…IP</li><li>ç«¯å£å·ï¼šé€šå¸¸é»˜è®¤éƒ½æ˜¯éšè—çš„ httpé»˜è®¤ç«¯å£å·ä¸º80 httpsé»˜è®¤ç«¯å£å·ä¸º443</li></ol><p>æ¶‰åŠçŸ¥è¯†ç‚¹ï¼š è·¨åŸŸ<br>åœ¨å‰ç«¯è¿›è¡Œæ•°æ®è¯·æ±‚æ—¶ï¼Œç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œåè®®ï¼ŒåŸŸåï¼Œç«¯å£å·æœ‰ä¸€ä¸ªä¸åŒä¼šå­˜åœ¨è·¨åŸŸè¯·æ±‚ï¼Œéœ€è¦è¿›è¡Œè·¨åŸŸå¤„ç†ï¼Œç›¸å…³çš„è·¨åŸŸæ–¹æ³•ç‚¹å‡»<a href="https://user-gold-cdn.xitu.io/2018/11/19/1672a68aae05f7f6" target="_blank" rel="noopener">https://user-gold-cdn.xitu.io/2018/11/19/1672a68aae05f7f6</a></p><h3 id="2-DNSåŸŸåè§£æ"><a href="#2-DNSåŸŸåè§£æ" class="headerlink" title="2.DNSåŸŸåè§£æ"></a>2.DNSåŸŸåè§£æ</h3><p>äº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºçš„å”¯ä¸€æ ‡è¯†æ˜¯å®ƒçš„<strong>IPåœ°å€</strong>ï¼Œä½†æ˜¯IPåœ°å€å¹¶ä¸æ–¹ä¾¿è®°å¿†ã€‚ç”¨æˆ·æ›´å–œæ¬¢ç”¨æ–¹ä¾¿è®°å¿†çš„ç½‘å€å»å¯»æ‰¾äº’è”ç½‘ä¸Šçš„å…¶å®ƒè®¡ç®—æœºï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„ç™¾åº¦çš„ç½‘å€ã€‚æ‰€ä»¥äº’è”ç½‘è®¾è®¡è€…éœ€è¦åœ¨ç”¨æˆ·çš„æ–¹ä¾¿æ€§ä¸å¯ç”¨æ€§æ–¹é¢åšä¸€ä¸ªæƒè¡¡ï¼Œè¿™ä¸ªæƒè¡¡å°±æ˜¯ä¸€ä¸ªç½‘å€åˆ°IPåœ°å€çš„è½¬æ¢ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯DNSè§£æï¼Œå³å®ç°äº†ç½‘å€åˆ°IPåœ°å€çš„è½¬æ¢</p><p>è§£æè¿‡ç¨‹<br>DNSè§£ææ˜¯ä¸€ä¸ªé€’å½’æŸ¥è¯¢çš„è¿‡ç¨‹ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/11/19/1672a5a206a7e309" alt="avatar"></p><p>ä¸Šè¿°å›¾ç‰‡æ˜¯æŸ¥æ‰¾<code>www.google.com</code>çš„IPåœ°å€è¿‡ç¨‹ã€‚é¦–å…ˆåœ¨æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸­æŸ¥è¯¢IPåœ°å€ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°çš„æƒ…å†µä¸‹ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨ä¼šå‘æ ¹åŸŸåæœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¦‚æœæ ¹åŸŸåæœåŠ¡å™¨ä¹Ÿä¸å­˜åœ¨è¯¥åŸŸåæ—¶ï¼Œæœ¬åœ°åŸŸåä¼šå‘comé¡¶çº§åŸŸåæœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œä¾æ¬¡ç±»æ¨ä¸‹å»ã€‚ç›´åˆ°æœ€åæœ¬åœ°åŸŸåæœåŠ¡å™¨å¾—åˆ°googleçš„IPåœ°å€å¹¶æŠŠå®ƒç¼“å­˜åˆ°æœ¬åœ°ï¼Œä¾›ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨ã€‚</p><p>ä»ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥çœ‹å‡ºç½‘å€çš„è§£ææ˜¯ä¸€ä¸ªä»å³å‘å·¦çš„è¿‡ç¨‹: <code>com</code> -&gt; <code>google.com</code> -&gt; <code>www.google.com</code>ã€‚ä½†æ˜¯ä½ æ˜¯å¦å‘ç°å°‘äº†ç‚¹ä»€ä¹ˆï¼Œæ ¹åŸŸåæœåŠ¡å™¨çš„è§£æè¿‡ç¨‹å‘¢ï¼Ÿäº‹å®ä¸Šï¼ŒçœŸæ­£çš„ç½‘å€æ˜¯<code>www.google.com</code>.ï¼Œå¹¶ä¸æ˜¯æˆ‘å¤šæ‰“äº†ä¸€ä¸ª.ï¼Œè¿™ä¸ª.å¯¹åº”çš„å°±æ˜¯æ ¹åŸŸåæœåŠ¡å™¨ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„ç½‘å€çš„æœ€åä¸€ä½éƒ½æ˜¯.ï¼Œæ—¢ç„¶æ˜¯é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ï¼Œé€šå¸¸éƒ½ä¼šçœç•¥ï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚DNSçš„æ—¶å€™ä¼šè‡ªåŠ¨åŠ ä¸Šï¼Œæ‰€æœ‰ç½‘å€çœŸæ­£çš„è§£æè¿‡ç¨‹ä¸º: <code>.</code> -&gt; <code>.com</code> -&gt; <code>google.com</code>. -&gt; <code>www.google.com</code>.ã€‚</p><h4 id="DNSä¼˜åŒ–"><a href="#DNSä¼˜åŒ–" class="headerlink" title="DNSä¼˜åŒ–"></a>DNSä¼˜åŒ–</h4><p>DNSç¼“å­˜å’ŒDNSè´Ÿè½½å‡è¡¡</p><h4 id="DNSç¼“å­˜"><a href="#DNSç¼“å­˜" class="headerlink" title="DNSç¼“å­˜"></a>DNSç¼“å­˜</h4><p>DNSå­˜åœ¨ç€å¤šçº§ç¼“å­˜ï¼Œä»ç¦»æµè§ˆå™¨çš„è·ç¦»æ’åºçš„è¯ï¼Œæœ‰ä»¥ä¸‹å‡ ç§: æµè§ˆå™¨ç¼“å­˜ï¼Œç³»ç»Ÿç¼“å­˜ï¼Œè·¯ç”±å™¨ç¼“å­˜ï¼ŒIPSæœåŠ¡å™¨ç¼“å­˜ï¼Œæ ¹åŸŸåæœåŠ¡å™¨ç¼“å­˜ï¼Œé¡¶çº§åŸŸåæœåŠ¡å™¨ç¼“å­˜ï¼Œä¸»åŸŸåæœåŠ¡å™¨ç¼“å­˜ã€‚</p><ol><li>åœ¨ä½ çš„chromeæµè§ˆå™¨ä¸­è¾“å…¥:chrome://dns/ï¼Œä½ å¯ä»¥çœ‹åˆ°chromeæµè§ˆå™¨çš„DNSç¼“å­˜ã€‚</li><li>ç³»ç»Ÿç¼“å­˜ä¸»è¦å­˜åœ¨/etc/hosts(Linuxç³»ç»Ÿ)ä¸­:</li></ol><p><img src="https://user-gold-cdn.xitu.io/2018/11/19/1672a566f8cebd65" alt="avatar"></p><p>DNSè´Ÿè½½å‡è¡¡</p><p>çœŸå®çš„äº’è”ç½‘ä¸–ç•ŒèƒŒåå­˜åœ¨æˆåƒä¸Šç™¾å°æœåŠ¡å™¨ï¼Œå¤§å‹çš„ç½‘ç«™ç”šè‡³æ›´å¤šã€‚ä½†æ˜¯åœ¨ç”¨æˆ·çš„çœ¼ä¸­ï¼Œå®ƒéœ€è¦çš„åªæ˜¯å¤„ç†ä»–çš„è¯·æ±‚ï¼Œå“ªå°æœºå™¨å¤„ç†è¯·æ±‚å¹¶ä¸é‡è¦ã€‚DNSå¯ä»¥è¿”å›ä¸€ä¸ªåˆé€‚çš„æœºå™¨çš„IPç»™ç”¨æˆ·ï¼Œä¾‹å¦‚å¯ä»¥æ ¹æ®æ¯å°æœºå™¨çš„è´Ÿè½½é‡ï¼Œè¯¥æœºå™¨ç¦»ç”¨æˆ·åœ°ç†ä½ç½®çš„è·ç¦»ç­‰ç­‰ï¼Œè¿™ç§è¿‡ç¨‹å°±æ˜¯DNSè´Ÿè½½å‡è¡¡ï¼Œåˆå«åšDNSé‡å®šå‘</p><h3 id="3-å»ºç«‹TCPè¿æ¥"><a href="#3-å»ºç«‹TCPè¿æ¥" class="headerlink" title="3.å»ºç«‹TCPè¿æ¥"></a>3.å»ºç«‹TCPè¿æ¥</h3><p>åœ¨é€šè¿‡DNSåŸŸåè§£æåï¼Œè·å–åˆ°äº†æœåŠ¡å™¨çš„IPåœ°å€ï¼Œåœ¨è·å–åˆ°IPåœ°å€åï¼Œä¾¿ä¼šå¼€å§‹å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œè¿™æ˜¯ç”±TCPåè®®å®Œæˆçš„ï¼Œä¸»è¦é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹è¿›è¡Œè¿æ¥ã€‚</p><ol><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼š å»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€synåŒ…ï¼ˆsyn=jï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼›</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼š æœåŠ¡å™¨æ”¶åˆ°synåŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„SYNï¼ˆack=j+1ï¼‰ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ªSYNåŒ…ï¼ˆsyn=kï¼‰ï¼Œå³SYN+ACKåŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ï¼›</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼š å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKåŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack=k+1ï¼‰ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDï¼ˆTCPè¿æ¥æˆåŠŸï¼‰çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚ è¿™é‡Œéœ€è¦äº†è§£ä¸‹<strong>ACKï¼ŒSYN</strong>çš„æ„ä¹‰</li></ol><p><img src="https://user-gold-cdn.xitu.io/2018/11/19/1672a5a206a7e309" alt="avatar"><br>å®ŒæˆTCPè¿æ¥åå¼€ä½¿å‘æœåŠ¡å™¨è¿›è¡Œè¯·æ±‚</p><h3 id="4-å‘æœåŠ¡å™¨å‘é€è¯·æ±‚"><a href="#4-å‘æœåŠ¡å™¨å‘é€è¯·æ±‚" class="headerlink" title="4.å‘æœåŠ¡å™¨å‘é€è¯·æ±‚"></a>4.å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</h3><p>å®Œæ•´çš„HTTPè¯·æ±‚åŒ…å«<strong>è¯·æ±‚èµ·å§‹è¡Œã€è¯·æ±‚å¤´éƒ¨ã€è¯·æ±‚ä¸»ä½“</strong>ä¸‰éƒ¨åˆ†ã€‚<br><img src="https://user-gold-cdn.xitu.io/2018/11/19/1672a5d02bc0d8fd" alt="avatar"></p><h3 id="5-æœåŠ¡å™¨æ¥å—å“åº”"><a href="#5-æœåŠ¡å™¨æ¥å—å“åº”" class="headerlink" title="5.æœåŠ¡å™¨æ¥å—å“åº”"></a>5.æœåŠ¡å™¨æ¥å—å“åº”</h3><p>æœåŠ¡å™¨åœ¨æ”¶åˆ°æµè§ˆå™¨å‘é€çš„HTTPè¯·æ±‚ä¹‹åï¼Œä¼šå°†æ”¶åˆ°çš„HTTPæŠ¥æ–‡å°è£…æˆHTTPçš„Requestå¯¹è±¡ï¼Œå¹¶é€šè¿‡ä¸åŒçš„WebæœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œçš„ç»“æœä»¥HTTPçš„Responseå¯¹è±¡è¿”å›ï¼Œä¸»è¦åŒ…æ‹¬çŠ¶æ€ç ï¼Œå“åº”å¤´ï¼Œå“åº”æŠ¥æ–‡ä¸‰ä¸ªéƒ¨åˆ†ã€‚<br>çŠ¶æ€ç ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†:</p><p>1xxï¼šæŒ‡ç¤ºä¿¡æ¯â€“è¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†ã€‚<br>2xxï¼šæˆåŠŸâ€“è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ã€ç†è§£ã€æ¥å—ã€‚<br>3xxï¼šé‡å®šå‘â€“è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œã€‚<br>4xxï¼šå®¢æˆ·ç«¯é”™è¯¯â€“è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°ã€‚<br>5xxï¼šæœåŠ¡å™¨ç«¯é”™è¯¯â€“æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚ã€‚<br><strong>å“åº”å¤´</strong>ä¸»è¦ç”±Cache-Controlã€ Connectionã€Dateã€Pragmaç­‰ç»„æˆã€‚<br><strong>å“åº”ä½“</strong>ä¸ºæœåŠ¡å™¨è¿”å›ç»™æµè§ˆå™¨çš„ä¿¡æ¯ï¼Œä¸»è¦ç”±HTMLï¼Œcssï¼Œjsï¼Œå›¾ç‰‡æ–‡ä»¶ç»„æˆã€‚</p><h3 id="6-é¡µé¢æ¸²æŸ“"><a href="#6-é¡µé¢æ¸²æŸ“" class="headerlink" title="6.é¡µé¢æ¸²æŸ“"></a>6.é¡µé¢æ¸²æŸ“</h3><p>â€ƒå¦‚æœè¯´å“åº”çš„å†…å®¹æ˜¯HTMLæ–‡æ¡£çš„è¯ï¼Œå°±éœ€è¦æµè§ˆå™¨è¿›è¡Œè§£ææ¸²æŸ“å‘ˆç°ç»™ç”¨æˆ·ã€‚æ•´ä¸ªè¿‡ç¨‹æ¶‰åŠä¸¤ä¸ªæ–¹é¢ï¼šè§£æå’Œæ¸²æŸ“ã€‚åœ¨æ¸²æŸ“é¡µé¢ä¹‹å‰ï¼Œéœ€è¦æ„å»ºDOMæ ‘å’ŒCSSOMæ ‘ã€‚ â€ƒåœ¨æµè§ˆå™¨è¿˜æ²¡æ¥æ”¶åˆ°å®Œæ•´çš„ HTML æ–‡ä»¶æ—¶ï¼Œå®ƒå°±å¼€å§‹æ¸²æŸ“é¡µé¢äº†ï¼Œåœ¨é‡åˆ°å¤–éƒ¨é“¾å…¥çš„è„šæœ¬æ ‡ç­¾æˆ–æ ·å¼æ ‡ç­¾æˆ–å›¾ç‰‡æ—¶ï¼Œä¼šå†æ¬¡å‘é€ HTTP è¯·æ±‚é‡å¤ä¸Šè¿°çš„æ­¥éª¤ã€‚åœ¨æ”¶åˆ° CSS æ–‡ä»¶åä¼šå¯¹å·²ç»æ¸²æŸ“çš„é¡µé¢é‡æ–°æ¸²æŸ“ï¼ŒåŠ å…¥å®ƒä»¬åº”æœ‰çš„æ ·å¼ï¼Œå›¾ç‰‡æ–‡ä»¶åŠ è½½å®Œç«‹åˆ»æ˜¾ç¤ºåœ¨ç›¸åº”ä½ç½®ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè§¦å‘é¡µé¢çš„é‡ç»˜æˆ–é‡æ’ã€‚è¿™é‡Œå°±æ¶‰åŠäº†ä¸¤ä¸ªé‡è¦æ¦‚å¿µï¼š<strong>Reflow</strong>å’Œ<strong>Repaint</strong>ã€‚<br><img src="https://user-gold-cdn.xitu.io/2018/11/19/1672a637a7508bca" alt="avatar"></p><ol><li>Reflowï¼Œä¹Ÿç§°ä½œLayoutï¼Œä¸­æ–‡å«å›æµï¼Œä¸€èˆ¬æ„å‘³ç€å…ƒç´ çš„å†…å®¹ã€ç»“æ„ã€ä½ç½®æˆ–å°ºå¯¸å‘ç”Ÿäº†å˜åŒ–ï¼Œéœ€è¦é‡æ–°è®¡ç®—æ ·å¼å’Œæ¸²æŸ“æ ‘ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºReflowã€‚  </li><li>Repaintï¼Œä¸­æ–‡é‡ç»˜ï¼Œæ„å‘³ç€å…ƒç´ å‘ç”Ÿçš„æ”¹å˜åªæ˜¯å½±å“äº†å…ƒç´ çš„ä¸€äº›å¤–è§‚ä¹‹ç±»çš„æ—¶å€™ï¼ˆä¾‹å¦‚ï¼ŒèƒŒæ™¯è‰²ï¼Œè¾¹æ¡†é¢œè‰²ï¼Œæ–‡å­—é¢œè‰²ç­‰ï¼‰ï¼Œæ­¤æ—¶åªéœ€è¦åº”ç”¨æ–°æ ·å¼ç»˜åˆ¶è¿™ä¸ªå…ƒç´ å°±OKäº†ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºRepaintã€‚</li></ol><p>æ‰€ä»¥è¯´Reflowçš„æˆæœ¬æ¯”Repaintçš„æˆæœ¬é«˜å¾—å¤šçš„å¤šã€‚DOMæ ‘é‡Œçš„æ¯ä¸ªç»“ç‚¹éƒ½ä¼šæœ‰reflowæ–¹æ³•ï¼Œä¸€ä¸ªç»“ç‚¹çš„reflowå¾ˆæœ‰å¯èƒ½å¯¼è‡´å­ç»“ç‚¹ï¼Œç”šè‡³çˆ¶ç‚¹ä»¥åŠåŒçº§ç»“ç‚¹çš„reflowã€‚</p><h3 id="7-å…³é—­TCPè¿æ¥æˆ–ç»§ç»­ä¿æŒè¿æ¥"><a href="#7-å…³é—­TCPè¿æ¥æˆ–ç»§ç»­ä¿æŒè¿æ¥" class="headerlink" title="7.å…³é—­TCPè¿æ¥æˆ–ç»§ç»­ä¿æŒè¿æ¥"></a>7.å…³é—­TCPè¿æ¥æˆ–ç»§ç»­ä¿æŒè¿æ¥</h3><p>é€šè¿‡å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥(FIN ACK, ACK, FIN ACK, ACK)ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/11/19/1672a64fbd06d50d" alt="avatar"></p><ol><li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šClientå‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­Clientåˆ°Serverçš„æ•°æ®ä¼ é€ï¼ŒClientè¿›å…¥FIN_WAIT_1çŠ¶æ€ã€‚</li><li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šServeræ”¶åˆ°FINåï¼Œå‘é€ä¸€ä¸ªACKç»™Clientï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼ˆä¸SYNç›¸åŒï¼Œä¸€ä¸ªFINå ç”¨ä¸€ä¸ªåºå·ï¼‰ï¼ŒServerè¿›å…¥CLOSE_WAITçŠ¶æ€ã€‚</li><li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šServerå‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­Serveråˆ°Clientçš„æ•°æ®ä¼ é€ï¼ŒServerè¿›å…¥LAST_ACKçŠ¶æ€ã€‚</li><li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šClientæ”¶åˆ°FINåï¼ŒClientè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œæ¥ç€å‘é€ä¸€ä¸ªACKç»™Serverï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼ŒServerè¿›å…¥CLOSEDçŠ¶æ€ï¼Œå®Œæˆå››æ¬¡æŒ¥æ‰‹ã€‚</li></ol><blockquote><p>ä½œè€…ï¼šrosenWang<br>é“¾æ¥ï¼š<a href="https://juejin.im/post/5bf23afa6fb9a049be5d1494" target="_blank" rel="noopener">https://juejin.im/post/5bf23afa6fb9a049be5d1494</a><br>æ¥æºï¼šæ˜é‡‘</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;åœ¨æµè§ˆå™¨ä¸­è¾“å…¥urlåˆ°æ˜¾ç¤ºç½‘é¡µä¸»è¦åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š &lt;strong&gt;ç½‘ç»œé€šä¿¡å’Œé¡µé¢æ¸²æŸ“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;äº’è”ç½‘å†…å„ç½‘ç»œè®¾å¤‡é—´çš„é€šä¿¡éƒ½éµå¾ªTCP/IPåè®®ï¼Œåˆ©ç”¨TCP/IPåè®®æ—è¿›è¡Œç½‘ç»œé€šä¿¡æ—¶ï¼Œä¼šé€šè¿‡åˆ†å±‚é¡ºåºä¸å¯¹æ–¹è¿›è¡Œé€šä¿¡ã€‚åˆ†å±‚ç”±é«˜åˆ°ä½åˆ†åˆ«ä¸ºï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€‚å‘é€ç«¯ä»åº”ç”¨å±‚å¾€ä¸‹èµ°ï¼Œæ¥æ”¶ç«¯ä»æ•°æ®é“¾è·¯å±‚ç½‘ä¸Šèµ°&lt;/p&gt;
    
    </summary>
    
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="DNS" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/DNS/"/>
    
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="DNS" scheme="https://heiyehk.github.io/blog/tags/DNS/"/>
    
  </entry>
  
  <entry>
    <title>11é“æµè§ˆå™¨åŸç†é¢è¯•é¢˜</title>
    <link href="https://heiyehk.github.io/blog/11%E9%81%93%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <id>https://heiyehk.github.io/blog/11%E9%81%93%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86%E9%9D%A2%E8%AF%95%E9%A2%98/</id>
    <published>2020-04-30T04:53:59.000Z</published>
    <updated>2020-04-30T09:27:28.029Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›"><a href="#å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›" class="headerlink" title="å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›?"></a>å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›?</h3><table><thead><tr><th>æµè§ˆå™¨/RunTime</th><th>å†…æ ¸ï¼ˆæ¸²æŸ“å¼•æ“ï¼‰</th><th>JavaScript å¼•æ“</th></tr></thead><tbody><tr><td>Chrome</td><td>Blinkï¼ˆ28~ï¼‰Webkitï¼ˆChrome 27ï¼‰</td><td>V8</td></tr><tr><td>FireFox</td><td>Gecko</td><td>SpiderMonkey</td></tr><tr><td>Safari</td><td>Webkit</td><td>JavaScriptCore</td></tr><tr><td>Edge</td><td>EdgeHTML</td><td>Chakra(for JavaScript)</td></tr><tr><td>IE</td><td>Trident</td><td>Chakra(for JScript)</td></tr><tr><td>PhantomJS</td><td>Webkit</td><td>JavaScriptCore</td></tr><tr><td>Node.js</td><td>-</td><td>V8</td></tr></tbody></table><a id="more"></a><h3 id="æµè§ˆå™¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æµè§ˆå™¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æµè§ˆå™¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æµè§ˆå™¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol><li>ç”¨æˆ·ç•Œé¢ - åŒ…æ‹¬åœ°å€æ ã€å‰è¿›/åé€€æŒ‰é’®ã€ä¹¦ç­¾èœå•ç­‰ã€‚é™¤äº†æµè§ˆå™¨ä¸»çª—å£æ˜¾ç¤ºçš„æ‚¨è¯·æ±‚çš„é¡µé¢å¤–ï¼Œå…¶ä»–æ˜¾ç¤ºçš„å„ä¸ªéƒ¨åˆ†éƒ½å±äºç”¨æˆ·ç•Œé¢ã€‚</li><li>æµè§ˆå™¨å¼•æ“ - åœ¨ç”¨æˆ·ç•Œé¢å’Œå‘ˆç°å¼•æ“ä¹‹é—´ä¼ é€æŒ‡ä»¤ã€‚</li><li>å‘ˆç°å¼•æ“ - è´Ÿè´£æ˜¾ç¤ºè¯·æ±‚çš„å†…å®¹ã€‚å¦‚æœè¯·æ±‚çš„å†…å®¹æ˜¯ HTMLï¼Œå®ƒå°±è´Ÿè´£è§£æ HTML å’Œ CSS å†…å®¹ï¼Œå¹¶å°†è§£æåçš„å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</li><li>ç½‘ç»œ - ç”¨äºç½‘ç»œè°ƒç”¨ï¼Œæ¯”å¦‚ HTTP è¯·æ±‚ã€‚å…¶æ¥å£ä¸å¹³å°æ— å…³ï¼Œå¹¶ä¸ºæ‰€æœ‰å¹³å°æä¾›åº•å±‚å®ç°ã€‚</li><li>ç”¨æˆ·ç•Œé¢åç«¯ - ç”¨äºç»˜åˆ¶åŸºæœ¬çš„çª—å£å°éƒ¨ä»¶ï¼Œæ¯”å¦‚ç»„åˆæ¡†å’Œçª—å£ã€‚å…¶å…¬å¼€äº†ä¸å¹³å°æ— å…³çš„é€šç”¨æ¥å£ï¼Œè€Œåœ¨åº•å±‚ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢æ–¹æ³•ã€‚</li><li>JavaScript è§£é‡Šå™¨ã€‚ç”¨äºè§£æå’Œæ‰§è¡Œ JavaScript ä»£ç ã€‚</li><li>æ•°æ®å­˜å‚¨ã€‚è¿™æ˜¯æŒä¹…å±‚ã€‚æµè§ˆå™¨éœ€è¦åœ¨ç¡¬ç›˜ä¸Šä¿å­˜å„ç§æ•°æ®ï¼Œä¾‹å¦‚ Cookieã€‚æ–°çš„ HTML è§„èŒƒ (HTML5) å®šä¹‰äº†â€œç½‘ç»œæ•°æ®åº“â€ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´ï¼ˆä½†æ˜¯è½»ä¾¿ï¼‰çš„æµè§ˆå™¨å†…æ•°æ®åº“ã€‚</li></ol><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå’Œå¤§å¤šæ•°æµè§ˆå™¨ä¸åŒï¼ŒChrome æµè§ˆå™¨çš„æ¯ä¸ªæ ‡ç­¾é¡µéƒ½åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå‘ˆç°å¼•æ“å®ä¾‹ã€‚æ¯ä¸ªæ ‡ç­¾é¡µéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚</p><h3 id="æµè§ˆå™¨æ˜¯å¦‚ä½•æ¸²æŸ“UIçš„ï¼Ÿ"><a href="#æµè§ˆå™¨æ˜¯å¦‚ä½•æ¸²æŸ“UIçš„ï¼Ÿ" class="headerlink" title="æµè§ˆå™¨æ˜¯å¦‚ä½•æ¸²æŸ“UIçš„ï¼Ÿ"></a>æµè§ˆå™¨æ˜¯å¦‚ä½•æ¸²æŸ“UIçš„ï¼Ÿ</h3><ol><li>æµè§ˆå™¨è·å–HTMLæ–‡ä»¶ï¼Œç„¶åå¯¹æ–‡ä»¶è¿›è¡Œè§£æï¼Œå½¢æˆ<code>DOM Tree</code></li><li>ä¸æ­¤åŒæ—¶ï¼Œè¿›è¡Œ<code>CSS</code>è§£æï¼Œç”Ÿæˆ<code>Style Rules</code></li><li>æ¥ç€å°†<code>DOM Tree</code>ä¸<code>Style Rules</code>åˆæˆä¸º <code>Render Tree</code></li><li>æ¥ç€è¿›å…¥å¸ƒå±€<code>ï¼ˆLayoutï¼‰</code>é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ†é…ä¸€ä¸ªåº”å‡ºç°åœ¨å±å¹•ä¸Šçš„ç¡®åˆ‡åæ ‡</li><li>éšåè°ƒç”¨<code>GPU</code>è¿›è¡Œç»˜åˆ¶<code>ï¼ˆPaintï¼‰</code>ï¼Œéå†<code>Render Tree</code>çš„èŠ‚ç‚¹ï¼Œå¹¶å°†å…ƒç´ å‘ˆç°å‡ºæ¥</li></ol><h3 id="æµè§ˆå™¨å¦‚ä½•è§£æcssé€‰æ‹©å™¨ï¼Ÿ"><a href="#æµè§ˆå™¨å¦‚ä½•è§£æcssé€‰æ‹©å™¨ï¼Ÿ" class="headerlink" title="æµè§ˆå™¨å¦‚ä½•è§£æcssé€‰æ‹©å™¨ï¼Ÿ"></a>æµè§ˆå™¨å¦‚ä½•è§£æcssé€‰æ‹©å™¨ï¼Ÿ</h3><p>æµè§ˆå™¨ä¼šã€ä»å³å¾€å·¦ã€è§£æCSSé€‰æ‹©å™¨ã€‚<br>æˆ‘ä»¬çŸ¥é“<code>DOM Tree</code>ä¸<code>Style Rules</code>åˆæˆä¸º <code>Render Tree</code>ï¼Œå®é™…ä¸Šæ˜¯éœ€è¦å°†<code>Style Rules</code>é™„ç€åˆ°DOM Treeä¸Šï¼Œå› æ­¤éœ€è¦æ ¹æ®é€‰æ‹©å™¨æä¾›çš„ä¿¡æ¯å¯¹<code>DOM Tree</code>è¿›è¡Œéå†ï¼Œæ‰èƒ½å°†æ ·å¼é™„ç€åˆ°å¯¹åº”çš„DOMå…ƒç´ ä¸Šã€‚<br>ä»¥ä¸‹è¿™æ®µcssä¸ºä¾‹</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mod-nav</span> <span class="selector-tag">h3</span> <span class="selector-tag">span</span> &#123;<span class="attribute">font-size</span>: <span class="number">16px</span>;&#125;</span><br></pre></td></tr></table></figure><p>è‹¥ä»å·¦å‘å³çš„åŒ¹é…ï¼Œè¿‡ç¨‹æ˜¯ï¼š  </p><ol><li>ä» <code>.mod-nav</code> å¼€å§‹ï¼Œéå†å­èŠ‚ç‚¹ <code>header</code> å’Œå­èŠ‚ç‚¹ <code>div</code></li><li>ç„¶åå„è‡ªå‘å­èŠ‚ç‚¹éå†ã€‚åœ¨å³ä¾§ <code>div</code> çš„åˆ†æ”¯ä¸­</li><li>æœ€åéå†åˆ°å¶å­èŠ‚ç‚¹ <code>a</code> ï¼Œå‘ç°ä¸ç¬¦åˆè§„åˆ™ï¼Œéœ€è¦å›æº¯åˆ° <code>ul</code> èŠ‚ç‚¹ï¼Œå†éå†ä¸‹ä¸€ä¸ª <code>li-a</code>ï¼Œä¸€é¢—<code>DOM</code>æ ‘çš„èŠ‚ç‚¹åŠ¨ä¸åŠ¨ä¸Šåƒï¼Œè¿™ç§æ•ˆç‡å¾ˆä½ã€‚</li></ol><p>å¦‚æœä»å³è‡³å·¦çš„åŒ¹é…ï¼š  </p><ol><li>å…ˆæ‰¾åˆ°æ‰€æœ‰çš„æœ€å³èŠ‚ç‚¹ <code>span</code>ï¼Œå¯¹äºæ¯ä¸€ä¸ª <code>span</code>ï¼Œå‘ä¸Šå¯»æ‰¾èŠ‚ç‚¹ <code>h3</code></li><li>ç”± <code>h3</code>å†å‘ä¸Šå¯»æ‰¾ <code>class=mod-nav</code> çš„èŠ‚ç‚¹</li><li>æœ€åæ‰¾åˆ°æ ¹å…ƒç´  <code>html</code> åˆ™ç»“æŸè¿™ä¸ªåˆ†æ”¯çš„éå†ã€‚</li></ol><p>åè€…åŒ¹é…æ€§èƒ½æ›´å¥½ï¼Œæ˜¯å› ä¸ºä»å³å‘å·¦çš„åŒ¹é…åœ¨ç¬¬ä¸€æ­¥å°±ç­›é€‰æ‰äº†å¤§é‡çš„ä¸ç¬¦åˆæ¡ä»¶çš„æœ€å³èŠ‚ç‚¹ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ï¼›è€Œä»å·¦å‘å³çš„åŒ¹é…è§„åˆ™çš„æ€§èƒ½éƒ½æµªè´¹åœ¨äº†å¤±è´¥çš„æŸ¥æ‰¾ä¸Šé¢ã€‚</p><h3 id="DOM-Treeæ˜¯å¦‚ä½•æ„å»ºçš„ï¼Ÿ"><a href="#DOM-Treeæ˜¯å¦‚ä½•æ„å»ºçš„ï¼Ÿ" class="headerlink" title="DOM Treeæ˜¯å¦‚ä½•æ„å»ºçš„ï¼Ÿ"></a>DOM Treeæ˜¯å¦‚ä½•æ„å»ºçš„ï¼Ÿ</h3><ol><li>è½¬ç : æµè§ˆå™¨å°†æ¥æ”¶åˆ°çš„äºŒè¿›åˆ¶æ•°æ®æŒ‰ç…§æŒ‡å®šç¼–ç æ ¼å¼è½¬åŒ–ä¸ºHTMLå­—ç¬¦ä¸²</li><li>ç”Ÿæˆ<code>Tokens</code>: ä¹‹åå¼€å§‹parserï¼Œæµè§ˆå™¨ä¼šå°†HTMLå­—ç¬¦ä¸²è§£ææˆ<code>Tokens</code></li><li>æ„å»º<code>Nodes</code>: å¯¹Nodeæ·»åŠ ç‰¹å®šçš„å±æ€§ï¼Œé€šè¿‡æŒ‡é’ˆç¡®å®š <code>Node</code> çš„çˆ¶ã€å­ã€å…„å¼Ÿå…³ç³»å’Œæ‰€å± <code>treeScope</code></li><li>ç”Ÿæˆ<code>DOM Tree</code>: é€šè¿‡<code>node</code>åŒ…å«çš„æŒ‡é’ˆç¡®å®šçš„å…³ç³»æ„å»ºå‡º<code>DOM Tree</code></li></ol><h3 id="æµè§ˆå™¨é‡ç»˜ä¸é‡æ’çš„åŒºåˆ«ï¼Ÿ"><a href="#æµè§ˆå™¨é‡ç»˜ä¸é‡æ’çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="æµè§ˆå™¨é‡ç»˜ä¸é‡æ’çš„åŒºåˆ«ï¼Ÿ"></a>æµè§ˆå™¨é‡ç»˜ä¸é‡æ’çš„åŒºåˆ«ï¼Ÿ</h3><ul><li>é‡æ’: éƒ¨åˆ†æ¸²æŸ“æ ‘ï¼ˆæˆ–è€…æ•´ä¸ªæ¸²æŸ“æ ‘ï¼‰éœ€è¦é‡æ–°åˆ†æå¹¶ä¸”èŠ‚ç‚¹å°ºå¯¸éœ€è¦é‡æ–°è®¡ç®—ï¼Œè¡¨ç°ä¸ºé‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œé‡æ–°æ’åˆ—å…ƒç´ </li><li>é‡ç»˜: ç”±äºèŠ‚ç‚¹çš„å‡ ä½•å±æ€§å‘ç”Ÿæ”¹å˜æˆ–è€…ç”±äºæ ·å¼å‘ç”Ÿæ”¹å˜ï¼Œä¾‹å¦‚æ”¹å˜å…ƒç´ èƒŒæ™¯è‰²æ—¶ï¼Œå±å¹•ä¸Šçš„éƒ¨åˆ†å†…å®¹éœ€è¦æ›´æ–°ï¼Œè¡¨ç°ä¸ºæŸäº›å…ƒç´ çš„å¤–è§‚è¢«æ”¹å˜</li></ul><p>å•å•æ”¹å˜å…ƒç´ çš„å¤–è§‚ï¼Œè‚¯å®šä¸ä¼šå¼•èµ·ç½‘é¡µé‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œä½†å½“æµè§ˆå™¨å®Œæˆé‡æ’ä¹‹åï¼Œå°†ä¼šé‡æ–°ç»˜åˆ¶å—åˆ°æ­¤æ¬¡é‡æ’å½±å“çš„éƒ¨åˆ†</p><p>é‡æ’å’Œé‡ç»˜ä»£ä»·æ˜¯é«˜æ˜‚çš„ï¼Œå®ƒä»¬ä¼šç ´åç”¨æˆ·ä½“éªŒï¼Œå¹¶ä¸”è®©UIå±•ç¤ºéå¸¸è¿Ÿç¼“ï¼Œè€Œç›¸æ¯”ä¹‹ä¸‹é‡æ’çš„æ€§èƒ½å½±å“æ›´å¤§ï¼Œåœ¨ä¸¤è€…æ— æ³•é¿å…çš„æƒ…å†µä¸‹ï¼Œä¸€èˆ¬æˆ‘ä»¬å®å¯é€‰æ‹©ä»£ä»·æ›´å°çš„é‡ç»˜ã€‚</p><p>ã€é‡ç»˜ã€ä¸ä¸€å®šä¼šå‡ºç°ã€é‡æ’ã€ï¼Œã€é‡æ’ã€å¿…ç„¶ä¼šå‡ºç°ã€é‡ç»˜ã€ã€‚</p><h3 id="å¦‚ä½•è§¦å‘é‡æ’å’Œé‡ç»˜ï¼Ÿ"><a href="#å¦‚ä½•è§¦å‘é‡æ’å’Œé‡ç»˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§¦å‘é‡æ’å’Œé‡ç»˜ï¼Ÿ"></a>å¦‚ä½•è§¦å‘é‡æ’å’Œé‡ç»˜ï¼Ÿ</h3><p>ä»»ä½•æ”¹å˜ç”¨æ¥æ„å»ºæ¸²æŸ“æ ‘çš„ä¿¡æ¯éƒ½ä¼šå¯¼è‡´ä¸€æ¬¡é‡æ’æˆ–é‡ç»˜ï¼š</p><ul><li>æ·»åŠ ã€åˆ é™¤ã€æ›´æ–°DOMèŠ‚ç‚¹</li><li>é€šè¿‡<code>display: none</code>éšè—ä¸€ä¸ªDOMèŠ‚ç‚¹-è§¦å‘é‡æ’å’Œé‡ç»˜</li><li>é€šè¿‡<code>visibility: hidden</code>éšè—ä¸€ä¸ªDOMèŠ‚ç‚¹-åªè§¦å‘é‡ç»˜ï¼Œå› ä¸ºæ²¡æœ‰å‡ ä½•å˜åŒ–</li><li>ç§»åŠ¨æˆ–è€…ç»™é¡µé¢ä¸­çš„<code>DOM</code>èŠ‚ç‚¹æ·»åŠ åŠ¨ç”»</li><li>æ·»åŠ ä¸€ä¸ªæ ·å¼è¡¨ï¼Œè°ƒæ•´æ ·å¼å±æ€§</li><li>ç”¨æˆ·è¡Œä¸ºï¼Œä¾‹å¦‚è°ƒæ•´çª—å£å¤§å°ï¼Œæ”¹å˜å­—å·ï¼Œæˆ–è€…æ»šåŠ¨ã€‚</li></ul><h3 id="å¦‚ä½•é¿å…é‡ç»˜æˆ–è€…é‡æ’ï¼Ÿ"><a href="#å¦‚ä½•é¿å…é‡ç»˜æˆ–è€…é‡æ’ï¼Ÿ" class="headerlink" title="å¦‚ä½•é¿å…é‡ç»˜æˆ–è€…é‡æ’ï¼Ÿ"></a>å¦‚ä½•é¿å…é‡ç»˜æˆ–è€…é‡æ’ï¼Ÿ</h3><h4 id="é›†ä¸­æ”¹å˜æ ·å¼"><a href="#é›†ä¸­æ”¹å˜æ ·å¼" class="headerlink" title="é›†ä¸­æ”¹å˜æ ·å¼"></a>é›†ä¸­æ”¹å˜æ ·å¼</h4><p>æˆ‘ä»¬å¾€å¾€é€šè¿‡æ”¹å˜classçš„æ–¹å¼æ¥é›†ä¸­æ”¹å˜æ ·å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯é»‘è‰²ç³»æ ·å¼</span></span><br><span class="line"><span class="keyword">const</span> theme = isDark ? <span class="string">'dark'</span> : <span class="string">'light'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®åˆ¤æ–­æ¥è®¾ç½®ä¸åŒçš„class</span></span><br><span class="line">ele.setAttribute(<span class="string">'className'</span>, theme)</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨DocumentFragment"><a href="#ä½¿ç”¨DocumentFragment" class="headerlink" title="ä½¿ç”¨DocumentFragment"></a>ä½¿ç”¨DocumentFragment</h4><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>createDocumentFragment</code>åˆ›å»ºä¸€ä¸ªæ¸¸ç¦»äºDOMæ ‘ä¹‹å¤–çš„èŠ‚ç‚¹ï¼Œç„¶ååœ¨æ­¤èŠ‚ç‚¹ä¸Šæ‰¹é‡æ“ä½œï¼Œæœ€åæ’å…¥DOMæ ‘ä¸­ï¼Œå› æ­¤åªè§¦å‘ä¸€æ¬¡é‡æ’</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">  <span class="keyword">let</span> node = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span><br><span class="line">  node.innerHTML = i;</span><br><span class="line">  fragment.appendChild(node);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(fragment);</span><br></pre></td></tr></table></figure><h4 id="æå‡ä¸ºåˆæˆå±‚"><a href="#æå‡ä¸ºåˆæˆå±‚" class="headerlink" title="æå‡ä¸ºåˆæˆå±‚"></a>æå‡ä¸ºåˆæˆå±‚</h4><p>å°†å…ƒç´ æå‡ä¸ºåˆæˆå±‚æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li>åˆæˆå±‚çš„ä½å›¾ï¼Œä¼šäº¤ç”± <code>GPU</code> åˆæˆï¼Œæ¯” <code>CPU</code> å¤„ç†è¦å¿«</li><li>å½“éœ€è¦ <code>repaint</code> æ—¶ï¼Œåªéœ€è¦ <code>repaint</code> æœ¬èº«ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å±‚</li><li>å¯¹äº <code>transform</code> å’Œ <code>opacity</code> æ•ˆæœï¼Œä¸ä¼šè§¦å‘ <code>layout</code> å’Œ <code>paint</code></li></ul><p>æå‡åˆæˆå±‚çš„æœ€å¥½æ–¹å¼æ˜¯ä½¿ç”¨ <code>CSS</code> çš„ <code>will-change</code> å±æ€§ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#target</span> &#123;</span><br><span class="line">  <span class="attribute">will-change</span>: transform;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å…³äºåˆæˆå±‚çš„è¯¦è§£è¯·ç§»æ­¥<a href="http://taobaofed.org/blog/2016/04/25/performance-composite/" target="_blank" rel="noopener">æ— çº¿æ€§èƒ½ä¼˜åŒ–ï¼šComposite</a></p></blockquote><h3 id="å‰ç«¯å¦‚ä½•å®ç°å³æ—¶é€šè®¯ï¼Ÿ"><a href="#å‰ç«¯å¦‚ä½•å®ç°å³æ—¶é€šè®¯ï¼Ÿ" class="headerlink" title="å‰ç«¯å¦‚ä½•å®ç°å³æ—¶é€šè®¯ï¼Ÿ"></a>å‰ç«¯å¦‚ä½•å®ç°å³æ—¶é€šè®¯ï¼Ÿ</h3><h4 id="çŸ­è½®è¯¢"><a href="#çŸ­è½®è¯¢" class="headerlink" title="çŸ­è½®è¯¢"></a>çŸ­è½®è¯¢</h4><p>çŸ­è½®è¯¢çš„åŸç†å¾ˆç®€å•ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å®¢æˆ·ç«¯å°±å‘å‡ºä¸€ä¸ªè¯·æ±‚ï¼Œå»è·å–æœåŠ¡å™¨æœ€æ–°çš„æ•°æ®ï¼Œä¸€å®šç¨‹åº¦ä¸Šæ¨¡æ‹Ÿå®ç°äº†å³æ—¶é€šè®¯ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§å¼ºï¼Œå®ç°éå¸¸ç®€å•</li><li>ç¼ºç‚¹ï¼šå»¶è¿Ÿæ€§é«˜ï¼Œéå¸¸æ¶ˆè€—è¯·æ±‚èµ„æºï¼Œå½±å“æ€§èƒ½</li></ul><h4 id="comet"><a href="#comet" class="headerlink" title="comet"></a>comet</h4><p>cometæœ‰ä¸¤ç§ä¸»è¦å®ç°æ‰‹æ®µï¼Œä¸€ç§æ˜¯åŸºäº <code>AJAX</code> çš„é•¿è½®è¯¢<code>ï¼ˆlong-pollingï¼‰</code>æ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯åŸºäº <code>Iframe</code> åŠ <code>htmlfile</code> çš„<code>æµï¼ˆstreamingï¼‰</code>æ–¹å¼ï¼Œé€šå¸¸è¢«å«åš<code>é•¿è¿æ¥</code>ã€‚  </p><blockquote><p>å…·ä½“ä¸¤ç§æ‰‹æ®µçš„æ“ä½œæ–¹æ³•è¯·ç§»æ­¥<a href="http://www.52im.net/thread-334-1-1.html" target="_blank" rel="noopener">CometæŠ€æœ¯è¯¦è§£ï¼šåŸºäºHTTPé•¿è¿æ¥çš„Webç«¯å®æ—¶é€šä¿¡æŠ€æœ¯</a></p></blockquote><p>é•¿è½®è¯¢ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§å¥½ï¼Œèµ„æºæµªè´¹è¾ƒå°</li><li>ç¼ºç‚¹ï¼šæœåŠ¡å™¨<code>hold</code>è¿æ¥ä¼šæ¶ˆè€—èµ„æºï¼Œè¿”å›æ•°æ®é¡ºåºæ— ä¿è¯ï¼Œéš¾äºç®¡ç†ç»´æŠ¤</li></ul><p>é•¿è¿æ¥ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§å¥½ï¼Œæ¶ˆæ¯å³æ—¶åˆ°è¾¾ï¼Œä¸å‘æ— ç”¨è¯·æ±‚</li><li>ç¼ºç‚¹ï¼šæœåŠ¡å™¨ç»´æŠ¤é•¿è¿æ¥æ¶ˆè€—èµ„æº<h4 id="SSE"><a href="#SSE" class="headerlink" title="SSE"></a>SSE</h4><blockquote><p>ä½¿ç”¨æŒ‡å—è¯·çœ‹<a href="https://www.ruanyifeng.com/blog/2017/05/server-sent_events.html" target="_blank" rel="noopener">Server-Sent Events æ•™ç¨‹</a></p></blockquote></li></ul><p>SSEï¼ˆServer-Sent Eventï¼ŒæœåŠ¡ç«¯æ¨é€äº‹ä»¶ï¼‰æ˜¯ä¸€ç§å…è®¸æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯æ¨é€æ–°æ•°æ®çš„HTML5æŠ€æœ¯ã€‚  </p><ul><li>ä¼˜ç‚¹ï¼šåŸºäºHTTPè€Œç”Ÿï¼Œå› æ­¤ä¸éœ€è¦å¤ªå¤šæ”¹é€ å°±èƒ½ä½¿ç”¨ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œè€Œwebsocketéå¸¸å¤æ‚ï¼Œå¿…é¡»å€ŸåŠ©æˆç†Ÿçš„åº“æˆ–æ¡†æ¶</li><li>ç¼ºç‚¹ï¼šåŸºäºæ–‡æœ¬ä¼ è¾“æ•ˆç‡æ²¡æœ‰<code>websocket</code>é«˜ï¼Œä¸æ˜¯ä¸¥æ ¼çš„åŒå‘é€šä¿¡ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚æ— æ³•å¤ç”¨ä¹‹å‰çš„è¿æ¥ï¼Œéœ€è¦é‡æ–°å‘å‡ºç‹¬ç«‹çš„è¯·æ±‚</li></ul><h4 id="Websocket"><a href="#Websocket" class="headerlink" title="Websocket"></a>Websocket</h4><p>ä½¿ç”¨æŒ‡å—è¯·çœ‹<a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html" target="_blank" rel="noopener">WebSocket æ•™ç¨‹</a></p><p>Websocketæ˜¯ä¸€ä¸ªå…¨æ–°çš„ã€ç‹¬ç«‹çš„åè®®ï¼ŒåŸºäº<code>TCPåè®®</code>ï¼Œä¸h<code>ttpåè®®</code>å…¼å®¹ã€å´ä¸ä¼šèå…¥<code>httpåè®®</code>ï¼Œä»…ä»…ä½œä¸º<code>html5</code>çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä½œç”¨å°±æ˜¯åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´å»ºç«‹å®æ—¶çš„åŒå‘é€šä¿¡ã€‚  </p><ul><li>ä¼˜ç‚¹ï¼šçœŸæ­£æ„ä¹‰ä¸Šçš„å®æ—¶åŒå‘é€šä¿¡ï¼Œæ€§èƒ½å¥½ï¼Œä½å»¶è¿Ÿ</li><li>ç¼ºç‚¹ï¼šç‹¬ç«‹ä¸httpçš„åè®®ï¼Œå› æ­¤éœ€è¦é¢å¤–çš„é¡¹ç›®æ”¹é€ ï¼Œä½¿ç”¨å¤æ‚åº¦é«˜ï¼Œå¿…é¡»å¼•å…¥æˆç†Ÿçš„åº“ï¼Œæ— æ³•å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨</li></ul><h4 id="Web-Worker"><a href="#Web-Worker" class="headerlink" title="Web Worker"></a>Web Worker</h4><blockquote><p>åé¢æ€§èƒ½ä¼˜åŒ–éƒ¨åˆ†ä¼šç”¨åˆ°ï¼Œå…ˆåšäº†è§£</p></blockquote><p>Web Worker çš„ä½œç”¨ï¼Œå°±æ˜¯ä¸º JavaScript åˆ›é€ å¤šçº¿ç¨‹ç¯å¢ƒï¼Œå…è®¸ä¸»çº¿ç¨‹åˆ›å»º Worker çº¿ç¨‹ï¼Œå°†ä¸€äº›ä»»åŠ¡åˆ†é…ç»™åè€…è¿è¡Œ</p><blockquote><p><a href="http://www.ruanyifeng.com/blog/2018/07/web-worker.html" target="_blank" rel="noopener">Web Workeræ•™ç¨‹</a></p></blockquote><h4 id="Service-workers"><a href="#Service-workers" class="headerlink" title="Service workers"></a>Service workers</h4><blockquote><p>åé¢æ€§èƒ½ä¼˜åŒ–éƒ¨åˆ†ä¼šç”¨åˆ°ï¼Œå…ˆåšäº†è§£</p></blockquote><p>Service workers æœ¬è´¨ä¸Šå……å½“Webåº”ç”¨ç¨‹åºä¸æµè§ˆå™¨ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç½‘ç»œå¯ç”¨æ—¶ä½œä¸ºæµè§ˆå™¨å’Œç½‘ç»œé—´çš„ä»£ç†ï¼Œåˆ›å»ºæœ‰æ•ˆçš„ç¦»çº¿ä½“éªŒã€‚</p><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API" target="_blank" rel="noopener">Service workersæ•™ç¨‹</a></p></blockquote><h4 id="ä»€ä¹ˆæ˜¯æµè§ˆå™¨åŒæºç­–ç•¥ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æµè§ˆå™¨åŒæºç­–ç•¥ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æµè§ˆå™¨åŒæºç­–ç•¥ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æµè§ˆå™¨åŒæºç­–ç•¥ï¼Ÿ</h4><p>åŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚<br>åŒæºæ˜¯æŒ‡<code>&quot;åè®®+åŸŸå+ç«¯å£&quot;</code>ä¸‰è€…ç›¸åŒï¼Œå³ä¾¿ä¸¤ä¸ªä¸åŒçš„åŸŸåæŒ‡å‘åŒä¸€ä¸ªipåœ°å€ï¼Œä¹ŸéåŒæºã€‚<br>ä¸‹è¡¨ç»™å‡ºäº†ç›¸å¯¹<a href="http://store.company.com/dir/page.htmlåŒæºæ£€æµ‹çš„ç¤ºä¾‹" target="_blank" rel="noopener">http://store.company.com/dir/page.htmlåŒæºæ£€æµ‹çš„ç¤ºä¾‹</a>:</p><p><img src="https://user-gold-cdn.xitu.io/2019/9/24/16d610123996dc1e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="http://store.company.com/dir/page.htmlåŒæºæ£€æµ‹çš„ç¤ºä¾‹"></p><p>æµè§ˆå™¨ä¸­çš„å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯å—åŒæºç­–ç•¥é™åˆ¶çš„ï¼Œä½†æ˜¯ä»¥ä¸‹ä¸‰ä¸ªæ ‡ç­¾å¯ä»¥ä¸å—é™åˆ¶ï¼š</p><ul><li>&lt;img src=XXX&gt;</li><li>&lt;link href=XXX&gt;</li><li>&lt;script src=XXX&gt;</li></ul><h3 id="å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿ"><a href="#å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿ"></a>å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿ</h3><p>è·¨åŸŸæ˜¯ä¸ªæ¯”è¾ƒå¤è€çš„å‘½é¢˜äº†ï¼Œå†å²ä¸Šè·¨åŸŸçš„å®ç°æ‰‹æ®µæœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ç°åœ¨ä¸»è¦ä»‹ç»ä¸‰ç§æ¯”è¾ƒä¸»æµçš„è·¨åŸŸæ–¹æ¡ˆï¼Œå…¶ä½™çš„æ–¹æ¡ˆæˆ‘ä»¬å°±ä¸æ·±å…¥è®¨è®ºäº†ï¼Œå› ä¸ºä½¿ç”¨åœºæ™¯å¾ˆå°‘ï¼Œä¹Ÿæ²¡å¿…è¦è®°è¿™ä¹ˆå¤šå¥‡æŠ€æ·«å·§ã€‚</p><h4 id="æœ€ç»å…¸çš„è·¨åŸŸæ–¹æ¡ˆjsonp"><a href="#æœ€ç»å…¸çš„è·¨åŸŸæ–¹æ¡ˆjsonp" class="headerlink" title="æœ€ç»å…¸çš„è·¨åŸŸæ–¹æ¡ˆjsonp"></a>æœ€ç»å…¸çš„è·¨åŸŸæ–¹æ¡ˆjsonp</h4><p>jsonpæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<code>Hack</code>ï¼Œå®ƒåˆ©ç”¨<code>&lt;script&gt;</code>æ ‡ç­¾ä¸å—åŒæºç­–ç•¥é™åˆ¶çš„<code>ç‰¹æ€§è¿›è¡Œè·¨åŸŸ</code>æ“ä½œã€‚<br>jsonpä¼˜ç‚¹ï¼š</p><ul><li>å®ç°ç®€å•</li><li>å…¼å®¹æ€§éå¸¸å¥½</li></ul><p>jsonpçš„ç¼ºç‚¹ï¼š</p><ul><li>åªæ”¯æŒgetè¯·æ±‚ï¼ˆå› ä¸º<code>&lt;script&gt;</code>æ ‡ç­¾åªèƒ½getï¼‰</li><li>æœ‰å®‰å…¨æ€§é—®é¢˜ï¼Œå®¹æ˜“é­å—xssæ”»å‡»</li><li>éœ€è¦æœåŠ¡ç«¯é…åˆjsonpè¿›è¡Œä¸€å®šç¨‹åº¦çš„æ”¹é€ </li></ul><p>jsonpçš„å®ç°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">JSONP</span>(<span class="params">&#123;  </span></span></span><br><span class="line"><span class="function"><span class="params">  url,</span></span></span><br><span class="line"><span class="function"><span class="params">  params,</span></span></span><br><span class="line"><span class="function"><span class="params">  callbackKey,</span></span></span><br><span class="line"><span class="function"><span class="params">  callback</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åœ¨å‚æ•°é‡Œåˆ¶å®š callback çš„åå­—</span></span><br><span class="line">  params = params || &#123;&#125;</span><br><span class="line">  params[callbackKey] = <span class="string">'jsonpCallback'</span></span><br><span class="line">    <span class="comment">// é¢„ç•™ callback</span></span><br><span class="line">  <span class="built_in">window</span>.jsonpCallback = callback</span><br><span class="line">    <span class="comment">// æ‹¼æ¥å‚æ•°å­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">const</span> paramKeys = <span class="built_in">Object</span>.keys(params)</span><br><span class="line">  <span class="keyword">const</span> paramString = paramKeys</span><br><span class="line">    .map(<span class="function"><span class="params">key</span> =&gt;</span> <span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;params[key]&#125;</span>`</span>)</span><br><span class="line">    .join(<span class="string">'&amp;'</span>)</span><br><span class="line">    <span class="comment">// æ’å…¥ DOM å…ƒç´ </span></span><br><span class="line">  <span class="keyword">const</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</span><br><span class="line">  script.setAttribute(<span class="string">'src'</span>, <span class="string">`<span class="subst">$&#123;url&#125;</span>?<span class="subst">$&#123;paramString&#125;</span>`</span>)</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(script)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">JSONP(&#123;  </span><br><span class="line">  url: <span class="string">'http://s.weibo.com/ajax/jsonp/suggestion'</span>,</span><br><span class="line">  params: &#123;</span><br><span class="line">    key: <span class="string">'test'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  callbackKey: <span class="string">'_cb'</span>,</span><br><span class="line">  callback(result) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æœ€æµè¡Œçš„è·¨åŸŸæ–¹æ¡ˆcors"><a href="#æœ€æµè¡Œçš„è·¨åŸŸæ–¹æ¡ˆcors" class="headerlink" title="æœ€æµè¡Œçš„è·¨åŸŸæ–¹æ¡ˆcors"></a>æœ€æµè¡Œçš„è·¨åŸŸæ–¹æ¡ˆcors</h4><p><code>cors</code>æ˜¯ç›®å‰ä¸»æµçš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œè·¨åŸŸèµ„æºå…±äº«(CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ <code>HTTP å¤´</code>æ¥å‘Šè¯‰æµè§ˆå™¨  è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„Webåº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚å½“ä¸€ä¸ªèµ„æºä»ä¸è¯¥èµ„æºæœ¬èº«æ‰€åœ¨çš„æœåŠ¡å™¨ä¸åŒçš„åŸŸã€åè®®æˆ–ç«¯å£è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œèµ„æºä¼šå‘èµ·ä¸€ä¸ª<code>è·¨åŸŸ HTTP</code> è¯·æ±‚ã€‚ </p><p>å¦‚æœä½ ç”¨<code>express</code>ï¼Œå¯ä»¥è¿™æ ·åœ¨åç«¯è®¾ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CORS middleware</span></span><br><span class="line"><span class="keyword">var</span> allowCrossDomain = <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'http://example.com'</span>);</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Methods'</span>, <span class="string">'GET,PUT,POST,DELETE'</span>);</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Headers'</span>, <span class="string">'Content-Type'</span>);</span><br><span class="line"></span><br><span class="line">    next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">app.configure(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    app.use(express.bodyParser());</span><br><span class="line">    app.use(express.cookieParser());</span><br><span class="line">    app.use(express.session(&#123; <span class="attr">secret</span>: <span class="string">'cool beans'</span> &#125;));</span><br><span class="line">    app.use(express.methodOverride());</span><br><span class="line">    app.use(allowCrossDomain);</span><br><span class="line">    app.use(app.router);</span><br><span class="line">    app.use(express.static(__dirname + <span class="string">'/public'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®ç”¨æˆç†Ÿçš„å¼€æºä¸­é—´ä»¶è§£å†³é—®é¢˜ã€‚</p><h3 id="æœ€æ–¹ä¾¿çš„è·¨åŸŸæ–¹æ¡ˆNginx"><a href="#æœ€æ–¹ä¾¿çš„è·¨åŸŸæ–¹æ¡ˆNginx" class="headerlink" title="æœ€æ–¹ä¾¿çš„è·¨åŸŸæ–¹æ¡ˆNginx"></a>æœ€æ–¹ä¾¿çš„è·¨åŸŸæ–¹æ¡ˆNginx</h3><p>nginxæ˜¯ä¸€æ¬¾æå…¶å¼ºå¤§çš„webæœåŠ¡å™¨ï¼Œå…¶ä¼˜ç‚¹å°±æ˜¯è½»é‡çº§ã€å¯åŠ¨å¿«ã€é«˜å¹¶å‘ã€‚</p><p>ç°åœ¨çš„æ–°é¡¹ç›®ä¸­nginxå‡ ä¹æ˜¯é¦–é€‰ï¼Œæˆ‘ä»¬ç”¨nodeæˆ–è€…javaå¼€å‘çš„æœåŠ¡é€šå¸¸éƒ½éœ€è¦ç»è¿‡nginxçš„åå‘ä»£ç†ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2019/9/24/16d610123c354a18?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="nginxçš„åå‘ä»£ç†"></p><p>åå‘ä»£ç†çš„åŸç†å¾ˆç®€å•ï¼Œå³æ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½å¿…é¡»å…ˆç»è¿‡nginxçš„å¤„ç†ï¼Œnginxä½œä¸ºä»£ç†æœåŠ¡å™¨å†è®²è¯·æ±‚è½¬å‘ç»™nodeæˆ–è€…javaæœåŠ¡ï¼Œè¿™æ ·å°±è§„é¿äº†åŒæºç­–ç•¥ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿›ç¨‹, å¯æ›´å…·cpuæ•°é‡è°ƒæ•´</span></span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    <span class="comment">#è¿æ¥æ•°</span></span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#è¿æ¥è¶…æ—¶æ—¶é—´ï¼ŒæœåŠ¡å™¨ä¼šåœ¨è¿™ä¸ªæ—¶é—´è¿‡åå…³é—­è¿æ¥ã€‚</span></span><br><span class="line">    keepalive_timeout  10;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># gizpå‹ç¼©</span></span><br><span class="line">    gzip  on;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç›´æ¥è¯·æ±‚nginxä¹Ÿæ˜¯ä¼šæŠ¥è·¨åŸŸé”™è¯¯çš„è¿™é‡Œè®¾ç½®å…è®¸è·¨åŸŸ</span></span><br><span class="line">    <span class="comment"># å¦‚æœä»£ç†åœ°å€å·²ç»å…è®¸è·¨åŸŸåˆ™ä¸éœ€è¦è¿™äº›, å¦åˆ™æŠ¥é”™(è™½ç„¶è¿™æ ·nginxè·¨åŸŸå°±æ²¡æ„ä¹‰äº†)</span></span><br><span class="line">    add_header Access-Control-Allow-Origin *;</span><br><span class="line">    add_header Access-Control-Allow-Headers X-Requested-With;</span><br><span class="line">    add_header Access-Control-Allow-Methods GET,POST,OPTIONS;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># sreveræ¨¡å—é…ç½®æ˜¯httpæ¨¡å—ä¸­çš„ä¸€ä¸ªå­æ¨¡å—ï¼Œç”¨æ¥å®šä¹‰ä¸€ä¸ªè™šæ‹Ÿè®¿é—®ä¸»æœº</span></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ ¹è·¯å¾„æŒ‡åˆ°index.html</span></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># localhost/api çš„è¯·æ±‚ä¼šè¢«è½¬å‘åˆ°192.168.0.103:8080</span></span><br><span class="line">        location /api &#123;</span><br><span class="line">            rewrite ^/b/(.*)$ /<span class="variable">$1</span> <span class="built_in">break</span>; <span class="comment"># å»é™¤æœ¬åœ°æ¥å£/apiå‰ç¼€, å¦åˆ™ä¼šå‡ºç°404</span></span><br><span class="line">            proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">            proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">            proxy_pass http://192.168.0.103:8080; <span class="comment"># è½¬å‘åœ°å€</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é‡å®šå‘é”™è¯¯é¡µé¢åˆ°/50x.html</span></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…¶å®ƒè·¨åŸŸæ–¹æ¡ˆ"><a href="#å…¶å®ƒè·¨åŸŸæ–¹æ¡ˆ" class="headerlink" title="å…¶å®ƒè·¨åŸŸæ–¹æ¡ˆ"></a>å…¶å®ƒè·¨åŸŸæ–¹æ¡ˆ</h3><ol><li><code>HTML5 XMLHttpRequest</code> æœ‰ä¸€ä¸ª<code>API</code>ï¼Œ<code>postMessage()</code>æ–¹æ³•å…è®¸æ¥è‡ªä¸åŒæºçš„è„šæœ¬é‡‡ç”¨å¼‚æ­¥æ–¹å¼è¿›è¡Œæœ‰é™çš„é€šä¿¡ï¼Œå¯ä»¥å®ç°è·¨æ–‡æœ¬æ¡£ã€å¤šçª—å£ã€è·¨åŸŸæ¶ˆæ¯ä¼ é€’ã€‚</li><li><code>WebSocket</code> æ˜¯ä¸€ç§<code>åŒå‘é€šä¿¡åè®®</code>ï¼Œåœ¨å»ºç«‹è¿æ¥ä¹‹åï¼Œ<code>WebSocket</code> çš„ <code>server</code> ä¸ <code>client</code> éƒ½èƒ½<code>ä¸»åŠ¨å‘å¯¹æ–¹å‘é€æˆ–æ¥æ”¶æ•°æ®</code>ï¼Œè¿æ¥å»ºç«‹å¥½äº†ä¹‹å <code>client</code> ä¸ <code>server</code> ä¹‹é—´çš„<code>åŒå‘é€šä¿¡å°±ä¸ HTTP æ— å…³</code>äº†ï¼Œå› æ­¤å¯ä»¥è·¨åŸŸã€‚</li><li><code>window.name</code> + <code>iframeï¼šwindow.name</code>å±æ€§å€¼åœ¨ä¸åŒçš„é¡µé¢ï¼ˆç”šè‡³ä¸åŒåŸŸåï¼‰åŠ è½½åä¾æ—§å­˜åœ¨ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒéå¸¸é•¿çš„ <code>name</code> å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹è¿›è¡Œè·¨åŸŸã€‚</li><li><code>location.hash</code> + <code>iframeï¼ša.html</code>æ¬²ä¸<code>c.html</code>è·¨åŸŸç›¸äº’é€šä¿¡ï¼Œé€šè¿‡ä¸­é—´é¡µ<code>b.html</code>æ¥å®ç°ã€‚ ä¸‰ä¸ªé¡µé¢ï¼Œä¸åŒåŸŸä¹‹é—´åˆ©ç”¨<code>iframe</code>çš„<code>location.hash</code>ä¼ å€¼ï¼Œç›¸åŒåŸŸä¹‹é—´ç›´æ¥<code>js</code>è®¿é—®æ¥é€šä¿¡ã€‚</li><li><code>document.domain + iframe</code>ï¼š è¯¥æ–¹å¼åªèƒ½ç”¨äºäºŒçº§åŸŸåç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ <code>a.test.com</code> å’Œ <code>b.test.com</code> é€‚ç”¨äºè¯¥æ–¹å¼ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™é¡µé¢æ·»åŠ  <code>document.domain =&#39;test.com&#39;</code> è¡¨ç¤ºäºŒçº§åŸŸåéƒ½ç›¸åŒå°±å¯ä»¥å®ç°è·¨åŸŸï¼Œä¸¤ä¸ªé¡µé¢éƒ½é€šè¿‡jså¼ºåˆ¶è®¾ç½®<code>document.domain</code>ä¸ºåŸºç¡€ä¸»åŸŸï¼Œå°±å®ç°äº†åŒåŸŸã€‚</li></ol><blockquote><p>å…¶ä½™æ–¹æ¡ˆæ¥æºäº<a href="https://juejin.im/post/5c23993de51d457b8c1f4ee1#heading-19" target="_blank" rel="noopener">ä¹ç§è·¨åŸŸæ–¹å¼</a></p></blockquote><p>å‚è€ƒæ–‡ç« :</p><ul><li><a href="https://segmentfault.com/q/1010000000713509" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆ CSS é€‰æ‹©å™¨è§£æçš„æ—¶å€™æ˜¯ä»å³å¾€å·¦ï¼Ÿ</a></li></ul><blockquote><p>ä½œè€…ï¼šå¯»æ‰¾æµ·è“96<br>é“¾æ¥ï¼š<a href="https://juejin.im/post/5d89798d6fb9a06b102769b1" target="_blank" rel="noopener">https://juejin.im/post/5d89798d6fb9a06b102769b1</a><br>æ¥æºï¼šæ˜é‡‘</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›&quot;&gt;&lt;a href=&quot;#å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›&quot; class=&quot;headerlink&quot; title=&quot;å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›?&quot;&gt;&lt;/a&gt;å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›?&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æµè§ˆå™¨/RunTime&lt;/th&gt;
&lt;th&gt;å†…æ ¸ï¼ˆæ¸²æŸ“å¼•æ“ï¼‰&lt;/th&gt;
&lt;th&gt;JavaScript å¼•æ“&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;Chrome&lt;/td&gt;
&lt;td&gt;Blinkï¼ˆ28~ï¼‰Webkitï¼ˆChrome 27ï¼‰&lt;/td&gt;
&lt;td&gt;V8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FireFox&lt;/td&gt;
&lt;td&gt;Gecko&lt;/td&gt;
&lt;td&gt;SpiderMonkey&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Safari&lt;/td&gt;
&lt;td&gt;Webkit&lt;/td&gt;
&lt;td&gt;JavaScriptCore&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Edge&lt;/td&gt;
&lt;td&gt;EdgeHTML&lt;/td&gt;
&lt;td&gt;Chakra(for JavaScript)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;IE&lt;/td&gt;
&lt;td&gt;Trident&lt;/td&gt;
&lt;td&gt;Chakra(for JScript)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PhantomJS&lt;/td&gt;
&lt;td&gt;Webkit&lt;/td&gt;
&lt;td&gt;JavaScriptCore&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Node.js&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;V8&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="é¢è¯•" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="é¢è¯•" scheme="https://heiyehk.github.io/blog/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>æµè§ˆå™¨çš„å›æµä¸é‡ç»˜ (Reflow &amp; Repaint)</title>
    <link href="https://heiyehk.github.io/blog/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%9B%9E%E6%B5%81%E4%B8%8E%E9%87%8D%E7%BB%98-Reflow-Repaint/"/>
    <id>https://heiyehk.github.io/blog/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%9B%9E%E6%B5%81%E4%B8%8E%E9%87%8D%E7%BB%98-Reflow-Repaint/</id>
    <published>2020-04-30T04:40:46.000Z</published>
    <updated>2020-04-30T09:27:47.148Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h3><p>åœ¨è®¨è®ºå›æµä¸é‡ç»˜ä¹‹å‰ï¼Œæˆ‘ä»¬è¦çŸ¥é“ï¼š</p><ol><li>æµè§ˆå™¨ä½¿ç”¨æµå¼å¸ƒå±€æ¨¡å‹ (Flow Based Layout)ã€‚</li><li>æµè§ˆå™¨ä¼šæŠŠ<code>HTML</code>è§£ææˆ<code>DOM</code>ï¼ŒæŠŠ<code>CSS</code>è§£ææˆ<code>CSSOM</code>ï¼Œ<code>DOM</code>å’Œ<code>CSSOM</code>åˆå¹¶å°±äº§ç”Ÿäº†<code>Render Tree</code>ã€‚</li><li>æœ‰äº†<code>RenderTree</code>ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†æ‰€æœ‰èŠ‚ç‚¹çš„æ ·å¼ï¼Œç„¶åè®¡ç®—ä»–ä»¬åœ¨é¡µé¢ä¸Šçš„å¤§å°å’Œä½ç½®ï¼Œæœ€åæŠŠèŠ‚ç‚¹ç»˜åˆ¶åˆ°é¡µé¢ä¸Šã€‚</li><li>ç”±äºæµè§ˆå™¨ä½¿ç”¨æµå¼å¸ƒå±€ï¼Œå¯¹<code>Render Tree</code>çš„è®¡ç®—é€šå¸¸åªéœ€è¦éå†ä¸€æ¬¡å°±å¯ä»¥å®Œæˆï¼Œä½†<code>table</code>åŠå…¶å†…éƒ¨å…ƒç´ é™¤å¤–ï¼Œä»–ä»¬å¯èƒ½éœ€è¦å¤šæ¬¡è®¡ç®—ï¼Œé€šå¸¸è¦èŠ±3å€äºåŒç­‰å…ƒç´ çš„æ—¶é—´ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦é¿å…ä½¿ç”¨<code>table</code>å¸ƒå±€çš„åŸå› ä¹‹ä¸€ã€‚</li></ol><p>ä¸€å¥è¯ï¼šå›æµå¿…å°†å¼•èµ·é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•èµ·å›æµã€‚</p><a id="more"></a><h3 id="å›æµ-Reflow"><a href="#å›æµ-Reflow" class="headerlink" title="å›æµ (Reflow)"></a>å›æµ (Reflow)</h3><p>å½“<code>Render Tree</code>ä¸­éƒ¨åˆ†æˆ–å…¨éƒ¨å…ƒç´ çš„å°ºå¯¸ã€ç»“æ„ã€æˆ–æŸäº›å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæµè§ˆå™¨é‡æ–°æ¸²æŸ“éƒ¨åˆ†æˆ–å…¨éƒ¨æ–‡æ¡£çš„è¿‡ç¨‹ç§°ä¸ºå›æµã€‚<br>ä¼šå¯¼è‡´å›æµçš„æ“ä½œï¼š</p><ul><li>é¡µé¢é¦–æ¬¡æ¸²æŸ“</li><li>æµè§ˆå™¨çª—å£å¤§å°å‘ç”Ÿæ”¹å˜</li><li>å…ƒç´ å°ºå¯¸æˆ–ä½ç½®å‘ç”Ÿæ”¹å˜</li><li>å…ƒç´ å†…å®¹å˜åŒ–ï¼ˆæ–‡å­—æ•°é‡æˆ–å›¾ç‰‡å¤§å°ç­‰ç­‰ï¼‰</li><li>å…ƒç´ å­—ä½“å¤§å°å˜åŒ–</li><li>æ·»åŠ æˆ–è€…åˆ é™¤<strong>å¯è§</strong>çš„<code>DOM</code>å…ƒç´ </li><li>æ¿€æ´»CSSä¼ªç±»ï¼ˆä¾‹å¦‚ï¼š:hoverï¼‰</li><li>æŸ¥è¯¢æŸäº›å±æ€§æˆ–è°ƒç”¨æŸäº›æ–¹æ³•</li></ul><p>ä¸€äº›å¸¸ç”¨ä¸”ä¼šå¯¼è‡´å›æµçš„å±æ€§å’Œæ–¹æ³•ï¼š</p><ul><li><code>clientWidth</code>ã€<code>clientHeight</code>ã€<code>clientTop</code>ã€<code>clientLeft</code></li><li><code>offsetWidth</code>ã€<code>offsetHeight</code>ã€<code>offsetTop</code>ã€<code>offsetLeft</code></li><li><code>scrollWidth</code>ã€<code>scrollHeight</code>ã€<code>scrollTop</code>ã€<code>scrollLeft</code></li><li><code>scrollIntoView()</code>ã€<code>scrollIntoViewIfNeeded()</code></li><li><code>getComputedStyle()</code></li><li><code>getBoundingClientRect()</code></li><li><code>scrollTo()</code></li></ul><h3 id="é‡ç»˜-Repaint"><a href="#é‡ç»˜-Repaint" class="headerlink" title="é‡ç»˜ (Repaint)"></a>é‡ç»˜ (Repaint)</h3><p>å½“é¡µé¢ä¸­å…ƒç´ æ ·å¼çš„æ”¹å˜å¹¶ä¸å½±å“å®ƒåœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®æ—¶ï¼ˆä¾‹å¦‚ï¼š<code>color</code>ã€<code>background-color</code>ã€<code>visibility</code>ç­‰ï¼‰ï¼Œæµè§ˆå™¨ä¼šå°†æ–°æ ·å¼èµ‹äºˆç»™å…ƒç´ å¹¶é‡æ–°ç»˜åˆ¶å®ƒï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºé‡ç»˜ã€‚</p><h3 id="æ€§èƒ½å½±å“"><a href="#æ€§èƒ½å½±å“" class="headerlink" title="æ€§èƒ½å½±å“"></a>æ€§èƒ½å½±å“</h3><p><strong>å›æµæ¯”é‡ç»˜çš„ä»£ä»·è¦æ›´é«˜ã€‚</strong><br>æœ‰æ—¶å³ä½¿ä»…ä»…å›æµä¸€ä¸ªå•ä¸€çš„å…ƒç´ ï¼Œå®ƒçš„çˆ¶å…ƒç´ ä»¥åŠä»»ä½•è·Ÿéšå®ƒçš„å…ƒç´ ä¹Ÿä¼šäº§ç”Ÿå›æµã€‚<br>ç°ä»£æµè§ˆå™¨ä¼šå¯¹é¢‘ç¹çš„å›æµæˆ–é‡ç»˜æ“ä½œè¿›è¡Œä¼˜åŒ–ï¼š<br>æµè§ˆå™¨ä¼šç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒæŠŠæ‰€æœ‰å¼•èµ·å›æµå’Œé‡ç»˜çš„æ“ä½œæ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ•°é‡æˆ–è€…æ—¶é—´é—´éš”è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼çš„ï¼Œæµè§ˆå™¨å°±ä¼šå°†é˜Ÿåˆ—æ¸…ç©ºï¼Œè¿›è¡Œä¸€æ¬¡æ‰¹å¤„ç†ï¼Œè¿™æ ·å¯ä»¥æŠŠå¤šæ¬¡å›æµå’Œé‡ç»˜å˜æˆä¸€æ¬¡ã€‚<br>å½“ä½ è®¿é—®ä»¥ä¸‹å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œæµè§ˆå™¨ä¼šç«‹åˆ»æ¸…ç©ºé˜Ÿåˆ—ï¼š</p><p>getComputedStyle()<br>getBoundingClientRect()</p><ul><li><code>clientWidth</code>ã€<code>clientHeight</code>ã€<code>clientTop</code>ã€<code>clientLeft</code></li><li><code>offsetWidth</code>ã€<code>offsetHeight</code>ã€<code>offsetTop</code>ã€<code>offsetLeft</code></li><li><code>scrollWidth</code>ã€<code>scrollHeight</code>ã€<code>scrollTop</code>ã€<code>scrollLeft</code></li><li><code>width</code>ã€<code>height</code></li><li><code>getComputedStyle()</code></li><li><code>getBoundingClientRect()</code></li></ul><p>å› ä¸ºé˜Ÿåˆ—ä¸­å¯èƒ½ä¼šæœ‰å½±å“åˆ°è¿™äº›å±æ€§æˆ–æ–¹æ³•è¿”å›å€¼çš„æ“ä½œï¼Œå³ä½¿ä½ å¸Œæœ›è·å–çš„ä¿¡æ¯ä¸é˜Ÿåˆ—ä¸­æ“ä½œå¼•å‘çš„æ”¹å˜æ— å…³ï¼Œæµè§ˆå™¨ä¹Ÿä¼šå¼ºè¡Œæ¸…ç©ºé˜Ÿåˆ—ï¼Œç¡®ä¿ä½ æ‹¿åˆ°çš„å€¼æ˜¯æœ€ç²¾ç¡®çš„ã€‚</p><h3 id="å¦‚ä½•é¿å…"><a href="#å¦‚ä½•é¿å…" class="headerlink" title="å¦‚ä½•é¿å…"></a>å¦‚ä½•é¿å…</h3><h4 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h4><ul><li>é¿å…ä½¿ç”¨<code>table</code>å¸ƒå±€ã€‚</li><li>å°½å¯èƒ½åœ¨<code>DOM</code>æ ‘çš„æœ€æœ«ç«¯æ”¹å˜<code>class</code>ã€‚</li><li>é¿å…è®¾ç½®å¤šå±‚å†…è”æ ·å¼ã€‚</li><li>å°†åŠ¨ç”»æ•ˆæœåº”ç”¨åˆ°<code>position</code>å±æ€§ä¸º<code>absolute</code>æˆ–<code>fixed</code>çš„å…ƒç´ ä¸Šã€‚</li><li>é¿å…ä½¿ç”¨<code>CSS</code>è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ï¼š<code>calc()</code>ï¼‰ã€‚</li></ul><h4 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h4><ul><li>é¿å…é¢‘ç¹æ“ä½œæ ·å¼ï¼Œæœ€å¥½ä¸€æ¬¡æ€§é‡å†™<code>style</code>å±æ€§ï¼Œæˆ–è€…å°†æ ·å¼åˆ—è¡¨å®šä¹‰ä¸º<code>class</code>å¹¶ä¸€æ¬¡æ€§æ›´æ”¹<code>class</code>å±æ€§ã€‚</li><li>é¿å…é¢‘ç¹æ“ä½œ<code>DOM</code>ï¼Œåˆ›å»ºä¸€ä¸ª<code>documentFragment</code>ï¼Œåœ¨å®ƒä¸Šé¢åº”ç”¨æ‰€æœ‰<code>DOM</code>æ“ä½œï¼Œæœ€åå†æŠŠå®ƒæ·»åŠ åˆ°æ–‡æ¡£ä¸­ã€‚</li><li>ä¹Ÿå¯ä»¥å…ˆä¸ºå…ƒç´ è®¾ç½®<code>display: none</code>ï¼Œæ“ä½œç»“æŸåå†æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚å› ä¸ºåœ¨<code>display</code>å±æ€§ä¸º<code>none</code>çš„å…ƒç´ ä¸Šè¿›è¡Œçš„<code>DOM</code>æ“ä½œä¸ä¼šå¼•å‘å›æµå’Œé‡ç»˜ã€‚</li><li>é¿å…é¢‘ç¹è¯»å–ä¼šå¼•å‘å›æµ/é‡ç»˜çš„å±æ€§ï¼Œå¦‚æœç¡®å®éœ€è¦å¤šæ¬¡ä½¿ç”¨ï¼Œå°±ç”¨ä¸€ä¸ªå˜é‡ç¼“å­˜èµ·æ¥ã€‚</li><li>å¯¹å…·æœ‰å¤æ‚åŠ¨ç”»çš„å…ƒç´ ä½¿ç”¨ç»å¯¹å®šä½ï¼Œä½¿å®ƒè„±ç¦»æ–‡æ¡£æµï¼Œå¦åˆ™ä¼šå¼•èµ·çˆ¶å…ƒç´ åŠåç»­å…ƒç´ é¢‘ç¹å›æµã€‚</li></ul><blockquote><p>ä½œè€…ï¼šè…°èŠ±<br>é“¾æ¥ï¼š<a href="https://juejin.im/post/5a9923e9518825558251c96a" target="_blank" rel="noopener">https://juejin.im/post/5a9923e9518825558251c96a</a><br>æ¥æºï¼šæ˜é‡‘</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; class=&quot;headerlink&quot; title=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;/a&gt;å†™åœ¨å‰é¢&lt;/h3&gt;&lt;p&gt;åœ¨è®¨è®ºå›æµä¸é‡ç»˜ä¹‹å‰ï¼Œæˆ‘ä»¬è¦çŸ¥é“ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æµè§ˆå™¨ä½¿ç”¨æµå¼å¸ƒå±€æ¨¡å‹ (Flow Based Layout)ã€‚&lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨ä¼šæŠŠ&lt;code&gt;HTML&lt;/code&gt;è§£ææˆ&lt;code&gt;DOM&lt;/code&gt;ï¼ŒæŠŠ&lt;code&gt;CSS&lt;/code&gt;è§£ææˆ&lt;code&gt;CSSOM&lt;/code&gt;ï¼Œ&lt;code&gt;DOM&lt;/code&gt;å’Œ&lt;code&gt;CSSOM&lt;/code&gt;åˆå¹¶å°±äº§ç”Ÿäº†&lt;code&gt;Render Tree&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰äº†&lt;code&gt;RenderTree&lt;/code&gt;ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†æ‰€æœ‰èŠ‚ç‚¹çš„æ ·å¼ï¼Œç„¶åè®¡ç®—ä»–ä»¬åœ¨é¡µé¢ä¸Šçš„å¤§å°å’Œä½ç½®ï¼Œæœ€åæŠŠèŠ‚ç‚¹ç»˜åˆ¶åˆ°é¡µé¢ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºæµè§ˆå™¨ä½¿ç”¨æµå¼å¸ƒå±€ï¼Œå¯¹&lt;code&gt;Render Tree&lt;/code&gt;çš„è®¡ç®—é€šå¸¸åªéœ€è¦éå†ä¸€æ¬¡å°±å¯ä»¥å®Œæˆï¼Œä½†&lt;code&gt;table&lt;/code&gt;åŠå…¶å†…éƒ¨å…ƒç´ é™¤å¤–ï¼Œä»–ä»¬å¯èƒ½éœ€è¦å¤šæ¬¡è®¡ç®—ï¼Œé€šå¸¸è¦èŠ±3å€äºåŒç­‰å…ƒç´ çš„æ—¶é—´ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦é¿å…ä½¿ç”¨&lt;code&gt;table&lt;/code&gt;å¸ƒå±€çš„åŸå› ä¹‹ä¸€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸€å¥è¯ï¼šå›æµå¿…å°†å¼•èµ·é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•èµ·å›æµã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="å›æµ" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/%E5%9B%9E%E6%B5%81/"/>
    
      <category term="é‡ç»˜" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/%E5%9B%9E%E6%B5%81/%E9%87%8D%E7%BB%98/"/>
    
      <category term="Reflow" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/%E5%9B%9E%E6%B5%81/%E9%87%8D%E7%BB%98/Reflow/"/>
    
      <category term="Repaint" scheme="https://heiyehk.github.io/blog/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/%E5%9B%9E%E6%B5%81/%E9%87%8D%E7%BB%98/Reflow/Repaint/"/>
    
    
      <category term="æµè§ˆå™¨" scheme="https://heiyehk.github.io/blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
      <category term="å›æµ" scheme="https://heiyehk.github.io/blog/tags/%E5%9B%9E%E6%B5%81/"/>
    
      <category term="é‡ç»˜" scheme="https://heiyehk.github.io/blog/tags/%E9%87%8D%E7%BB%98/"/>
    
      <category term="Reflow" scheme="https://heiyehk.github.io/blog/tags/Reflow/"/>
    
      <category term="Repaint" scheme="https://heiyehk.github.io/blog/tags/Repaint/"/>
    
  </entry>
  
  <entry>
    <title>HTML5-æ–°ç‰¹æ€§</title>
    <link href="https://heiyehk.github.io/blog/HTML5-%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    <id>https://heiyehk.github.io/blog/HTML5-%E6%96%B0%E7%89%B9%E6%80%A7/</id>
    <published>2020-04-30T04:34:48.000Z</published>
    <updated>2020-05-20T08:57:04.717Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-è¯­ä¹‰åŒ–æ ‡ç­¾"><a href="#1-è¯­ä¹‰åŒ–æ ‡ç­¾" class="headerlink" title="1.è¯­ä¹‰åŒ–æ ‡ç­¾"></a>1.è¯­ä¹‰åŒ–æ ‡ç­¾</h3><p>è¯­ä¹‰åŒ–æ ‡ç­¾ ä¸ºé¡µé¢æä¾›äº†æ›´å¥½çš„é¡µé¢ç»“æ„ã€‚</p><table><thead><tr><th>æè¿°</th><th>å±æ€§</th></tr></thead><tbody><tr><td>&lt;header&gt;&lt;/header&gt;</td><td>å®šä¹‰æ–‡æ¡£çš„å¤´éƒ¨åŒºåŸŸ</td></tr><tr><td>&lt;footer&gt;&lt;/footer&gt;</td><td>å®šä¹‰æ–‡æ¡£çš„å°¾éƒ¨åŒºåŸŸ</td></tr><tr><td>&lt;nav&gt;&lt;/nav&gt;</td><td>å®šä¹‰æ–‡æ¡£çš„å¯¼èˆªåŒºåŸŸ</td></tr><tr><td>&lt;section&gt;&lt;/section&gt;</td><td>å®šä¹‰æ–‡æ¡£çš„æ®µè½</td></tr><tr><td>&lt;article&gt;&lt;/article&gt;</td><td>å®šä¹‰é¡µé¢ç‹¬ç«‹çš„å†…å®¹åŒºåŸŸ</td></tr><tr><td>&lt;aside&gt;&lt;/aside&gt;</td><td>å®šä¹‰é¡µé¢ä¾§è¾¹æ å†…å®¹</td></tr><tr><td>&lt;command&gt;&lt;/command&gt;</td><td>å®šä¹‰å‘½ä»¤æŒ‰é’®</td></tr><tr><td>&lt;details&gt;&lt;/details&gt;</td><td>æ ‡ç­¾åŒ…å« details å…ƒç´ çš„æ ‡é¢˜</td></tr><tr><td>&lt;dialog&gt;&lt;/dialog&gt;</td><td>å®šä¹‰å¯¹è¯æ¡†</td></tr></tbody></table><a id="more"></a><h3 id="2-å¢å¼ºå‹è¡¨å•"><a href="#2-å¢å¼ºå‹è¡¨å•" class="headerlink" title="2.å¢å¼ºå‹è¡¨å•"></a>2.å¢å¼ºå‹è¡¨å•</h3><p>HTML5 æä¾›äº†å¤šä¸ªæ–°çš„è¡¨å•è¾“å…¥ç±»å‹ã€‚</p><table><thead><tr><th>è¾“å…¥ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>color</td><td>ä¸»è¦ç”¨äºé€‰å–é¢œè‰²</td></tr><tr><td>date</td><td>ä»ä¸€ä¸ªæ—¥æœŸé€‰æ‹©å™¨é€‰æ‹©ä¸€ä¸ªæ—¥æœŸ</td></tr><tr><td>datetime</td><td>é€‰æ‹©ä¸€ä¸ªæ—¥æœŸï¼ˆUTC æ—¶é—´ï¼‰</td></tr><tr><td>datetime-local</td><td>é€‰æ‹©ä¸€ä¸ªæ—¥æœŸå’Œæ—¶é—´ (æ— æ—¶åŒº)</td></tr><tr><td>email</td><td>åŒ…å« e-mail åœ°å€çš„è¾“å…¥åŸŸ</td></tr><tr><td>month</td><td>é€‰æ‹©ä¸€ä¸ªæœˆä»½</td></tr><tr><td>number</td><td>æ•°å€¼çš„è¾“å…¥åŸŸ</td></tr><tr><td>range</td><td>ä¸€å®šèŒƒå›´å†…æ•°å­—å€¼çš„è¾“å…¥åŸŸ</td></tr><tr><td>search</td><td>ç”¨äºæœç´¢åŸŸ</td></tr><tr><td>tel</td><td>å®šä¹‰è¾“å…¥ç”µè¯å·ç å­—æ®µ</td></tr><tr><td>time</td><td>é€‰æ‹©ä¸€ä¸ªæ—¶é—´</td></tr><tr><td>url</td><td>URL åœ°å€çš„è¾“å…¥åŸŸ</td></tr><tr><td>week</td><td>é€‰æ‹©å‘¨å’Œå¹´</td></tr></tbody></table><p>åŒæ—¶ï¼Œè¿˜å¢åŠ äº†æ–°çš„è¡¨å•å±æ€§ï¼š</p><ol><li>placehoder å±æ€§ï¼Œç®€çŸ­çš„æç¤ºåœ¨ç”¨æˆ·è¾“å…¥å€¼å‰ä¼šæ˜¾ç¤ºåœ¨è¾“å…¥åŸŸä¸Šã€‚å³æˆ‘ä»¬å¸¸è§çš„è¾“å…¥æ¡†é»˜è®¤æç¤ºï¼Œåœ¨ç”¨æˆ·è¾“å…¥åæ¶ˆå¤±ã€‚</li><li>required  å±æ€§ï¼Œæ˜¯ä¸€ä¸ª boolean å±æ€§ã€‚è¦æ±‚å¡«å†™çš„è¾“å…¥åŸŸä¸èƒ½ä¸ºç©º</li><li>pattern å±æ€§ï¼Œæè¿°äº†ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç”¨äºéªŒè¯<code>&lt;input&gt;</code> å…ƒç´ çš„å€¼ã€‚</li><li>min å’Œ max å±æ€§ï¼Œè®¾ç½®å…ƒç´ æœ€å°å€¼ä¸æœ€å¤§å€¼ã€‚</li><li>step å±æ€§ï¼Œä¸ºè¾“å…¥åŸŸè§„å®šåˆæ³•çš„æ•°å­—é—´éš”ã€‚</li><li>height å’Œ width å±æ€§ï¼Œç”¨äº image ç±»å‹çš„ <code>&lt;input&gt;</code> æ ‡ç­¾çš„å›¾åƒé«˜åº¦å’Œå®½åº¦ã€‚</li><li>autofocus å±æ€§ï¼Œæ˜¯ä¸€ä¸ª boolean å±æ€§ã€‚è§„å®šåœ¨é¡µé¢åŠ è½½æ—¶ï¼ŒåŸŸè‡ªåŠ¨åœ°è·å¾—ç„¦ç‚¹ã€‚</li><li>multiple å±æ€§ ï¼Œæ˜¯ä¸€ä¸ª boolean å±æ€§ã€‚è§„å®š<code>&lt;input&gt;</code> å…ƒç´ ä¸­å¯é€‰æ‹©å¤šä¸ªå€¼ã€‚ã€€ã€€</li></ol><h3 id="3-éŸ³é¢‘å’Œè§†é¢‘"><a href="#3-éŸ³é¢‘å’Œè§†é¢‘" class="headerlink" title="3.éŸ³é¢‘å’Œè§†é¢‘"></a>3.éŸ³é¢‘å’Œè§†é¢‘</h3><p>HTML5 æä¾›äº† éŸ³é¢‘å’Œè§†é¢‘ ã€‚</p><p><strong>éŸ³é¢‘ï¼š<code>&lt;audio&gt;</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"xxx.ogg"</span> <span class="attr">type</span>=<span class="string">"audio/ogg"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"xxx.mp3"</span> <span class="attr">type</span>=<span class="string">"audio/mpeg"</span>&gt;</span></span><br><span class="line">  æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ audio å…ƒç´ ã€‚</span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è§†é¢‘ï¼š<code>&lt;video&gt;</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"300"</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"xxx.mp4"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"xxx.ogg"</span> <span class="attr">type</span>=<span class="string">"video/ogg"</span>&gt;</span></span><br><span class="line">  æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒVideoæ ‡ç­¾ã€‚</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-canvas-ç»˜å›¾"><a href="#4-canvas-ç»˜å›¾" class="headerlink" title="4.canvas ç»˜å›¾"></a>4.canvas ç»˜å›¾</h3><ul><li>HTML5 <code>&lt;canvas&gt;</code> æ ‡ç­¾ç”¨äºç»˜åˆ¶å›¾åƒï¼ˆé€šè¿‡è„šæœ¬ï¼Œé€šå¸¸æ˜¯ JavaScriptï¼‰ã€‚  </li><li>ä¸è¿‡ï¼Œ<code>&lt;canvas&gt;</code> å…ƒç´ æœ¬èº«å¹¶æ²¡æœ‰ç»˜åˆ¶èƒ½åŠ›ï¼ˆå®ƒä»…ä»…æ˜¯å›¾å½¢çš„å®¹å™¨ï¼‰ - æ‚¨å¿…é¡»ä½¿ç”¨è„šæœ¬æ¥å®Œæˆå®é™…çš„ç»˜å›¾ä»»åŠ¡ã€‚  </li><li>getContext() æ–¹æ³•å¯è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æä¾›äº†ç”¨äºåœ¨ç”»å¸ƒä¸Šç»˜å›¾çš„æ–¹æ³•å’Œå±æ€§ã€‚</li></ul><h3 id="5-SVG-ç»˜å›¾"><a href="#5-SVG-ç»˜å›¾" class="headerlink" title="5.SVG ç»˜å›¾"></a>5.SVG ç»˜å›¾</h3><p>SVG æ„ä¸ºå¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼ˆScalable Vector Graphicsï¼‰</p><p>SVG ä¸ Canvasä¸¤è€…é—´çš„åŒºåˆ«</p><ul><li>SVG æ˜¯ä¸€ç§ä½¿ç”¨ XML æè¿° 2D å›¾å½¢çš„è¯­è¨€ã€‚</li><li>Canvas é€šè¿‡ JavaScript æ¥ç»˜åˆ¶ 2D å›¾å½¢ã€‚</li><li>SVG åŸºäº XMLï¼Œè¿™æ„å‘³ç€ SVG DOM ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯ç”¨çš„ã€‚æ‚¨å¯ä»¥ä¸ºæŸä¸ªå…ƒç´ é™„åŠ  JavaScript äº‹ä»¶å¤„ç†å™¨ã€‚</li><li>åœ¨ SVG ä¸­ï¼Œæ¯ä¸ªè¢«ç»˜åˆ¶çš„å›¾å½¢å‡è¢«è§†ä¸ºå¯¹è±¡ã€‚å¦‚æœ SVG å¯¹è±¡çš„å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæµè§ˆå™¨èƒ½å¤Ÿè‡ªåŠ¨é‡ç°å›¾å½¢ã€‚</li><li>Canvas æ˜¯é€åƒç´ è¿›è¡Œæ¸²æŸ“çš„ã€‚åœ¨ canvas ä¸­ï¼Œä¸€æ—¦å›¾å½¢è¢«ç»˜åˆ¶å®Œæˆï¼Œå®ƒå°±ä¸ä¼šç»§ç»­å¾—åˆ°æµè§ˆå™¨çš„å…³æ³¨ã€‚å¦‚æœå…¶ä½ç½®å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ•´ä¸ªåœºæ™¯ä¹Ÿéœ€è¦é‡æ–°ç»˜åˆ¶ï¼ŒåŒ…æ‹¬ä»»ä½•æˆ–è®¸å·²è¢«å›¾å½¢è¦†ç›–çš„å¯¹è±¡ã€‚</li></ul><h3 id="6-åœ°ç†å®šä½ï¼ˆGeolocationï¼‰"><a href="#6-åœ°ç†å®šä½ï¼ˆGeolocationï¼‰" class="headerlink" title="6.åœ°ç†å®šä½ï¼ˆGeolocationï¼‰"></a>6.åœ°ç†å®šä½ï¼ˆGeolocationï¼‰</h3><p>HTML5 Geolocationï¼ˆåœ°ç†å®šä½ï¼‰ç”¨äºå®šä½ç”¨æˆ·çš„ä½ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.navigator.geolocation &#123;</span><br><span class="line">  getCurrentPosition:  fn  <span class="comment">// ç”¨äºè·å–å½“å‰çš„ä½ç½®æ•°æ®</span></span><br><span class="line">  watchPosition: fn  <span class="comment">// ç›‘è§†ç”¨æˆ·ä½ç½®çš„æ”¹å˜</span></span><br><span class="line">  clearWatch: fn  <span class="comment">// æ¸…é™¤å®šä½ç›‘è§†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·å–ç”¨æˆ·å®šä½ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">navigator.geolocation.getCurrentPosition(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">pos</span>) </span>&#123; <span class="comment">// å®šä½æˆåŠŸçš„å›è°ƒ</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç”¨æˆ·å®šä½æ•°æ®è·å–æˆåŠŸ'</span>)</span><br><span class="line">    <span class="comment">// console.log(arguments);</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å®šä½æ—¶é—´ï¼š'</span>,pos.timestamp)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç»åº¦ï¼š'</span>,pos.coords.longitude)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'çº¬åº¦ï¼š'</span>,pos.coords.latitude)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æµ·æ‹”ï¼š'</span>,pos.coords.altitude)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'é€Ÿåº¦ï¼š'</span>,pos.coords.speed)</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123; <span class="comment">// å®šä½å¤±è´¥çš„å›è°ƒ</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç”¨æˆ·å®šä½æ•°æ®è·å–å¤±è´¥'</span>)</span><br><span class="line">    <span class="comment">//console.log(arguments);</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="7-æ‹–æ”¾API"><a href="#7-æ‹–æ”¾API" class="headerlink" title="7.æ‹–æ”¾API"></a>7.æ‹–æ”¾API</h3><p>æ‹–æ”¾æ˜¯ä¸€ç§å¸¸è§çš„ç‰¹æ€§ï¼Œå³æŠ“å–å¯¹è±¡ä»¥åæ‹–åˆ°å¦ä¸€ä¸ªä½ç½®ã€‚<br>åœ¨ HTML5 ä¸­ï¼Œæ‹–æ”¾æ˜¯æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•å…ƒç´ éƒ½èƒ½å¤Ÿæ‹–æ”¾ã€‚</p><h3 id="8-Web-Storage"><a href="#8-Web-Storage" class="headerlink" title="8.Web Storage"></a>8.Web Storage</h3><p>ä½¿ç”¨HTML5å¯ä»¥åœ¨æœ¬åœ°å­˜å‚¨ç”¨æˆ·çš„æµè§ˆæ•°æ®ã€‚<br>å®¢æˆ·ç«¯å­˜å‚¨æ•°æ®çš„ä¸¤ä¸ªå¯¹è±¡ä¸ºï¼š</p><p><strong>localStorage</strong>ï¼šæ²¡æœ‰æ—¶é—´é™åˆ¶çš„æ•°æ®å­˜å‚¨<br><strong>sessionStorage</strong>ï¼š é’ˆå¯¹ä¸€ä¸ª session çš„æ•°æ®å­˜å‚¨, å½“ç”¨æˆ·å…³é—­æµè§ˆå™¨çª—å£åï¼Œæ•°æ®ä¼šè¢«åˆ é™¤ã€‚</p><p>ä¸ç®¡æ˜¯ localStorageï¼Œè¿˜æ˜¯ sessionStorageï¼Œå¯ä½¿ç”¨çš„APIéƒ½ç›¸åŒï¼Œå¸¸ç”¨çš„æœ‰å¦‚ä¸‹å‡ ä¸ªï¼ˆä»¥localStorageä¸ºä¾‹ï¼‰ï¼š</p><ol><li>ä¿å­˜æ•°æ®ï¼šlocalStorage.setItem(key,value);</li><li>è¯»å–æ•°æ®ï¼šlocalStorage.getItem(key);</li><li>åˆ é™¤å•ä¸ªæ•°æ®ï¼šlocalStorage.removeItem(key);</li><li>åˆ é™¤æ‰€æœ‰æ•°æ®ï¼šlocalStorage.clear();</li><li>å¾—åˆ°æŸä¸ªç´¢å¼•çš„keyï¼šlocalStorage.key(index);</li></ol><h3 id="9-WebSocket"><a href="#9-WebSocket" class="headerlink" title="9.WebSocket"></a>9.WebSocket</h3><p>WebSocket æ˜¯HTML5å¼€å§‹æä¾›çš„ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šè®¯çš„åè®®ã€‚<br>åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œç„¶åï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚<br>ä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥æ•°æ®äº’ç›¸ä¼ é€ã€‚<br>æµè§ˆå™¨é€šè¿‡ JavaScript å‘æœåŠ¡å™¨å‘å‡ºå»ºç«‹ WebSocket è¿æ¥çš„è¯·æ±‚ï¼Œè¿æ¥å»ºç«‹ä»¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å°±å¯ä»¥é€šè¿‡ TCP è¿æ¥ç›´æ¥äº¤æ¢æ•°æ®ã€‚<br>å½“ä½ è·å– Web Socket è¿æ¥åï¼Œä½ å¯ä»¥é€šè¿‡ <strong>send()</strong> æ–¹æ³•æ¥å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œå¹¶é€šè¿‡ <strong>onmessage</strong> äº‹ä»¶æ¥æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>W3Cschoolæ•™ç¨‹(w3cschool.cn)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">WebSocketTest</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">         <span class="keyword">if</span> (<span class="string">"WebSocket"</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span></span><br><span class="line"><span class="actionscript">            alert(<span class="string">"æ‚¨çš„æµè§ˆå™¨æ”¯æŒ WebSocket!"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// æ‰“å¼€ä¸€ä¸ª web socket</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">"ws://localhost:9998/echo"</span>);</span></span><br><span class="line"><span class="actionscript">            ws.onopen = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">               <span class="comment">// Web Socket å·²è¿æ¥ä¸Šï¼Œä½¿ç”¨ send() æ–¹æ³•å‘é€æ•°æ®</span></span></span><br><span class="line"><span class="actionscript">               ws.send(<span class="string">"å‘é€æ•°æ®"</span>);</span></span><br><span class="line"><span class="actionscript">               alert(<span class="string">"æ•°æ®å‘é€ä¸­..."</span>);</span></span><br><span class="line">            &#125;;</span><br><span class="line"><span class="actionscript">            ws.onmessage = <span class="function"><span class="keyword">function</span> <span class="params">(evt)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">               <span class="keyword">var</span> received_msg = evt.data;</span></span><br><span class="line"><span class="actionscript">               alert(<span class="string">"æ•°æ®å·²æ¥æ”¶..."</span>);</span></span><br><span class="line">            &#125;;</span><br><span class="line"><span class="actionscript">            ws.onclose = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">               <span class="comment">// å…³é—­ websocket</span></span></span><br><span class="line"><span class="actionscript">               alert(<span class="string">"è¿æ¥å·²å…³é—­..."</span>);</span></span><br><span class="line">            &#125;;</span><br><span class="line"><span class="actionscript">         &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// æµè§ˆå™¨ä¸æ”¯æŒ WebSocket</span></span></span><br><span class="line"><span class="actionscript">            alert(<span class="string">"æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ WebSocket!"</span>);</span></span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"sse"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:WebSocketTest()"</span>&gt;</span>è¿è¡Œ WebSocket<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>éå•†ç”¨ï¼Œä¾µåˆ ï¼Œè½¬è‡ª: <a href="https://www.cnblogs.com/gaosirs/p/10756524.html" target="_blank" rel="noopener">https://www.cnblogs.com/gaosirs/p/10756524.html</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-è¯­ä¹‰åŒ–æ ‡ç­¾&quot;&gt;&lt;a href=&quot;#1-è¯­ä¹‰åŒ–æ ‡ç­¾&quot; class=&quot;headerlink&quot; title=&quot;1.è¯­ä¹‰åŒ–æ ‡ç­¾&quot;&gt;&lt;/a&gt;1.è¯­ä¹‰åŒ–æ ‡ç­¾&lt;/h3&gt;&lt;p&gt;è¯­ä¹‰åŒ–æ ‡ç­¾ ä¸ºé¡µé¢æä¾›äº†æ›´å¥½çš„é¡µé¢ç»“æ„ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;th&gt;å±æ€§&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;&amp;lt;header&amp;gt;&amp;lt;/header&amp;gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰æ–‡æ¡£çš„å¤´éƒ¨åŒºåŸŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;footer&amp;gt;&amp;lt;/footer&amp;gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰æ–‡æ¡£çš„å°¾éƒ¨åŒºåŸŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;nav&amp;gt;&amp;lt;/nav&amp;gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰æ–‡æ¡£çš„å¯¼èˆªåŒºåŸŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;section&amp;gt;&amp;lt;/section&amp;gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰æ–‡æ¡£çš„æ®µè½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;article&amp;gt;&amp;lt;/article&amp;gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰é¡µé¢ç‹¬ç«‹çš„å†…å®¹åŒºåŸŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;aside&amp;gt;&amp;lt;/aside&amp;gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰é¡µé¢ä¾§è¾¹æ å†…å®¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;command&amp;gt;&amp;lt;/command&amp;gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰å‘½ä»¤æŒ‰é’®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;details&amp;gt;&amp;lt;/details&amp;gt;&lt;/td&gt;
&lt;td&gt;æ ‡ç­¾åŒ…å« details å…ƒç´ çš„æ ‡é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt;dialog&amp;gt;&amp;lt;/dialog&amp;gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰å¯¹è¯æ¡†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="HTML5" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/HTML5/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="HTML5" scheme="https://heiyehk.github.io/blog/tags/HTML5/"/>
    
  </entry>
  
  <entry>
    <title>HTML5-è¯­ä¹‰åŒ–</title>
    <link href="https://heiyehk.github.io/blog/HTML5-%E8%AF%AD%E4%B9%89%E5%8C%96/"/>
    <id>https://heiyehk.github.io/blog/HTML5-%E8%AF%AD%E4%B9%89%E5%8C%96/</id>
    <published>2020-04-30T04:33:37.000Z</published>
    <updated>2020-05-20T08:57:17.915Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–ï¼Ÿå°±æ˜¯ç”¨åˆç†ã€æ­£ç¡®çš„æ ‡ç­¾æ¥å±•ç¤ºå†…å®¹ï¼Œæ¯”å¦‚h1~h6å®šä¹‰æ ‡é¢˜ã€‚</p><h3 id="è¯­ä¹‰åŒ–ä¼˜ç‚¹ï¼š"><a href="#è¯­ä¹‰åŒ–ä¼˜ç‚¹ï¼š" class="headerlink" title="è¯­ä¹‰åŒ–ä¼˜ç‚¹ï¼š"></a>è¯­ä¹‰åŒ–ä¼˜ç‚¹ï¼š</h3><ul><li>æ˜“äºç”¨æˆ·é˜…è¯»ï¼Œæ ·å¼ä¸¢å¤±çš„æ—¶å€™èƒ½è®©é¡µé¢å‘ˆç°æ¸…æ™°çš„ç»“æ„ã€‚</li><li>æœ‰åˆ©äºSEOï¼Œæœç´¢å¼•æ“æ ¹æ®æ ‡ç­¾æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ã€‚</li><li>æ–¹ä¾¿å…¶ä»–è®¾å¤‡è§£æï¼Œå¦‚ç›²äººé˜…è¯»å™¨æ ¹æ®è¯­ä¹‰æ¸²æŸ“ç½‘é¡µ</li><li>æœ‰åˆ©äºå¼€å‘å’Œç»´æŠ¤ï¼Œè¯­ä¹‰åŒ–æ›´å…·å¯è¯»æ€§ï¼Œä»£ç æ›´å¥½ç»´æŠ¤ï¼Œä¸CSS3å…³ç³»æ›´å’Œè°ã€‚</li></ul><a id="more"></a><p><img src="http://www.daqianduan.com/wp-content/uploads/2018/03/html5-768x508.png" alt="avatar"></p><ol><li><code>&lt;header&gt;</code></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­ï¼Œæ‚¨å¯ä»¥å®šä¹‰å¤šä¸ª&#96;&#96;&#96;&lt;header&gt;&#96;&#96;&#96;å…ƒç´ ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯&#96;&#96;&#96;&lt;header&gt;&#96;&#96;&#96;å…ƒç´ ä¸èƒ½ä½œä¸º&#96;&#96;&#96;&lt;address&gt;&#96;&#96;&#96;ã€&#96;&#96;&#96;&lt;footer&gt;&#96;&#96;&#96; æˆ– &#96;&#96;&#96;&lt;header&gt;&#96;&#96;&#96; å…ƒç´ çš„å­å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">2. &#96;&#96;&#96;&lt;nav&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­ï¼Œå¯å®šä¹‰å¤šä¸ª&#96;&#96;&#96;&lt;nav&gt;&#96;&#96;&#96;å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">3. &#96;&#96;&#96;&lt;main&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><figcaption><span>å®šä¹‰æ–‡æ¡£çš„ä¸»è¦å†…å®¹ï¼Œè¯¥å†…å®¹åœ¨æ–‡æ¡£ä¸­åº”å½“æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸åŒ…å«ä»»ä½•åœ¨æ–‡æ¡£ä¸­é‡å¤çš„å†…å®¹ï¼Œæ¯”å¦‚ä¾§è¾¹æ ï¼Œå¯¼èˆªæ é“¾æ¥ï¼Œç‰ˆæƒä¿¡æ¯ï¼Œç½‘ç«™logoï¼Œæœç´¢æ¡†ï¼ˆé™¤éæœç´¢æ¡†ä½œä¸ºæ–‡æ¡£çš„ä¸»è¦åŠŸèƒ½ï¼‰ã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­ä¸èƒ½å‡ºç°å¤šä¸ª&#96;&#96;&#96;&lt;main&gt;&#96;&#96;&#96;æ ‡ç­¾ã€‚</span><br><span class="line"></span><br><span class="line">4. &#96;&#96;&#96;&lt;article&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å½“&#96;&#96;&#96;&lt;article&gt;&#96;&#96;&#96;å…ƒç´ åµŒå¥—ä½¿ç”¨æ—¶ï¼Œåˆ™è¯¥å…ƒç´ ä»£è¡¨ä¸å¤–å±‚å…ƒç´ æœ‰å…³çš„æ–‡ç« ã€‚ä¾‹å¦‚ï¼Œä»£è¡¨åšå®¢è¯„è®ºçš„&#96;&#96;&#96;&lt;article&gt;&#96;&#96;&#96;å…ƒç´ å¯åµŒå¥—åœ¨ä»£è¡¨åšå®¢æ–‡ç« çš„&#96;&#96;&#96;&lt;article&gt;&#96;&#96;&#96;å…ƒç´ ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">5. &#96;&#96;&#96;&lt;aside&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><figcaption><span>å…ƒç´ è¡¨ç¤ºä¸€ä¸ªå’Œå…¶ä½™é¡µé¢å†…å®¹å‡ ä¹æ— å…³çš„éƒ¨åˆ†ï¼Œè¢«è®¤ä¸ºæ˜¯ç‹¬ç«‹äºè¯¥å†…å®¹çš„ä¸€éƒ¨åˆ†ä¸”å¯ä»¥è¢«å•ç‹¬çš„æ‹†åˆ†å‡ºæ¥è€Œä¸ä¼šå½±å“æ•´ä½“ã€‚é€šå¸¸è¡¨ç°ä¸ºä¾§è¾¹æ æˆ–åµŒå…¥å†…å®¹ã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">6. &#96;&#96;&#96;&lt;footer&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä½¿ç”¨footeræ’å…¥è”ç³»ä¿¡æ¯æ—¶ï¼Œåº”åœ¨ footer å…ƒç´ å†…ä½¿ç”¨ &#96;&#96;&#96;&lt;address&gt;&#96;&#96;&#96; å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">æ³¨æ„ä¸èƒ½åŒ…å«&#96;&#96;&#96;&lt;footer&gt;&#96;&#96;&#96;æˆ–è€…&#96;&#96;&#96;&lt;header&gt;</span><br></pre></td></tr></table></figure><ol start="7"><li><code>&lt;section&gt;</code></li></ol><p><code>&lt;section&gt;</code>è¡¨ç¤ºæ–‡æ¡£ä¸­çš„ä¸€ä¸ªåŒºåŸŸï¼ˆæˆ–èŠ‚ï¼‰ï¼Œæ¯”å¦‚ï¼Œå†…å®¹ä¸­çš„ä¸€ä¸ªä¸“é¢˜ç»„ã€‚</p><p>å¦‚æœå…ƒç´ å†…å®¹å¯ä»¥åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†çš„è¯ï¼Œåº”è¯¥ä½¿ç”¨ <code>&lt;article&gt;</code> è€Œä¸æ˜¯ <code>&lt;section&gt;</code>ã€‚<br>ä¸è¦æŠŠ <code>&lt;section&gt;</code> å…ƒç´ ä½œä¸ºä¸€ä¸ªæ™®é€šçš„å®¹å™¨æ¥ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯å½“<code>&lt;section&gt;</code>ä»…ä»…æ˜¯ä¸ºäº†ç¾åŒ–æ ·å¼æˆ–æ–¹ä¾¿è„šæœ¬ä½¿ç”¨çš„æ—¶å€™ï¼Œåº”ä½¿ç”¨<code>&lt;div&gt;</code>ã€‚</p><p>è¿™å‡ ä¸ªæ ‡ç­¾ï¼Œæ¯”è¾ƒå®¹æ˜“æ··æ·†çš„æ˜¯<code>&lt;section&gt;</code>ã€<code>&lt;article&gt;</code>ï¼Œæ‰€ä»¥è¿™é‡Œç‰¹åˆ«è¯´æ˜ï¼š</p><p>â€œAuthors are encouraged to use the article element instead of the section element when it would make sense to syndicate the contents of the elemen.â€</p><p>é€šä¿—æ¥è¯´å°±æ˜¯<code>&lt;article&gt;</code>æ¯”<code>&lt;section&gt;</code>æ›´å…·æœ‰ç‹¬ç«‹æ€§ã€å®Œæ•´æ€§ã€‚å¯é€šè¿‡è¯¥æ®µå†…å®¹è„±ç¦»äº†æ‰€åœ¨çš„è¯­å¢ƒï¼Œæ˜¯å¦å®Œæ•´ã€ç‹¬ç«‹æ¥åˆ¤æ–­ã€‚</p><blockquote><p>éå•†ç”¨ï¼Œä¾µåˆ ï¼Œè½¬è‡ª: <a href="http://www.daqianduan.com/6549.html" target="_blank" rel="noopener">http://www.daqianduan.com/6549.html</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–ï¼Ÿå°±æ˜¯ç”¨åˆç†ã€æ­£ç¡®çš„æ ‡ç­¾æ¥å±•ç¤ºå†…å®¹ï¼Œæ¯”å¦‚h1~h6å®šä¹‰æ ‡é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è¯­ä¹‰åŒ–ä¼˜ç‚¹ï¼š&quot;&gt;&lt;a href=&quot;#è¯­ä¹‰åŒ–ä¼˜ç‚¹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;è¯­ä¹‰åŒ–ä¼˜ç‚¹ï¼š&quot;&gt;&lt;/a&gt;è¯­ä¹‰åŒ–ä¼˜ç‚¹ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æ˜“äºç”¨æˆ·é˜…è¯»ï¼Œæ ·å¼ä¸¢å¤±çš„æ—¶å€™èƒ½è®©é¡µé¢å‘ˆç°æ¸…æ™°çš„ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰åˆ©äºSEOï¼Œæœç´¢å¼•æ“æ ¹æ®æ ‡ç­¾æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ã€‚&lt;/li&gt;
&lt;li&gt;æ–¹ä¾¿å…¶ä»–è®¾å¤‡è§£æï¼Œå¦‚ç›²äººé˜…è¯»å™¨æ ¹æ®è¯­ä¹‰æ¸²æŸ“ç½‘é¡µ&lt;/li&gt;
&lt;li&gt;æœ‰åˆ©äºå¼€å‘å’Œç»´æŠ¤ï¼Œè¯­ä¹‰åŒ–æ›´å…·å¯è¯»æ€§ï¼Œä»£ç æ›´å¥½ç»´æŠ¤ï¼Œä¸CSS3å…³ç³»æ›´å’Œè°ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="HTML5" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/HTML5/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="HTML5" scheme="https://heiyehk.github.io/blog/tags/HTML5/"/>
    
  </entry>
  
  <entry>
    <title>SEOå…³é”®è¯</title>
    <link href="https://heiyehk.github.io/blog/SEO%E5%85%B3%E9%94%AE%E8%AF%8D/"/>
    <id>https://heiyehk.github.io/blog/SEO%E5%85%B3%E9%94%AE%E8%AF%8D/</id>
    <published>2020-04-30T03:29:41.000Z</published>
    <updated>2020-05-20T08:57:58.789Z</updated>
    
    <content type="html"><![CDATA[<h3 id="titleï¼ˆç½‘ç«™æ ‡é¢˜ï¼‰"><a href="#titleï¼ˆç½‘ç«™æ ‡é¢˜ï¼‰" class="headerlink" title="titleï¼ˆç½‘ç«™æ ‡é¢˜ï¼‰"></a>titleï¼ˆç½‘ç«™æ ‡é¢˜ï¼‰</h3><p>titleï¼Œå°±æ˜¯æµè§ˆå™¨ä¸Šæ˜¾ç¤ºçš„é‚£äº›å†…å®¹ï¼Œä¸ä»…ç”¨æˆ·èƒ½çœ‹åˆ°ï¼Œä¹Ÿèƒ½è¢«æœç´¢å¼•æ“æ£€ç´¢åˆ°ï¼ˆæœç´¢å¼•æ“åœ¨æŠ“å–ç½‘é¡µæ—¶ï¼Œæœ€å…ˆè¯»å–çš„å°±æ˜¯ç½‘é¡µæ ‡é¢˜ï¼Œæ‰€ä»¥titleæ˜¯å¦æ­£ç¡®è®¾ç½®æå…¶é‡è¦ã€‚ï¼‰titleä¸€èˆ¬ä¸è¶…è¿‡80ä¸ªå­—ç¬¦ï¼Œè€Œä¸”è¯è¯­é—´è¦ç”¨è‹±æ–‡â€œ-â€éš”å¼€ï¼Œå› ä¸ºè®¡ç®—æœºåªå¯¹è‹±è¯­çš„æ•æ„Ÿæ€§è¾ƒé«˜ï¼Œå¯¹æ±‰è¯­çš„æ•æ„Ÿæ€§ä¸é«˜ã€‚ </p><p>ç”¨æ³•ï¼š<code>&lt;title&gt;ç½‘ç«™æ ‡é¢˜&lt;/title&gt;</code>  </p><a id="more"></a><p>1ï¼‰é¦–é¡µtitleå†™æ³•ï¼Œä¸€èˆ¬æ˜¯â€œç½‘ç«™åç§°-ä¸»å…³é”®è¯æˆ–ä¸€å¥å«æœ‰ä¸»å…³é”®è¯çš„æè¿°â€ã€‚å°ç¼–åœ¨åšä¼˜åŒ–æ—¶ä¹ æƒ¯æŠŠç½‘ç«™åç§°æ”¾æœ€å‰é¢ï¼Œä¸»å…³é”®è¯æ”¾åé¢ï¼Œå› ä¸ºæœç´¢å¼•æ“ç»™äºˆæ ‡é¢˜æœ€å‰é¢çš„è¯æ¯”åé¢çš„é«˜ã€‚æ¯”å¦‚ï¼Œåšâ€œè´·æ¬¾â€è¿™ä¸ªè¯ï¼Œå°±è¿™æ ·å†™â€œå®¶è´¢ç®¡åŠ -æˆéƒ½è´·æ¬¾å…¬å¸_æˆéƒ½ä¸ªäººè´·æ¬¾_æˆéƒ½æŠµæŠ¼è´·æ¬¾_æˆéƒ½å°é¢è´·æ¬¾_æˆéƒ½ä¿¡ç”¨è´·æ¬¾â€ã€‚</p><p>2ï¼‰æ ç›®é¡µtitleå†™æ³•ï¼Œä¸€èˆ¬æœ‰2ç§ï¼šâ€œæ ç›®åç§°-ç½‘ç«™åç§°â€ã€â€œæ ç›®åç§°æ ç›®å…³é”®è¯-ç½‘ç«™åç§°â€ã€‚å°ç¼–å»ºè®®ç”¨â€œæ ç›®åç§°-ç½‘ç«™åç§°â€ã€‚è€Œä¸”æ ç›®åç§°æœ€å¥½ç”¨å…³é”®è¯æ¥ç¡®å®šï¼Œæ¯”å¦‚è´·æ¬¾äº§å“ç±»å‹æ ç›®æœ€å¥½å°±ç”¨è´·æ¬¾ç±»å‹ï¼Œè€Œä¸è¦èµ·ä¸ªè®©äººæ— æ³•è¯†åˆ«çš„åå­—å¦‚è´·æ¬¾æ¥äººï¼Œè´·æ¬¾çœ‹çœ‹ï¼Œæˆ–è´·æ¬¾åŠ ä¸Šä¸€äº›ç‰¹æ®Šç¬¦å·ï¼Œè¿™ç§å†™æ³•è™½ç„¶å¾ˆæœ‰ä¸ªæ€§ï¼Œä½†ä¼šè®©ä½ çš„ç½‘ç«™åœ¨ä¼˜åŒ–ä¸Šå äº†ä¸‹é£ã€‚</p><p>3ï¼‰åˆ†ç±»åˆ—è¡¨é¡µtitleå†™æ³•ï¼Œä¸€èˆ¬æ˜¯â€œåˆ†ç±»åˆ—è¡¨é¡µåç§°-æ ç›®åç§°-ç½‘ç«™åç§°â€ï¼Œè¿™ä¸ªå’Œæ ç›®é¡µå·®ä¸å¤šã€‚</p><p>4ï¼‰æ–‡ç« é¡µtitleå†™æ³•ï¼Œä¸€èˆ¬æœ‰3ç§ï¼šâ€œæ–‡ç« æ ‡é¢˜-ç½‘ç«™åç§°â€ã€â€œå†…å®¹æ ‡é¢˜-æ ç›®åç§°â€ã€â€œå†…å®¹æ ‡é¢˜-æ ç›®åç§°-ç½‘ç«™åç§°â€ã€‚å…¶ä¸­ï¼Œâ€œå†…å®¹æ ‡é¢˜-æ ç›®åç§°-ç½‘ç«™åç§°â€çš„å†™æ³•æœ€ä¸ºè§„èŒƒï¼Œä½†ä¹Ÿç›¸å¯¹å¤æ‚ï¼Œå®ƒèƒ½ç»™ç”¨æˆ·å¾ˆå¥½çš„æç¤ºï¼Œè®©ç”¨æˆ·çŸ¥é“ä»–åœ¨è®¿é—®å“ªç¯‡æ–‡ç« ï¼Œå¹¶ä¸”æ˜¯åœ¨å“ªä¸ªç½‘ç«™çš„å“ªä¸ªæ ç›®ä¸‹ã€‚</p><h3 id="keywordsï¼ˆå…³é”®è¯ï¼‰"><a href="#keywordsï¼ˆå…³é”®è¯ï¼‰" class="headerlink" title="keywordsï¼ˆå…³é”®è¯ï¼‰"></a>keywordsï¼ˆå…³é”®è¯ï¼‰</h3><p>keywordsï¼Œæ˜¯ç”¨æˆ·ä¸æŸ¥çœ‹æºä»£ç çœ‹ä¸åˆ°çš„ã€‚ä¸»è¦ä½œç”¨æ˜¯å‘Šè¯‰æœç´¢å¼•æ“æœ¬é¡µå†…å®¹æ˜¯å›´ç»•å“ªäº›è¯å±•å¼€çš„ã€‚å› æ­¤keywordsçš„æ¯ä¸ªè¯éƒ½è¦èƒ½åœ¨å†…å®¹ä¸­æ‰¾åˆ°ç›¸åº”åŒ¹é…ï¼Œæ‰æœ‰åˆ©äºæ’åã€‚keywordsä¸€èˆ¬ä¸è¶…è¿‡3ä¸ªï¼Œæ¯ä¸ªå…³é”®è¯ä¸å®œè¿‡é•¿ï¼Œè€Œä¸”è¯è¯­é—´è¦ç”¨è‹±æ–‡â€œ,â€éš”å¼€ã€‚ä¸ºä»€ä¹ˆç”¨è‹±æ–‡ä¸Šæ–‡å·²ç»è¯´è¿‡ã€‚è€Œä¸”ï¼Œå°½é‡å°†é‡è¦çš„å…³é”®å­—é å‰æ”¾ï¼Œå› ä¸ºé åçš„å…³é”®å­—æ’åè¾ƒå·®ï¼Œé™¤éä½ ç«™æœ‰å¾ˆé«˜çš„æƒé‡ã€‚</p><p>å°é“æ¶ˆæ¯ç§°keywordsæ›¾è¢«ç™¾åº¦ã€è°·æ­Œã€é›…è™ç­‰æœç´¢å¼•æ“å‰”é™¤ï¼Œå°†ä¸ä¼šå†å½±å“æœç´¢å¼•æ“çš„æ’åºç»“æœï¼Œå°ç¼–è®¤ä¸ºè®¾ç½®ä¸€ä¸‹æ€»æ²¡åå¤„ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›æœç´¢å¼•æ“æ¯”è¾ƒé‡è§†keywordsæ ‡ç­¾çš„ã€‚</p><p>ç”¨æ³•ï¼š<code>&lt;meta name=&quot;Keywords&quot; Content=&quot;å…³é”®è¯1,å…³é”®è¯2,å…³é”®è¯3,å…³é”®è¯4&quot;&gt;</code></p><p>1ï¼‰é¦–é¡µkeywordså†™æ³•ï¼Œä¸€èˆ¬æ˜¯â€œç½‘ç«™åç§°,ä¸»è¦æ ç›®å,ä¸»è¦å…³é”®è¯â€ã€‚</p><p>2ï¼‰æ ç›®é¡µkeywordså†™æ³•ï¼Œä¸€èˆ¬æ˜¯â€œæ ç›®åç§°,æ ç›®å…³é”®å­—,æ ç›®åˆ†ç±»åˆ—è¡¨åç§°â€ã€‚</p><p>3ï¼‰åˆ†ç±»åˆ—è¡¨é¡µkeywordså†™æ³•ï¼Œè¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œåªè¦å°†ä½ è¿™ä¸ªæ ç›®ä¸­çš„ä¸»è¦å…³é”®å­—å†™å…¥å³å¯ã€‚</p><p>4ï¼‰æ–‡ç« é¡µkeywordså†™æ³•ï¼Œå»ºè®®å¤§å®¶æå–æ–‡ç« ä¸­çš„å…³é”®è¯ï¼Œæ¯”å¦‚æˆ‘çš„æ–‡ç« ä¸»è¦æ˜¯è®²ä¿¡ç”¨è´·æ¬¾çš„ï¼Œé‚£ä¹ˆæˆ‘å…³é”®è¯è‚¯å®šæ˜¯ä¿¡ç”¨è´·æ¬¾ï¼Œå¦‚æœä½ è§‰å¾—ä½ æå–å…³é”®è¯çš„èƒ½åŠ›è¾ƒå·®ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ–‡ç« ä¸­å‡ºç°æ¯”è¾ƒå¤šçš„è¯æ¥ä½œä¸ºå…³é”®è¯ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨å†™çš„å†…å®¹æ˜¯å…³äºtitleã€keywordsã€descriptionçš„ï¼Œé‚£æˆ‘çš„æ–‡ç« é¡µå…³é”®è¯å°±æ˜¯è¿™3ä¸ªã€‚</p><h3 id="descriptionï¼ˆå†…å®¹æ‘˜è¦ï¼‰"><a href="#descriptionï¼ˆå†…å®¹æ‘˜è¦ï¼‰" class="headerlink" title="descriptionï¼ˆå†…å®¹æ‘˜è¦ï¼‰"></a>descriptionï¼ˆå†…å®¹æ‘˜è¦ï¼‰</h3><p>descriptionï¼Œå’Œä¸Šé¢çš„keywordsä¸€æ ·ï¼Œæ˜¯ç”¨æˆ·ä¸æŸ¥çœ‹æºä»£ç çœ‹ä¸åˆ°çš„ï¼Œè€Œä¸”ä¹Ÿæ˜¯å¯¹äºä¸€ä¸ªç½‘é¡µçš„ç®€è¦å†…å®¹æ¦‚å†µã€‚ä¸åŒçš„æ˜¯ï¼Œkeywordsæ˜¯ç”±å‡ ä¸ªè¯è¯­çš„ç»„æˆçš„ï¼Œè€Œdescriptionåˆ™æ˜¯å®Œæ•´çš„ä¸€å¥è¯ã€‚descriptionä¸€èˆ¬ä¸è¶…è¿‡150ä¸ªå­—ç¬¦ï¼Œæè¿°å†…å®¹è¦å’Œé¡µé¢å†…å®¹ç›¸å…³ã€‚</p><p>ç”¨æ³•ï¼š<code>&lt;meta name=&quot;Description&quot; Content=&quot;ä½ ç½‘é¡µçš„ç®€è¿°&quot;&gt;</code></p><p>1ï¼‰é¦–é¡µdescriptionå†™æ³•ï¼Œä¸€èˆ¬æ˜¯å°†é¦–é¡µçš„æ ‡é¢˜ã€å…³é”®è¯å’Œä¸€äº›ç‰¹æ®Šæ ç›®çš„å†…å®¹èåˆåˆ°é‡Œé¢ï¼Œå†™æˆç®€å•çš„ä»‹ç»ã€‚</p><p>2ï¼‰æ ç›®é¡µdescriptionå†™æ³•ï¼Œä¸€èˆ¬æ˜¯å°†æ ç›®çš„æ ‡é¢˜ã€å…³é”®å­—ã€åˆ†ç±»åˆ—è¡¨åç§°èåˆåˆ°é‡Œé¢ï¼Œå†™æˆç®€å•çš„ä»‹ç»ã€‚</p><p>3ï¼‰åˆ†ç±»åˆ—è¡¨é¡µdescriptionï¼Œè¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œä¸€èˆ¬åªéœ€è¦æŠŠåˆ†ç±»åˆ—è¡¨çš„æ ‡é¢˜ã€å…³é”®è¯èåˆåœ¨ä¸€èµ·ï¼Œå†™æˆç®€å•çš„ä»‹ç»ã€‚</p><p>4ï¼‰æ–‡ç« é¡µdescriptionå†™æ³•ï¼Œä¸€èˆ¬æœ‰2ç§å†™æ³•ï¼Œæ ‡å‡†å†™æ³•å°±å’Œå‰é¢çš„ä¸€æ ·ï¼Œå°†æ–‡ç« æ ‡é¢˜ã€æ–‡ç« ä¸­çš„é‡è¦å†…å®¹å’Œå…³é”®è¯èåˆåœ¨ä¸€èµ·ï¼Œå†™æˆç®€å•çš„ä»‹ç»ã€‚è¿™æ˜¯æœ€å¥½æœ€æ ‡å‡†çš„å†™æ³•ã€‚ä½†æ˜¯è¿™æ ·å†™æ¯”è¾ƒéº»çƒ¦ï¼Œå°ç¼–æ•™ä½ ä¸€ç§å·æ‡’çš„æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨æ–‡ç« é¦–æ®µå’Œæ ‡é¢˜ä¸­åŠ å…¥å…³é”®è¯ï¼Œæ¯”å¦‚æˆ‘è¿™ç¯‡æ–‡ç« æ˜¯è®²titleã€keywordsã€descriptionçš„ï¼Œé‚£ä¹ˆåœ¨æ–‡ç« é¦–æ®µå’Œæ ‡é¢˜ä¸­å°±åŠ å…¥è¿™äº›å†…å®¹ï¼Œç„¶åç›´æ¥å°†æ–‡ç« é¦–æ®µçš„å†…å®¹å¤åˆ¶åˆ°descriptionä¸­å³å¯ã€‚</p><h3 id="å†™åœ¨åé¢"><a href="#å†™åœ¨åé¢" class="headerlink" title="å†™åœ¨åé¢"></a>å†™åœ¨åé¢</h3><p>3ä¸ªæ ‡ç­¾æŒ‰é‡è¦æ€§æ¥åˆ†ï¼š<code>title &gt; description &gt; keywords</code></p><blockquote><p>éå•†ç”¨ï¼Œä¾µåˆ ï¼Œè½¬è‡ª: <a href="https://jingyan.baidu.com/article/ab69b2709d2c082ca7189fbe.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/ab69b2709d2c082ca7189fbe.html</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;titleï¼ˆç½‘ç«™æ ‡é¢˜ï¼‰&quot;&gt;&lt;a href=&quot;#titleï¼ˆç½‘ç«™æ ‡é¢˜ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;titleï¼ˆç½‘ç«™æ ‡é¢˜ï¼‰&quot;&gt;&lt;/a&gt;titleï¼ˆç½‘ç«™æ ‡é¢˜ï¼‰&lt;/h3&gt;&lt;p&gt;titleï¼Œå°±æ˜¯æµè§ˆå™¨ä¸Šæ˜¾ç¤ºçš„é‚£äº›å†…å®¹ï¼Œä¸ä»…ç”¨æˆ·èƒ½çœ‹åˆ°ï¼Œä¹Ÿèƒ½è¢«æœç´¢å¼•æ“æ£€ç´¢åˆ°ï¼ˆæœç´¢å¼•æ“åœ¨æŠ“å–ç½‘é¡µæ—¶ï¼Œæœ€å…ˆè¯»å–çš„å°±æ˜¯ç½‘é¡µæ ‡é¢˜ï¼Œæ‰€ä»¥titleæ˜¯å¦æ­£ç¡®è®¾ç½®æå…¶é‡è¦ã€‚ï¼‰titleä¸€èˆ¬ä¸è¶…è¿‡80ä¸ªå­—ç¬¦ï¼Œè€Œä¸”è¯è¯­é—´è¦ç”¨è‹±æ–‡â€œ-â€éš”å¼€ï¼Œå› ä¸ºè®¡ç®—æœºåªå¯¹è‹±è¯­çš„æ•æ„Ÿæ€§è¾ƒé«˜ï¼Œå¯¹æ±‰è¯­çš„æ•æ„Ÿæ€§ä¸é«˜ã€‚ &lt;/p&gt;
&lt;p&gt;ç”¨æ³•ï¼š&lt;code&gt;&amp;lt;title&amp;gt;ç½‘ç«™æ ‡é¢˜&amp;lt;/title&amp;gt;&lt;/code&gt;  &lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="SEO" scheme="https://heiyehk.github.io/blog/categories/%E5%89%8D%E7%AB%AF/SEO/"/>
    
    
      <category term="å‰ç«¯" scheme="https://heiyehk.github.io/blog/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="SEO" scheme="https://heiyehk.github.io/blog/tags/SEO/"/>
    
  </entry>
  
  <entry>
    <title>hexoåšå®¢åˆä½“éªŒ</title>
    <link href="https://heiyehk.github.io/blog/hexo%E5%8D%9A%E5%AE%A2%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <id>https://heiyehk.github.io/blog/hexo%E5%8D%9A%E5%AE%A2%E5%88%9D%E4%BD%93%E9%AA%8C/</id>
    <published>2020-04-29T06:15:36.000Z</published>
    <updated>2020-05-20T08:59:52.324Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>hexoæ˜¯ä¸€æ¬¾å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚<br>ä¸­æ–‡æ–‡æ¡£<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/</a>  </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><a id="more"></a><p>ç½‘ä¸Šæœ‰å¾ˆå¤šå¥½çœ‹å¹¶ä¸”SEOä¼˜åŒ–çš„å¾ˆå¥½çš„ä¸»é¢˜ï¼Œæˆ‘é€‰æ‹©äº†<a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="noopener">Yilia</a>è¿™æ¬¾ä¸»é¢˜ä½œä¸ºåšå®¢çš„æ–°ä¸»é¢˜ğŸ˜ã€‚</p><h3 id="ä½¿ç”¨å‘½ä»¤"><a href="#ä½¿ç”¨å‘½ä»¤" class="headerlink" title="ä½¿ç”¨å‘½ä»¤"></a>ä½¿ç”¨å‘½ä»¤</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hexo n <span class="string">"æˆ‘çš„åšå®¢"</span> == hexo new <span class="string">"æˆ‘çš„åšå®¢"</span> <span class="comment">#æ–°å»ºæ–‡ç« </span></span><br><span class="line">hexo p == hexo publish</span><br><span class="line">hexo g == hexo generate <span class="comment">#ç”Ÿæˆ</span></span><br><span class="line">hexo s == hexo server <span class="comment">#å¯åŠ¨æœåŠ¡é¢„è§ˆ</span></span><br><span class="line">hexo d == hexo deploy <span class="comment">#éƒ¨ç½²</span></span><br><span class="line">hexo cl == hexo clean <span class="comment">#åˆ é™¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…é™¤æ‰€æœ‰ç¼“å­˜å¹¶è¿è¡Œ</span></span><br><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><h3 id="æ–‡ç« å†…å®¹æ¨¡æ¿ç¼–è¾‘"><a href="#æ–‡ç« å†…å®¹æ¨¡æ¿ç¼–è¾‘" class="headerlink" title="æ–‡ç« å†…å®¹æ¨¡æ¿ç¼–è¾‘"></a>æ–‡ç« å†…å®¹æ¨¡æ¿ç¼–è¾‘</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">title: ä½¿ç”¨Hexoæ­å»ºä¸ªäººåšå®¢</span><br><span class="line">layout: post</span><br><span class="line">date: 2014-03-03 19:07:43</span><br><span class="line">comments: <span class="literal">true</span></span><br><span class="line">categories: Blog <span class="comment">#å½’æ¡£å’Œtagå°½é‡æŠŠå¤§åˆ†ç±»æ”¾åœ¨å‰é¢</span></span><br><span class="line">tags: [Hexo]</span><br><span class="line">keywords: Hexo, Blog</span><br><span class="line">description: ç”Ÿå‘½åœ¨äºæŠ˜è…¾ï¼ŒåˆæŠŠåšå®¢æŠ˜è…¾åˆ°Hexoäº†ã€‚ç»™Hexoç‚¹èµã€‚</span><br></pre></td></tr></table></figure><h3 id="ç½‘ç«™çš„SEOä¼˜åŒ–"><a href="#ç½‘ç«™çš„SEOä¼˜åŒ–" class="headerlink" title="ç½‘ç«™çš„SEOä¼˜åŒ–"></a>ç½‘ç«™çš„SEOä¼˜åŒ–</h3><h4 id="æ·»åŠ ç«™ç‚¹"><a href="#æ·»åŠ ç«™ç‚¹" class="headerlink" title="æ·»åŠ ç«™ç‚¹"></a>æ·»åŠ ç«™ç‚¹</h4><p>è¿›å…¥<a href="https://ziyuan.baidu.com/" target="_blank" rel="noopener">ç™¾åº¦ç«™é•¿å¹³å°</a>ï¼Œç„¶åè¿›å…¥ä¸ªäººä¸­å¿ƒï¼Œæ·»åŠ ä½ çš„ç½‘ç«™ï¼ŒæŠŠéªŒè¯å†…å®¹ä¸‹è½½ä¸‹æ¥æ”¾å…¥<code>source/assets</code>è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚<br>è¿›å…¥<a href="https://search.google.com/search-console/welcome" target="_blank" rel="noopener">google search console</a>ï¼Œé€‰æ‹©<code>ç½‘å€å‰ç¼€</code>ï¼Œè¾“å…¥ä½ çš„åŸŸåï¼Œç„¶åä¸‹è½½éªŒè¯æ–‡ä»¶ï¼ŒæŠŠéªŒè¯å†…å®¹ä¸‹è½½ä¸‹æ¥æ”¾å…¥<code>source/assets</code>è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚<br>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„éªŒè¯æ–¹å¼è¿›è¡ŒéªŒè¯ã€‚</p><h4 id="ç”Ÿæˆç«™ç‚¹åœ°å›¾å’Œrss"><a href="#ç”Ÿæˆç«™ç‚¹åœ°å›¾å’Œrss" class="headerlink" title="ç”Ÿæˆç«™ç‚¹åœ°å›¾å’Œrss"></a>ç”Ÿæˆç«™ç‚¹åœ°å›¾å’Œrss</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è°·æ­Œsitemap</span></span><br><span class="line">npm install hexo-generator-sitemap</span><br><span class="line"><span class="comment"># ç™¾åº¦sitemap</span></span><br><span class="line">npm install hexo-generator-baidu-sitemap</span><br><span class="line"><span class="comment"># rss</span></span><br><span class="line">npm install hexo-generator-feed</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨<code>ç«™ç‚¹æ ¹ç›®å½•çš„_config.yml</code>é…ç½®å¦‚ä¸‹å†…å®¹</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidusitemap.xml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">plugin:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo-generator-feed</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo-generator-sitemap</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">1000</span></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ -robots-txt"><a href="#æ·»åŠ -robots-txt" class="headerlink" title="æ·»åŠ  robots.txt"></a>æ·»åŠ  robots.txt</h3><p>å¦‚æœæ˜¯æ”¾åœ¨<code>blog</code>ç›®å½•ä¸‹çš„è¯ï¼Œsitemapå¯ä½¿ç”¨å…¶ä»–ç”Ÿæˆsitemapçš„å·¥å…·è¿›è¡Œç”Ÿæˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">User-agent: *</span><br><span class="line">Allow: &#x2F;</span><br><span class="line">Allow: &#x2F;blog&#x2F;</span><br><span class="line">Allow: &#x2F;blog&#x2F;archives&#x2F;</span><br><span class="line"></span><br><span class="line">Disallow: &#x2F;js&#x2F;</span><br><span class="line">Disallow: &#x2F;css&#x2F;</span><br><span class="line">Disallow: &#x2F;fonts&#x2F;</span><br><span class="line">Disallow: &#x2F;vendors&#x2F;</span><br><span class="line">Disallow: &#x2F;fancybox&#x2F;</span><br><span class="line">Disallow: &#x2F;categories&#x2F;</span><br><span class="line"></span><br><span class="line">Sitemap: https:&#x2F;&#x2F;heiyehk.github.io&#x2F;sitemap.xml</span><br><span class="line">Sitemap: https:&#x2F;&#x2F;heiyehk.github.io&#x2F;baidusitemap.xml</span><br></pre></td></tr></table></figure><h3 id="æäº¤sitemap"><a href="#æäº¤sitemap" class="headerlink" title="æäº¤sitemap"></a>æäº¤sitemap</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_url_submit:</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">1000</span> <span class="comment">## æäº¤æœ€æ–°çš„ä¸€ä¸ªé“¾æ¥</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">alili.tech</span> <span class="comment">## åœ¨ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸå</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">xxxxx</span> <span class="comment">## è¯·æ³¨æ„è¿™æ˜¯æ‚¨çš„ç§˜é’¥ï¼Œ æ‰€ä»¥è¯·ä¸è¦æŠŠåšå®¢æºä»£ç å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ!</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidu_urls.txt</span> <span class="comment">## æ–‡æœ¬æ–‡æ¡£çš„åœ°å€ï¼Œ æ–°é“¾æ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œ</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;æ‘˜è¦&quot;&gt;&lt;a href=&quot;#æ‘˜è¦&quot; class=&quot;headerlink&quot; title=&quot;æ‘˜è¦&quot;&gt;&lt;/a&gt;æ‘˜è¦&lt;/h3&gt;&lt;p&gt;hexoæ˜¯ä¸€æ¬¾å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚&lt;br&gt;ä¸­æ–‡æ–‡æ¡£&lt;a href=&quot;https://hexo.io/zh-cn/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://hexo.io/zh-cn/docs/&lt;/a&gt;  &lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-cli -g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo init blog&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; blog&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="https://heiyehk.github.io/blog/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://heiyehk.github.io/blog/tags/hexo/"/>
    
  </entry>
  
</feed>
